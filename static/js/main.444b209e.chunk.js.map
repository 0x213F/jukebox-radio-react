{"version":3,"sources":["components/WelcomeApp/WelcomeApp.module.css","components/QueueApp/MiniQueue/MiniQueue.module.css","components/SearchApp/MiniNotes/MiniNotes.module.css","components/PlaybackApp/PlaybackApp.module.css","components/SearchApp/SearchApp.module.css","components/Login/Login.module.css","config/global.js","utils/network.js","components/FeedApp/network.js","config/api.js","components/Login/network.js","components/PlaybackApp/Player/network.js","components/UserSettings/network.js","components/QueueApp/network.js","utils/reducers/feed.js","utils/reducers/marker.js","components/PlaybackApp/utils.js","utils/reducers/playback.js","config/services.js","utils/reducers/queue.js","utils/reducers/main.js","components/QueueApp/utils.js","utils/reducers/stream.js","utils/reducers/textComment.js","utils/reducers/notesApp.js","utils/reducers/textCommentModification.js","utils/reducers/voiceRecording.js","utils/reducers/userSettings.js","utils/reducers/sideBar.js","utils/redux.js","icons.js","components/Login/Login.js","components/SpotifySync/network.js","components/SpotifySync/SpotifySync.js","components/FeedApp/TextComment/network.js","components/FeedApp/icons.js","components/FeedApp/ABCNotationDisplay/ABCNotationDisplay.js","components/FeedApp/constants.js","components/FeedApp/ABCNotationCompose/ABCNotationCompose.js","components/FeedApp/VoiceRecording/network.js","components/FeedApp/VoiceRecording/VoiceRecording.js","components/FeedApp/NotableText/constants.js","components/FeedApp/NotableText/network.js","components/FeedApp/NotableText/NotableText.js","components/FeedApp/TextComment/TextComment.js","components/FeedApp/SystemAction/SystemAction.js","components/FeedApp/FeedApp.js","config/model.js","components/TrackDetailApp/Marker/network.js","components/TrackDetailApp/Interval/network.js","components/TrackDetailApp/icons.js","components/PlaybackApp/icons.js","components/PlaybackApp/ChildProgressBar/ChildProgressBar.js","components/PlaybackApp/ProgressBarMarker/ProgressBarMarker.js","components/PlaybackApp/ParentProgressBar/ParentProgressBar.js","components/TrackDetailApp/TrackDetailApp.js","components/QueueApp/icons.js","components/QueueApp/QueueTrack/QueueTrack.js","components/QueueApp/QueueCollection/QueueCollection.js","components/QueueApp/QueueApp.js","components/QueueApp/MiniQueue/MiniQueue.js","components/SearchApp/network.js","components/SearchApp/SearchResult/SearchResult.js","components/Upload/network.js","components/Upload/Upload.js","components/SearchApp/icons.js","components/SearchApp/SearchApp.js","components/SearchApp/MiniNotes/MiniNotes.js","components/WelcomeApp/icons.js","components/WelcomeApp/WelcomeApp.js","components/PlaybackApp/controls.js","components/UserSettings/UserSettings.js","components/MainApp/BottomBar/icons.js","components/MainApp/BottomBar/BottomBar.js","components/MainApp/SideBar/icons.js","components/MainApp/SideBar/SideBar.js","components/MainApp/Session/Session.js","components/FeedApp/utils.js","components/MainApp/utils.js","components/MainApp/MainApp.js","utils/async.js","components/PlaybackApp/PlaybackApp.js","App.js","reportWebVitals.js","index.js","components/Upload/Upload.module.css","components/FeedApp/FeedApp.module.css","components/MainApp/SideBar/SideBar.module.css","components/QueueApp/QueueApp.module.css","components/QueueApp/QueueCollection/QueueCollection.module.css","components/PlaybackApp/ProgressBarMarker/ProgressBarMarker.module.css","components/QueueApp/QueueTrack/QueueTrack.module.css","components/SearchApp/SearchResult/SearchResult.module.css","components/FeedApp/ABCNotationCompose/ABCNotationCompose.module.css","components/PlaybackApp/ChildProgressBar/ChildProgressBar.module.css","components/MainApp/Session/Session.module.css","components/FeedApp/ABCNotationDisplay/ABCNotationDisplay.module.css","components/FeedApp/VoiceRecording/VoiceRecording.module.css","components/FeedApp/TextComment/TextComment.module.css","components/MainApp/BottomBar/BottomBar.module.css","components/PlaybackApp/ParentProgressBar/ParentProgressBar.module.css","components/UserSettings/UserSettings.module.css","components/FeedApp/NotableText/NotableText.module.css","components/FeedApp/SystemAction/SystemAction.module.css","components/TrackDetailApp/TrackDetailApp.module.css"],"names":["module","exports","BACKEND_DOMAIN","process","TYPE_GET","TYPE_POST","fetchBackend","a","method","url","data","formData","FormData","Object","entries","key","value","append","requestOptions","headers","token","localStorage","getItem","Authorization","request","Request","fetch","mode","body","response","searchParams","URLSearchParams","set","getUrl","toString","fetchTextCommentCreate","text","format","trackUuid","textCommentTimestamp","json","responseJson","fetchTextCommentList","fetchVoiceRecordingList","fetchAuthToken","username","password","fetchInitializeStream","fetchVerifyToken","status","undefined","fetchStreamGet","fetchTrackGetFiles","fetchNextTrack","isPlanned","fetchPauseTrack","fetchPlayTrack","startedAt","fetchPrevTrack","nowPlayingTotalDurationMilliseconds","fetchScan","fetchGetUserSettings","fetchUpdateUserSettings","field","fetchQueueList","fetchDeleteQueue","queueUuid","feedUpdate","state","payload","feedApp","stream","nowPlaying","queueMap","nowPlayingUuid","track","uuid","getPositionMilliseconds","progress","now","Date","feed","filter","el","stickiedAt","hiddenAt","stickyDuration","addedFeed","textCommentUuids","trackMap","voiceRecordingUuids","textCommentMap","voiceRecordingMap","textComments","map","voiceRecordings","lastRender","lowerBound","timestampMilliseconds","allIntervals","startPosition","lastItem","forceDisplay","sort","b","length","class","displayedAt","statusAt","playbackIntervalIdx","displayThreshold","historyThreshold","cumulativeProgress","playbackInterval","playbackIntervals","playbackIntervalDuration","endPosition","remainingProgress","feedTakeAction","action","push","feedAppSetContentContainer","contentContainer","markerCreate","markerMap","marker","markerDelete","markers","queue","seekTimeout","getProgress","instrument","purpose","getProgressMilliseconds","position","isPositionValid","cycleVolumeLevel","volumeLevel","playbackMount","playback","isPlaying","playbackSpotify","spotifyApi","playbackYouTube","youTubeApi","playbackYouTubeTriggerAutoplay","youTubeAutoplay","autoplay","playbackLoaded","service","loaded","playbackSetSeekTimeoutId","seekTimeoutId","timeoutId","playbackClearSeekTimeoutId","clearTimeout","playbackDisable","controlsEnabled","playbackEnable","playbackLoadFiles","files","onplay","onpause","onseeked","audioObj","Audio","audioUrl","audiosObj","all","stems","stem","playbackLoadAudius","id","playbackCycleVolumeLevelAudio","audioLevel","audio","playbackAction","main","staleAction","autoplayTimeoutId","SERVICE_APPLE_MUSIC","SERVICE_SPOTIFY","SERVICE_YOUTUBE","SERVICE_AUDIUS","SERVICE_JUKEBOX_RADIO","finalizeQueues","queues","newState","finalizeQueue","copy","newQueueMap","children","collection","imageUrl","replace","anotherNewState","childUuids","obj","anotherNewMap","intervals","trackDurationMilliseconds","durationMilliseconds","lastBound","interval","lowerBoundUuid","upperBound","upperBoundUuid","i","queueListSet","lastUpQueues","nextUpQueues","o","_lastPlayed","lastUpQueueUuids","nextUpQueueUuids","queueUpdate","queueDeleteNode","filteredQueueUuids","queueDeleteChildNode","parentQueue","parentUuid","mainEnable","enabled","mainDisable","mainAddAction","actions","mainActionStart","mainActionShift","shift","mainSetAutoplayTimeoutId","mainClearAutoplayTimeoutId","getQueues","queueUuids","getLeafQueue","getQueueDuration","getDuration","reduce","total","curr","durationPretty","s","pad","n","z","slice","secs","mins","streamSetWrapper","streamSet","lastUp","streamPlay","streamPause","streamPrevTrack","nextUpUuid","nextUp","nextUpCollection","unshift","nextNowPlayingUuid","pop","streamNextTrack","nextNowPlaying","textCommentListSet","textComment","hasOwnProperty","textCommentCreate","textCommentDelete","textCommentUuid","notesAppSet","notesApp","notesStore","store","setItem","JSON","stringify","textCommentModificationCreate","existingIdx","textCommentModifications","modifiedModification","modified","deletedModifications","deleted","modifications","findIndex","t","startPtr","idx","deletedModification","textCommentClearModifications","voiceRecordingListSet","voiceRecording","voiceRecordingCreate","voiceRecordingDelete","voiceRecordingUuid","userSettingsUpdate","userSettings","userGetSettings","sideBarSelectTab","sideBar","tab","initialState","voice","spotify","youTube","appleMusic","audius","jukeboxRadio","pending","youtube","search","serviceSpotify","serviceYouTube","serviceAppleMusic","serviceJukeboxRadio","serviceAudius","parse","searchToggleServiceOff","searchToggleService","serviceName","createStore","type","window","__REDUX_DEVTOOLS_EXTENSION__","trace","iconLogo","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","cx","cy","r","iconLogoAlt","iconCheckboxUnchecked","x","y","rx","stroke","strokeWidth","iconCheckboxChecked","strokeLinecap","strokeLinejoin","iconSpotify","version","style","iconYouTube","opacity","gradientUnits","x1","y1","x2","y2","gradientTransform","offset","stopColor","iconAppleMusic","iconBack","iconAudius","src","maxWidth","maxHeight","alt","iconAudius34","Login","props","useState","setUsername","setPassword","rememberMe","setRememberMe","handleSubmit","e","access","refresh","location","href","className","styles","LoginContainer","Logo","LoginHeader","FormBlock","name","onChange","target","Checkbox","onClick","val","FormBlockInline","marginBottom","Submit","ForgotPassword","to","fetchUserConnectSpotify","code","error","SpotifySync","useEffect","queryString","urlParams","get","postData","fetchDeleteTextComment","fetchListDeleteTextCommentModifications","iconTrash","iconErase","iconPlay","connect","abcNotationUuid","abcNotation","hovering","setHovering","deleteAbcNotation","dispatch","redux","ABCNotationDisplayContainer","onMouseEnter","onMouseLeave","HoverBuffer","ABCNotationDisplay","notation","engraverParams","staffwidth","HoverContainer","ABCNotationDisplayDeleted","FORMAT_TEXT","FORMAT_ABC_NOTATION","textCommentTrackUuid","isOpen","closeModal","isDisabled","setIsDisabled","setText","createABCNotation","ariaHideApp","Modal","overlayClassName","ModalOverlay","CloseModal","disabled","ContentContainer","NotationContainer","placeholder","spellCheck","RenderingContainer","RenderingWrapper","fetchCreateVoiceRecording","audioFile","transcriptData","transcriptFinal","voiceRecordingTimestamp","fetchDeleteVoiceRecording","setIsPlaying","handleDelete","created","play","VoiceRecordingContainer","VoiceRecording","VoiceRecordingDeleted","STYLE_BOLD","STYLE_ITALICIZE","STYLE_STRIKETHROUGH","STYLE_HIGHLIGHT","fetchCreateTextCommentModification","anchorOffset","focusOffset","selectableRef","useRef","selectableIsShowable","setSelectableIsShowable","setAnchorOffset","setFocusOffset","handleNotation","onTextSelect","selection","getSelection","anchorValue","parseInt","anchorNode","parentNode","getAttribute","focusValue","focusNode","onTextUnselect","NotableText","color","ref","textCommentText","Set","modification","j","endPtr","add","textCommentHtml","char","stylesObj","has","renderTextComment","selectionRef","Popover","fontWeight","fontStyle","textDecoration","backgroundColor","nowPlayingTrackUuid","deleteTextComment","clearModifications","TextCommentContainer","TextComment","playbackControls","fake","TextCommentDeleted","systemAction","SystemActionContainer","SystemAction","setTextCommentText","setTextCommentTrackUuid","setTextCommentTimestamp","isRecording","setIsRecording","MicRecorder","bitRate","recorder","showModal","setShowModal","createTextComment","preventDefault","useSpeechRecognition","transcript","resetTranscript","browserSupportsSpeechRecognition","containerRect","current","getBoundingClientRect","periodicTask","setInterval","clearInterval","FeedApp","ImageContainer","artistName","FeedWrapper","Feed","index","ComposeBar","onSubmit","NotationButton","RecordButton","start","SpeechRecognition","startListening","continuous","stopListening","stop","getMp3","then","buffer","blob","file","File","lastModified","arr","autoComplete","SubmitButton","fetchStreamMarkerCreate","fetchStreamMarkerDelete","markerUuid","fetchStreamQueueIntervalCreate","lowerBoundMarkerUuid","upperBoundMarkerUuid","repeatCount","parentQueueUuid","fetchStreamQueueIntervalDelete","queueIntervalUuid","iconForward1000","iconForward100","iconBackward100","iconBackward1000","iconPause","iconMiniCheckboxChecked","iconMiniCheckboxUnchecked","iconNextTrack","iconPrevTrack","iconMarker","iconSmallCircle","iconMarkerExtension","cleanedPurpose","duration","editable","allowIntervalPlay","allowIntervalDelete","intervalWidth","progressClass","includes","charAt","toUpperCase","classHoverContainer","classHoverPointer","seekToInterval","ProgressHoverPurpose","ProgressHoverDelete","deleteTrackInterval","playable","stoppable","allowMarkerSeek","hoveringEnabled","classPointer","classPointerExt","seekToMarker","ProgressBarMarker","left","styleLeft","setMarkerHover","markerHover","ProgressBarMarkerName","Delete","deleteTrackMarker","Play","pointerLeftDistance","draggableRef","progressRef","stickyPointerLeftDistance","setStickyPointerLeftDistance","dragOffset","setDragOffset","allowMarkerDelete","values","runningMark","pix","notPlayable","handleDragStop","ui","cursorRect","progressRect","playbackPercent","offsetWidth","nextPosition","Math","round","setAnimationStatus","nextProgress","animationStatus","animationPeriodicTask","setAnimationPeriodicTask","setCounter","prev","ParentProgressBar","axis","bounds","nodeRef","onStart","onDrag","onStop","ProgressPointer","ProgressBar","ProgressMarkerContainer","RERENDER","rerenderMarkers","updateMarkers","formMarkerTimestamp","setFormMarkerTimestamp","formMarkerName","setFormMarkerName","setAllowMarkerSeek","setAllowMarkerDelete","rerenderIntervals","updateIntervals","setPurpose","setLowerBoundMarkerUuid","setUpperBoundMarkerUuid","setAllowIntervalPlay","setAllowIntervalDelete","setTab","motive","setMotive","playPauseEnabled","setScanControlsEnabled","rerenderPlayPauseEnabled","updatePlayPauseEnabled","createTrackMarker","markerTimestamp","updateNewMarkerTimestamp","createQueueInterval","positionMillisecondsRaw","positionMilliseconds","handleMarkerAdjust","delta","pause","console","log","ModalContent","Preview","PreviewImgContainer","PreviewImg","PreviewControlContainer","PreviewControlScan","PreviewControl","QueueName","TabButtonContainer","MotiveContainer","MotiveCheckboxContainer","Form","FormLabel","FormInput","FormSubmit","FormSelect","iconEdit","iconRemove","iconRemoveDisabled","iconExpand","iconCollapse","iconCollapseDisabled","shouldPlayOnClose","setShouldPlayOnClose","mainClass","infoClass","buttonClass","durationClass","AlbumArtContainer","join","ButtonContainer","rawAudioServices","loadTrack","destroy","isCurrentlyPlayingCollection","reveal","setReveal","QueueCollection","QueueCollectionMain","QueueInformation","DurationContainer","cursor","Children","queueDuration","endsAt","destroyQueueItem","QueueApp","NowPlaying","NowPlayingArt","NowPlayingInformation","NowPlayingDuration","QueueContainer","PlaybackDuration","ReactTimeAgo","future","date","locale","AddToQueue","MiniQueue","fetchSearchMusicLibrary","query","formatTrack","formatAlbum","formatPlaylist","formatVideo","fetchCreateQueue","genericUuid","SearchResult","serviceSvg","searchResult","addToQueue","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","handleAddToQueue","imgUrl","img_url","provider","SearchResultSubmitted","ImageParent","ResultInformation","artist_name","ServiceLogo","ggSpinner","fetchCreateTrack","imageFile","trackName","albumName","Upload","inputKey","setInputKey","setAudioFile","setImageFile","setTrackName","setArtistName","setAlbumName","iconUpload","searchResults","setSearchResults","searchResultCache","setSearchResultCache","autoSearchTimeoutId","setAutoSearchTimeoutId","setQuery","fetchSearch","queryCache","oldState","responseJsonQueueList","SearchApp","SearchBarContainer","SearchBar","onKeyDown","event","setTimeout","SearchResultsContainer","ServiceCheckboxContainer","ServiceCheckbox","border","ServiceCheckboxLogoContainer","SearchResults","extraStyle","content","marginTop","MiniNotes","nextContent","iconFolder","history","useHistory","MusicKit","getInstance","musicUserToken","WelcomeAppContainer","WelcomeHeader","PlaybackOptionContainer","PlaybackOption","accessToken","authorizationUrl","PlaybackOptionLogo","borderRadius","PlaybackOptionService","PlaybackOptionDescription","music","authorize","playbackControlStart","playbackService","getState","setQueue","song","externalId","player","volume","delayPositionMilliseconds","seekToTime","uris","position_ms","getPlayerState","seekTo","floor","playVideo","currentTime","playbackControlPause","pauseVideo","audios","paused","playbackControlSeek","seek","instr","aud","Body","checked","idleQueue","speakVoice","focusMode","iconPlayCircle","iconPauseCircle","iconGear","audioVolumeLevel","nowPlayingTrackService","handlePlayPause","BottomBar","ProgressBarContainer","Settings","Volume","nextVolumeLevel","setVolume","drums","vocals","bass","other","playbackChangeVolume","circleRatio","buildStyles","rotation","pathColor","trailColor","pathTransitionDuration","IconContainer","Playback","direction","top","handleTab","SideBar","MenuContainer","Menu","LiSelected","BlockContainer","Block","forceHideModal","setForceHideModal","Session","Top","Content","path","PrimaryContent","SecondaryContent","fetchUpdateFeed","responseJsonTextCommentList","responseJsonVoiceRecordingList","next","loadAudio","loadFeed","mount","remainingMilliseconds","kickoffAutoplay","initializeAutoplay","resetStartedAt","queuesAlreadyLoading","queuesAlreadyLoadingFeed","appendScript","scriptPath","Promise","resolve","script","document","createElement","async","onload","appendChild","SpotifyWebApi","require","appleMusicSDKReady","setAppleMusicSDKReady","spotifySDKReady","setSpotifySDKReady","spotifySDKDeviceID","setSpotifySDKDeviceID","seekTimeoutDuration","appendSpotifySDK","appendAppleMusicSDK","onSpotifyWebPlaybackSDKReady","Spotify","Player","getOAuthToken","cb","spotifyAccessToken","setAccessToken","addListener","device_id","reduxState","transferMyPlayback","updateSpotifyPlayer","addEventListener","configure","developerToken","app","build","playbackStates","PlaybackStates","youTubeContainerStyle","youTubeWidth","zIndex","right","boxShadow","display","currentQueue","isYouTube","youTubeStart","youTubeVideoId","youTubeOpts","playerVars","controls","disablekb","fs","iv_load_policy","modestbranding","origin","playsinline","YouTubeContainer","videoId","opts","onReady","onPause","onPlay","App","setStatus","textCommentsJsonResponse","voiceRecordingsJsonResponse","TimeAgo","addDefaultLocale","en","loadData","navigator","serviceWorker","register","scope","registration","pathname","substring","textAlign","lineHeight","fontSize","letterSpacing","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.444b209e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"WelcomeAppContainer\":\"WelcomeApp_WelcomeAppContainer__1gAbO\",\"Logo\":\"WelcomeApp_Logo__1NVW9\",\"WelcomeHeader\":\"WelcomeApp_WelcomeHeader__2KYrX\",\"PlaybackOptionContainer\":\"WelcomeApp_PlaybackOptionContainer__3gjJc\",\"PlaybackOption\":\"WelcomeApp_PlaybackOption__msEeM\",\"PlaybackOptionLogo\":\"WelcomeApp_PlaybackOptionLogo__3PXq3\",\"PlaybackOptionService\":\"WelcomeApp_PlaybackOptionService__1P9Ul\",\"PlaybackOptionDescription\":\"WelcomeApp_PlaybackOptionDescription__c6E_g\",\"Modal\":\"WelcomeApp_Modal__25kAC\",\"ModalOverlay\":\"WelcomeApp_ModalOverlay__1uDRv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniQueue\":\"MiniQueue_MiniQueue__2HfJP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniNotes\":\"MiniNotes_MiniNotes__2g428\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"YouTubeContainer\":\"PlaybackApp_YouTubeContainer__1eMN_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchApp\":\"SearchApp_SearchApp__Mfcqz\",\"SearchBarContainer\":\"SearchApp_SearchBarContainer__2dvew\",\"SearchBarIcon\":\"SearchApp_SearchBarIcon__24xCM\",\"SearchBar\":\"SearchApp_SearchBar__CS1zo\",\"Upload\":\"SearchApp_Upload__3mgyx\",\"SearchResultsContainer\":\"SearchApp_SearchResultsContainer__3SEWt\",\"ServiceCheckboxContainer\":\"SearchApp_ServiceCheckboxContainer__2AWhG\",\"ServiceCheckbox\":\"SearchApp_ServiceCheckbox__5og-e\",\"ServiceCheckboxLogoContainer\":\"SearchApp_ServiceCheckboxLogoContainer__3Fbpr\",\"SearchResults\":\"SearchApp_SearchResults__p1J6y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoginContainer\":\"Login_LoginContainer__3eIQR\",\"Logo\":\"Login_Logo__B0Tmi\",\"LoginHeader\":\"Login_LoginHeader__3gqy1\",\"FormBlock\":\"Login_FormBlock__S_rix\",\"FormBlockInline\":\"Login_FormBlockInline__10vy2\",\"Checkbox\":\"Login_Checkbox__z2SaG\",\"Submit\":\"Login_Submit__2KJUu\",\"ForgotPassword\":\"Login_ForgotPassword__9hZWd\"};","const BACKEND_DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\nconst TYPE_GET = 'GET';\nconst TYPE_POST = 'POST';\n\nexport { BACKEND_DOMAIN, TYPE_GET, TYPE_POST }\n","import { BACKEND_DOMAIN } from '../config/global'\n\n\nasync function fetchBackend(method = '', url = '', data = {}) {\n  let response;\n\n  url = BACKEND_DOMAIN + url;\n\n  if(method !== 'GET') {\n\n    // aggregate form data in one place\n    const formData = new FormData();\n    for (const [key, value] of Object.entries(data)) {\n      formData.append(key, value);\n    }\n    // for (const [key, value] of Object.entries(files)) {\n    //   formData.append(key, value);\n    // }\n\n    // authenticate request if possible\n    let requestOptions = {headers: {}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(url, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n      body: formData,\n    });\n  } else {\n\n    // translate form data for GET\n    let searchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(data)) {\n      searchParams.set(key, value);\n    }\n    const getUrl = url + '/?' + searchParams.toString();\n\n    // authenticate request if possible\n    let requestOptions = {headers: {'Content-Type': 'application/json'}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(getUrl, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n    });\n  }\n\n  return response;\n}\n\nexport { fetchBackend }\n","import {\n  ENDPOINT_TEXT_COMMENT_CREATE,\n  ENDPOINT_TEXT_COMMENT_LIST,\n  ENDPOINT_VOICE_RECORDING_LIST,\n} from '../../config/api';\nimport { TYPE_GET, TYPE_POST } from '../../config/global';\nimport { fetchBackend } from '../../utils/network';\n\n\n/*\n * Creates a \"text comment.\" Usually of format \"text\" or \"abc_notation.\"\n */\nexport const fetchTextCommentCreate = async (text, format, trackUuid, textCommentTimestamp) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_CREATE,\n    { text, format, trackUuid, textCommentTimestamp },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Gets a list of all \"text comments.\" Usually of format \"text\" or\n * \"abc_notation.\"\n */\nexport const fetchTextCommentList = async (trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TEXT_COMMENT_LIST,\n    { trackUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Gets a list of all voice recordings.\n */\nexport const fetchVoiceRecordingList = async (trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_VOICE_RECORDING_LIST,\n    { trackUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","// NOTE: If the API endpoint is a GET, then there is no ending slash.\n//       Else, the endpoint is probably a POST and there should be a slash.\n\n\n// AUTHENTICATION\nexport const ENDPOINT_OBTAIN_TOKENS = '/auth/obtain-tokens/'\nexport const ENDPOINT_REFRESH_TOKEN = '/auth/refresh-token/'\nexport const ENDPOINT_VERIFY_TOKEN = '/auth/verify-token/'\n\n// USER\nexport const ENDPOINT_USER_GET_SETTINGS = '/users/user/get-settings'\nexport const ENDPOINT_USER_UPDATE_SETTINGS = '/users/user/update-settings/'\nexport const ENDPOINT_USER_CONNECT_SPOTIFY = '/users/user/connect-spotify/'\n\n// TEXT COMMENT\nexport const ENDPOINT_TEXT_COMMENT_CREATE = '/comments/text-comment/create/'\nexport const ENDPOINT_TEXT_COMMENT_DELETE = '/comments/text-comment/delete/'\nexport const ENDPOINT_TEXT_COMMENT_LIST = '/comments/text-comment/list'\n\n// TEXT COMMENT MODIFICATION\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE = '/comments/text-comment-modification/create/'\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE = '/comments/text-comment-modification/list-delete/'\n\n// VOICE RECORDING\nexport const ENDPOINT_VOICE_RECORDING_CREATE = '/comments/voice-recording/create/'\nexport const ENDPOINT_VOICE_RECORDING_DELETE = '/comments/voice-recording/delete/'\nexport const ENDPOINT_VOICE_RECORDING_LIST = '/comments/voice-recording/list'\n\n// TRACK\nexport const ENDPOINT_TRACK_CREATE = '/music/track/create/'\nexport const ENDPOINT_TRACK_GET_FILES = '/music/track/get-files'\n\n// MUSIC\nexport const ENDPOINT_MUSIC_SEARCH = '/music/search'\n\n// QUEUE\nexport const ENDPOINT_QUEUE_CREATE = '/streams/queue/create/'\nexport const ENDPOINT_QUEUE_DELETE = '/streams/queue/delete/'\nexport const ENDPOINT_QUEUE_LIST = '/streams/queue/list'\n\n// STREAM\nexport const ENDPOINT_STREAM_GET = '/streams/stream/get'\nexport const ENDPOINT_STREAM_INITIALIZE = '/streams/stream/initialize/'\nexport const ENDPOINT_STREAM_NEXT_TRACK = '/streams/stream/next-track/'\nexport const ENDPOINT_STREAM_PAUSE_TRACK = '/streams/stream/pause-track/'\nexport const ENDPOINT_STREAM_PLAY_TRACK = '/streams/stream/play-track/'\nexport const ENDPOINT_STREAM_PREV_TRACK = '/streams/stream/prev-track/'\nexport const ENDPOINT_STREAM_SCAN = '/streams/stream/scan/'\n\n// MARKER\nexport const ENDPOINT_MARKER_CREATE = '/streams/marker/create/'\nexport const ENDPOINT_MARKER_DELETE = '/streams/marker/delete/'\n\n// QUEUE INTERVAL\nexport const ENDPOINT_QUEUE_INTERVAL_CREATE = '/streams/queue-interval/create/'\nexport const ENDPOINT_QUEUE_INTERVAL_DELETE = '/streams/queue-interval/delete/'\nexport const ENDPOINT_QUEUE_INTERVAL_STOP = '/streams/queue-interval/stop/'\n","import {\n  ENDPOINT_OBTAIN_TOKENS,\n  ENDPOINT_STREAM_INITIALIZE,\n  ENDPOINT_VERIFY_TOKEN,\n} from '../../config/api';\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchAuthToken = async (username, password) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_OBTAIN_TOKENS,\n    { username, password },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * This does some required work before \"officially logging in.\" The stream must\n * be \"initialized.\" This is some dirty backend work that needs to be\n * refactored.\n */\nexport const fetchInitializeStream = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_INITIALIZE,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Verifies an auth token.\n */\nexport const fetchVerifyToken = async () => {\n  const token = localStorage.getItem('accessToken');\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VERIFY_TOKEN,\n    { token },\n  );\n  if(response.status !== 200) {\n    // throw new Error(\"Not logged in!\");\n    return undefined;\n  }\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import {\n  ENDPOINT_STREAM_GET,\n  ENDPOINT_TRACK_GET_FILES,\n  ENDPOINT_STREAM_NEXT_TRACK,\n  ENDPOINT_STREAM_PAUSE_TRACK,\n  ENDPOINT_STREAM_PLAY_TRACK,\n  ENDPOINT_STREAM_PREV_TRACK,\n  ENDPOINT_STREAM_SCAN,\n} from '../../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../../config/global'\nimport { fetchBackend } from '../../../utils/network'\n\n\n/*\n * Fetches...\n */\nconst fetchStreamGet = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_STREAM_GET,\n  );\n  return await response.json();\n};\n\n\nconst fetchTrackGetFiles = async(trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TRACK_GET_FILES,\n    { trackUuid },\n  );\n  return await response.json();\n}\n\n\n/*\n * Fetches...\n */\nconst fetchNextTrack = async (isPlanned) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_NEXT_TRACK,\n    { isPlanned }\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPauseTrack = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PAUSE_TRACK,\n    {},\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPlayTrack = async (startedAt) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PLAY_TRACK,\n    { startedAt },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPrevTrack = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PREV_TRACK,\n    { nowPlayingTotalDurationMilliseconds },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchScan = async (startedAt) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_SCAN,\n    { startedAt },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\nexport {\n  fetchStreamGet,\n  fetchNextTrack,\n  fetchPauseTrack,\n  fetchPlayTrack,\n  fetchPrevTrack,\n  fetchScan,\n  fetchTrackGetFiles,\n}\n","import {\n  ENDPOINT_USER_GET_SETTINGS,\n  ENDPOINT_USER_UPDATE_SETTINGS,\n} from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an user settings from the server.\n */\nexport const fetchGetUserSettings = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_USER_GET_SETTINGS,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Set user settings on the server.\n */\nexport const fetchUpdateUserSettings = async (field, value) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_UPDATE_SETTINGS,\n    { field, value },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import { ENDPOINT_QUEUE_LIST, ENDPOINT_QUEUE_DELETE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchQueueList = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_QUEUE_LIST,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchDeleteQueue = async (queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_DELETE,\n    { queueUuid: queueUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","/*\n * - hide:    A tag given to a feed item which should not be shown.\n * - history: A tag given to a feed item which signifies that it is no longer\n *            relevant. This is because it has been lingering on for a\n *            significant amount of time since its original context.\n * - display: A tag given to a feed item which signifies that it is still\n *            \"fresh.\" It is within a reasonable amount of time since its\n *            original context.\n */\nconst DISPLAY_DURATION = 1000,\n      HISTORY_DURATION = 60000;\n\n/*\n * Regenerates the feed. When regenerating the feed, it takes the previous\n * feed, then adds new items and removes stale items. This is exported because\n * other reducers need to re-generate the feed.\n */\nexport const feedUpdate = function(state, payload) {\n\n  const feedApp = { ...state.feedApp };\n\n  const stream = state.stream,\n        queueMap = state.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  if(!nowPlaying?.track?.uuid || nowPlaying.status === 'paused') {\n    return { ...state, feedApp };\n  }\n\n  // eslint-disable-next-line\n  const [progress, displayThreshold, historyThreshold] = getPositionMilliseconds(nowPlaying);\n  const now = Date.now();\n  let feed = [...state.feedApp.feed];\n\n  // Remove stale items from the feed.\n  feed = feed.filter(el => {\n    if(el.stickiedAt) {\n      return true;\n    }\n    return now < el.hiddenAt + el.stickyDuration;\n  });\n\n  // Get relevant feed items\n  const textCommentUuids = [...(state.feedApp.trackMap[nowPlaying.track.uuid]?.textCommentUuids || [])],\n        voiceRecordingUuids = [...(state.feedApp.trackMap[nowPlaying.track.uuid]?.voiceRecordingUuids || [])];\n\n  const textCommentMap = { ...state.textCommentMap },\n        voiceRecordingMap = { ...state.voiceRecordingMap };\n\n  const textComments = textCommentUuids.map(uuid => textCommentMap[uuid]),\n        voiceRecordings = voiceRecordingUuids.map(uuid => voiceRecordingMap[uuid]);\n\n  // Determine the last time the feed was generated\n  const lastRender = feedApp.lastRender,\n        lowerBound = (\n          (\n            lastRender?.trackUuid &&\n            lastRender.trackUuid === nowPlaying.track.uuid &&\n            lastRender.timestampMilliseconds  // TODO is int\n          ) ?\n          lastRender.timestampMilliseconds : nowPlaying.allIntervals[0].startPosition\n        );\n\n  // Get items that should be added to the feed\n  let addedFeed;\n  addedFeed = [...textComments, ...voiceRecordings];\n  addedFeed = addedFeed.filter(el => {\n    return (\n      (\n        el.timestampMilliseconds > lowerBound &&\n        el.timestampMilliseconds <= progress\n      ) ||\n      el.forceDisplay\n    );\n  });\n\n  // Sort them by timestamp\n  addedFeed = addedFeed.sort((a, b) => {\n    return a.timestampMilliseconds - b.timestampMilliseconds;\n  });\n\n  // Set statistics for current generation/ rendering\n  const lastItem = addedFeed[addedFeed.length - 1];\n  if(lastItem) {\n    feedApp.lastRender = {\n      trackUuid: lastItem.trackUuid,\n      timestampMilliseconds: lastItem.timestampMilliseconds,\n    };\n  }\n\n  // Modify and slim down the feed data\n  addedFeed = addedFeed.map(el => {\n    if(el.forceDisplay) {\n      if(el.class === 'TextComment') {\n        delete el.forceDisplay;\n        textCommentMap[el.uuid] = { ...el };\n      } else if(el.class === 'VoiceRecording') {\n        delete el.forceDisplay;\n        voiceRecordingMap[el.uuid] = { ...el };\n      }\n    }\n    return {\n      uuid: el.uuid,\n      class: el.class,\n      format: el.format,\n      displayedAt: now,\n      hiddenAt: now + 60000,\n      stickiedAt: null,\n      stickyDuration: 0,\n    }\n  });\n\n  // NOTE: The feed must be sorted once more by the displayedAt property - this\n  //       is important!\n  feed = [...feed, ...addedFeed];\n  feed = feed.sort((a, b) => {\n    return a.displayedAt - b.displayedAt;\n  });\n\n  feedApp.feed = feed;\n\n  return { ...state, feedApp, textCommentMap, voiceRecordingMap };\n}\n\n\n/*\n * Helper method which gets the timestamp marker thresholds to help define\n * which comments should be displayed.\n\n DELETE MEEMEEMEMEMEMEM\n */\nconst getPositionMilliseconds = function(nowPlaying) {\n\n  if(!nowPlaying?.track) {\n    return [undefined, undefined, undefined];\n  }\n\n  const startedAt = nowPlaying.startedAt;\n\n  let progress = (\n        nowPlaying.status === \"played\" ? Date.now() - startedAt : nowPlaying.statusAt - startedAt\n      ),\n      playbackIntervalIdx = 0,\n      displayThreshold = 0,\n      historyThreshold = 0,\n      cumulativeProgress = 0;\n\n  while(true) {\n    const playbackInterval = nowPlaying.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval.endPosition - playbackInterval.startPosition;\n    let remainingProgress;\n\n    // if display threshold progress definition has been reached\n    const displayProgress = (progress - DISPLAY_DURATION);\n    remainingProgress = displayProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      displayThreshold = playbackInterval.startPosition + remainingProgress;\n    }\n\n    // if history threshold progress definition has been reached\n    const historyProgress = (progress - DISPLAY_DURATION - HISTORY_DURATION);\n    remainingProgress = historyProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      historyThreshold = playbackInterval.startPosition + remainingProgress;\n    }\n\n    // if the progress definition has been reached\n    remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval.startPosition + remainingProgress;\n      break;\n    }\n\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  return [progress, displayThreshold, historyThreshold];\n}\n\n\n/*\n * Generates the feed.\n */\nexport const feedTakeAction = function(state, payload) {\n  const feedApp = { ...state.feedApp },\n        action = payload.action,\n        now = Date.now();\n  let feed = [...state.feedApp.feed];\n\n  feed.push({\n    class: \"SystemAction\",\n    timestampMilliseconds: payload.timestampMilliseconds,\n    trackUuid: payload.trackUuid,\n    action: payload.action,\n    displayedAt: now,\n    hiddenAt: now + 60000,\n    stickiedAt: null,\n    stickyDuration: 0,\n  });\n\n  if(action === \"paused\") {\n    feed = feed.map(el => {\n      return {\n        ...el,\n        stickiedAt: now,\n      };\n    });\n  } else if(action === 'played') {\n    feed = feed.map(el => {\n      const stickyDuration = (\n        el.stickiedAt ?\n        el.stickyDuration + (now - el.stickiedAt) : 0\n      );\n      return { ...el, stickyDuration, stickiedAt: null };\n    });\n  }\n\n  feedApp.feed = feed;\n  feedApp.lastRender = {\n    trackUuid: payload.trackUuid,\n    timestampMilliseconds: payload.timestampMilliseconds,\n  };\n  return { ...state, feedApp };\n}\n\n\n\nexport const feedAppSetContentContainer = function(state, payload) {\n  const contentContainer = payload.contentContainer,\n        feedApp = { ...state.feedApp, contentContainer };\n  return { ...state, feedApp };\n}\n","/*\n * Create a marker relevant to a queue item (track).\n */\nexport const markerCreate = function(state, action) {\n  const markerMap = { ...state.markerMap },\n        marker = action.marker;\n\n  if(markerMap[marker.trackUuid] === undefined || markerMap[marker.trackUuid].length === 0) {\n    markerMap[marker.trackUuid] = {};\n  }\n\n  markerMap[marker.trackUuid][marker.uuid] = marker;\n\n  return {\n    ...state,\n    markerMap: markerMap,\n  };\n}\n\n\n/*\n * Delete a marker relevant to a queue item (track).\n */\nexport const markerDelete = function(state, payload) {\n  const markerMap = { ...state.markerMap },\n        marker = payload.marker,\n        markers = { ...markerMap[marker.trackUuid] };\n\n  delete markers[marker.uuid];\n  markerMap[marker.trackUuid] = markers;\n\n  return { ...state, markerMap };\n}\n","/*\n * This gets the position that the track should be at.\n *\n * @return [\n *   progress: Time in milliseconds,\n *   seekTimeout: Time in milliseconds until the next seek should happen,\n * ]\n */\nexport const getPositionMilliseconds = function(queue, startedAt) {\n  if(!queue) {\n    return [undefined, undefined];\n  }\n\n  let progress = getProgress(queue);\n\n  let instrument = 'all',\n      seekTimeout,\n      playbackIntervalIdx = 0,\n      cumulativeProgress = 0;\n  while(true) {\n    const playbackInterval = queue.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval.endPosition - playbackInterval.startPosition,\n          remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval.startPosition + remainingProgress;\n      instrument = playbackInterval.purpose;\n      seekTimeout = playbackInterval.endPosition - progress;\n      break;\n    }\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  if(playbackIntervalIdx === queue.playbackIntervals.length - 1) {\n    seekTimeout = undefined;\n  }\n\n  return [progress, seekTimeout, instrument];\n}\n\n\nexport const getProgressMilliseconds = function(queue, position) {\n  if(!queue) {\n    return undefined;\n  }\n\n  let progress = 0,\n      playbackIntervalIdx = 0,\n      cumulativeProgress = 0;\n  while(true) {\n    const playbackInterval = queue.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval.endPosition - playbackInterval.startPosition;\n    if(position >= playbackInterval.startPosition && position < playbackInterval.endPosition) {\n      progress = position - playbackInterval.startPosition + cumulativeProgress;\n      break;\n    }\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n  return progress;\n}\n\n\n/*\n *\n */\nexport const isPositionValid = function(queue, position) {\n  if(!queue) {\n    return false;\n  }\n\n  let playbackIntervalIdx = 0;\n  while(playbackIntervalIdx < queue.playbackIntervals.length) {\n    const playbackInterval = queue.playbackIntervals[playbackIntervalIdx];\n    if(position > playbackInterval.endPosition - 5000 && position < playbackInterval.endPosition) {\n      return false;\n    } else if(position > playbackInterval.startPosition && position < playbackInterval.endPosition) {\n      return true;\n    }\n    playbackIntervalIdx += 1;\n  }\n  return false;\n}\n\n\n/*\n * Get the progress of a stream.\n */\nexport const getProgress = function(queue) {\n  if(queue.status === \"paused\") {\n    return queue.statusAt - queue.startedAt;\n  } else if(queue.status === 'played') {\n    return Date.now() - queue.startedAt;\n  } else {\n    return 0;\n  }\n};\n\n\n/*\n *\n */\nexport const updateSpotifyPlayer = function(playback, device_id) {\n  setTimeout(function() {\n    playback.spotifyApi.transferMyPlayback([device_id]);\n  }, 1000);\n}\n\n\nexport const cycleVolumeLevel = function(volumeLevel) {\n  const MUTED = 0.00,\n        LOW = 0.30,\n        HIGH = 0.60,\n        FULL = 1.00;\n  if(volumeLevel > HIGH) {\n    return HIGH;\n  } else if(volumeLevel > LOW) {\n    return LOW;\n  } else if(volumeLevel > MUTED) {\n    return MUTED;\n  } else {\n    return FULL;\n  }\n}\n\n\nexport const featureIsEnabled = function(stateLike) {\n  return true;\n  // const { queueMap, playback, action, main } = stateLike,\n  //       queue = queueMap[playback.nowPlayingUuid];\n  //\n  // if(!queue) {\n  //   return false;\n  // }\n  //\n  // const service = queue.track?.service;\n  // if(!service) {\n  //   return false;\n  // }\n  //\n  // const isLoaded = playback.loaded[service];\n  // if(!isLoaded) {\n  //   return false;\n  // }\n  //\n  // const pendingAction = playback.action;\n  // if(pendingAction) {\n  //   return false;\n  // }\n  //\n  // return true;\n}\n","import { cycleVolumeLevel } from '../../components/PlaybackApp/utils';\n\n\nexport const playbackMount = function(state, payload) {\n  if(payload.stream) {\n    return {\n      ...state,\n      playback: {\n        ...state.playback,\n        nowPlayingUuid: payload.stream.nowPlayingUuid,\n        isPlaying: false,\n      }\n    }\n  } else {\n    return {\n      ...state,\n      playback: {\n        ...state.playback,\n        nowPlayingUuid: payload.queue.uuid,\n        isPlaying: false,\n      }\n    }\n  }\n}\n\nexport const playbackSpotify = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      spotifyApi: payload.spotifyApi,\n    }\n  }\n}\n\nexport const playbackYouTube = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      youTubeApi: payload.youTubeApi,\n      // TODO refactor ready flags\n    }\n  }\n}\n\nexport const playbackYouTubeTriggerAutoplay = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      youTubeAutoplay: payload.autoplay ? 1 : 0,\n    }\n  }\n}\n\nexport const playbackLoaded = function(state, payload) {\n  const service = payload.service,\n        playback = { ...state.playback },\n        loaded = { ...state.playback.loaded };\n  loaded[service] = true;\n  playback.loaded = loaded;\n\n  return { ...state, playback };\n}\n\n/*\n * Assumptions:\n *   - There is currently something playing in the stream.\n *   - We are not certain that something is up next.\n */\n// export const playbackAddToQueue = function(state) {\n//   const nextUp = getLeafQueue(state.nextUpQueueUuids[0], state.queueMap);\n//   if(!nextUp) {\n//     return { ...state };\n//   }\n//\n//   const playback = { ...state.playback },\n//         queueMap = state.queueMap,\n//         nowPlaying = queueMap[state.stream.nowPlayingUuid],\n//         appleMusicShouldAddToQueue = (\n//           nowPlaying.track.service === SERVICE_APPLE_MUSIC &&\n//           nextUp.track.service === SERVICE_APPLE_MUSIC &&\n//           nextUp.playbackIntervals[0].startPosition === 0\n//         ),\n//         spotifyShouldAddToQueue = (\n//           nowPlaying.track.service === SERVICE_SPOTIFY &&\n//           nextUp.track.service === SERVICE_SPOTIFY &&\n//           nextUp.playbackIntervals[0].startPosition === 0\n//         );\n//\n//   if(appleMusicShouldAddToQueue) {\n//     playback.queuedUp = true;\n//\n//     const playbackIntervals = nowPlaying.playbackIntervals,\n//           lastInterval = (\n//             playbackIntervals[playbackIntervals.length - 1]\n//           );\n//     if(lastInterval.endPosition === nowPlaying.track.durationMilliseconds) {\n//       playback.noopNextTrack = true;\n//     }\n//   }\n//\n//   if(spotifyShouldAddToQueue) {\n//     playback.queuedUp = true;\n//\n//     const playbackIntervals = nowPlaying.playbackIntervals,\n//           lastInterval = (\n//             playbackIntervals[playbackIntervals.length - 1]\n//           );\n//     if(lastInterval.endPosition === nowPlaying.track.durationMilliseconds) {\n//       playback.noopNextTrack = true;\n//     }\n//   }\n//\n//   return {\n//     ...state,\n//     playback: playback,\n//   }\n// }\n\nexport const playbackSetSeekTimeoutId = function(state, payload) {\n  const playback = { ...state.playback, seekTimeoutId: payload.timeoutId };\n  return { ...state, playback };\n}\n\nexport const playbackClearSeekTimeoutId = function(state, payload) {\n  clearTimeout(state.playback.seekTimeoutId);\n  const playback = { ...state.playback, seekTimeoutId: false };\n  return { ...state, playback };\n}\n\n\nexport const playbackDisable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: false,\n    }\n  }\n}\n\n\nexport const playbackEnable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: true,\n    }\n  }\n}\n\n\nexport const playbackLoadFiles = function(state, payload) {\n  const playback = { ...state.playback },\n        files = { ...state.playback.files };\n\n  const { onplay, onpause, onseeked } = payload;\n\n  let audioObj = new Audio(payload.track.audioUrl);\n  audioObj.onpause = onpause;\n  audioObj.onplay = onplay;\n  audioObj.onseeked = onseeked;\n\n  const audiosObj = { all: audioObj };\n\n  for(const stem of payload.track.stems) {\n    audioObj = new Audio(stem.audioUrl);\n    audioObj.onpause = onpause;\n    audioObj.onplay = onplay;\n    audioObj.onseeked = onseeked;\n\n    audiosObj[stem.instrument] = audioObj;\n  }\n\n  files[payload.track.uuid] = audiosObj;\n  return {\n    ...state,\n    playback: {\n      ...playback,\n      files: files,\n    }\n  };\n}\n\n\nexport const playbackLoadAudius = function(state, payload) {\n  const playback = { ...state.playback },\n        files = { ...state.playback.files };\n\n  const { onplay, onpause, onseeked } = payload;\n\n  const audioObj = new Audio(`https://discoveryprovider.audius5.prod-us-west-2.staked.cloud/v1/tracks/${payload.id}/stream?app_name=Jukebox Radio`);\n  audioObj.onpause = onpause;\n  audioObj.onplay = onplay;\n  audioObj.onseeked = onseeked;\n\n  files[payload.trackUuid] = audioObj;\n\n  return {\n    ...state,\n    playback: {\n      ...playback,\n      files: files,\n    }\n  };\n}\n\n\nexport const playbackCycleVolumeLevelAudio = function(state) {\n  const volumeLevel = { ...state.playback.volumeLevel },\n        audioLevel = volumeLevel.audio;\n\n  volumeLevel.audio = cycleVolumeLevel(audioLevel);\n\n  return {\n    ...state,\n    playback: { ...state.playback, volumeLevel },\n  }\n}\n\n/*\n * Setting the \"action\" of playback aquires a lock - only one action can happen\n * at a time.\n *\n * You might be wondering how the lock is lifted. The lock is lifted when\n * \"action === null.\" This case happens inside service event handlers (e.g. the\n * Spotify SDK) that signal that the action has successfully taken place.\n */\nexport const playbackAction = function(state, payload) {\n  const action = payload.action,\n        playback = { ...state.playback, action },\n        queueMap = { ...state.queueMap },\n        main = { ...state.main };\n\n  if(!action) {\n    const staleAction = state.playback.action;\n    if(staleAction === 'played') {\n      playback.isPlaying = true;\n    } else if(staleAction === 'paused') {\n      playback.isPlaying = false;\n      // NOTE: This must happen here.\n      clearTimeout(state.main.autoplayTimeoutId);\n      main.autoplayTimeoutId = false;\n    }\n  }\n\n  return { ...state, playback, queueMap };\n}\n","export const SERVICE_APPLE_MUSIC = 'apple_music';\nexport const SERVICE_SPOTIFY = 'spotify';\nexport const SERVICE_YOUTUBE = 'youtube';\nexport const SERVICE_AUDIUS = 'audius';\nexport const SERVICE_JUKEBOX_RADIO = 'jukebox_radio';\n","import { SERVICE_APPLE_MUSIC } from './../../config/services';\n\n\nexport const finalizeQueues = function(state, queues) {\n  let newState = { ...state };\n  for(const queue of queues) {\n    newState = finalizeQueue(newState, queue);\n  }\n  return newState;\n}\n\n/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const finalizeQueue = function(state, queue) {\n  const copy = { ...queue },\n        newState = { ...state },\n        newQueueMap = { ...state.queueMap};\n\n  // Recursive case: parent node (queue item of format collection)\n  if(copy.children?.length) {\n    if(copy.collection?.service === SERVICE_APPLE_MUSIC) {\n      copy.collection.imageUrl = copy.collection.imageUrl.replace(\"{w}\", \"300\");\n      copy.collection.imageUrl = copy.collection.imageUrl.replace(\"{h}\", \"300\");\n    }\n    // newQueueMap[copy.uuid] = copy;\n    const anotherNewState = finalizeQueues(newState, copy.children);\n    copy.childUuids = copy.children.map(obj => obj.uuid);\n    delete copy.children;\n\n    const anotherNewMap = { ...anotherNewState.queueMap }\n    anotherNewMap[copy.uuid] = copy;\n    anotherNewState.queueMap = anotherNewMap;\n    return anotherNewState;\n  }\n\n  delete copy.children;\n  copy.childUuids = [];\n\n  // Some data cleaning that probably shouldn't happen here.\n  if(copy.track?.service === SERVICE_APPLE_MUSIC) {\n    copy.track.imageUrl = copy.track.imageUrl.replace(\"{w}\", \"300\");\n    copy.track.imageUrl = copy.track.imageUrl.replace(\"{h}\", \"300\");\n  }\n\n  const intervals = copy.intervals,\n        trackDurationMilliseconds = copy.track?.durationMilliseconds;\n\n  // Gotta update the marker map\n  const markerMap = { ...state.markerMap };\n  for(const marker of queue.markers) {\n    if(markerMap[marker.trackUuid] === undefined || markerMap[marker.trackUuid].length === 0) {\n      markerMap[marker.trackUuid] = {};\n    }\n    markerMap[marker.trackUuid][marker.uuid] = marker;\n  }\n  newState.markerMap = markerMap;\n\n  // Base case: no configured intervals\n  if(!intervals.length) {\n    copy.playbackIntervals = [\n      {\n        startPosition: 0,\n        endPosition: trackDurationMilliseconds,\n        purpose: \"all\",\n        uuid: null,\n      }\n    ];\n    copy.allIntervals = [\n      {\n        startPosition: 0,\n        endPosition: trackDurationMilliseconds,\n        purpose: \"all\",\n        uuid: null,\n      }\n    ];\n    newQueueMap[copy.uuid] = copy;\n    newState.queueMap = newQueueMap;\n    return newState;\n  }\n\n  const allIntervals = [],\n        trackUuid = queue.track.uuid;\n  let lastBound;\n  for(const interval of intervals) {\n    const lowerBound = markerMap[trackUuid][interval.lowerBoundUuid]?.timestampMilliseconds,\n          upperBound = markerMap[trackUuid][interval.upperBoundUuid]?.timestampMilliseconds;\n\n    ////////////////////////////////////////////////////////////////////////////\n    // TRIMMED\n    if(interval.purpose === 'muted') {\n\n\n\n      // Trimmed && No LOWER bound\n      // Meaning, the beginning of the track is trimmed.\n      if(!interval.lowerBoundUuid) {\n        allIntervals.push({\n          startPosition: 0,\n          endPosition: upperBound,\n          purpose: \"muted\",\n          uuid: interval.uuid,\n        });\n        lastBound = upperBound;\n        continue;\n      }\n\n      // Base case: need to add playback window upfront.\n      if(!allIntervals.length) {\n        allIntervals.push({\n          startPosition: 0,\n          endPosition: lowerBound,\n          purpose: \"all\",\n          uuid: undefined,\n        });\n      }\n\n      // Trimmed && No UPPER bound\n      // Meaning, the end of the track is trimmed.\n      if(!interval.upperBoundUuid) {\n\n        // One more case to consider here...\n        // Same concept as the ** below\n        if(lastBound && lastBound !== lowerBound) {\n          allIntervals.push({\n            startPosition: lastBound,\n            endPosition: lowerBound,\n            purpose: \"all\",\n            uuid: undefined,\n          });\n        }\n\n        allIntervals.push({\n          startPosition: lowerBound || 0,\n          endPosition: trackDurationMilliseconds,\n          purpose: \"muted\",\n          uuid: interval.uuid,\n        });\n        lastBound = undefined;\n        continue;\n      }\n\n      // Trimmed && Mismatched last bound **\n      // Meaning, there is an implicit normal playback interval.\n      if(lastBound && lastBound !== lowerBound) {\n        allIntervals.push({\n          startPosition: lastBound,\n          endPosition: lowerBound,\n          purpose: \"all\",\n          uuid: undefined,\n        });\n        // NO CONTINUE\n      }\n\n      allIntervals.push({\n        startPosition: lowerBound,\n        endPosition: upperBound,\n        purpose: interval.purpose,\n        uuid: interval.uuid,\n      });\n\n      lastBound = upperBound;\n      continue;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // STEM SEPERATION\n\n    // No LOWER bound\n    // Meaning, the beginning of the track is an implicit normal playback\n    // interval.\n    if(interval.lowerBound && lowerBound !== 0) {\n      allIntervals.push({\n        startPosition: 0,\n        endPosition: lowerBound,\n        purpose: \"all\",\n        uuid: undefined,\n      });\n    }\n\n    allIntervals.push({\n      startPosition: lowerBound || 0,\n      endPosition: upperBound || trackDurationMilliseconds,\n      purpose: interval.purpose,\n      uuid: interval.uuid,\n    });\n\n    lastBound = upperBound;\n    continue;\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // LAST BUT NOT LEAST...\n  if(lastBound && lastBound !== trackDurationMilliseconds) {\n    allIntervals.push({\n      startPosition: lastBound,\n      endPosition: trackDurationMilliseconds,\n      purpose: \"all\",\n      uuid: undefined,\n    });\n  }\n\n  const playbackIntervals = allIntervals.filter(i => i.purpose !== \"muted\");\n\n  copy.playbackIntervals = playbackIntervals;\n  copy.allIntervals = allIntervals;\n\n  newQueueMap[copy.uuid] = copy;\n  newState.queueMap = newQueueMap;\n  return newState;\n}\n\n\n/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const queueListSet = function(state, payload) {\n  let newState = { ...state };\n  newState = finalizeQueues(newState, payload.lastUpQueues);\n  newState = finalizeQueues(newState, payload.nextUpQueues);\n\n  let lastUpQueues = payload.lastUpQueues.map(o => o.uuid),\n      nextUpQueues = payload.nextUpQueues.map(o => o.uuid);\n\n  const _lastPlayed = newState._lastPlayed;\n  if(_lastPlayed) {\n    lastUpQueues.push(_lastPlayed.uuid);\n  }\n\n  let stream = newState.stream,\n      queueMap = newState.queueMap,\n      nowPlaying = queueMap[stream.nowPlayingUuid];\n  if(nowPlaying?.status !== \"played\" && nowPlaying?.status !== 'paused' && nowPlaying) {\n    lastUpQueues.push(stream.nowPlayingUuid);\n    stream = { ...stream, nowPlayingUuid: undefined }\n  }\n\n  return {\n    ...newState,\n    stream: stream,\n    lastUpQueueUuids: lastUpQueues,\n    nextUpQueueUuids: nextUpQueues,\n    queueMap: newState.queueMap,\n  }\n}\n\nexport const queueUpdate = function(state, action) {\n  return finalizeQueues(state, action.queues);\n}\n\n\nexport const queueDeleteNode = function(state, action) {\n  const queueUuids = state.nextUpQueueUuids,\n        filteredQueueUuids = queueUuids.filter(uuid => uuid !== action.queueUuid);\n\n  return {\n    ...state,\n    nextUpQueueUuids: filteredQueueUuids,\n  }\n}\n\n\nexport const queueDeleteChildNode = function(state, action) {\n  const queueMap = { ...state.queueMap },\n        parentQueue = { ...state.queueMap[action.parentUuid] };\n  parentQueue.childUuids = parentQueue.childUuids.filter(uuid => uuid !== action.queueUuid);\n\n  queueMap[parentQueue.uuid] = parentQueue;\n\n  return { ...state, queueMap };\n}\n","export const mainEnable = function(state, payload) {\n  const main = { ...state.main };\n  main.enabled = true;\n\n  return { ...state, main };\n}\n\nexport const mainDisable = function(state, payload) {\n  const main = { ...state.main };\n  main.enabled = false;\n\n  return { ...state, main };\n}\n\nexport const mainAddAction = function(state, payload) {\n  const action = payload.action,\n        main = { ...state.main };\n  main.actions = [...main.actions, action];\n\n  return { ...state, main };\n}\n\nexport const mainActionStart = function(state, payload) {\n  const main = { ...state.main },\n        actions = [...main.actions],\n        action = { ...actions[0] };\n  action.status = 'pending';\n  actions[0] = action;\n  main.actions = actions;\n\n  return { ...state, main };\n}\n\nexport const mainActionShift = function(state, payload) {\n  const main = { ...state.main },\n        actions = [...main.actions];\n  actions.shift();\n  main.actions = actions;\n\n  return { ...state, main };\n}\n\nexport const mainSetAutoplayTimeoutId = function(state, payload) {\n  const main = { ...state.main, autoplayTimeoutId: payload.timeoutId };\n  return { ...state, main };\n}\n\nexport const mainClearAutoplayTimeoutId = function(state, payload) {\n  clearTimeout(state.main.autoplayTimeoutId);\n  const main = { ...state.main, autoplayTimeoutId: false };\n  return { ...state, main };\n}\n","import { getProgress } from '../PlaybackApp/utils';\n\n\n/*\n * Gets queues from queueUuids\n */\nexport const getQueues = function(queueUuids, queueMap) {\n  return queueUuids.map(uuid => queueMap[uuid]);\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getLeafQueue = function(queueUuid, queueMap) {\n  if(!queueUuid) {\n    return null;\n  }\n  let queue = queueMap[queueUuid];\n  if(!queue.childUuids.length) {\n    return queue;\n  }\n  return getLeafQueue(queue.childUuids[0], queueMap);\n}\n\n\n/*\n *\n */\nexport const flattenQueues = function(queues, queueMap) {\n  if(!queues.length) {\n    return undefined;\n  }\n\n  const flattenedQueues = [];\n  for(let queue of queues) {\n    if(queue.childUuids.length) {\n      for(let childUuid of queue.childUuids) {\n        flattenedQueues.push(queueMap[childUuid]);\n      }\n    } else {\n      flattenedQueues.push(queue);\n    }\n  }\n\n  return flattenedQueues;\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getQueueDuration = function(queues, nowPlaying) {\n\n  // Determines the duration of a queue object.\n  const getDuration = function(queue) {\n    return queue.durationMilliseconds;\n  }\n\n  // Reducer function which reduces an array of queues into total duration.\n  const reducer = function(total, curr) {\n    if(typeof(total) !== 'number') {\n      total = getDuration(total);\n    }\n    total += getDuration(curr);\n    return total;\n  };\n\n  // In addition to whatever is queued up, we must add the remaining progress\n  // of whatever is now playing in the stream.\n  const progress = nowPlaying ? getProgress(nowPlaying) : 0;\n  let remainingProgress = 0;\n  if(progress) {\n    remainingProgress = nowPlaying.durationMilliseconds - progress;\n  }\n\n  // Now add determine the total length of all queue objects.\n  // NOTE: Reduce works differently in JavaScript than in Python! Someone\n  //       explain this madness to me!! 0x213F\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\n  if(!queues.length) {\n    return remainingProgress + 0;\n  } else if (queues.length === 1) {\n    return remainingProgress + getDuration(queues[0]);\n  } else {\n    return remainingProgress + queues.reduce(reducer);\n  }\n}\n\nexport const durationPretty = function(durationMilliseconds) {\n  var s = durationMilliseconds;\n\n  // Pad to 2 or 3 digits, default is 2\n  function pad(n, z) {\n    z = z || 2;\n    return ('00' + n).slice(-z);\n  }\n\n  var ms = s % 1000;\n  s = (s - ms) / 1000;\n  var secs = s % 60;\n  s = (s - secs) / 60;\n  var mins = s % 60;\n  var hrs = (s - mins) / 60;\n\n  if(durationMilliseconds >= 1000 * 60 * 60) {\n    return hrs + ':' + pad(mins) + ':' + pad(secs);\n  } else {\n    return mins + ':' + pad(secs);\n  }\n}\n","import { getLeafQueue } from '../../components/QueueApp/utils';\nimport { finalizeQueues } from './queue';\n\n\nexport const streamSetWrapper = function(state, payload) {\n  const obj = streamSet(state, payload);\n\n  const stream = { ...obj.stream },\n        queueMap = obj.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n  if(!nowPlaying?.track?.uuid) {\n    return obj;\n  }\n\n  // Gotta update the marker map\n  const markerMap = { ...state.markerMap };\n  if(markerMap[nowPlaying.track.uuid] === undefined || markerMap[nowPlaying.track.uuid].length === 0) {\n    markerMap[nowPlaying.track.uuid] = {};\n  }\n  for(const marker of nowPlaying.markers) {\n    markerMap[nowPlaying.track.uuid][marker.uuid] = marker;\n  }\n  obj.markerMap = markerMap;\n  return {\n    ...obj,\n    stream: stream,\n  };\n}\n\n\n/*\n * ...\n */\nexport const streamSet = function(state, payload) {\n  const stream = payload.stream,\n        nowPlaying = stream.nowPlaying;  // from server, this is a full obj!\n  let obj = { ...state };\n\n  if(nowPlaying) {\n    obj = finalizeQueues(obj, [nowPlaying]);\n\n    // stream.nowPlaying = obj.queueMap[nowPlaying.uuid];\n  }\n\n  obj.stream = stream;\n  const progress = (\n          stream.nowPlaying.status === \"played\" ?\n          Date.now() - stream.nowPlaying.startedAt : stream.nowPlaying.statusAt - stream.nowPlaying.startedAt\n        );\n  const notPlaying = (\n    (stream.nowPlaying.status !== \"played\" && stream.nowPlaying.status !== 'paused' && stream.nowPlaying) ||\n    (progress && progress >= stream.nowPlaying.durationMilliseconds)\n  )\n\n  if(notPlaying) {\n    obj.lastUp = stream.nowPlaying;\n    obj._lastPlayed = stream.nowPlaying;\n    obj.stream.nowPlaying = undefined;\n  }\n\n  // clean nowPlaying\n  if(obj.stream.nowPlaying) {\n    const nowPlayingUuid = obj.stream.nowPlaying.uuid;\n    delete obj.stream.nowPlaying;\n    obj.stream.nowPlayingUuid = nowPlayingUuid;\n  } else {\n    delete obj.stream.nowPlaying;\n    obj.stream.nowPlayingUuid = undefined;\n  }\n\n  return obj;\n}\n\n\n/*\n * ...\n */\nexport const streamPlay = function(state, payload) {\n  const queueMap = { ...state.queueMap },\n        queue = {\n          ...queueMap[state.stream.nowPlayingUuid],\n          startedAt: payload.startedAt,\n          statusAt: payload.statusAt,\n          status: payload.status,\n        };\n  queueMap[queue.uuid] = queue;\n\n  return {\n    ...state,\n    queueMap\n  };\n\n  // const updatedPayload = {\n  //   queueMap: queueMap,\n  // };\n  // return streamSet(state, updatedPayload);\n}\n\n\n/*\n * ...\n */\nexport const streamPause = function(state, payload) {\n  const queueMap = { ...state.queueMap },\n        queue = {\n          ...queueMap[state.stream.nowPlayingUuid],\n          statusAt: payload.statusAt,\n          status: payload.status,\n        };\n  queueMap[queue.uuid] = queue;\n\n  return {\n    ...state,\n    queueMap\n  };\n\n  // const updatedPayload = {\n  //   queueMap: queueMap,\n  // };\n  // return streamSet(state, updatedPayload);\n}\n\n\n/*\n * Set the stream context.\n */\nexport const streamPrevTrack = function(state, payload) {\n  const lastUpQueueUuids = [...state.lastUpQueueUuids],\n        nextUpQueueUuids = [...state.nextUpQueueUuids],\n        nowPlayingUuid = state.stream.nowPlayingUuid,\n        queueMap = { ...state.queueMap };\n\n  const nextUpUuid = nextUpQueueUuids[0],\n        nextUp = getLeafQueue(nextUpUuid, queueMap);\n\n  const nowPlaying = { ...queueMap[nowPlayingUuid] };\n  if(!nextUp) {\n    if(nowPlaying.parentUuid) {\n      nextUpQueueUuids.unshift(nowPlaying.parentUuid);\n      const nextUpCollection = { ...queueMap[nowPlaying.parentUuid] };\n      nextUpCollection.childUuids.unshift(nowPlayingUuid);\n    } else {\n      nextUpQueueUuids.unshift(nowPlayingUuid);\n    }\n  } else if(nextUp.uuid !== nextUpUuid) {\n    let nextUpCollection;\n    nextUpCollection = { ...queueMap[nextUpUuid] };\n    if(nowPlaying.parentUuid !== nextUpCollection.uuid) {\n      nextUpQueueUuids.unshift(nowPlaying.parentUuid);\n      nextUpCollection = { ...queueMap[nowPlaying.parentUuid] };\n    }\n    nextUpCollection.childUuids.unshift(nowPlayingUuid);\n    queueMap[nextUpCollection.uuid] = nextUpCollection;\n  } else {\n    nextUpQueueUuids.unshift(nowPlayingUuid);\n  }\n\n  const nextNowPlayingUuid = lastUpQueueUuids.pop();\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        nowPlayingUuid: nextNowPlayingUuid,\n      },\n      playback: {\n        ...state.playback,\n        nowPlayingUuid: nextNowPlayingUuid,\n      },\n      lastUpQueueUuids: lastUpQueueUuids,\n      nextUpQueueUuids: nextUpQueueUuids,\n      queueMap: queueMap,\n      _lastPlayed: undefined,\n  };\n}\n\n\n/*\n * ...\n */\nexport const streamNextTrack = function(state, payload) {\n  const lastUpQueueUuids = [...state.lastUpQueueUuids],\n        nextUpQueueUuids = [...state.nextUpQueueUuids],\n        nowPlayingUuid = state.stream.nowPlayingUuid,\n        queueMap = state.queueMap;\n\n  lastUpQueueUuids.push(nowPlayingUuid);\n\n  const nextUpUuid = nextUpQueueUuids.shift();\n  const nextNowPlaying = { ...getLeafQueue(nextUpUuid, queueMap) };\n\n  // Handle leaf node. (playing a track inside a collection)\n  if(nextUpUuid !== nextNowPlaying.uuid) {\n    // Pop the child from the collection.\n    let nextUp;\n    nextUp = { ...state.queueMap[nextUpUuid] };\n    nextUp.childUuids.shift();\n    queueMap[nextUp.uuid] = nextUp;\n    if(nextUp.childUuids.length > 0) {\n      // If no more children, pop the collection from the queue.\n      nextUpQueueUuids.unshift(nextUpUuid);\n    }\n  }\n\n  nextNowPlaying.startedAt = Date.now();\n  queueMap[nextNowPlaying.uuid] = nextNowPlaying;\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        nowPlayingUuid: nextNowPlaying.uuid,\n      },\n      playback: {\n        ...state.playback,\n        nowPlayingUuid: nextNowPlaying.uuid,\n      },\n      lastUpQueueUuids: lastUpQueueUuids,\n      nextUpQueueUuids: nextUpQueueUuids,\n      queueMap: queueMap,\n      _lastPlayed: undefined,\n  };\n}\n","/*\n * ...\n */\nexport const textCommentListSet = function(state, payload) {\n  const textComments = payload.textComments,\n        trackUuid = payload.trackUuid,\n        textCommentMap = { ...state.textCommentMap },\n        feedApp = { ...state.feedApp },\n        trackMap = { ...state.feedApp.trackMap };\n\n  for(let textComment of textComments) {\n    textCommentMap[textComment.uuid] = textComment;\n  }\n\n  if(!trackMap.hasOwnProperty(trackUuid)) {\n    trackMap[trackUuid] = {};\n  }\n  const textCommentUuids = textComments.map(obj => obj.uuid);\n  trackMap[trackUuid].textCommentUuids = textCommentUuids;\n  feedApp.trackMap = trackMap;\n\n  return { ...state, feedApp, textCommentMap };\n}\n\n\n/*\n *\n */\nexport const textCommentCreate = function(state, payload) {\n  const textComment = payload.textComment,\n        trackUuid = textComment.trackUuid,\n        textCommentMap = { ...state.textCommentMap },\n        feedApp = { ...state.feedApp },\n        textCommentUuids = [...state.feedApp.trackMap[trackUuid].textCommentUuids];\n\n  textComment.forceDisplay = true;\n  textCommentMap[textComment.uuid] = textComment;\n  textCommentUuids.push(textComment.uuid);\n  feedApp.trackMap[trackUuid].textCommentUuids = textCommentUuids;\n\n  return { ...state, feedApp, textCommentMap };\n}\n\n\n/*\n *\n */\nexport const textCommentDelete = function(state, payload) {\n  const textCommentUuid = payload.textCommentUuid,\n        trackUuid = payload.trackUuid,\n        textCommentMap = { ...state.textCommentMap },\n        feedApp = { ...state.feedApp },\n        trackMap = { ...state.feedApp.trackMap };\n\n  let textCommentUuids;\n  const deleteByUuid = uuid => uuid !== textCommentUuid;\n  textCommentUuids = [...trackMap[trackUuid].textCommentUuids];\n  textCommentUuids = textCommentUuids.filter(deleteByUuid);\n\n  trackMap[trackUuid].textCommentUuids = textCommentUuids;\n  feedApp.trackMap = trackMap;\n\n  delete textCommentMap[textCommentUuid];\n\n  return { ...state, feedApp, textCommentMap };\n}\n","\n\nexport const notesAppSet = function(state, payload) {\n  const notesApp = { ...state.notesApp },\n        notesStore = { ...state.notesApp.store },\n        { key, value } = payload;\n\n  notesStore[key] = value;\n  notesApp.store = notesStore;\n  localStorage.setItem('notesStore', JSON.stringify(notesStore));\n\n  return { ...state, notesApp };\n}\n","/*\n * ...\n */\nexport const textCommentModificationCreate = function(state, payload) {\n  const textCommentMap = { ...state.textCommentMap },\n        textCommentModifications = payload.textCommentModifications,\n        modifiedModification = textCommentModifications.modified,\n        deletedModifications = textCommentModifications.deleted,\n        textCommentUuid = payload.textCommentUuid,\n        textComment = { ...state.textCommentMap[textCommentUuid] };\n\n  let modifications = [...textComment.modifications],\n      existingIdx;\n  existingIdx = modifications.findIndex(t => (\n    t.uuid === modifiedModification.uuid\n  ));\n  if(existingIdx !== -1) {\n    modifications[existingIdx] = modifiedModification;\n  } else {\n    modifications.push(modifiedModification);\n    modifications = modifications.sort((a, b) => {\n      return a.startPtr - b.startPtr;\n    });\n  }\n\n  if(deletedModifications) {\n    for(let idx=0; idx < deletedModifications.length; idx++) {\n      const deletedModification = deletedModifications[idx];\n      existingIdx = modifications.findIndex(t => (\n        t.uuid === deletedModifications.uuid\n      ));\n      if(existingIdx !== -1) {\n        modifications = modifications.filter(i => i.uuid !== deletedModification.uuid);\n      }\n    }\n  }\n\n  textComment.modifications = modifications;\n  textCommentMap[textComment.uuid] = textComment;\n\n  return { ...state, textCommentMap };\n}\n\n\n/*\n * ...\n */\nexport const textCommentClearModifications = function(state, payload) {\n  const textCommentMap = { ...state.textCommentMap },\n        textCommentUuid = payload.textCommentUuid,\n        textComment = textCommentMap[textCommentUuid];\n\n  textComment.modifications = [];\n  textCommentMap[textCommentUuid] = textComment;\n\n  return { ...state, textCommentMap };\n}\n","/*\n * ...\n */\nexport const voiceRecordingListSet = function(state, payload) {\n  const voiceRecordings = payload.voiceRecordings,\n        trackUuid = payload.trackUuid,\n        voiceRecordingMap = { ...state.voiceRecordingMap },\n        feedApp = { ...state.feedApp },\n        trackMap = { ...state.feedApp.trackMap };\n\n  for(let voiceRecording of voiceRecordings) {\n    voiceRecordingMap[voiceRecording.uuid] = voiceRecording;\n  }\n\n  if(!trackMap.hasOwnProperty(trackUuid)) {\n    trackMap[trackUuid] = {};\n  }\n  const voiceRecordingUuids = voiceRecordings.map(obj => obj.uuid);\n  trackMap[trackUuid].voiceRecordingUuids = voiceRecordingUuids;\n  feedApp.trackMap = trackMap;\n\n  return { ...state, feedApp, voiceRecordingMap };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingCreate = function(state, payload) {\n  const voiceRecording = payload.voiceRecording,\n        trackUuid = voiceRecording.trackUuid,\n        voiceRecordingMap = { ...state.voiceRecordingMap },\n        feedApp = { ...state.feedApp },\n        voiceRecordingUuids = [...state.feedApp.trackMap[trackUuid].voiceRecordingUuids];\n\n  // TODO: set lastRender\n\n  voiceRecording.forceDisplay = true;\n  voiceRecordingMap[voiceRecording.uuid] = voiceRecording;\n  voiceRecordingUuids.push(voiceRecording.uuid);\n  feedApp.trackMap[trackUuid].voiceRecordingUuids = voiceRecordingUuids;\n\n  return { ...state, feedApp, voiceRecording, voiceRecordingMap };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingDelete = function(state, payload) {\n  const voiceRecordingUuid = payload.voiceRecordingUuid,\n        trackUuid = payload.trackUuid,\n        voiceRecordingMap = { ...state.voiceRecordingMap },\n        feedApp = { ...state.feedApp },\n        trackMap = { ...state.feedApp.trackMap };\n\n  let voiceRecordingUuids;\n  const deleteByUuid = uuid => uuid !== voiceRecordingUuid;\n  voiceRecordingUuids = [...trackMap[trackUuid].voiceRecordingUuids];\n  voiceRecordingUuids = voiceRecordingUuids.filter(deleteByUuid);\n\n  trackMap[trackUuid].voiceRecordingUuids = voiceRecordingUuids;\n  feedApp.trackMap = trackMap;\n\n  delete voiceRecordingMap[voiceRecordingUuid];\n\n  return { ...state, feedApp, voiceRecordingMap };\n}\n","export const userSettingsUpdate = function(state, payload) {\n  return {\n    ...state,\n    userSettings: {\n        ...state.userSettings,\n        ...payload,\n    }\n  }\n}\n\n\nexport const userGetSettings = function(state, action) {\n  return {\n    ...state,\n    userSettings: action.userSettings,\n  }\n}\n","export const sideBarSelectTab = function(state, payload) {\n  return {\n    ...state,\n    sideBar: {\n      ...state.sideBar,\n      tab: payload.tab,\n    }\n  };\n}\n","import { createStore } from 'redux';\nimport {\n  feedUpdate,\n  feedTakeAction,\n  feedAppSetContentContainer,\n} from './reducers/feed';\nimport {\n  markerCreate,\n  markerDelete,\n} from './reducers/marker';\nimport {\n  playbackMount,\n  playbackSpotify,\n  playbackLoaded,\n  playbackYouTube,\n  playbackYouTubeTriggerAutoplay,\n  playbackSetSeekTimeoutId,\n  playbackClearSeekTimeoutId,\n  playbackDisable,\n  playbackEnable,\n  playbackLoadFiles,\n  playbackLoadAudius,\n  playbackCycleVolumeLevelAudio,\n  playbackAction,\n} from './reducers/playback';\nimport {\n  queueListSet,\n  queueUpdate,\n  queueDeleteNode,\n  queueDeleteChildNode,\n} from './reducers/queue';\nimport {\n  mainEnable,\n  mainDisable,\n  mainAddAction,\n  mainActionShift,\n  mainActionStart,\n  mainSetAutoplayTimeoutId,\n  mainClearAutoplayTimeoutId,\n} from './reducers/main';\nimport {\n  streamSetWrapper,\n  streamPlay,\n  streamPause,\n  streamPrevTrack,\n  streamNextTrack,\n} from './reducers/stream';\nimport {\n  textCommentListSet,\n  textCommentCreate,\n  textCommentDelete,\n} from './reducers/textComment';\nimport {\n  notesAppSet\n} from './reducers/notesApp';\nimport {\n  textCommentModificationCreate,\n  textCommentClearModifications,\n} from './reducers/textCommentModification';\nimport {\n  voiceRecordingListSet,\n  voiceRecordingCreate,\n  voiceRecordingDelete,\n} from './reducers/voiceRecording';\nimport {\n  userSettingsUpdate,\n  userGetSettings,\n} from './reducers/userSettings';\nimport {\n  sideBarSelectTab,\n} from './reducers/sideBar';\n\n\nconst initialState = {\n  nextUpQueueUuids: [],\n  lastUpQueueUuids: [],\n  _lastPlayed: undefined,\n  textComments: [],\n  voiceRecordings: [],\n  userSettings: undefined,\n  markerMap: {},\n  queueMap: {},\n  textCommentMap: {},\n  voiceRecordingMap: {},\n  main: {\n    actions: [],\n    enabled: true,\n    autoplayTimeoutId: false,\n  },\n  playback: {\n    spotifyApi: undefined,\n    youTubeApi: undefined,\n    youTubeAutoplay: 0,\n    isPlaying: false,\n    // queuedUp: false,\n    // addToQueueTimeoutId: undefined,\n    seekTimeoutId: false,\n    files: {},\n    volumeLevel: {\n      audio: 1.00,\n      voice: 1.00,\n    },\n    loaded: {\n      spotify: false,\n      youTube: false,\n      appleMusic: false,\n      audius: true,\n      jukeboxRadio: true,\n    },\n    pending: {\n      spotify: false,\n      youtube: false,\n      appleMusic: false,\n      audius: false,\n      jukeboxRadio: false,\n    },\n    action: null,\n    nowPlayingUuid: undefined,\n  },\n  // UI\n  search: {\n    serviceSpotify: false,\n    serviceYouTube: false,\n    serviceAppleMusic: false,\n    serviceJukeboxRadio: false,\n    serviceAudius: false,\n  },\n  feedApp: {\n    contentContainer: null,\n    feed: [],\n    trackMap: {},\n    lastRender: {},\n  },\n  notesApp: {\n    store: JSON.parse(localStorage.getItem('notesStore')) || {},\n  },\n  sideBar: {\n    tab: null,\n  }\n}\n\n\nconst searchToggleServiceOff = function(state, payload) {\n  return {\n    ...state,\n    search : {\n      serviceSpotify: false,\n      serviceYouTube: false,\n      serviceAppleMusic: false,\n      serviceJukeboxRadio: false,\n      serviceAudius: false,\n      ...payload\n    }\n  }\n}\n\nconst searchToggleService = function(state, payload) {\n  const newState = {\n    ...state,\n    search : {\n      serviceSpotify: false,\n      serviceYouTube: false,\n      serviceAppleMusic: false,\n      serviceJukeboxRadio: false,\n      serviceAudius: false,\n      ...payload\n    }\n  };\n  newState.search[payload.serviceName] = true;\n  return newState;\n}\n\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    ////////////////////////////////////////////////////////////////////////////\n    // STREAM\n    case \"stream/set\":\n      return streamSetWrapper(state, action.payload);\n    case \"stream/play\":\n      return streamPlay(state, action.payload);\n    case \"stream/pause\":\n      return streamPause(state, action.payload);\n    case \"stream/prevTrack\":\n      return streamPrevTrack(state, action.payload);\n    case \"stream/nextTrack\":\n      return streamNextTrack(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // QUEUE\n    case \"queue/listSet\":\n      return queueListSet(state, action.payload);\n    case \"queue/deleteNode\":\n      return queueDeleteNode(state, action);\n    case \"queue/deleteChildNode\":\n      return queueDeleteChildNode(state, action);\n    case \"queue/update\":\n      return queueUpdate(state, action.payload);\n    case \"textComment/listSet\":\n    ////////////////////////////////////////////////////////////////////////////\n    // TEXT COMMENT\n      return textCommentListSet(state, action.payload);\n    case \"textComment/create\":\n      return textCommentCreate(state, action.payload);\n    case \"textComment/delete\":\n      return textCommentDelete(state, action.payload);\n    case \"textCommentModification/create\":\n      return textCommentModificationCreate(state, action.payload);\n    case \"textComment/clearModifications\":\n      return textCommentClearModifications(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // VOICE RECORDING\n    case \"voiceRecording/create\":\n      return voiceRecordingCreate(state, action.payload);\n    case \"voiceRecording/listSet\":\n      return voiceRecordingListSet(state, action.payload);\n    case \"voiceRecording/delete\":\n      return voiceRecordingDelete(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // FEED\n    case \"feed/update\":\n      return feedUpdate(state);\n    case \"feed/takeAction\":\n      return feedTakeAction(state, action.payload)\n    case \"feedApp/setContentContainer\":\n      return feedAppSetContentContainer(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // USER\n    case \"user/get-settings\":\n      return userGetSettings(state, action);\n    case \"userSettings/update\":\n      return userSettingsUpdate(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // MARKER\n    case \"marker/create\":\n      return markerCreate(state, action.payload);\n    case \"marker/delete\":\n      return markerDelete(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // PLAYBACK\n    case \"playback/mount\":\n      return playbackMount(state, action.payload);\n    case \"playback/disable\":\n      return playbackDisable(state);\n    case \"playback/enable\":\n      return playbackEnable(state);\n    case \"playback/spotify\":\n      return playbackSpotify(state, action.payload);\n    case \"playback/loaded\":\n      return playbackLoaded(state, action.payload);\n    case \"playback/youTube\":\n      return playbackYouTube(state, action.payload);\n    case \"playback/youTubeTriggerAutoplay\":\n      return playbackYouTubeTriggerAutoplay(state, action.payload);\n    case \"playback/setSeekTimeoutId\":\n      return playbackSetSeekTimeoutId(state, action.payload);\n    case \"playback/clearSeekTimeoutId\":\n      return playbackClearSeekTimeoutId(state, action.payload);\n    case \"playback/loadFiles\":\n      return playbackLoadFiles(state, action.payload);\n    case \"playback/loadAudius\":\n      return playbackLoadAudius(state, action.payload);\n    case \"playback/cycleVolumeLevelAudio\":\n      return playbackCycleVolumeLevelAudio(state);\n    case \"playback/action\":\n      return playbackAction(state, action.payload);\n    case \"main/enable\":\n      return mainEnable(state, action.payload);\n    case \"main/disable\":\n      return mainDisable(state, action.payload);\n    case \"main/addAction\":\n      return mainAddAction(state, action.payload);\n    case \"main/actionShift\":\n      return mainActionShift(state, action.payload);\n    case \"main/actionStart\":\n      return mainActionStart(state, action.payload);\n    case \"main/setAutoplayTimeoutId\":\n      return mainSetAutoplayTimeoutId(state, action.payload);\n    case \"main/clearAutoplayTimeoutId\":\n      return mainClearAutoplayTimeoutId(state, action.payload);\n    case \"search/toggleServiceOff\":\n      return searchToggleServiceOff(state, action.payload);\n    case \"search/toggleService\":\n      return searchToggleService(state, action.payload);\n    case \"sideBar/selectTab\":\n      return sideBarSelectTab(state, action.payload);\n    case \"notesApp/set\":\n      return notesAppSet(state, action.payload);\n    // case \"@redux/INIT\":\n    //   return state;\n    default:\n      return state;\n      // throw new Error(`Unregistered Redux event: ${action.type}`);\n  }\n}\n\n\nexport const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({ trace: true }));\n","export const iconLogo = (\n  <svg width=\"38\" height=\"38\" viewBox=\"0 0 213 213\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect width=\"213\" height=\"213\" fill=\"#0047FF\"/>\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M65.9999 172.354L65.9999 140.822C93.3189 140.822 115.465 118.675 115.465 91.3561L115.465 91.3535L147 91.3535L147 91.3544C147 136.089 110.735 172.354 66 172.354C66 172.354 65.9999 172.354 65.9999 172.354Z\" fill=\"white\"/>\n    <circle cx=\"130.924\" cy=\"56.7267\" r=\"16.0763\" fill=\"white\"/>\n  </svg>\n);\n\nexport const iconLogoAlt = (\n  <svg height=\"24\" viewBox=\"0 0 131 213\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M-5.72619e-06 213C72.3493 213 131 154.349 131 82L80 82C80 126.183 44.1828 162 -3.49691e-06 162L-5.72619e-06 213Z\" fill=\"#0047FF\"/>\n    <circle cx=\"105\" cy=\"26\" r=\"26\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconCheckboxUnchecked = (\n  <svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"1\" y=\"1\" width=\"23\" height=\"23\" rx=\"5\" stroke=\"#0047FF\" strokeWidth=\"2\"/>\n  </svg>\n);\n\n\nexport const iconCheckboxChecked = (\n  <svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"1\" y=\"1\" width=\"23\" height=\"23\" rx=\"5\" stroke=\"#0047FF\" strokeWidth=\"2\"/>\n    <path d=\"M19 8L10.75 17L7 12.9091\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\n\nexport const iconSpotify = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 168 168\" style={{width: \"24px\"}}>\n   <path fill=\"#1ED760\" d=\"m83.996 0.277c-46.249 0-83.743 37.493-83.743 83.742 0 46.251 37.494 83.741 83.743 83.741 46.254 0 83.744-37.49 83.744-83.741 0-46.246-37.49-83.738-83.745-83.738l0.001-0.004zm38.404 120.78c-1.5 2.46-4.72 3.24-7.18 1.73-19.662-12.01-44.414-14.73-73.564-8.07-2.809 0.64-5.609-1.12-6.249-3.93-0.643-2.81 1.11-5.61 3.926-6.25 31.9-7.291 59.263-4.15 81.337 9.34 2.46 1.51 3.24 4.72 1.73 7.18zm10.25-22.805c-1.89 3.075-5.91 4.045-8.98 2.155-22.51-13.839-56.823-17.846-83.448-9.764-3.453 1.043-7.1-0.903-8.148-4.35-1.04-3.453 0.907-7.093 4.354-8.143 30.413-9.228 68.222-4.758 94.072 11.127 3.07 1.89 4.04 5.91 2.15 8.976v-0.001zm0.88-23.744c-26.99-16.031-71.52-17.505-97.289-9.684-4.138 1.255-8.514-1.081-9.768-5.219-1.254-4.14 1.08-8.513 5.221-9.771 29.581-8.98 78.756-7.245 109.83 11.202 3.73 2.209 4.95 7.016 2.74 10.733-2.2 3.722-7.02 4.949-10.73 2.739z\"/>\n  </svg>\n);\n\n\nexport const iconYouTube = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 721\" style={{width: \"24px\"}}>\n    <path fill=\"#FFF\" d=\"M407 493l276-143-276-144v287z\" />\n    <path\n      opacity={0.12}\n      fill=\"#420000\"\n      d=\"M407 206l242 161.6 34-17.6-276-144z\"\n    />\n    <linearGradient\n      id=\"prefix__a\"\n      gradientUnits=\"userSpaceOnUse\"\n      x1={512.5}\n      y1={719.7}\n      x2={512.5}\n      y2={1.2}\n      gradientTransform=\"matrix(1 0 0 -1 0 721)\"\n    >\n      <stop offset={0} stopColor=\"#e52d27\" />\n      <stop offset={1} stopColor=\"#bf171d\" />\n    </linearGradient>\n    <path\n      fill=\"url(#prefix__a)\"\n      d=\"M1013 156.3s-10-70.4-40.6-101.4C933.6 14.2 890 14 870.1 11.6 727.1 1.3 512.7 1.3 512.7 1.3h-.4s-214.4 0-357.4 10.3C135 14 91.4 14.2 52.6 54.9 22 85.9 12 156.3 12 156.3S1.8 238.9 1.8 321.6v77.5C1.8 481.8 12 564.4 12 564.4s10 70.4 40.6 101.4c38.9 40.7 89.9 39.4 112.6 43.7 81.7 7.8 347.3 10.3 347.3 10.3s214.6-.3 357.6-10.7c20-2.4 63.5-2.6 102.3-43.3 30.6-31 40.6-101.4 40.6-101.4s10.2-82.7 10.2-165.3v-77.5c0-82.7-10.2-165.3-10.2-165.3zM407 493V206l276 144-276 143z\"\n    />\n  </svg>\n);\n\nexport const iconAppleMusic = (\n  <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 73 73\"\n      style={{width: \"24px\"}}\n    >\n    <linearGradient\n      id=\"prefix__a\"\n      gradientUnits=\"userSpaceOnUse\"\n      x1={36}\n      y1={2.286}\n      x2={36}\n      y2={72.455}\n      gradientTransform=\"matrix(1 0 0 -1 0 74.007)\"\n    >\n      <stop offset={0} stopColor=\"#fa233b\" />\n      <stop offset={1} stopColor=\"#fb5c74\" />\n    </linearGradient>\n    <path\n      d=\"M72 22.52v-2.58c0-.72-.01-1.45-.03-2.17-.04-1.58-.14-3.17-.42-4.73-.28-1.58-.75-3.06-1.48-4.5-.72-1.41-1.66-2.71-2.78-3.83s-2.42-2.06-3.83-2.78A15.9 15.9 0 0058.97.45C57.41.17 55.82.08 54.24.03L52.06 0H19.94c-.72 0-1.45.01-2.17.03-1.58.04-3.17.14-4.73.42-1.58.29-3.06.75-4.49 1.49-1.42.72-2.71 1.66-3.83 2.78S2.65 7.13 1.93 8.55C1.2 9.99.73 11.46.45 13.05.17 14.61.08 16.2.03 17.78L0 19.94v32.11c0 .72.01 1.45.03 2.17.04 1.58.14 3.17.42 4.73.28 1.58.75 3.06 1.48 4.5.72 1.41 1.66 2.71 2.78 3.83 1.12 1.12 2.42 2.06 3.83 2.78a15.9 15.9 0 004.49 1.48c1.56.28 3.15.37 4.73.42.72.02 1.45.03 2.17.03.86.01 1.72 0 2.58 0h29.53c.72 0 1.45-.01 2.17-.03 1.58-.04 3.17-.14 4.73-.42 1.58-.28 3.06-.75 4.49-1.48 1.41-.72 2.71-1.66 3.83-2.78 1.12-1.12 2.06-2.41 2.78-3.83.73-1.44 1.2-2.91 1.48-4.5.28-1.56.37-3.15.42-4.73.02-.72.03-1.45.03-2.17.01-.86 0-1.72 0-2.58L72 22.52z\"\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      fill=\"url(#prefix__a)\"\n    />\n    <g>\n      <path\n        d=\"M50.9 11c-.17.02-1.72.29-1.91.33l-21.4 4.32h-.01c-.56.12-1 .32-1.33.6-.41.34-.63.83-.72 1.39-.02.12-.05.36-.05.72v26.78c0 .63-.05 1.23-.47 1.75s-.95.67-1.56.8c-.47.09-.93.19-1.4.28-1.77.36-2.92.6-3.96 1-1 .39-1.74.88-2.34 1.5-1.18 1.23-1.66 2.91-1.49 4.48.14 1.34.74 2.62 1.78 3.56.7.64 1.57 1.13 2.6 1.33 1.07.21 2.2.14 3.86-.2.88-.18 1.71-.46 2.5-.92a6.23 6.23 0 001.97-1.82c.52-.75.86-1.58 1.05-2.47.19-.91.24-1.74.24-2.65V28.56c0-1.24.35-1.57 1.36-1.82 0 0 17.79-3.59 18.62-3.75 1.16-.22 1.7.11 1.7 1.32v15.86c0 .63-.01 1.26-.43 1.78s-.95.67-1.56.8c-.47.09-.93.19-1.4.28-1.77.36-2.92.6-3.96 1-1 .39-1.74.88-2.34 1.5a5.643 5.643 0 00-1.53 4.48c.14 1.34.78 2.62 1.82 3.56.7.64 1.57 1.11 2.6 1.32 1.07.21 2.2.14 3.86-.2.88-.18 1.71-.44 2.5-.91a6.23 6.23 0 001.97-1.82c.52-.75.86-1.58 1.05-2.47.19-.91.2-1.74.2-2.65V12.89c-.01-1.23-.66-1.99-1.82-1.89z\"\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        fill=\"#fff\"\n      />\n    </g>\n  </svg>\n);\n\nexport const iconFolder = (\n  <svg width=\"34\" height=\"31\" viewBox=\"0 0 34 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M32.1883 25.9507C32.1883 26.7778 31.8597 27.5711 31.2748 28.156C30.6899 28.7409 29.8967 29.0695 29.0695 29.0695H4.11883C3.29167 29.0695 2.49838 28.7409 1.91348 28.156C1.32859 27.5711 1 26.7778 1 25.9507V4.11883C1 3.29167 1.32859 2.49838 1.91348 1.91348C2.49838 1.32859 3.29167 1 4.11883 1H11.9159L15.0347 5.67825H29.0695C29.8967 5.67825 30.6899 6.00684 31.2748 6.59173C31.8597 7.17663 32.1883 7.96991 32.1883 8.79708V25.9507Z\" fill=\"#0047FF\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M16.5938 13.3848V22.7413\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M11.916 18.1523H21.2725\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconBack = (\n  <svg width=\"27\" height=\"27\" viewBox=\"0 0 27 27\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.5 8.5L8.5 13.5L13.5 18.5\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M18.793 13.1133H8.79297\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconAudius = (\n  <img src=\"/audius.png\" style={{maxWidth: \"24px\", maxHeight: \"24px\"}} alt=\"Audius\" />\n)\n\nexport const iconAudius34 = (\n  <img src=\"/audius.png\" style={{maxWidth: \"34px\", maxHeight: \"34px\"}} alt=\"Audius\" />\n)\n","import React, { useState } from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\nimport { iconLogo, iconCheckboxChecked, iconCheckboxUnchecked } from '../../icons';\n\nimport styles from './Login.module.css';\nimport { fetchAuthToken, fetchInitializeStream } from './network';\n\n\nfunction Login(props) {\n\n  /*\n   * \n   */\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [rememberMe, setRememberMe] = useState(false);\n\n  const handleRememberMe = function() {\n    setRememberMe(val => !val);\n  }\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function(e) {\n    const responseJson = await fetchAuthToken(username, password);\n    if(!responseJson.access || !responseJson.refresh) {\n      return;\n    }\n\n    localStorage.setItem('accessToken', responseJson.access);\n    localStorage.setItem('refreshToken', responseJson.refresh);\n\n    await fetchInitializeStream();\n\n    window.location.href = '/app/search';\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.LoginContainer}>\n      <div className={styles.Logo}>\n        {iconLogo}\n      </div>\n      <div className={styles.Login}>\n\n        <div className={styles.LoginHeader}>\n          <h3>Sign in</h3>\n\n          {/*\n          <p>\n            If you have not created an account yet,\n            then please <a href=\"#\">Sign Up</a> first.\n          </p>\n          */}\n\n        </div>\n\n        <label className={styles.FormBlock}>\n          <span>\n            E-mail*\n          </span>\n          <input type=\"text\"\n                 name=\"username\"\n                 value={username}\n                 onChange={(e) => {setUsername(e.target.value)}} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          <span>\n            Password\n          </span>\n          <input type=\"password\"\n                 name=\"password\"\n                 value={password}\n                 onChange={(e) => {setPassword(e.target.value)}} />\n        </label>\n\n        <label className={styles.FormBlock}\n               style={{height: \"25px\"}}>\n          <button className={styles.Checkbox}\n                  onClick={handleRememberMe}>\n            {rememberMe ? iconCheckboxChecked : iconCheckboxUnchecked}\n          </button>\n          <span className={styles.FormBlockInline}>\n            Remember Me\n          </span>\n        </label>\n\n        <div className={styles.FormBlock}\n             style={{marginBottom: \"6px;\"}}>\n          <button className={styles.Submit}\n                  onClick={handleSubmit}>\n            Sign In\n          </button>\n          <span className={styles.ForgotPassword}>\n            <Link to=\"/forgotpassword\">Forgot Password?</Link>\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nexport default Login;\n","import { ENDPOINT_USER_CONNECT_SPOTIFY } from '../../config/api';\nimport { TYPE_POST } from '../../config/global';\nimport { fetchBackend } from '../../utils/network';\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchUserConnectSpotify = async (code, error) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_CONNECT_SPOTIFY,\n    { code, error },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useEffect } from \"react\";\n// import styles from './SpotifySync.module.css';\n\nimport { fetchUserConnectSpotify } from './network';\n\n\nfunction SpotifySync(props) {\n\n  useEffect(() => {\n    async function postData() {\n      const queryString = window.location.search,\n            urlParams = new URLSearchParams(queryString),\n            code = urlParams.get('code'),\n            error = urlParams.get('error');\n\n      await fetchUserConnectSpotify(code, error);\n\n      window.location.href = '../app/search'\n    }\n    postData();\n  }, []);\n\n  return (\n    <p>Redirecting...</p>\n  );\n}\n\nexport default SpotifySync;\n","import {\n  ENDPOINT_TEXT_COMMENT_DELETE,\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Deletes a text comment along with all of its modifications.\n */\nexport const fetchDeleteTextComment = async (textCommentUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Deletes all modifcations that belong to a text comment.\n */\nexport const fetchListDeleteTextCommentModifications = async (\n  textCommentUuid\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","export const iconTrash = (\n  <svg width=\"15\" height=\"16\" viewBox=\"0 0 15 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 3.80078H2.4H13.6\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.49844 3.8V2.4C4.49844 2.0287 4.64594 1.6726 4.90849 1.41005C5.17104 1.1475 5.52713 1 5.89844 1H8.69844C9.06974 1 9.42584 1.1475 9.68839 1.41005C9.95094 1.6726 10.0984 2.0287 10.0984 2.4V3.8M12.1984 3.8V13.6C12.1984 13.9713 12.0509 14.3274 11.7884 14.5899C11.5258 14.8525 11.1697 15 10.7984 15H3.79844C3.42713 15 3.07104 14.8525 2.80849 14.5899C2.54594 14.3274 2.39844 13.9713 2.39844 13.6V3.8H12.1984Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M5.89844 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M8.69922 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconErase = (\n  <svg width=\"18\" height=\"14\" viewBox=\"0 0 18 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12.1601 1.36331L16.6324 5.83566C16.7484 5.95152 16.8404 6.08911 16.9032 6.24055C16.966 6.392 16.9983 6.55434 16.9983 6.71828C16.9983 6.88222 16.966 7.04456 16.9032 7.196C16.8404 7.34745 16.7484 7.48504 16.6324 7.6009L11.2806 12.959L5.04297 12.959L5.04297 6.7214L10.4011 1.36331C10.6348 1.13096 10.951 1.00054 11.2806 1.00054C11.6101 1.00054 11.9263 1.13096 12.1601 1.36331V1.36331Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M10.3546 11.087L5.98828 6.7207\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M1 9.2168L1.88574 10.1025\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M1 12.959H2.24752\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M10.9805 12.959H13.4755\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconPlay = (\n  <svg width=\"10\" height=\"12\" viewBox=\"0 0 10 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 1L8.6 6L1 11V1Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n","import React, { useState } from \"react\";\n\nimport { connect } from 'react-redux';\nimport { Notation } from 'react-abc';\n\nimport { fetchDeleteTextComment } from '../TextComment/network';\nimport { iconTrash } from '../icons';\n\nimport styles from './ABCNotationDisplay.module.css';\n\n\nfunction ABCNotationDisplay(props) {\n\n  /*\n   * \n   */\n  const abcNotationUuid = props.textCommentUuid,  // yes\n        abcNotation = props.textCommentMap[abcNotationUuid];  // yes\n\n  const [hovering, setHovering] = useState(false);\n\n  /*\n   * When the mouse enters the area, show the contextual buttons.\n   */\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  /*\n   * When the mouse leaves the area, hide the contextual buttons.\n   */\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  /*\n   * Deletes a music notation graphic.\n   *\n   * NOTE: ABCNotation is a proxy model of TextComment. Everything underneath\n   * the hood runs inside TextComment.\n   */\n  const deleteAbcNotation = async function() {\n    const responseJson = await fetchDeleteTextComment(abcNotationUuid);\n    props.dispatch(responseJson.redux);\n  }\n\n  if(!abcNotation) {\n    return (\n      <div className={styles.ABCNotationDisplayContainer}>\n        <div className={styles.ABCNotationDisplayDeleted}>\n          <p>Redacted</p>\n        </div>\n      </div>\n    );\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.ABCNotationDisplayContainer}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n\n      <div className={styles.HoverBuffer}>\n      </div>\n\n      <div className={styles.ABCNotationDisplay}>\n        <Notation notation={abcNotation.text}\n                  engraverParams={{ staffwidth: 278 }} />\n\n        {hovering &&\n          <div className={styles.HoverContainer}>\n            <button type=\"button\" onClick={deleteAbcNotation}>\n              {iconTrash}\n            </button>\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  textCommentMap: state.textCommentMap,\n});\n\n\nexport default connect(mapStateToProps)(ABCNotationDisplay);\n","export const FORMAT_TEXT = 'text';\nexport const FORMAT_ABC_NOTATION = 'abc_notation';\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\n\nimport { Notation } from 'react-abc';\nimport { connect } from 'react-redux';\n\nimport { fetchTextCommentCreate } from './../network';\nimport { iconBack } from './../../../icons';\nimport { FORMAT_ABC_NOTATION } from '../constants';\n\nimport styles from './ABCNotationCompose.module.css';\n\n\nfunction ABCNotationCompose(props) {\n\n  /*\n   * \n   */\n  const textCommentTrackUuid = props.textCommentTrackUuid,\n        textCommentTimestamp = props.textCommentTimestamp,\n        isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [text, setText] = useState('');\n\n  /*\n   * When a user submits a new comment.\n   */\n  const createABCNotation = async function() {\n    setIsDisabled(true);\n\n    const responseJson = await fetchTextCommentCreate(\n      text, FORMAT_ABC_NOTATION, textCommentTrackUuid, textCommentTimestamp\n    );\n    props.dispatch(responseJson.redux);\n\n    closeModal();\n    setText('');\n    setIsDisabled(false);\n  }\n\n  /*\n   * Update the text on text change so the ABC Notation rendering can\n   * re-render.\n   */\n  const handleTextChange = function(e) {\n    setText(e.target.value);\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n      <button className={styles.CloseModal}\n              onClick={closeModal}\n              disabled={isDisabled}>\n        {iconBack}\n      </button>\n\n      <div className={styles.ContentContainer}>\n        <div className={styles.NotationContainer}>\n          <h4>\n            Notation\n          </h4>\n          <textarea type=\"text\"\n                    name=\"text\"\n                    placeholder=\"text\"\n                    value={text}\n                    spellCheck=\"false\"\n                    onChange={handleTextChange}\n                    disabled={isDisabled} />\n        </div>\n\n        <div className={styles.RenderingContainer}>\n          <h4>\n            Rendering\n          </h4>\n          <div className={styles.RenderingWrapper}>\n            <Notation notation={text}\n                      engraverParams={{ staffwidth: 278 }}/>\n          </div>\n          <button onClick={createABCNotation}\n                  disabled={isDisabled}>\n            Post\n          </button>\n        </div>\n      </div>\n\n    </Modal>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ABCNotationCompose);\n","import {\n  ENDPOINT_VOICE_RECORDING_CREATE,\n  ENDPOINT_VOICE_RECORDING_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Creates a voice recording.\n */\nexport const fetchCreateVoiceRecording = async (\n  audioFile, transcriptData, transcriptFinal, voiceRecordingTimestamp\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_CREATE,\n    { audioFile, transcriptData, transcriptFinal, voiceRecordingTimestamp},\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Deletes (archives on the DB level) a voice recording.\n */\nexport const fetchDeleteVoiceRecording = async (voiceRecordingUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_DELETE,\n    { voiceRecordingUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useState, useEffect } from \"react\";\n\nimport { connect } from 'react-redux';\n\nimport { iconTrash } from '../icons';\n\nimport styles from './VoiceRecording.module.css';\nimport { getPositionMilliseconds } from '../../PlaybackApp/utils';\nimport { fetchDeleteVoiceRecording } from './network';\n\n\nfunction VoiceRecording(props) {\n\n  /*\n   * \n   */\n  const voiceRecordingUuid = props.voiceRecordingUuid,\n        voiceRecording = props.voiceRecordingMap[voiceRecordingUuid],\n        stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const [hovering, setHovering] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  /*\n   * When the mouse enters the area, show the contextual buttons.\n   */\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  /*\n   * When the mouse leaves the area, hide the contextual buttons.\n   */\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  /*\n   * Delete a voice recording.\n   */\n  const handleDelete = async function() {\n    const responseJson = await fetchDeleteVoiceRecording(voiceRecordingUuid);\n    props.dispatch(responseJson.redux);\n  }\n\n  useEffect(function() {\n    if(isPlaying) {\n      return;\n    }\n\n    setIsPlaying(true);\n    if(nowPlaying.status !== \"played\" || voiceRecording?.created) {\n      return;\n    }\n\n    const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt),\n          position = arr[0],\n          withinContext = (\n            voiceRecording.timestampMilliseconds >= position - 2000 &&\n            voiceRecording.timestampMilliseconds <= position + 2000\n          );\n    if(!withinContext) {\n      return;\n    }\n\n    let audio = new Audio(voiceRecording.audioUrl);\n    audio.play();\n  // eslint-disable-next-line\n  }, [isPlaying])\n\n  if(!voiceRecording) {\n    return (\n      <div className={styles.VoiceRecordingContainer}>\n        <div className={styles.VoiceRecordingDeleted}>\n          <p>Redacted</p>\n        </div>\n      </div>\n    );\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.VoiceRecordingContainer}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n\n      <div className={styles.HoverBuffer}>\n      </div>\n\n      <div className={styles.VoiceRecording}>\n        <p>\n          {\n            voiceRecording.transcriptFinal === 'null' ?\n              '<transcript not available>' :\n              voiceRecording.transcriptFinal\n          }\n        </p>\n\n        {hovering &&\n          <div className={styles.HoverContainer}>\n            <button type=\"button\" onClick={handleDelete}>\n              {iconTrash}\n            </button>\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  queueMap: state.queueMap,\n  voiceRecordingMap: state.voiceRecordingMap,\n});\n\n\nexport default connect(mapStateToProps)(VoiceRecording);\n","export const STYLE_BOLD = 'bold';\nexport const STYLE_ITALICIZE = 'italicize';\nexport const STYLE_STRIKETHROUGH = 'strikethrough';\nexport const STYLE_HIGHLIGHT = 'highlight';\n","import {\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Creates a style modification for a text comment.\n */\nexport const fetchCreateTextCommentModification = async (\n  textCommentUuid, style, anchorOffset, focusOffset\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n    { textCommentUuid, style, anchorOffset, focusOffset },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useRef, useState } from \"react\";\n\nimport { connect } from 'react-redux';\nimport Popover from 'react-text-selection-popover';\n\nimport styles from './NotableText.module.css';\nimport {\n  STYLE_BOLD,\n  STYLE_ITALICIZE,\n  STYLE_STRIKETHROUGH,\n  STYLE_HIGHLIGHT,\n} from './constants';\nimport { fetchCreateTextCommentModification } from './network';\n\n\nfunction NotableText(props) {\n\n  /*\n   * \n   */\n  const textCommentUuid = props.textCommentUuid,\n        textComment = props.textCommentMap[textCommentUuid];\n\n  const selectableRef = useRef(null);\n\n  const [selectableIsShowable, setSelectableIsShowable] = useState(true);\n  const [anchorOffset, setAnchorOffset] = useState(null);\n  const [focusOffset, setFocusOffset] = useState(null);\n\n  /*\n   * When the user highlights part of the comment.\n   */\n  const handleNotation = async function(style) {\n    const responseJson = await fetchCreateTextCommentModification(\n      textCommentUuid,\n      style,\n      anchorOffset,\n      focusOffset,\n    );\n    props.dispatch(responseJson.redux)\n    setSelectableIsShowable(false);\n  }\n\n  /*\n   * Called everytime the text selection changes.\n   */\n  const onTextSelect = async function() {\n    const selection = window.getSelection();\n\n    // NOTE: anchor is where the user starts selecting text, focus is the end\n    //       of the selection.\n    let anchorValue = parseInt(selection.anchorNode.parentNode.getAttribute('offset'));\n    let focusValue = parseInt(selection.focusNode.parentNode.getAttribute('offset'));\n\n    // NOTE: there needs to be a slight adjustment of these values.\n    if(anchorValue < focusValue) {\n      focusValue += 1;\n    } else {\n      anchorValue += 1;\n    }\n\n    setSelectableIsShowable(true);\n    setAnchorOffset(anchorValue);\n    setFocusOffset(focusValue);\n  }\n\n  /*\n   * Called when there is no more text being selected.\n   */\n  const onTextUnselect = async function() {\n    setSelectableIsShowable(false);\n    setAnchorOffset(null);\n    setFocusOffset(null);\n  }\n\n  /*\n   * When rendering a text comment, the text has to be displayed along with all\n   * of its annotations. Here the comment string is spliced into many\n   * substrings. If a substring has an accompanying modification, then Rough\n   * Notation is used to display the underline, strike-through, or highlight.\n   */\n  const renderTextComment = function() {\n    const textCommentText = textComment.text,\n          modifications = textComment.modifications;\n\n    // Initializes an array of empty sets.\n    const styles = [];\n    for(let i=0; i< textCommentText.length; i++) {\n      styles[i] = new Set();\n    }\n\n    // Adds styles to each set.\n    for(let i=0; i < modifications.length; i++) {\n      const modification = modifications[i];\n\n      for(let j=modification.startPtr; j < modification.endPtr; j++) {\n        styles[j].add(modification.style);\n      }\n    }\n\n    // Generate the comment\n    let textCommentHtml = <></>\n    for(let i=0; i < styles.length; i++) {\n      const char = textCommentText[i],\n            style = styles[i];\n\n      const stylesObj = {};\n      if(style.has(STYLE_BOLD)) {\n        stylesObj['fontWeight'] = 'bold';\n      }\n      if(style.has(STYLE_ITALICIZE)) {\n        stylesObj['fontStyle'] = 'italic';\n      }\n      if(style.has(STYLE_STRIKETHROUGH)) {\n        stylesObj['textDecoration'] = 'line-through';\n      }\n      if(style.has(STYLE_HIGHLIGHT)) {\n        stylesObj['backgroundColor'] = '#FFF960';\n      }\n\n      textCommentHtml = <>\n        {textCommentHtml}\n        <span offset={i} style={stylesObj}>\n          {char}\n        </span>\n      </>\n    }\n\n    return textCommentHtml;\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.NotableText} style={{color: 'black'}}>\n      <p ref={selectableRef}>\n        {renderTextComment()}\n      </p>\n\n      <Popover selectionRef={selectableRef} onTextSelect={onTextSelect} onTextUnselect={onTextUnselect} isOpen={selectableIsShowable}>\n        <div className={styles.Popover}>\n          <button type=\"button\"\n                  onClick={async () => { await handleNotation(STYLE_BOLD); }}>\n            <span style={{fontWeight: \"bold\"}}>B</span>\n          </button>\n          <button type=\"button\"\n                  onClick={async () => { await handleNotation(STYLE_ITALICIZE); }}>\n            <span style={{fontStyle: \"italic\"}}>i</span>\n          </button>\n          <button type=\"button\"\n                  onClick={async () => { await handleNotation(STYLE_STRIKETHROUGH); }}>\n            <span style={{textDecoration: \"line-through\"}}>S</span>\n          </button>\n          <button type=\"button\"\n                  onClick={async () => { await handleNotation(STYLE_HIGHLIGHT); }}>\n            <span style={{backgroundColor: \"#FFF960\"}}>H</span>\n          </button>\n        </div>\n      </Popover>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  textCommentMap: state.textCommentMap,\n});\n\n\nexport default connect(mapStateToProps)(NotableText);\n","import React, { useState } from \"react\";\n\nimport { connect } from 'react-redux';\n\nimport NotableText from '../NotableText/NotableText';\nimport { iconTrash, iconErase, iconPlay } from '../icons';\n\nimport styles from './TextComment.module.css';\nimport {\n  fetchDeleteTextComment,\n  fetchListDeleteTextCommentModifications,\n} from './network';\n\n\nfunction TextComment(props) {\n\n  /*\n   * \n   */\n  const textCommentUuid = props.textCommentUuid,\n        textComment = props.textCommentMap[textCommentUuid],\n        stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid],\n        nowPlayingTrackUuid = nowPlaying?.track?.uuid;\n\n  const [hovering, setHovering] = useState(false);\n\n  /*\n   * When the mouse enters the area, show the contextual buttons.\n   */\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  /*\n   * When the mouse leaves the area, hide the contextual buttons.\n   */\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  /*\n   * Deletes a text comment.\n   */\n  const deleteTextComment = async function() {\n    const responseJson = await fetchDeleteTextComment(textCommentUuid);\n    props.dispatch(responseJson.redux);\n  }\n\n  /*\n   * Clears all styled modifications on this text comment.\n   */\n  const clearModifications = async function() {\n    const responseJson = await fetchListDeleteTextCommentModifications(textCommentUuid);\n    await props.dispatch(responseJson.redux);\n  }\n\n  const handleSeek = function() {\n    if(nowPlaying.status === 'paused') {\n      props.playbackControls.play(textComment.timestampMilliseconds);\n    } else {\n      const action = {\n        name: \"seek\",\n        timestampMilliseconds: textComment.timestampMilliseconds,\n        status: \"kickoff\",\n        fake: false,\n      };\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: { action },\n      });\n    }\n  }\n\n  if(!textComment) {\n    return (\n      <div className={styles.TextCommentContainer}>\n\n        <div className={styles.TextCommentDeleted}>\n          <p>Redacted</p>\n        </div>\n      </div>\n    );\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.TextCommentContainer}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n\n      <div className={styles.HoverBuffer}>\n      </div>\n\n      <div className={styles.TextComment}>\n        <NotableText textCommentUuid={textCommentUuid}></NotableText>\n\n        {hovering &&\n          <div className={styles.HoverContainer}>\n            <button type=\"button\" onClick={deleteTextComment}>\n              {iconTrash}\n            </button>\n\n            <button type=\"button\" onClick={clearModifications}>\n              {iconErase}\n            </button>\n\n            {textComment.trackUuid === nowPlayingTrackUuid &&\n              <button type=\"button\" onClick={handleSeek}>\n                {iconPlay}\n              </button>\n            }\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  queueMap: state.queueMap,\n  textCommentMap: state.textCommentMap,\n});\n\n\nexport default connect(mapStateToProps)(TextComment);\n","import React from \"react\";\n\nimport { connect } from 'react-redux';\n\nimport styles from './SystemAction.module.css';\n\n\nfunction SystemAction(props) {\n\n  /*\n   * \n   */\n  const systemAction = props.data;\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.SystemActionContainer}>\n\n      <div className={styles.SystemAction}>\n        <p>\n          Playback {systemAction.action}.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  queueMap: state.queueMap,\n});\n\n\nexport default connect(mapStateToProps)(SystemAction);\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport { connect } from 'react-redux';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';\n\nimport ABCNotationDisplay from './ABCNotationDisplay/ABCNotationDisplay';\nimport ABCNotationCompose from './ABCNotationCompose/ABCNotationCompose';\nimport VoiceRecording from './VoiceRecording/VoiceRecording';\nimport { getPositionMilliseconds } from '../PlaybackApp/utils';\nimport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING, CLASS_SYSTEM_ACTION } from '../../config/model';\nimport {\n  SERVICE_YOUTUBE,\n} from '../../config/services';\n\nimport styles from './FeedApp.module.css';\nimport { fetchTextCommentCreate } from './network';\nimport { FORMAT_TEXT, FORMAT_ABC_NOTATION } from './constants';\nimport { fetchCreateVoiceRecording } from './VoiceRecording/network';\nimport TextComment from './TextComment/TextComment';\nimport SystemAction from './SystemAction/SystemAction';\n\n\nfunction FeedApp(props) {\n\n  /*\n   * \n   */\n  const feedApp = props.feedApp,\n        feed = feedApp.feed,\n        stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const [textCommentText, setTextCommentText] = useState('');\n  const [textCommentTrackUuid, setTextCommentTrackUuid] = useState(undefined);\n  const [textCommentTimestamp, setTextCommentTimestamp] = useState(undefined);\n\n  const [isRecording, setIsRecording] = useState(false);\n  const [recorder] = useState(new MicRecorder({ bitRate: 320 }));\n\n  // Modal displays ABCNotationCompose\n  const [showModal, setShowModal] = useState(false);\n\n  const contentContainer = useRef();\n\n  /*\n   * Opens the modal, showing ABCNotationCompose.\n   */\n  const openModal = function() {\n    const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt),\n          position = arr[0];\n    setTextCommentTrackUuid(nowPlaying.track.uuid);\n    setTextCommentTimestamp(position);\n    setShowModal(true);\n  }\n\n  /*\n   * Closes the modal.\n   */\n  const closeModal = function() {\n    setTextCommentTrackUuid(undefined);\n    setTextCommentTimestamp(undefined);\n    setShowModal(false);\n  }\n\n  /*\n   * When a user is typing a text comment.\n   */\n  const handleTextChange = function(e) {\n    setTextCommentText(e.target.value);\n    if(textCommentTrackUuid && textCommentTimestamp) {\n      return;\n    }\n    const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt),\n          position = arr[0];\n    setTextCommentTimestamp(position);\n    setTextCommentTrackUuid(nowPlaying.track.uuid);\n  }\n\n  /*\n   * When a user submits a new comment.\n   */\n  const createTextComment = async function(e) {\n    e.preventDefault();\n    const responseJson = await fetchTextCommentCreate(\n      textCommentText, FORMAT_TEXT, textCommentTrackUuid, textCommentTimestamp\n    );\n\n    props.dispatch(responseJson.redux);\n    setTextCommentTimestamp(undefined);\n    setTextCommentTrackUuid(undefined);\n    setTextCommentText('');\n  }\n\n  /*\n   * ...\n   */\n\n  const {\n    transcript,\n    resetTranscript,\n    browserSupportsSpeechRecognition\n  } = useSpeechRecognition();\n\n  const handleRecord = function() {\n    if(!isRecording) {\n      recorder.start();\n      if(browserSupportsSpeechRecognition) {\n        SpeechRecognition.startListening({ continuous: true });\n      }\n      setIsRecording(true);\n      return;\n    }\n\n    if(browserSupportsSpeechRecognition) {\n      SpeechRecognition.stopListening();\n    }\n\n    recorder.stop()\n      .getMp3().then(([buffer, blob]) => {\n        (async function () {\n          const file = new File(buffer, 'voice.mp3', {\n            type: blob.type,\n            lastModified: Date.now(),\n          });\n\n          const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt),\n                position = arr[0];\n\n          const responseJson = await fetchCreateVoiceRecording(file, JSON.stringify([]), transcript, position);\n          props.dispatch(responseJson.redux);\n\n          if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n            resetTranscript();\n          }\n        })()\n      });\n\n    setIsRecording(false);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // REGENERATE THE FEED\n  useEffect(() => {\n\n    const containerRect = contentContainer.current.getBoundingClientRect();\n    props.dispatch({\n      type: \"feedApp/setContentContainer\",\n      payload: { contentContainer: containerRect },\n    });\n\n    const periodicTask = setInterval(() => {\n      props.dispatch({ type: \"feed/update\" });\n    }, 50);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n\n  // eslint-disable-next-line\n  }, []);\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.FeedApp}>\n\n      <ABCNotationCompose textCommentTrackUuid={textCommentTrackUuid}\n                          textCommentTimestamp={textCommentTimestamp}\n                          isOpen={showModal}\n                          closeModal={closeModal} />\n\n      <div className={styles.ContentContainer}>\n        <div ref={contentContainer} className={styles.ImageContainer}>\n          {nowPlaying?.track?.service !== SERVICE_YOUTUBE &&\n            <img alt=\"\" src={nowPlaying?.track?.imageUrl} />\n          }\n        </div>\n        <h5>\n          {nowPlaying?.track?.name}\n        </h5>\n        <h6>\n          {nowPlaying?.track?.artistName}\n        </h6>\n      </div>\n\n      <div className={styles.FeedWrapper}>\n        <div className={styles.Feed}>\n          {feed.map((value, index) => {\n            if(value.class === CLASS_TEXT_COMMENT) {\n              if(value.format === FORMAT_TEXT) {\n                return <TextComment key={index} textCommentUuid={value.uuid} playbackControls={props.playbackControls} />;\n              } else if(value.format === FORMAT_ABC_NOTATION) {\n                return <ABCNotationDisplay key={index} textCommentUuid={value.uuid} playbackControls={props.playbackControls} />;\n              }\n            } else if(value.class === CLASS_VOICE_RECORDING) {\n              return <VoiceRecording key={index} voiceRecordingUuid={value.uuid} playbackControls={props.playbackControls} />\n            } else if(value.class === CLASS_SYSTEM_ACTION) {\n              return <SystemAction key={index} data={value} playbackControls={props.playbackControls} />\n            }\n            return <></>;\n          })}\n        </div>\n\n        <form className={styles.ComposeBar}\n              onSubmit={async (e) => { await createTextComment(e); }}>\n          <button className={styles.NotationButton}\n                  type=\"button\"\n                  onClick={openModal}\n                  disabled={nowPlaying?.status !== \"played\"} >\n            <div></div>\n          </button>\n          <button className={styles.RecordButton}\n                  type=\"button\"\n                  onClick={handleRecord}\n                  disabled={nowPlaying?.status !== \"played\"} >\n            <div></div>\n          </button>\n          <input type=\"text\"\n                 name=\"text\"\n                 value={textCommentText}\n                 onChange={handleTextChange}\n                 autoComplete=\"off\"\n                 disabled={nowPlaying?.status !== \"played\"} />\n          <button className={styles.SubmitButton}\n                  type=\"submit\"\n                  disabled={nowPlaying?.status !== \"played\"} >\n            Send\n          </button>\n        </form>\n      </div>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    queueMap: state.queueMap,\n    feedApp: state.feedApp,\n});\n\n\nexport default connect(mapStateToProps)(FeedApp);\n","const CLASS_TEXT_COMMENT = 'TextComment'\nconst CLASS_VOICE_RECORDING = 'VoiceRecording'\nconst CLASS_SYSTEM_ACTION = 'SystemAction'\n\nexport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING, CLASS_SYSTEM_ACTION }\n","import {\n  ENDPOINT_MARKER_CREATE,\n  ENDPOINT_MARKER_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Creates a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerCreate = async (trackUuid, timestampMilliseconds, queueUuid, name) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_CREATE,\n    { trackUuid, timestampMilliseconds, queueUuid, name }\n  );\n  return await response.json();\n};\n\n\n/*\n * Deletes a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerDelete = async (markerUuid, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_DELETE,\n    { markerUuid, queueUuid }\n  );\n  return await response.json();\n};\n","import {\n  ENDPOINT_QUEUE_INTERVAL_CREATE,\n  ENDPOINT_QUEUE_INTERVAL_DELETE,\n  ENDPOINT_QUEUE_INTERVAL_STOP,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalCreate = async (queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, purpose, repeatCount, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_CREATE,\n    { queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, purpose, repeatCount, parentQueueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalStop = async (queueUuid, markerUuid, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_STOP,\n    { queueUuid, markerUuid, parentQueueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalDelete = async (queueIntervalUuid, queueUuid, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_DELETE,\n    { queueIntervalUuid, queueUuid, parentQueueUuid }\n  );\n  return await response.json();\n};\n","export const iconForward1000 = (\n  <svg width=\"23\" height=\"21\" viewBox=\"0 0 23 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M21.4202 2.04883V8.14679H15.3223\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M18.8691 13.2272C18.2085 15.0971 16.958 16.7017 15.306 17.7991C13.6541 18.8965 11.6903 19.4273 9.71042 19.3115C7.73057 19.1957 5.842 18.4395 4.3293 17.157C2.8166 15.8744 1.76172 14.135 1.32363 12.2007C0.885529 10.2665 1.08795 8.24227 1.90039 6.43308C2.71283 4.6239 4.09126 3.12778 5.82798 2.17017C7.56469 1.21256 9.5656 0.845346 11.5292 1.12386C13.4927 1.40238 15.3126 2.31154 16.7145 3.71434L21.4201 8.14553\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M9.408 12.36V13H6.536V12.36H7.672V9.24C7.61333 9.32 7.50667 9.41067 7.352 9.512C7.19733 9.608 7.02933 9.69067 6.848 9.76C6.66667 9.82933 6.50667 9.864 6.368 9.864V9.192C6.48533 9.192 6.61333 9.16 6.752 9.096C6.896 9.02667 7.03467 8.94667 7.168 8.856C7.30133 8.76533 7.41333 8.68 7.504 8.6C7.6 8.52 7.656 8.464 7.672 8.432H8.392V12.36H9.408ZM11.6016 13.08C11.2549 13.08 10.9296 13.024 10.6256 12.912C10.3216 12.7947 10.0602 12.6213 9.84156 12.392L10.1136 11.896C10.3536 12.12 10.5936 12.28 10.8336 12.376C11.0736 12.472 11.3189 12.52 11.5696 12.52C11.8576 12.52 12.0922 12.4667 12.2736 12.36C12.4549 12.248 12.5456 12.0853 12.5456 11.872C12.5456 11.7173 12.4976 11.6027 12.4016 11.528C12.3109 11.4533 12.1802 11.392 12.0096 11.344C11.8389 11.2907 11.6362 11.232 11.4016 11.168C10.9696 11.0453 10.6389 10.9013 10.4096 10.736C10.1856 10.5653 10.0736 10.3173 10.0736 9.992C10.0736 9.59733 10.2229 9.29333 10.5216 9.08C10.8256 8.86133 11.2122 8.752 11.6816 8.752C12.3109 8.752 12.8069 8.94133 13.1696 9.32L12.8496 9.808C12.5242 9.472 12.1216 9.304 11.6416 9.304C11.4976 9.304 11.3562 9.32267 11.2176 9.36C11.0789 9.392 10.9642 9.45333 10.8736 9.544C10.7829 9.62933 10.7376 9.752 10.7376 9.912C10.7376 10.1093 10.8176 10.2507 10.9776 10.336C11.1376 10.4213 11.3722 10.5093 11.6816 10.6C11.9962 10.6907 12.2682 10.7813 12.4976 10.872C12.7322 10.9627 12.9136 11.08 13.0416 11.224C13.1696 11.368 13.2336 11.568 13.2336 11.824C13.2336 12.2187 13.0842 12.528 12.7856 12.752C12.4869 12.9707 12.0922 13.08 11.6016 13.08Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconForward100 = (\n  <svg width=\"24\" height=\"21\" viewBox=\"0 0 24 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M22.1605 2.04883V8.14679H16.0625\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M19.6094 13.2272C18.9487 15.0971 17.6982 16.7017 16.0463 17.7991C14.3944 18.8965 12.4305 19.4273 10.4507 19.3115C8.47081 19.1957 6.58224 18.4395 5.06954 17.157C3.55683 15.8744 2.50196 14.135 2.06386 12.2007C1.62576 10.2665 1.82819 8.24227 2.64062 6.43308C3.45306 4.6239 4.8315 3.12778 6.56821 2.17017C8.30493 1.21256 10.3058 0.845346 12.2694 1.12386C14.233 1.40238 16.0528 2.31154 17.4548 3.71434L22.1604 8.14553\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M6.512 13V12.104H7.104V13H6.512ZM11.0252 12.36V13H8.15319V12.36H9.28919V9.24C9.23052 9.32 9.12385 9.41067 8.96919 9.512C8.81452 9.608 8.64652 9.69067 8.46519 9.76C8.28385 9.82933 8.12385 9.864 7.98519 9.864V9.192C8.10252 9.192 8.23052 9.16 8.36919 9.096C8.51319 9.02667 8.65185 8.94667 8.78519 8.856C8.91852 8.76533 9.03052 8.68 9.12119 8.6C9.21719 8.52 9.27319 8.464 9.28919 8.432H10.0092V12.36H11.0252ZM13.2188 13.08C12.8721 13.08 12.5468 13.024 12.2428 12.912C11.9388 12.7947 11.6774 12.6213 11.4588 12.392L11.7308 11.896C11.9708 12.12 12.2108 12.28 12.4508 12.376C12.6908 12.472 12.9361 12.52 13.1868 12.52C13.4748 12.52 13.7094 12.4667 13.8908 12.36C14.0721 12.248 14.1628 12.0853 14.1628 11.872C14.1628 11.7173 14.1148 11.6027 14.0188 11.528C13.9281 11.4533 13.7974 11.392 13.6268 11.344C13.4561 11.2907 13.2534 11.232 13.0188 11.168C12.5868 11.0453 12.2561 10.9013 12.0268 10.736C11.8028 10.5653 11.6908 10.3173 11.6908 9.992C11.6908 9.59733 11.8401 9.29333 12.1388 9.08C12.4428 8.86133 12.8294 8.752 13.2988 8.752C13.9281 8.752 14.4241 8.94133 14.7868 9.32L14.4668 9.808C14.1414 9.472 13.7388 9.304 13.2588 9.304C13.1148 9.304 12.9734 9.32267 12.8348 9.36C12.6961 9.392 12.5814 9.45333 12.4908 9.544C12.4001 9.62933 12.3548 9.752 12.3548 9.912C12.3548 10.1093 12.4348 10.2507 12.5948 10.336C12.7548 10.4213 12.9894 10.5093 13.2988 10.6C13.6134 10.6907 13.8854 10.7813 14.1148 10.872C14.3494 10.9627 14.5308 11.08 14.6588 11.224C14.7868 11.368 14.8508 11.568 14.8508 11.824C14.8508 12.2187 14.7014 12.528 14.4028 12.752C14.1041 12.9707 13.7094 13.08 13.2188 13.08Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconBackward100 = (\n  <svg width=\"24\" height=\"21\" viewBox=\"0 0 24 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.83953 2.04883V8.14679H7.9375\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.39063 13.2272C5.05128 15.0971 6.30179 16.7017 7.95372 17.7991C9.60565 18.8965 11.5695 19.4273 13.5493 19.3115C15.5292 19.1957 17.4178 18.4395 18.9305 17.157C20.4432 15.8744 21.498 14.135 21.9361 12.2007C22.3742 10.2665 22.1718 8.24227 21.3594 6.43308C20.5469 4.6239 19.1685 3.12778 17.4318 2.17017C15.6951 1.21256 13.6942 0.845346 11.7306 1.12386C9.76702 1.40238 7.94715 2.31154 6.54524 3.71434L1.83965 8.14553\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M9.512 13V12.104H10.104V13H9.512ZM14.0252 12.36V13H11.1532V12.36H12.2892V9.24C12.2305 9.32 12.1239 9.41067 11.9692 9.512C11.8145 9.608 11.6465 9.69067 11.4652 9.76C11.2839 9.82933 11.1239 9.864 10.9852 9.864V9.192C11.1025 9.192 11.2305 9.16 11.3692 9.096C11.5132 9.02667 11.6519 8.94667 11.7852 8.856C11.9185 8.76533 12.0305 8.68 12.1212 8.6C12.2172 8.52 12.2732 8.464 12.2892 8.432H13.0092V12.36H14.0252ZM16.2188 13.08C15.8721 13.08 15.5468 13.024 15.2428 12.912C14.9388 12.7947 14.6774 12.6213 14.4588 12.392L14.7308 11.896C14.9708 12.12 15.2108 12.28 15.4508 12.376C15.6908 12.472 15.9361 12.52 16.1868 12.52C16.4748 12.52 16.7094 12.4667 16.8908 12.36C17.0721 12.248 17.1628 12.0853 17.1628 11.872C17.1628 11.7173 17.1148 11.6027 17.0188 11.528C16.9281 11.4533 16.7974 11.392 16.6268 11.344C16.4561 11.2907 16.2534 11.232 16.0188 11.168C15.5868 11.0453 15.2561 10.9013 15.0268 10.736C14.8028 10.5653 14.6908 10.3173 14.6908 9.992C14.6908 9.59733 14.8401 9.29333 15.1388 9.08C15.4428 8.86133 15.8294 8.752 16.2988 8.752C16.9281 8.752 17.4241 8.94133 17.7868 9.32L17.4668 9.808C17.1414 9.472 16.7388 9.304 16.2588 9.304C16.1148 9.304 15.9734 9.32267 15.8348 9.36C15.6961 9.392 15.5814 9.45333 15.4908 9.544C15.4001 9.62933 15.3548 9.752 15.3548 9.912C15.3548 10.1093 15.4348 10.2507 15.5948 10.336C15.7548 10.4213 15.9894 10.5093 16.2988 10.6C16.6134 10.6907 16.8854 10.7813 17.1148 10.872C17.3494 10.9627 17.5308 11.08 17.6588 11.224C17.7868 11.368 17.8508 11.568 17.8508 11.824C17.8508 12.2187 17.7014 12.528 17.4028 12.752C17.1041 12.9707 16.7094 13.08 16.2188 13.08Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconBackward1000 = (\n  <svg width=\"23\" height=\"21\" viewBox=\"0 0 23 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.57977 2.04883V8.14679H7.67773\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.13086 13.2272C4.79151 15.0971 6.04202 16.7017 7.69395 17.7991C9.34588 18.8965 11.3097 19.4273 13.2896 19.3115C15.2694 19.1957 17.158 18.4395 18.6707 17.157C20.1834 15.8744 21.2383 14.135 21.6764 12.2007C22.1145 10.2665 21.912 8.24227 21.0996 6.43308C20.2872 4.6239 18.9087 3.12778 17.172 2.17017C15.4353 1.21256 13.4344 0.845346 11.4708 1.12386C9.50725 1.40238 7.68739 2.31154 6.28548 3.71434L1.57988 8.14553\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.408 12.36V13H10.536V12.36H11.672V9.24C11.6133 9.32 11.5067 9.41067 11.352 9.512C11.1973 9.608 11.0293 9.69067 10.848 9.76C10.6667 9.82933 10.5067 9.864 10.368 9.864V9.192C10.4853 9.192 10.6133 9.16 10.752 9.096C10.896 9.02667 11.0347 8.94667 11.168 8.856C11.3013 8.76533 11.4133 8.68 11.504 8.6C11.6 8.52 11.656 8.464 11.672 8.432H12.392V12.36H13.408ZM15.6016 13.08C15.2549 13.08 14.9296 13.024 14.6256 12.912C14.3216 12.7947 14.0602 12.6213 13.8416 12.392L14.1136 11.896C14.3536 12.12 14.5936 12.28 14.8336 12.376C15.0736 12.472 15.3189 12.52 15.5696 12.52C15.8576 12.52 16.0922 12.4667 16.2736 12.36C16.4549 12.248 16.5456 12.0853 16.5456 11.872C16.5456 11.7173 16.4976 11.6027 16.4016 11.528C16.3109 11.4533 16.1802 11.392 16.0096 11.344C15.8389 11.2907 15.6362 11.232 15.4016 11.168C14.9696 11.0453 14.6389 10.9013 14.4096 10.736C14.1856 10.5653 14.0736 10.3173 14.0736 9.992C14.0736 9.59733 14.2229 9.29333 14.5216 9.08C14.8256 8.86133 15.2122 8.752 15.6816 8.752C16.3109 8.752 16.8069 8.94133 17.1696 9.32L16.8496 9.808C16.5242 9.472 16.1216 9.304 15.6416 9.304C15.4976 9.304 15.3562 9.32267 15.2176 9.36C15.0789 9.392 14.9642 9.45333 14.8736 9.544C14.7829 9.62933 14.7376 9.752 14.7376 9.912C14.7376 10.1093 14.8176 10.2507 14.9776 10.336C15.1376 10.4213 15.3722 10.5093 15.6816 10.6C15.9962 10.6907 16.2682 10.7813 16.4976 10.872C16.7322 10.9627 16.9136 11.08 17.0416 11.224C17.1696 11.368 17.2336 11.568 17.2336 11.824C17.2336 12.2187 17.0842 12.528 16.7856 12.752C16.4869 12.9707 16.0922 13.08 15.6016 13.08Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconPlay = (\n  <svg width=\"17\" height=\"23\" viewBox=\"0 0 17 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 1L16 11.5L1 22V1Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconPause = (\n  <svg width=\"17\" height=\"23\" viewBox=\"0 0 17 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 1V22M16 22V1\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconMiniCheckboxChecked = (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"1\" y=\"1\" width=\"18\" height=\"18\" stroke=\"#0047FF\" strokeWidth=\"2\"/>\n  <path d=\"M14.6155 6.92188L8.26938 13.845L5.38477 10.6981\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconMiniCheckboxUnchecked = (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"1\" y=\"1\" width=\"18\" height=\"18\" stroke=\"#BCBCBC\" strokeWidth=\"2\"/>\n  </svg>\n);\n","export const iconNextTrack = (\n  <svg width=\"22\" height=\"16\" viewBox=\"0 0 22 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12 15L21 8L12 1V15Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n    <path d=\"M1 15L10 8L1 1V15Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n  </svg>\n);\n\n\nexport const iconPrevTrack = (\n  <svg width=\"22\" height=\"16\" viewBox=\"0 0 22 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 15L1 8L10 1V15Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n    <path d=\"M21 15L12 8L21 1V15Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n  </svg>\n);\n\n\n\nexport const iconMarker = (\n  <svg width=\"9\" height=\"25\" viewBox=\"0 0 9 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 9V5V1\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"square\"/>\n    <path d=\"M8.61782 23.2137C9.05209 23.5549 9.12753 24.1835 8.78632 24.6178C8.4451 25.0521 7.81645 25.1275 7.38218 24.7863L8.61782 23.2137ZM7.38218 24.7863L7.06588 24.5378L8.30153 22.9652L8.61782 23.2137L7.38218 24.7863ZM7.06588 24.5378C2.6048 21.0327 0 15.6734 0 10H2C2 15.0597 4.32302 19.8392 8.30153 22.9652L7.06588 24.5378Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\nexport const iconSmallCircle = (\n  <svg width=\"8\" height=\"8\" viewBox=\"0 0 8 8\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M7 4C7 5.65685 5.65685 7 4 7C2.34315 7 1 5.65685 1 4C1 2.34315 2.34315 1 4 1C5.65685 1 7 2.34315 7 4Z\" fill=\"white\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconTrash = (\n  <svg width=\"15\" height=\"16\" viewBox=\"0 0 15 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 3.80078H2.4H13.6\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.49844 3.8V2.4C4.49844 2.0287 4.64594 1.6726 4.90849 1.41005C5.17104 1.1475 5.52713 1 5.89844 1H8.69844C9.06974 1 9.42584 1.1475 9.68839 1.41005C9.95094 1.6726 10.0984 2.0287 10.0984 2.4V3.8M12.1984 3.8V13.6C12.1984 13.9713 12.0509 14.3274 11.7884 14.5899C11.5258 14.8525 11.1697 15 10.7984 15H3.79844C3.42713 15 3.07104 14.8525 2.80849 14.5899C2.54594 14.3274 2.39844 13.9713 2.39844 13.6V3.8H12.1984Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M5.89844 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M8.69922 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n)\n\nexport const iconPlay = (\n  <svg width=\"10\" height=\"12\" viewBox=\"0 0 10 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 1L8.6 6L1 11V1Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconStop = (\n  <svg width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M1 1H9V3.34315V9H6.65689H1V6.65685V3.34315V1Z\" stroke=\"black\" strokeWidth=\"1.5\"/>\n  </svg>\n);\n\nexport const iconMarkerExtension = (\n  <svg width=\"9\" height=\"15\" viewBox=\"0 0 9 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M8.61782 1.78632C9.05209 1.4451 9.12753 0.81645 8.78632 0.382178C8.4451 -0.0520932 7.81645 -0.127532 7.38218 0.213682L8.61782 1.78632ZM7.38218 0.213682L7.06588 0.4622L8.30153 2.03484L8.61782 1.78632L7.38218 0.213682ZM7.06588 0.4622C2.6048 3.96734 0 9.32662 0 15H2C2 9.94034 4.32302 5.1608 8.30153 2.03484L7.06588 0.4622Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './ChildProgressBar.module.css';\nimport { iconMarker, iconTrash, iconPlay } from '../icons';\nimport { getProgressMilliseconds } from '../utils';\n\n\nfunction ChildProgressBar(props) {\n\n  /*\n   * \n   */\n  const interval = props.interval,\n        duration = props.duration,\n        queue = props.queue,\n        editable = props.editable,\n        allowIntervalPlay = props.allowIntervalPlay,\n        allowIntervalDelete = props.allowIntervalDelete;\n\n  const intervalWidthDuration = interval.endPosition - interval.startPosition,\n        intervalWidth = intervalWidthDuration / duration * 100;\n\n  let cleanedPurpose;\n  cleanedPurpose = interval.purpose.includes('solo') ? 'solo' : interval.purpose;\n  cleanedPurpose = cleanedPurpose.charAt(0).toUpperCase() + cleanedPurpose.slice(1);\n  const progressClass = \"Progress\" + cleanedPurpose;\n\n  const classHoverContainer = \"ProgressHoverContainer\" + cleanedPurpose,\n        classHoverPointer = \"ProgressHoverPointer\" + cleanedPurpose;\n\n  /*\n   * Hovering logic\n   */\n  const [hovering, setHovering] = useState(false);\n\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  const seekToInterval = async function() {\n    const progress = getProgressMilliseconds(queue, interval.startPosition);\n    if(queue.status === 'played') {\n      const action = {\n        name: \"seek\",\n        timestampMilliseconds: progress,\n        status: \"kickoff\",\n        fake: false,\n      };\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: { action },\n      });\n    } else {\n      const action = {\n        name: \"play\",\n        timestampMilliseconds: progress,\n        status: \"kickoff\",\n        fake: false,\n      };\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: { action },\n      });\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles[progressClass]}\n         style={{width: `${intervalWidth}%`}}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n      {editable && hovering &&\n        <div className={styles[classHoverContainer]}>\n          <div className={styles[classHoverPointer]}>\n            {iconMarker}\n          </div>\n\n          <div className={styles.HoverContainer}>\n            <div className={styles.ProgressHoverPurpose}>\n              {interval.purpose}\n            </div>\n            {interval.uuid && allowIntervalDelete &&\n              <button className={styles.ProgressHoverDelete}\n                      onClick={(e) => {props.deleteTrackInterval(interval)}}>\n                {iconTrash}\n              </button>\n            }\n            {allowIntervalPlay && cleanedPurpose !== 'Muted' &&\n              <button className={styles.ProgressHoverDelete}\n                      onClick={seekToInterval}>\n                {iconPlay}\n              </button>\n            }\n          </div>\n        </div>\n      }\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ChildProgressBar);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './ProgressBarMarker.module.css';\nimport { iconTrash, iconPlay, iconMarkerExtension, iconStop } from '../icons';\nimport { getProgressMilliseconds } from '../utils';\nimport { fetchStreamQueueIntervalStop } from '../../TrackDetailApp/Interval/network';\n\n\nfunction ProgressBarMarker(props) {\n\n  const marker = props.marker,\n        queue = props.queue,\n        editable = props.editable,\n        playable = props.playable,\n        stoppable = props.stoppable,\n        forceDisplay = props.forceDisplay,\n        allowMarkerSeek = props.allowMarkerSeek,\n        hoveringEnabled = props.hoveringEnabled;\n\n  const stream = props.stream,\n        playback = props.playback;\n\n  const [hovering, setHovering] = useState(false);\n\n  const classPointer = playable ? \"ProgressBarMarkerPointer\" : \"ProgressBarMarkerPointerGrey\",\n        classPointerExt = playable ? \"ProgressBarMarkerPointerExtension\" : \"ProgressBarMarkerPointerExtensionGrey\";\n\n  /*\n   * ENTER\n   */\n  const onMouseEnter = function() {\n    setHovering(true);\n    props.setMarkerHover(true);\n  }\n\n  /*\n   * LEAVE\n   */\n  const onMouseLeave = function() {\n    setHovering(false);\n    props.setMarkerHover(false);\n  }\n\n  /*\n   * SEEK\n   */\n  const seekToMarker = async function() {\n    const progress = getProgressMilliseconds(queue, marker.timestampMilliseconds);\n    if(queue.status === 'played') {\n      const action = {\n        name: \"seek\",\n        timestampMilliseconds: progress,\n        status: \"kickoff\",\n        fake: !(playback.nowPlayingUuid === stream.nowPlayingUuid),\n      };\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: { action },\n      });\n    } else {\n      const action = {\n        name: \"play\",\n        timestampMilliseconds: progress,\n        status: \"kickoff\",\n        fake: !(playback.nowPlayingUuid === stream.nowPlayingUuid),\n      };\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: { action },\n      });\n    }\n  }\n\n  const stopAtMarker = async function() {\n    const responseJson = await fetchStreamQueueIntervalStop(\n      queue.uuid,\n      marker.uuid,\n      queue.parentUuid,\n    );\n\n    for(const [_type, payloads] of Object.entries(responseJson.redux.payload)) {\n      for(const payload of payloads) {\n        props.dispatch({\n          type: _type,\n          payload: payload,\n        });\n      }\n    }\n  }\n\n  return (\n    <div className={styles.ProgressBarMarker}\n         style={{left: marker.styleLeft}}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n\n      <div className={styles[classPointer]}>\n        {((hovering && hoveringEnabled) || (forceDisplay && !props.markerHover)) &&\n          <div className={styles[classPointerExt]}>\n            {iconMarkerExtension}\n          </div>\n        }\n\n        {((hovering && hoveringEnabled) || (forceDisplay && !props.markerHover)) &&\n          <div className={styles.HoverContainer}>\n\n            {(hovering || forceDisplay) &&\n              <div className={styles.ProgressBarMarkerName}>\n                {marker.name}\n              </div>\n            }\n\n            {hovering && editable &&\n              <button className={styles.Delete}\n                      onClick={(e) => {props.deleteTrackMarker(marker)}}>\n                {iconTrash}\n              </button>\n            }\n\n            {hovering && playable && allowMarkerSeek &&\n              <button className={styles.Play}\n                      onClick={seekToMarker}>\n                {iconPlay}\n              </button>\n            }\n\n            {hovering && stoppable && false &&\n              <button className={styles.Stop}\n                      onClick={stopAtMarker}>\n                {iconStop}\n              </button>\n            }\n          </div>\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  playback: state.playback,\n});\n\n\nexport default connect(mapStateToProps)(ProgressBarMarker);\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport { connect } from 'react-redux';\nimport Draggable from 'react-draggable';\n\nimport styles from './ParentProgressBar.module.css';\nimport { getPositionMilliseconds, getProgressMilliseconds, isPositionValid } from '../utils';\nimport ChildProgressBar from '../ChildProgressBar/ChildProgressBar';\nimport ProgressBarMarker from '../ProgressBarMarker/ProgressBarMarker';\nimport { iconSmallCircle } from '../icons';\n\n\nfunction ParentProgressBar(props) {\n\n  const DISABLE_ANIMATION = -1,\n        ENABLE_ANIMATION = 0;\n\n  const draggableRef = useRef(),\n        progressRef = useRef();\n\n  const [stickyPointerLeftDistance, setStickyPointerLeftDistance] = useState(false);\n  const [dragOffset, setDragOffset] = useState(0);\n\n  const [markerHover, setMarkerHover] = useState(false);\n\n  const queueMap = props.queueMap,\n        stream = props.stream,\n        playback = props.playback,\n        queue = queueMap[playback.nowPlayingUuid],\n        mode = props.mode,\n        allIntervals = queue?.allIntervals || [],\n        duration = queue?.track?.durationMilliseconds || 0,\n        allowMarkerSeek = props.allowMarkerSeek,\n        allowMarkerDelete = props.allowMarkerDelete,\n        allowIntervalPlay = props.allowIntervalPlay,\n        allowIntervalDelete = props.allowIntervalDelete;\n\n  let position, pointerLeftDistance;\n  try {\n    const arr = getPositionMilliseconds(queue, queue.startedAt);\n    position = arr[0];\n    pointerLeftDistance = (position / duration) * 100;\n  } catch (e) {\n    position = 0;\n    pointerLeftDistance = (position / duration) * 100;\n  }\n\n  const markerMap = props.markerMap,\n        markers = (\n          Object.values(markerMap[queue?.track?.uuid] || []).sort((a, b) => {\n            return a.timestampMilliseconds - b.timestampMilliseconds;\n          })\n        );\n\n  let runningMark = 6;\n  for(let i=0; i < markers.length; i++) {\n    let pix = markers[i].timestampMilliseconds / duration * 100;\n    markers[i].styleLeft = `calc(${pix}% - ${runningMark}px)`;\n    runningMark += 2;\n\n    if(mode === \"player\") {\n\n      // Force display contextual marker\n      if(markers[i].timestampMilliseconds < position) {\n        markers[i].forceDisplay = true;\n        if(i !== 0) {\n          markers[i - 1].forceDisplay = false;\n        }\n      } else {\n        markers[i].forceDisplay = false;\n      }\n\n      // Allow \"stop\"\n      if(markers[i].timestampMilliseconds > position + 5000) {\n        markers[i].stoppable = true;\n      } else {\n        markers[i].stoppable = false;\n      }\n    }\n\n    // Change styles for markers that are \"not playable\"\n    for(let j=0; j < queue.allIntervals.length; j++) {\n      const interval = queue.allIntervals[j],\n            notPlayable = (\n              interval.purpose === 'muted' &&\n              interval.startPosition <= markers[i].timestampMilliseconds &&\n              interval.endPosition > markers[i].timestampMilliseconds\n            );\n\n      markers[i].playable = true;\n      if(notPlayable) {\n        markers[i].playable = false;\n\n        // If this is the end of the song, do not allow \"stop\"\n        const playbackIntervals = queue.playbackIntervals,\n              endPosition = playbackIntervals[playbackIntervals.length - 1].endPosition,\n              forceStoppable = (\n                markers[i].timestampMilliseconds === endPosition ||\n                (\n                  interval.startPosition < markers[i].timestampMilliseconds &&\n                  interval.endPosition > markers[i].timestampMilliseconds\n                )\n              );\n        if(forceStoppable) {\n          markers[i].stoppable = false;\n        }\n        break;\n      }\n    }\n  }\n\n  /*\n   *\n   */\n  const handleDragStart = function(e, ui) {\n    setAnimationStatus(DISABLE_ANIMATION);\n    setStickyPointerLeftDistance(pointerLeftDistance);\n  }\n\n  /*\n   *\n   */\n  const handleDragChange = function(e, ui) {\n    // noop\n  }\n\n  /*\n   *\n   */\n  const handleDragStop = async function(e, ui) {\n    const cursorRect = draggableRef.current.getBoundingClientRect(),\n          progressRect = progressRef.current.getBoundingClientRect(),\n          playbackPercent = (cursorRect.left - progressRect.left) / (progressRef.current.offsetWidth - 8),\n          nextPosition = Math.round(duration * playbackPercent);\n\n    const isValid = isPositionValid(queue, nextPosition);\n\n    if(!isValid) {\n      setAnimationStatus(ENABLE_ANIMATION);\n      setDragOffset(ui.x);\n      setStickyPointerLeftDistance(false);\n      return;\n    }\n\n    const nextProgress = getProgressMilliseconds(queue, nextPosition);\n\n    const action = {\n      name: \"seek\",\n      timestampMilliseconds: nextProgress,\n      status: \"kickoff\",\n      fake: !(playback.nowPlayingUuid === stream.nowPlayingUuid),\n    };\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: { action },\n    });\n\n    setDragOffset(ui.x);\n    setAnimationStatus(ENABLE_ANIMATION);\n    setStickyPointerLeftDistance(false);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // REGENERATE THE FEED\n  const [animationStatus, setAnimationStatus] = useState(ENABLE_ANIMATION);\n  const [animationPeriodicTask, setAnimationPeriodicTask] = useState(-1);\n  // eslint-disable-next-line\n  const [counter, setCounter] = useState(0);\n  useEffect(() => {\n\n    if(animationStatus === DISABLE_ANIMATION) {\n      if(animationPeriodicTask !== -1) {\n        clearInterval(animationPeriodicTask);\n      }\n      return;\n    }\n\n    const periodicTask = setInterval(() => {\n      setCounter(prev => prev + 1);\n    }, 1500);\n\n    setAnimationPeriodicTask(periodicTask);\n\n    return () => {\n      clearInterval(animationPeriodicTask);\n    }\n\n  // eslint-disable-next-line\n  }, [animationStatus]);\n\n  if(stickyPointerLeftDistance) {\n    pointerLeftDistance = stickyPointerLeftDistance;\n  }\n\n  return (\n    <div ref={progressRef} className={styles.ParentProgressBar}>\n      <Draggable axis=\"x\"\n                 bounds=\"body\"\n                 nodeRef={draggableRef}\n                 disabled={queue?.status === 'paused'}\n                 onStart={handleDragStart}\n                 onDrag={handleDragChange}\n                 onStop={handleDragStop}>\n        <div ref={draggableRef}\n             className={styles.ProgressPointer}\n             style={{left: `calc(${pointerLeftDistance}% - ${4 + dragOffset}px)`}}>\n          {iconSmallCircle}\n        </div>\n      </Draggable>\n      <div className={styles.ProgressBar}>\n        {  // eslint-disable-next-line\n        allIntervals.map((interval, index) => {\n          return <ChildProgressBar key={interval.uuid || index}\n                                   interval={interval}\n                                   duration={duration}\n                                   queue={queue}\n                                   editable={mode === \"intervals\"}\n                                   playbackControls={props.playbackControls}\n                                   deleteTrackInterval={props.deleteTrackInterval}\n                                   allowIntervalPlay={allowIntervalPlay}\n                                   allowIntervalDelete={allowIntervalDelete}>\n                 </ChildProgressBar>;\n        })}\n      </div>\n      <div className={styles.ProgressMarkerContainer}>\n        {  // eslint-disable-next-line\n        markers.map((marker, index) => {\n          return <ProgressBarMarker key={marker.uuid}\n                                    marker={marker}\n                                    queue={queue}\n                                    forceDisplay={marker.forceDisplay}\n                                    editable={allowMarkerDelete}\n                                    playable={marker.playable}\n                                    stoppable={marker.stoppable}\n                                    playbackControls={props.playbackControls}\n                                    deleteTrackMarker={props.deleteTrackMarker}\n                                    markerHover={markerHover}\n                                    setMarkerHover={setMarkerHover}\n                                    allowMarkerSeek={allowMarkerSeek}\n                                    hoveringEnabled={mode !== \"intervals\"} />;\n        })}\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  markerMap: state.markerMap,\n  queueMap: state.queueMap,\n  playback: state.playback,\n  stream: state.stream,\n});\n\n\nexport default connect(mapStateToProps)(ParentProgressBar);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\nimport {\n  fetchStreamMarkerCreate,\n  fetchStreamMarkerDelete,\n} from './Marker/network';\nimport {\n  fetchStreamQueueIntervalCreate,\n  fetchStreamQueueIntervalDelete,\n} from './Interval/network';\nimport styles from './TrackDetailApp.module.css';\nimport {\n  // eslint-disable-next-line\n  iconForward1000,\n  // eslint-disable-next-line\n  iconForward100,\n  // eslint-disable-next-line\n  iconBackward100,\n  // eslint-disable-next-line\n  iconBackward1000,\n  iconPlay,\n  iconPause,\n  iconMiniCheckboxChecked,\n  iconMiniCheckboxUnchecked,\n} from './icons';\nimport { iconBack } from './../../icons';\nimport ParentProgressBar from '../PlaybackApp/ParentProgressBar/ParentProgressBar';\nimport { getPositionMilliseconds } from '../PlaybackApp/utils';\n\n\nfunction TrackDetailApp(props) {\n\n  const RERENDER = (prev) => prev + 1;\n\n  /*\n   * \n   */\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal,\n        playback = props.playback,\n        queueMap = props.queueMap,\n        markerMap = props.markerMap,\n        nowPlaying = queueMap[playback.nowPlayingUuid];\n\n  ////////////\n  // Markers\n  const markers = Object.values(markerMap[nowPlaying?.track?.uuid] || {}) || [],\n        // Interface which force rerenders the marker UI\n        [rerenderMarkers, updateMarkers] = useState(0),\n        // Create form\n        [formMarkerTimestamp, setFormMarkerTimestamp] = useState(''),\n        [formMarkerName, setFormMarkerName] = useState(''),\n        // Feature flags\n        [allowMarkerSeek, setAllowMarkerSeek] = useState(true),\n        [allowMarkerDelete, setAllowMarkerDelete] = useState(false);\n\n  //////////////\n  // Intervals\n        // Interface which force rerenders the interval UI\n  const [rerenderIntervals, updateIntervals] = useState(0),\n        // Create form\n        [purpose, setPurpose] = useState('muted'),\n        [lowerBoundMarkerUuid, setLowerBoundMarkerUuid] = useState('null'),\n        [upperBoundMarkerUuid, setUpperBoundMarkerUuid] = useState('null'),\n        [allowIntervalPlay, setAllowIntervalPlay] = useState(false),\n        [allowIntervalDelete, setAllowIntervalDelete] = useState(false);\n\n\n  ///////\n  // UI\n  const [tab, setTab] = useState('markers'),\n        [motive, setMotive] = useState('listen'),\n        // eslint-disable-next-line\n        [playPauseEnabled, setPlayPauseEnabled] = useState(true),\n        // eslint-disable-next-line\n        [scanControlsEnabled, setScanControlsEnabled] = useState(true),\n        // Interface which force rerenders the enabled status of playback\n        [rerenderPlayPauseEnabled, updatePlayPauseEnabled] = useState(0);\n\n  /*\n   * Close the modal.\n   */\n  const handleCloseModal = function() {\n    if(nowPlaying.status === \"played\") {\n      console.log('ause!!!')\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"pause\",\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    } else {\n      props.dispatch({ type: 'playback/clearSeekTimeoutId' });\n      props.dispatch({ type: \"main/clearAutoplayTimeoutId\" });\n    }\n\n    setTab(\"markers\");\n    setMotive(\"listen\");\n\n    closeModal();\n  }\n\n  /*\n   * Create a marker.\n   */\n  const createTrackMarker = async function() {\n    let markerTimestamp;\n    if(nowPlaying.track.service === 'youtube') {\n      markerTimestamp = Math.round(formMarkerTimestamp / 1000) * 1000;\n    } else {\n      markerTimestamp = formMarkerTimestamp\n    }\n    const responseJson = await fetchStreamMarkerCreate(\n      nowPlaying.track.uuid, markerTimestamp, nowPlaying.uuid, formMarkerName\n    );\n    await props.dispatch(responseJson.redux);\n    // Reset form\n    updateNewMarkerTimestamp('');\n    setFormMarkerName('');\n    // Rerender\n    setMotive(\"listen\");\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Delete a marker.\n   */\n  const deleteTrackMarker = async function(marker) {\n    const responseJson = await fetchStreamMarkerDelete(marker.uuid, nowPlaying.uuid);\n    await props.dispatch(responseJson.redux);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Create an interval. Right now, the only interval is \"muted.\"\n   */\n  const createQueueInterval = async function() {\n    const responseJson = await fetchStreamQueueIntervalCreate(\n      nowPlaying.uuid,\n      lowerBoundMarkerUuid,\n      upperBoundMarkerUuid,\n      purpose,\n      null,\n      nowPlaying.parentUuid,\n    );\n    await props.dispatch(responseJson.redux);\n    // Reset form\n    setLowerBoundMarkerUuid('null');\n    setUpperBoundMarkerUuid('null');\n    // Rerender\n    setMotive(\"listen\");\n    updatePlayPauseEnabled(RERENDER);\n    updateMarkers(RERENDER);\n    updateIntervals(RERENDER);\n  }\n\n  /*\n   * Delete an interval.\n   */\n  const deleteTrackInterval = async function(interval) {\n    if(nowPlaying.status === \"played\") {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"pause\",\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    }\n    const responseJson = await fetchStreamQueueIntervalDelete(\n      interval.uuid, nowPlaying.uuid, nowPlaying.parentUuid\n    );\n    await props.dispatch(responseJson.redux);\n    updateIntervals(RERENDER);\n  }\n\n  /*\n   * When the user clicks the play/ pause button.\n   */\n  const handlePlayPause = function () {\n    if(!playPauseEnabled) {\n      return;\n    }\n    if(nowPlaying.status === \"played\") {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"pause\",\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    } else if(nowPlaying.status === \"paused\") {\n      const timestampMilliseconds = (\n        (tab === 'markers' && motive === \"create\") ?\n        formMarkerTimestamp : nowPlaying.statusAt - nowPlaying.startedAt\n      );\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"play\",\n            timestampMilliseconds: timestampMilliseconds,\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    } else {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"play\",\n            timestampMilliseconds: 0,\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    }\n    updatePlayPauseEnabled(RERENDER);\n  }\n\n  /*\n   * Small wrapper function which takes the current marker position and cleans\n   * it to a valid position timestamp.\n   */\n  const updateNewMarkerTimestamp = function(positionMillisecondsRaw) {\n    let positionMilliseconds;\n    if(!positionMillisecondsRaw) {\n      try {\n        const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt);\n        positionMilliseconds = arr[0];\n      } catch (e) {\n        positionMilliseconds = 0;\n      }\n    } else {\n      positionMilliseconds = positionMillisecondsRaw;\n    }\n    if(nowPlaying.track.service === 'youtube') {\n      positionMilliseconds = Math.round(positionMilliseconds / 1000) * 1000;\n    }\n    setFormMarkerTimestamp(positionMilliseconds);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Tab button: show markers UI\n   */\n  const showMarkers = function() {\n    setTab('markers');\n    updatePlayPauseEnabled(RERENDER);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Tab button: show markers UI\n   */\n  const showIntervals = function() {\n    setTab('intervals');\n    updatePlayPauseEnabled(RERENDER);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Motive button: show listen UI\n   */\n  const handleMotiveListen = function () {\n    setMotive(\"listen\");\n    updatePlayPauseEnabled(RERENDER);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Motive button: show create UI\n   */\n  const handleMotiveCreate = function () {\n    setMotive(\"create\");\n    if(tab === \"markers\") {\n      updateNewMarkerTimestamp();\n    }\n    if(nowPlaying.status === \"played\" && tab === \"intervals\") {\n      pause();\n    }\n    updatePlayPauseEnabled(RERENDER);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Motive button: show delete UI\n   */\n  const handleMotiveDelete = function () {\n    if(tab === \"intervals\" && nowPlaying.status === \"played\") {\n      pause();\n    }\n    setMotive(\"delete\");\n    updatePlayPauseEnabled(RERENDER);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Handle...\n   */\n  const handleMarkerAdjust = function(delta) {\n    setFormMarkerTimestamp(prev => prev + delta);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Handle...\n   */\n  const handleMarkerTimestamp = function(e) {\n    setFormMarkerTimestamp(e.target.value);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Handle...\n   */\n  const handleMarkerName = function(e) {\n    setFormMarkerName(e.target.value);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Handle...\n   */\n  const handleLowerBoundMarker = function(e) {\n    const markerUuid = e.target.value;\n    setLowerBoundMarkerUuid(markerUuid);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  /*\n   * Handle\n   */\n  const handleUpperBoundMarker = function(e) {\n    const markerUuid = e.target.value;\n    setUpperBoundMarkerUuid(markerUuid);\n    updateIntervals(RERENDER);\n    updateMarkers(RERENDER);\n  }\n\n  const pause = function() {\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"pause\",\n          status: \"kickoff\",\n          fake: true,\n        },\n      },\n    });\n  }\n\n  /*\n   * There has been an action taken by the user (something was clicked/\n   * selected). So now this fires, which updates the data layer and the UI.\n   */\n  useEffect(() => {\n    if(tab === \"markers\" && motive === \"create\" && nowPlaying.status === 'paused') {\n      setScanControlsEnabled(true);\n    } else {\n      setScanControlsEnabled(false);\n    }\n\n  // eslint-disable-next-line\n  }, [isOpen, rerenderPlayPauseEnabled])\n\n  /*\n   * Update markers in the data layer. This happens because of a UI change or\n   * a backend update (create/ delete marker).\n   */\n  useEffect(() => {\n    // if(tab === \"markers\" && motive === \"create\") {\n    //   nextMarkers.push({\n    //     trackUuid: nowPlaying.track.uuid,\n    //     timestampMilliseconds: formMarkerTimestamp,\n    //     name: formMarkerName,\n    //     forceDisplay: true,\n    //   });\n    // }\n    // setMarkers(nextMarkers);\n\n    if(tab === \"markers\" && (motive === \"listen\" || motive === \"create\")) {\n      setAllowMarkerSeek(true);\n    } else {\n      setAllowMarkerSeek(false);\n    }\n\n    if(tab === \"markers\" && motive === \"delete\") {\n      setAllowMarkerDelete(true);\n    } else {\n      setAllowMarkerDelete(false);\n    }\n  // eslint-disable-next-line\n  }, [isOpen, rerenderMarkers]);\n\n  /*\n   * Update intervals in the data layer. This happens because of a UI change or\n   * a backend update (create/ delete interval).\n   */\n  useEffect(() => {\n    // if(tab === \"intervals\") {\n    //   setQueue(nowPlaying => ({\n    //     ...nowPlaying,\n    //     intervals: props.data.intervals,\n    //     allIntervals: props.data.allIntervals,\n    //     playbackIntervals: props.data.playbackIntervals,\n    //   }));\n    // } else {\n    //   setQueue(q => removeIntervals(q));\n    // }\n\n    if(tab === \"intervals\" && motive === \"listen\") {\n      setAllowIntervalPlay(true);\n    } else {\n      setAllowIntervalPlay(false);\n    }\n\n    if(tab === \"intervals\" && motive === \"delete\") {\n      setAllowIntervalDelete(true);\n    } else {\n      setAllowIntervalDelete(false);\n    }\n  // eslint-disable-next-line\n  }, [isOpen, rerenderIntervals])\n\n  console.log(markers)\n\n  /*\n   * \n   */\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n\n      <button className={styles.CloseModal}\n              onClick={handleCloseModal}>\n        {iconBack}\n      </button>\n\n      <div className={styles.ModalContent}>\n\n        <div className={styles.Preview}>\n          <div className={styles.PreviewImgContainer}>\n            <img className={styles.PreviewImg}\n                 src={nowPlaying?.track?.imageUrl}\n                 alt={\"Album Art\"} />\n          </div>\n          <div className={styles.PreviewControlContainer}>\n            <button className={styles.PreviewControlScan}\n                    disabled={!playPauseEnabled}\n                    onClick={() => { handleMarkerAdjust(-1000); }}>\n              {iconBackward1000}\n            </button>\n            <button className={styles.PreviewControlScan}\n                    disabled={!playPauseEnabled}\n                    onClick={() => { handleMarkerAdjust(-100); }}>\n              {iconBackward100}\n            </button>\n            <button className={styles.PreviewControl}\n                    onClick={handlePlayPause}\n                    disabled={!playPauseEnabled}>\n              {nowPlaying?.status === \"played\" ? iconPause : iconPlay}\n            </button>\n            <button className={styles.PreviewControlScan}\n                    disabled={!playPauseEnabled}\n                    onClick={() => { handleMarkerAdjust(100); }}>\n              {iconForward100}\n            </button>\n            <button className={styles.PreviewControlScan}\n                    disabled={!playPauseEnabled}\n                    onClick={() => { handleMarkerAdjust(1000); }}>\n              {iconForward1000}\n            </button>\n          </div>\n        </div>\n\n        <div className={styles.QueueName}>\n          {nowPlaying?.track?.name}\n        </div>\n\n        <div className={styles.TabButtonContainer}>\n          <button className={styles[tab === \"markers\" ? \"TabButtonActive\": \"TabButton\"]}\n                  onClick={showMarkers}>\n            Markers\n          </button>\n          <button className={styles[tab === \"intervals\" ? \"TabButtonActive\": \"TabButton\"]}\n                  onClick={showIntervals}>\n            Intervals\n          </button>\n        </div>\n\n        <div className={styles.MotiveContainer}>\n          <label className={styles.MotiveCheckboxContainer}>\n            <button onClick={handleMotiveListen}>\n              {motive === \"listen\" ? iconMiniCheckboxChecked : iconMiniCheckboxUnchecked}\n            </button>\n            <span style={(motive !== \"listen\" && {color: \"#BCBCBC\"}) || {}}>\n              Listen\n            </span>\n          </label>\n          <label className={styles.MotiveCheckboxContainer}>\n            <button onClick={handleMotiveCreate}>\n              {motive === \"create\" ? iconMiniCheckboxChecked : iconMiniCheckboxUnchecked}\n            </button>\n            <span style={(motive !== \"create\" && {color: \"#BCBCBC\"}) || {}}>\n              Create\n            </span>\n          </label>\n          <label className={styles.MotiveCheckboxContainer}>\n            <button onClick={handleMotiveDelete}>\n              {motive === \"delete\" ? iconMiniCheckboxChecked : iconMiniCheckboxUnchecked}\n            </button>\n            <span style={(motive !== \"delete\" && {color: \"#BCBCBC\"}) || {}}>\n              Delete\n            </span>\n          </label>\n        </div>\n\n        {tab === \"markers\" && motive === \"create\" &&\n          <div className={styles.Form}>\n            <label className={styles.FormLabel}>\n              <span>\n                Marker Timestamp\n              </span>\n              <input className={styles.FormInput}\n                     type=\"text\"\n                     value={formMarkerTimestamp}\n                     onChange={handleMarkerTimestamp} />\n            </label>\n\n            <label className={styles.FormLabel}>\n              <span>\n                Marker Name\n              </span>\n              <input className={styles.FormInput}\n                     type=\"text\"\n                     value={formMarkerName}\n                     onChange={handleMarkerName} />\n            </label>\n\n            <button className={styles.FormSubmit}\n                    disabled={!(formMarkerTimestamp && formMarkerName)}\n                    onClick={createTrackMarker}>\n              Create\n            </button>\n          </div>\n        }\n\n        {tab === \"intervals\" && motive === \"create\" &&\n          <div className={styles.Form}>\n            <label className={styles.FormLabel}>\n              <span>\n                Modification\n              </span>\n              <select className={styles.FormSelect}\n                      value={purpose}\n                      onChange={(e) => {setPurpose(e.target.value)}}>\n                <option value={'muted'}>Trim</option>\n                <option value={'drums'}>Solo drums</option>\n                <option value={'vocals'}>Solo vocals</option>\n                <option value={'bass'}>Solo bass</option>\n                <option value={'other'}>Solo other</option>\n              </select>\n            </label>\n\n            <label className={styles.FormLabel}>\n              <span>\n                Start Marker\n              </span>\n              <select className={styles.FormSelect}\n                      value={lowerBoundMarkerUuid}\n                      onChange={handleLowerBoundMarker}>\n                <option value={'null'}>Beginning</option>\n                {markers.map((value, index) => (\n                  <option key={index} value={value.uuid}>{value.name}</option>\n                ))}\n              </select>\n            </label>\n\n            <label className={styles.FormLabel}>\n              <span>\n                End Marker\n              </span>\n              <select className={styles.FormSelect}\n                      value={upperBoundMarkerUuid}\n                      onChange={handleUpperBoundMarker}>\n                {markers.map((value, index) => (\n                  <option key={index} value={value.uuid}>{value.name}</option>\n                ))}\n                <option value={'null'}>End</option>\n              </select>\n            </label>\n\n            <button className={styles.FormSubmit}\n                    onClick={createQueueInterval}>\n              Create\n            </button>\n          </div>\n        }\n\n        <div className={styles.ProgressBar}>\n          <ParentProgressBar mode={tab}\n                             playbackControls={props.playbackControls}\n                             deleteTrackMarker={deleteTrackMarker}\n                             deleteTrackInterval={deleteTrackInterval}\n                             allowMarkerSeek={allowMarkerSeek}\n                             allowMarkerDelete={allowMarkerDelete}\n                             allowIntervalPlay={allowIntervalPlay}\n                             allowIntervalDelete={allowIntervalDelete}>\n          </ParentProgressBar>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  markerMap: state.markerMap,\n  stream: state.stream,\n  playback: state.playback,\n  queueMap: state.queueMap,\n});\n\nexport default connect(mapStateToProps)(TrackDetailApp);\n","export const iconEdit = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 3.12109H3C2.46957 3.12109 1.96086 3.33181 1.58579 3.70688C1.21071 4.08195 1 4.59066 1 5.12109V19.1211C1 19.6515 1.21071 20.1602 1.58579 20.5353C1.96086 20.9104 2.46957 21.1211 3 21.1211H17C17.5304 21.1211 18.0391 20.9104 18.4142 20.5353C18.7893 20.1602 19 19.6515 19 19.1211V12.1211\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M17.5 1.62132C17.8978 1.2235 18.4374 1 19 1C19.5626 1 20.1022 1.2235 20.5 1.62132C20.8978 2.01915 21.1213 2.55871 21.1213 3.12132C21.1213 3.68393 20.8978 4.2235 20.5 4.62132L11 14.1213L7 15.1213L8 11.1213L17.5 1.62132Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconRemove = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21.1211C16.5228 21.1211 21 16.6439 21 11.1211C21 5.59825 16.5228 1.12109 11 1.12109C5.47715 1.12109 1 5.59825 1 11.1211C1 16.6439 5.47715 21.1211 11 21.1211Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M14 8.12109L8 14.1211\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M8 8.12109L14 14.1211\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconRemoveDisabled = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21.1211C16.5228 21.1211 21 16.6439 21 11.1211C21 5.59825 16.5228 1.12109 11 1.12109C5.47715 1.12109 1 5.59825 1 11.1211C1 16.6439 5.47715 21.1211 11 21.1211Z\" stroke=\"#EAEAEA\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M14 8.12109L8 14.1211\" stroke=\"#EAEAEA\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M8 8.12109L14 14.1211\" stroke=\"#EAEAEA\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconExpand = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M7 9L11 14L15 9\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconCollapse = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z\" fill=\"#0047FF\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M15 13.5L11 8.5L7 13.5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n)\n\nexport const iconCollapseDisabled = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z\" fill=\"#EAEAEA\" stroke=\"#EAEAEA\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M15 13.5L11 8.5L7 13.5\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n)\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport TrackDetailApp from '../../TrackDetailApp/TrackDetailApp'\nimport styles from './QueueTrack.module.css';\nimport { iconEdit, iconRemove } from '../icons';\nimport { durationPretty } from '../utils';\n\nimport {\n  SERVICE_JUKEBOX_RADIO,\n  SERVICE_AUDIUS,\n} from '../../../config/services';\n\n\nfunction QueueTrack(props) {\n\n  /*\n   * \n   */\n  const queueMap = props.queueMap;\n\n  const queue = props.data || queueMap[props.queueUuid];\n\n  const stream = props.stream,\n        main = props.main,\n        playback = props.playback,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const [showModal, setShowModal] = useState(false);\n  const [shouldPlayOnClose, setShouldPlayOnClose] = useState(false);\n\n  const loadTrack = function(queue) {\n    const rawAudioServices = new Set();\n    rawAudioServices.add(SERVICE_JUKEBOX_RADIO);\n    rawAudioServices.add(SERVICE_AUDIUS);\n    if(!rawAudioServices.has(queue.track.service)) {\n      // We only need to load audio from raw audio services.\n      return;\n    }\n\n    const queuesAlreadyLoading = new Set(\n      main.actions\n      .filter(a => a.name === 'loadAudio')\n      .map(a => a.queue.uuid)\n    );\n    if(queuesAlreadyLoading.has(queue.uuid) || playback.files.hasOwnProperty(queue.track.uuid)) {\n      // Audio is already loading or loaded.\n      return;\n    }\n\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"loadAudio\",\n          queue: queue,\n          status: \"kickoff\",\n          fake: true,  // symbolic, not functional\n        },\n      },\n    });\n  }\n\n  const openModal = function() {\n    if(nowPlaying?.status === 'played') {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"pause\",\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n      setShouldPlayOnClose(true);\n    }\n\n    loadTrack(nowPlaying);\n\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"mount\",\n          queue: queue,\n          status: \"kickoff\",\n          fake: true,  // symbolic, not functional\n        },\n      },\n    });\n\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"mount\",\n          stream: stream,\n          status: \"kickoff\",\n          fake: true,  // symbolic, not functional\n        },\n      },\n    });\n\n    setShowModal(false);\n    if(shouldPlayOnClose) {\n      // props.playbackControls.play();\n      setShouldPlayOnClose(false);\n    }\n  }\n\n  const mainClass = queue.parentUuid ? \"QueueTrackChild\" : \"QueueTrackHead\",\n        infoClass = queue.parentUuid ? \"QueueInformationChild\" : \"QueueInformationHead\",\n        buttonClass = queue.parentUuid ? \"ButtonChild\" : \"ButtonHead\",\n        durationClass = queue.parentUuid ? \"DurationContainerChild\" : \"DurationContainerHead\";\n\n  /*\n   * \n   */\n  return (\n    <div className={styles[mainClass]}>\n      {!queue.parentUuid &&\n        <div className={[styles.AlbumArtContainer, styles[queue.track.service]].join(' ')}>\n          <img src={queue.track.imageUrl} alt={\"Album Art\"} />\n        </div>\n      }\n\n      <div className={styles[infoClass]}>\n        <h5>{queue.track.name}</h5>\n        {!queue.parentUuid && <h6>{queue.track.artistName}</h6>}\n      </div>\n\n      <div className={styles[durationClass]}>\n        {durationPretty(queue.track.durationMilliseconds)}\n      </div>\n\n      <div className={styles.ButtonContainer}>\n        <button className={styles[buttonClass]} type=\"button\" onClick={openModal}>\n          {iconEdit}\n        </button>\n        <button className={styles[buttonClass]} type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n          {iconRemove}\n        </button>\n      </div>\n      <TrackDetailApp isOpen={showModal}\n                      closeModal={closeModal}\n                      playbackControls={props.playbackControls} />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  queueMap: state.queueMap,\n  main: state.main,\n  playback: state.playback,\n});\n\nexport default connect(mapStateToProps)(QueueTrack);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport styles from './QueueCollection.module.css';\nimport QueueTrack from '../QueueTrack/QueueTrack';\nimport { iconExpand, iconCollapse, iconRemove, iconCollapseDisabled, iconRemoveDisabled } from '../icons';\nimport { durationPretty, getLeafQueue } from '../utils';\n\n\nfunction QueueCollection(props) {\n\n  /*\n   * \n   */\n  const queueMap = props.queueMap;\n\n  const queue = props.data,\n        stream = props.stream,\n        lastUpQueueUuids = props.lastUpQueueUuids,\n        lastUp = getLeafQueue(lastUpQueueUuids[lastUpQueueUuids.length - 1], queueMap),\n        queueUuid = queue.uuid;\n\n  const nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const isCurrentlyPlayingCollection = (\n    // Stream is NOW playing - \"now playing\" belongs to same parent UUID\n    (nowPlaying && nowPlaying?.parentUuid === queueUuid) ||\n    // Stream is NOT playing - \"last up\" belongs to same parent UUID\n    (!nowPlaying && lastUp?.parentUuid && lastUp?.parentUuid === queueUuid)\n  );\n\n\n  const [reveal, setReveal] = useState(isCurrentlyPlayingCollection);\n\n  /*\n   * When...\n   */\n  const toggleReveal = function(e) {\n    if(isCurrentlyPlayingCollection) {\n      return;\n    }\n    setReveal(!reveal);\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueCollection}>\n\n      <div className={styles.QueueCollectionMain}>\n        <div className={[styles.AlbumArtContainer, styles[queue.collection.service]].join(' ')}>\n          <img src={queue.collection.imageUrl} alt={\"Album Art\"} />\n        </div>\n\n        <div className={styles.QueueInformation}>\n          <h5>{queue.collection.name}</h5>\n          <h6>{queue.collection.artistName}</h6>\n        </div>\n\n        <div className={styles.DurationContainer}>\n          {durationPretty(queue.durationMilliseconds)}\n        </div>\n\n        <div className={styles.ButtonContainer}>\n          {!isCurrentlyPlayingCollection &&\n            <>\n              <button type=\"button\" onClick={toggleReveal}>\n                {reveal ? iconCollapse: iconExpand}\n              </button>\n              <button type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n                {iconRemove}\n              </button>\n            </>\n          }\n          {isCurrentlyPlayingCollection &&\n            <>\n              <button type=\"button\" disabled style={{cursor: \"not-allowed\"}}>\n                {iconCollapseDisabled}\n              </button>\n              <button type=\"button\" disabled style={{cursor: \"not-allowed\"}}>\n                {iconRemoveDisabled}\n              </button>\n            </>\n          }\n        </div>\n      </div>\n\n      {queue.childUuids.length > 0 && reveal &&\n        <div className={styles.Children}>\n          {queue.childUuids.map((value, index) => (\n            <QueueTrack key={index}\n                        queueUuid={value}\n                        destroy={props.destroy}\n                        playbackControls={props.playbackControls}>\n            </QueueTrack>\n          ))}\n        </div>\n      }\n    </div>\n  );\n\n}\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  lastUpQueueUuids: state.lastUpQueueUuids,\n  queueMap: state.queueMap,\n});\n\nexport default connect(mapStateToProps)(QueueCollection);\n","import { connect } from 'react-redux'\nimport { Link } from \"react-router-dom\";\nimport styles from './QueueApp.module.css';\nimport { fetchDeleteQueue } from './network'\nimport QueueCollection from './QueueCollection/QueueCollection'\nimport QueueTrack from './QueueTrack/QueueTrack'\nimport { getQueues, getQueueDuration, durationPretty } from './utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction QueueApp(props) {\n\n  const nextUpQueueUuids = props.nextUpQueueUuids,\n        stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const nextUpQueues = getQueues(nextUpQueueUuids, queueMap);\n\n  const queueDuration = getQueueDuration(nextUpQueues, nowPlaying);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * Called inside a child component, this first deletes the queue from the\n   * backend, then, on success, it deletes it from the front-end model and\n   * view.\n   */\n  const destroyQueueItem = async function(queue) {\n    const queueUuid = queue.uuid;\n\n    await fetchDeleteQueue(queueUuid);\n\n    const parentUuid = queue.parentUuid;\n    if(parentUuid) {\n      props.dispatch({\n        type: 'queue/deleteChildNode',\n        parentUuid: parentUuid,\n        queueUuid: queueUuid,\n      });\n    } else {\n      props.dispatch({\n        type: 'queue/deleteNode',\n        queueUuid: queueUuid,\n      });\n    }\n  }\n\n  const handleSearch = function() {\n    props.dispatch({\n      type: \"sideBar/selectTab\",\n      payload: { tab: \"search\" },\n    });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueApp}>\n      <div className={styles.NowPlaying}>\n        <div className={styles.NowPlayingArt}>\n          <img src={nowPlaying?.track?.imageUrl} alt={\"Album Art\"} />\n        </div>\n\n        <div className={styles.NowPlayingInformation}>\n          <h5>{nowPlaying?.track?.name}</h5>\n          <h6>{nowPlaying?.track?.artistName}</h6>\n        </div>\n\n        <div className={styles.NowPlayingDuration}>\n          {durationPretty(nowPlaying?.track?.durationMilliseconds)}\n        </div>\n      </div>\n      <div className={styles.QueueContainer}>\n        {  // eslint-disable-next-line\n        nextUpQueues.map((value, index) => {\n          if(value.collection) {\n            return (\n              <QueueCollection key={index}\n                               data={value}\n                               destroy={destroyQueueItem}\n                               playbackControls={props.playbackControls}>\n              </QueueCollection>\n            );\n          } else if(value.track) {\n            return (\n              <QueueTrack key={index}\n                          data={value}\n                          destroy={destroyQueueItem}\n                          playbackControls={props.playbackControls}>\n              </QueueTrack>\n            );\n          }\n        })}\n        <div className={styles.PlaybackDuration}>\n          {queueDuration ?\n            (\n              <>\n                Playback will end&nbsp;\n                <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n              </>\n            ) : (\n              <>\n                There is nothing in the queue.\n              </>\n            )\n          }\n        </div>\n        <Link onClick={handleSearch} to=\"/app/search\">\n          <button className={styles.AddToQueue}>\n            Add To Queue\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  queueMap: state.queueMap,\n  nextUpQueueUuids: state.nextUpQueueUuids,\n  lastUpQueueUuids: state.lastUpQueueUuids,\n});\n\n\nexport default connect(mapStateToProps)(QueueApp);\n","import { connect } from 'react-redux'\nimport styles from './MiniQueue.module.css';\nimport { getQueues, getQueueDuration } from '../utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction MiniQueue(props) {\n\n  const nextUpQueueUuids = props.nextUpQueueUuids,\n        stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid];\n\n  const nextUpQueues = getQueues(nextUpQueueUuids, queueMap);\n\n  // TODO needs to add however much is left inside now playing.\n  const queueDuration = getQueueDuration(nextUpQueues, nowPlaying);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.MiniQueue}>\n      <h3>Queue</h3>\n      {queueDuration ?\n        (\n          <p>\n            Playback will end&nbsp;\n            <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n          </p>\n        ) : (\n          <p>\n            There is nothing in the queue.\n          </p>\n        )\n      }\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  nextUpQueueUuids: state.nextUpQueueUuids,\n  stream: state.stream,\n  queueMap: state.queueMap,\n});\n\n\nexport default connect(mapStateToProps)(MiniQueue);\n","import { ENDPOINT_MUSIC_SEARCH, ENDPOINT_QUEUE_CREATE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchSearchMusicLibrary = async (query, service, formatTrack, formatAlbum, formatPlaylist, formatVideo) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_MUSIC_SEARCH,\n    {\n      query,\n      service,\n      formatTrack,\n      formatAlbum,\n      formatPlaylist,\n      formatVideo,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchCreateQueue = async (className, genericUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_CREATE,\n    { className, genericUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useState } from 'react';\nimport styles from './SearchResult.module.css';\n// import { iconCheck } from './icons';\nimport { SERVICE_SPOTIFY, SERVICE_YOUTUBE, SERVICE_APPLE_MUSIC, SERVICE_JUKEBOX_RADIO, SERVICE_AUDIUS } from '../../../config/services';\nimport { iconSpotify, iconYouTube, iconAppleMusic, iconLogoAlt, iconAudius } from '../../../icons';\n\n\nfunction SearchResult(props) {\n  const searchResult = props.data,\n        addToQueue = props.addToQueue;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  const handleAddToQueue = async function() {\n    setIsSubmitting(true);\n    await addToQueue(searchResult.class, searchResult.uuid);\n    setIsSubmitted(true);\n  }\n\n  let imgUrl = searchResult.img_url;\n  if(searchResult.provider === SERVICE_APPLE_MUSIC) {\n    imgUrl = imgUrl.replace(\"{w}\", \"300\");\n    imgUrl = imgUrl.replace(\"{h}\", \"300\");\n  }\n\n  let serviceSvg;\n  if(searchResult.provider === SERVICE_SPOTIFY) {\n    serviceSvg = iconSpotify;\n  } else if(searchResult.provider === SERVICE_YOUTUBE) {\n    serviceSvg = iconYouTube;\n  } else if(searchResult.provider === SERVICE_APPLE_MUSIC) {\n    serviceSvg = iconAppleMusic;\n  } else if(searchResult.provider === SERVICE_JUKEBOX_RADIO) {\n    serviceSvg = iconLogoAlt;\n  } else if(searchResult.provider === SERVICE_AUDIUS) {\n    serviceSvg = iconAudius;\n  }\n\n  return (\n    <div className={!isSubmitted ? styles.SearchResult : styles.SearchResultSubmitted}>\n\n      <div className={[styles.ImageParent, styles[searchResult.provider]].join(' ')}>\n        <img src={imgUrl} alt={\"Album Art\"} />\n      </div>\n\n      <div className={styles.ResultInformation}>\n        <h5>{searchResult.name}</h5>\n        <h6>{searchResult.artist_name}</h6>\n      </div>\n\n      <div className={styles.ServiceLogo}>\n        {serviceSvg}\n      </div>\n\n      <button type=\"button\"\n              onClick={handleAddToQueue}\n              className={styles[isSubmitted ? \"AddButtonInverted\" : \"AddButton\"]}\n              style={((isSubmitting && !isSubmitted) && {cursor: \"wait\"}) || {}}\n              disabled={!(!isSubmitting && !isSubmitted)}>\n        {!isSubmitted ?\n          (isSubmitting ? <i className={styles.ggSpinner}></i> : \"Add\") :\n          \"Added\"\n        }\n      </button>\n\n    </div>\n  );\n}\n\nexport default SearchResult;\n","import { ENDPOINT_TRACK_CREATE } from '../../config/api'\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchCreateTrack = async (audioFile, imageFile, trackName, artistName, albumName) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TRACK_CREATE,\n    {\n      audioFile: audioFile,\n      imageFile: imageFile,\n      trackName: trackName,\n      artistName: artistName,\n      albumName: albumName,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport styles from './Upload.module.css';\n\nimport { fetchCreateTrack } from './network';\n\nimport { iconBack } from './../../icons';\n\n\nfunction Upload(props) {\n\n  /*\n   * \n   */\n  const [inputKey, setInputKey] = useState(0);\n\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [audioFile, setAudioFile] = useState('');\n  const [imageFile, setImageFile] = useState('');\n  const [trackName, setTrackName] = useState('');\n  const [artistName, setArtistName] = useState('');\n  const [albumName, setAlbumName] = useState('');\n\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function() {\n\n    // Hit the server.\n    setIsDisabled(true);\n    await fetchCreateTrack(\n      audioFile,\n      imageFile,\n      trackName,\n      artistName,\n      albumName,\n    );\n\n    // Reset the form.\n    setIsDisabled(false);\n    setInputKey(prev => prev + 2);\n    setTrackName('');\n    setArtistName('');\n    setAlbumName('');\n\n    // Close the modal.\n    closeModal();\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n\n      <button className={styles.CloseModal}\n              onClick={closeModal}>\n        {iconBack}\n      </button>\n\n      <div className={styles.Login}>\n        <h3>Upload</h3>\n\n        <label className={styles.FormBlock}>\n          Audio file\n          <input type=\"file\"\n                 name=\"audioFile\"\n                 onChange={(e) => {setAudioFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Image file\n          <input type=\"file\"\n                 name=\"imageFile\"\n                 onChange={(e) => {setImageFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey + 1} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Track name\n          <input type=\"text\"\n                 name=\"trackName\"\n                 placeholder=\"Track name\"\n                 value={trackName}\n                 onChange={(e) => {setTrackName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Artist name\n          <input type=\"text\"\n                 name=\"artistName\"\n                 placeholder=\"Artist name\"\n                 value={artistName}\n                 onChange={(e) => {setArtistName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Album name\n          <input type=\"text\"\n                 name=\"albumName\"\n                 placeholder=\"Album name\"\n                 value={albumName}\n                 onChange={(e) => {setAlbumName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <br></br>\n\n        <div className={styles.FormBlock}>\n          <button type=\"submit\"\n                  onClick={handleSubmit}\n                  disabled={isDisabled}>\n            Submit\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default Upload;\n","export const iconSearch = (\n  <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M14.6667 25.3333C20.5577 25.3333 25.3333 20.5577 25.3333 14.6667C25.3333 8.77563 20.5577 4 14.6667 4C8.77563 4 4 8.77563 4 14.6667C4 20.5577 8.77563 25.3333 14.6667 25.3333Z\" stroke=\"#0047FF\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M27.9997 28.0012L22.1997 22.2012\" stroke=\"#0047FF\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconUpload = (\n  <svg width=\"45\" height=\"35\" viewBox=\"0 0 45 35\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M33.6843 13.5312H31.3368C30.6397 10.7464 29.1994 8.21916 27.1795 6.23657C25.1596 4.25398 22.641 2.89558 19.9101 2.31572C17.1791 1.73586 14.3452 1.9578 11.7304 2.95631C9.11564 3.95482 6.82478 5.68987 5.11818 7.96431C3.41157 10.2387 2.35765 12.9614 2.07616 15.8228C1.79467 18.6842 2.29691 21.5698 3.5258 24.1515C4.7547 26.7332 6.66097 28.9075 9.02801 30.4275C11.3951 31.9475 14.128 32.7521 16.9162 32.75H33.6843C36.155 32.75 38.5245 31.7376 40.2715 29.9355C42.0185 28.1334 43 25.6892 43 23.1406C43 20.5921 42.0185 18.1479 40.2715 16.3458C38.5245 14.5437 36.155 13.5312 33.6843 13.5312Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M24.3986 18.3202L18.3246 12.2461L12.2505 18.3202\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M18.3257 12.2461V25.9128\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M24.3986 18.3202L18.3246 12.2461L12.2505 18.3202\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconCheckboxChecked = (\n  <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"1\" y=\"1\" width=\"24\" height=\"24\" stroke=\"#0047FF\" strokeWidth=\"2\"/>\n    <path d=\"M19 9L10.75 18L7 13.9091\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconCheckboxUnchecked = (\n  <svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"0.5\" y=\"0.5\" width=\"25\" height=\"25\" stroke=\"#BCBCBC\"/>\n  </svg>\n);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './SearchApp.module.css';\n\nimport { fetchSearchMusicLibrary, fetchCreateQueue } from './network';\nimport SearchResult from './SearchResult/SearchResult';\nimport Upload from '../Upload/Upload';\nimport { fetchQueueList } from '../QueueApp/network';\nimport { iconUpload } from './icons';\nimport { iconSpotify, iconYouTube, iconAppleMusic, iconLogoAlt, iconAudius } from '../../icons';\n\n\nfunction SearchApp(props) {\n\n  /*\n   * \n   */\n\n  const search = props.search;\n\n  const [searchResults, setSearchResults] = useState([]);\n  const [searchResultCache, setSearchResultCache] = useState({});\n  const [autoSearchTimeoutId, setAutoSearchTimeoutId] = useState(false);\n\n  const [query, setQuery] = useState('');\n\n  const formatTrack = true,\n        formatAlbum = true,\n        formatPlaylist = true,\n        formatVideo = true;\n\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  const fetchSearch = async function(service = undefined) {\n    if(!query) {\n      return;\n    }\n\n    const queryCache = { ...searchResultCache[query] } || {};\n\n    if(!service) {\n      if(search.serviceAppleMusic) {\n        service = 'apple_music';\n      } else if (search.serviceSpotify) {\n        service = 'spotify';\n      } else if (search.serviceYouTube) {\n        service = 'youtube';\n      } else if (search.serviceAudius) {\n        service = 'audius';\n      } else if (search.serviceJukeboxRadio) {\n        service = 'jukebox_radio';\n      }\n    }\n\n    console.log(service)\n\n    let responseJson;\n    responseJson = queryCache[service];\n    if(!responseJson) {\n      responseJson = await fetchSearchMusicLibrary(\n        query,\n        service,\n        formatTrack,\n        formatAlbum,\n        formatPlaylist,\n        formatVideo,\n      );\n      queryCache[service] = responseJson;\n      setSearchResultCache(function(oldState) {\n        const state = { ...oldState };\n        state[query] = queryCache;\n        return state;\n      });\n    }\n    setSearchResults(responseJson.data);\n    setAutoSearchTimeoutId(false);\n  }\n\n  const handleSpotify = function() {\n    props.dispatch({\n      type: 'search/toggleService',\n      payload: { serviceName: \"serviceSpotify\" },\n    });\n    fetchSearch('spotify');\n  }\n\n  const handleYouTube = function() {\n    props.dispatch({\n      type: 'search/toggleService',\n      payload: { serviceName: \"serviceYouTube\" },\n    });\n    fetchSearch('youtube');\n  }\n\n  const handleAppleMusic = function() {\n    props.dispatch({\n      type: 'search/toggleService',\n      payload: { serviceName: \"serviceAppleMusic\" },\n    });\n    fetchSearch('apple_music');\n  }\n\n  const handleAudius = function() {\n    props.dispatch({\n      type: 'search/toggleService',\n      payload: { serviceName: \"serviceAudius\" },\n    });\n    fetchSearch('audius');\n  }\n\n  const handleJukeboxRadio = function() {\n    props.dispatch({\n      type: 'search/toggleService',\n      payload: { serviceName: \"serviceJukeboxRadio\" },\n    });\n    fetchSearch('jukebox_radio');\n  }\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = function() {\n    if(!query) {\n      return;\n    }\n    fetchSearch();\n  }\n\n  /*\n   * When...\n   */\n  const addToQueue = async function(className, genericUuid) {\n    await fetchCreateQueue(\n      className,\n      genericUuid,\n    );\n\n    const responseJsonQueueList = await fetchQueueList();\n    props.dispatch(responseJsonQueueList.redux);\n  }\n\n  /*\n   *\n   */\n  const handleKeyDown = (event) => {\n    if(autoSearchTimeoutId) {\n      clearTimeout(autoSearchTimeoutId);\n    }\n    setAutoSearchTimeoutId(setTimeout(fetchSearch, 500));\n    if (event.key === 'Enter') {\n      handleSubmit();\n    }\n  }\n\n  return (\n    <div className={styles.SearchApp}>\n\n      <div className={styles.SearchBarContainer}>\n        <input type=\"text\"\n               name=\"query\"\n               autoComplete=\"off\"\n               spellCheck=\"false\"\n               placeholder=\"\"\n               className={styles.SearchBar}\n               value={query}\n               onChange={(e) => {setQuery(e.target.value)}}\n               onKeyDown={handleKeyDown} />\n        {/*}\n        <div className={styles.SearchBarIcon}>\n          {iconSearch}\n        </div>\n        */}\n        <button className={styles.Upload}\n                onClick={openModal}>\n          {iconUpload}\n        </button>\n      </div>\n\n      <div className={styles.SearchResultsContainer}>\n        <div className={styles.ServiceCheckboxContainer}>\n          <button className={styles.ServiceCheckbox}\n                  onClick={handleSpotify}\n                  style={(search.serviceSpotify && {border: \"2px solid rgba(29, 185, 84, 1)\"}) || {}}>\n            <div className={styles.ServiceCheckboxLogoContainer}>{iconSpotify}</div>\n          </button>\n\n          <button className={styles.ServiceCheckbox}\n                  onClick={handleYouTube}\n                  style={(search.serviceYouTube && {border: \"2px solid rgba(255, 0, 0, 1)\"}) || {}}>\n            <div className={styles.ServiceCheckboxLogoContainer}>{iconYouTube}</div>\n          </button>\n\n          <button className={styles.ServiceCheckbox}\n                  onClick={handleAppleMusic}\n                  style={(search.serviceAppleMusic && {border: \"2px solid rgba(251, 92, 116, 1)\"}) || {}}>\n            <div className={styles.ServiceCheckboxLogoContainer}>{iconAppleMusic}</div>\n          </button>\n\n          <button className={styles.ServiceCheckbox}\n                  onClick={handleAudius}\n                  style={(search.serviceAudius && {border: \"2px solid rgba(126, 27, 204, 1)\"}) || {}}>\n            <div className={styles.ServiceCheckboxLogoContainer}>{iconAudius}</div>\n          </button>\n\n          <button className={styles.ServiceCheckbox}\n                  onClick={handleJukeboxRadio}\n                  style={(search.serviceJukeboxRadio && {border: \"2px solid rgba(0, 71, 255, 1)\"}) || {}}>\n            <div className={styles.ServiceCheckboxLogoContainer}>{iconLogoAlt}</div>\n          </button>\n        </div>\n\n        <div className={styles.SearchResults}>\n          {searchResults.map((value, index) => (\n            <SearchResult key={value.uuid} data={value} addToQueue={addToQueue}></SearchResult>\n          ))}\n        </div>\n      </div>\n\n      <Upload isOpen={showModal}\n              closeModal={closeModal} />\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  search: state.search,\n});\n\n\nexport default connect(mapStateToProps)(SearchApp);\n","import React from 'react';\n\nimport { connect } from 'react-redux';\n\nimport {\n  SERVICE_YOUTUBE,\n} from '../../../config/services';\nimport styles from './MiniNotes.module.css';\n\n\n\nfunction MiniNotes(props) {\n\n  const notesApp = props.notesApp,\n        stream = props.stream,\n        playback = props.playback,\n        queueMap = props.queueMap,\n        content = notesApp.store[stream.uuid],\n        nowPlaying = queueMap[playback.nowPlayingUuid];\n\n  const handleTextChange = function(e) {\n    const nextContent = e.target.value;\n    props.dispatch({\n      type: \"notesApp/set\",\n      payload: { key: stream.uuid, value: nextContent },\n    });\n  }\n\n  console.log(nowPlaying?.track?.service === SERVICE_YOUTUBE, stream.nowPlayingUuid === playback.nowPlayingUuid)\n\n  let extraStyle;\n  if(nowPlaying?.track?.service === SERVICE_YOUTUBE) {\n    if(stream.nowPlayingUuid === playback.nowPlayingUuid) {\n      extraStyle = {\n        marginTop: \"205px\",\n      };\n    } else {\n      extraStyle = {};\n    }\n  } else {\n    extraStyle = {};\n  }\n\n\n  return (\n    <div className={styles.MiniNotes} style={extraStyle}>\n      <h3>Notes</h3>\n      <textarea value={content}\n                spellCheck=\"false\"\n                onChange={handleTextChange}>\n      </textarea>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  notesApp: state.notesApp,\n  stream: state.stream,\n  playback: state.playback,\n  queueMap: state.queueMap,\n});\n\n\nexport default connect(mapStateToProps)(MiniNotes);\n","export const iconFolder = (\n  <svg width=\"34\" height=\"31\" viewBox=\"0 0 34 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M32.1883 25.9507C32.1883 26.7778 31.8597 27.5711 31.2748 28.156C30.6899 28.7409 29.8967 29.0695 29.0695 29.0695H4.11883C3.29167 29.0695 2.49838 28.7409 1.91348 28.156C1.32859 27.5711 1 26.7778 1 25.9507V4.11883C1 3.29167 1.32859 2.49838 1.91348 1.91348C2.49838 1.32859 3.29167 1 4.11883 1H11.9159L15.0347 5.67825H29.0695C29.8967 5.67825 30.6899 6.00684 31.2748 6.59173C31.8597 7.17663 32.1883 7.96991 32.1883 8.79708V25.9507Z\" fill=\"#0047FF\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M16.5938 13.3848V22.7413\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M11.916 18.1523H21.2725\" stroke=\"white\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n","import React, { useEffect } from \"react\";\n\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\n\nimport { useHistory } from \"react-router-dom\";\nimport { iconLogo, iconSpotify, iconYouTube, iconAppleMusic, iconAudius34 } from '../../icons';\nimport styles from './WelcomeApp.module.css';\nimport { iconFolder } from './icons';\n\n\nfunction WelcomeApp(props) {\n\n  const history = useHistory();\n\n  const userSettings = props.userSettings;\n\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  const handleAppleMusic = function() {\n    const music = window.MusicKit.getInstance();\n    if(!music.musicUserToken) {\n      music.authorize();\n    } else {\n      props.dispatch({\n        type: 'search/toggleServiceOff',\n        payload: { serviceAppleMusic: true },\n      });\n      history.push(\"/app/search\");\n      closeModal();\n    }\n  }\n\n  const handleSpotify = function () {\n    if(userSettings && !userSettings.spotify.accessToken) {\n      window.location.href = props.userSettings.spotify.authorizationUrl;\n    } else {\n      props.dispatch({\n        type: 'search/toggleServiceOff',\n        payload: { serviceSpotify: true },\n      });\n      history.push(\"/app/search\");\n      closeModal();\n    }\n  }\n\n  const handleYouTube = function () {\n    props.dispatch({\n      type: 'search/toggleServiceOff',\n      payload: { serviceYouTube: true },\n    });\n    history.push(\"/app/search\");\n    closeModal();\n  }\n\n  const handleAudius = function () {\n    props.dispatch({\n      type: 'search/toggleServiceOff',\n      payload: { serviceAudius: true },\n    });\n    history.push(\"/app/search\");\n    closeModal();\n  }\n\n  const handleLibrary = function () {\n    props.dispatch({\n      type: 'search/toggleServiceOff',\n      payload: { serviceJukeboxRadio: true },\n    });\n    history.push(\"/app/search\");\n    closeModal();\n  }\n\n  useEffect(function() {\n    if(!isOpen) {\n      return;\n    }\n    props.dispatch({\n      type: \"sideBar/selectTab\",\n      payload: { tab: \"search\" },\n    });\n  // eslint-disable-next-line\n  }, [isOpen])\n\n   /*\n    * \n    */\n  let appleMusicEnabled = false;\n  try {\n    if(window.MusicKit.getInstance().musicUserToken) {\n      appleMusicEnabled(true);\n    }\n  } catch {\n    // pass\n  } finally {\n    // pass\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n\n      <div className={styles.Logo}>\n        {iconLogo}\n      </div>\n\n      <div className={styles.WelcomeAppContainer}>\n\n        <div>\n          <div className={styles.WelcomeHeader}>\n            <h2>Welcome</h2>\n            <h5>Where do you want to start?</h5>\n          </div>\n\n          <div className={styles.PlaybackOptionContainer}>\n\n            <div className={styles.PlaybackOption}\n                    onClick={handleSpotify}\n                    disabled={!userSettings}>\n              <div className={styles.PlaybackOptionLogo}\n                   style={{backgroundColor: \"#FFF\", borderRadius: \"50%\"}}>\n                {iconSpotify}\n              </div>\n              <div className={styles.PlaybackOptionService}>\n                Spotify\n              </div>\n              <div className={styles.PlaybackOptionDescription}>\n                Connect your Spotify Premium account\n              </div>\n            </div>\n\n            <div className={styles.PlaybackOption}\n                 onClick={handleYouTube}>\n              <div className={styles.PlaybackOptionLogo}>\n                {iconYouTube}\n              </div>\n              <div className={styles.PlaybackOptionService}>\n                YouTube\n              </div>\n              <div className={styles.PlaybackOptionDescription}>\n                Free access to the YouTube catalog\n              </div>\n            </div>\n\n            <div className={styles.PlaybackOption}\n                    onClick={handleAppleMusic}\n                    disabled={appleMusicEnabled}>\n              <div className={styles.PlaybackOptionLogo}>\n                {iconAppleMusic}\n              </div>\n              <div className={styles.PlaybackOptionService}>\n                Apple Music\n              </div>\n              <div className={styles.PlaybackOptionDescription}>\n                Connect your Apple Music account\n              </div>\n            </div>\n\n            <div className={styles.PlaybackOption}\n                    onClick={handleAudius}>\n              <div className={styles.PlaybackOptionLogo}>\n                {iconAudius34}\n              </div>\n              <div className={styles.PlaybackOptionService}>\n                Audius\n              </div>\n              <div className={styles.PlaybackOptionDescription}>\n                Free access to the Audius catalog\n              </div>\n            </div>\n\n            <div className={styles.PlaybackOption}\n                 onClick={handleLibrary}>\n              <div className={styles.PlaybackOptionLogo}>\n                {iconFolder}\n              </div>\n              <div className={styles.PlaybackOptionService}>\n                Library\n              </div>\n              <div className={styles.PlaybackOptionDescription}>\n                Upload or search files in your cloud storage\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  userSettings: state.userSettings,\n});\n\n\nexport default connect(mapStateToProps)(WelcomeApp);\n","import { getPositionMilliseconds } from './utils';\n\nimport {\n  SERVICE_APPLE_MUSIC,\n  SERVICE_SPOTIFY,\n  SERVICE_YOUTUBE,\n  SERVICE_JUKEBOX_RADIO,\n  SERVICE_AUDIUS,\n} from '../../config/services';\nimport {\n  fetchTrackGetFiles,\n} from './Player/network';\nimport { store } from '../../utils/redux';\n\n\n/*\n * Executes the \"start\" of playback given:\n *     - playback (singleton instance in the React application)\n *     - queue\n */\nexport const playbackControlStart = function(playback, queue) {\n  const arr = getPositionMilliseconds(queue, queue.startedAt),\n        positionMilliseconds = arr[0],\n        instrument = arr[2],\n        playbackService = queue.track.service;\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance(),\n          state = store.getState(),\n          volumeLevel = state.playback.volumeLevel.audio;\n    music.setQueue({ song: queue.track.externalId })\n      .then(() => {\n        if(positionMilliseconds >= 1000) {\n          music.player.volume = 0;\n        }\n        music.player.play()\n          .then(() => {\n            if(positionMilliseconds < 1000) {\n              return;\n            }\n            setTimeout(function() {\n              const delayArr = getPositionMilliseconds(queue, queue.startedAt),\n                    delayPositionMilliseconds = delayArr[0];\n              music.player.seekToTime(delayPositionMilliseconds / 1000)\n                .then(() => {\n                  music.player.volume = volumeLevel;\n                });\n            }, 500);\n          });\n      });\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play({\n      uris: [queue.track.externalId],\n      position_ms: positionMilliseconds,\n    });\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    if(typeof playback.youTubeApi.getPlayerState() === \"number\") {\n      playback.youTubeApi.seekTo(Math.floor(positionMilliseconds / 1000));\n      playback.youTubeApi.playVideo();\n    } else {\n        store.dispatch({\n          type: 'playback/youTubeTriggerAutoplay',\n          payload: { autoplay: true },\n        });\n    }\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid][instrument];\n    if(positionMilliseconds > 0) {\n      audio.currentTime = positionMilliseconds / 1000;\n    }\n    audio.play();\n  } else if(playbackService === SERVICE_AUDIUS) {\n    const trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid];\n    if(positionMilliseconds > 0) {\n      audio.currentTime = positionMilliseconds / 1000;\n    }\n    audio.play();\n  }\n};\n\n\n/*\n * \"Pauses\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - queue\n */\nexport const playbackControlPause = function(playback, queue) {\n  const playbackService = queue.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.pause();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.pause();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.pauseVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = queue.track.uuid,\n          audios = playback.files[trackUuid];\n    // eslint-disable-next-line\n    for(const [instrument, audio] of Object.entries(audios)) {\n      if(!audio.paused) {\n        audio.pause();\n      }\n    }\n  } else if(playbackService === SERVICE_AUDIUS) {\n    const trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid];\n    audio.pause();\n  }\n}\n\n\n/*\n * \"Plays\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - queue\n */\nexport const playbackControlPlay = function(playback, queue) {\n  const playbackService = queue.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.play();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const arr = getPositionMilliseconds(queue, queue.startedAt),\n          instrument = arr[2],\n          trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid][instrument];\n    audio.play();\n  } else if(playbackService === SERVICE_AUDIUS) {\n    const trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid];\n    audio.play();\n  }\n}\n\n\n/*\n * \"Seeks\" the current playback given to the expected position given:\n *     - playback (singleton instance in the React application)\n *     - queue\n */\nexport const playbackControlSeek = function(playback, queue, startedAt) {\n  const arr = getPositionMilliseconds(queue, startedAt),\n        positionMilliseconds = arr[0],\n        instrument = arr[2],\n        playbackService = queue.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.seekToTime(positionMilliseconds / 1000);\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.seek(positionMilliseconds);\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    console.log(Math.floor(positionMilliseconds / 1000))\n    playback.youTubeApi.seekTo(Math.floor(positionMilliseconds / 1000));\n    // playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = queue.track.uuid,\n          audios = playback.files[trackUuid],\n          audio = audios[instrument];\n\n    // Pause everything else so only the new stem is played\n    for(const [instr, aud] of Object.entries(audios)) {\n      if(instr === instrument) {\n        continue;\n      }\n      if(!aud.paused) {\n        aud.pause();\n      }\n    }\n\n    audio.currentTime = positionMilliseconds / 1000;\n    audio.play();\n  } else if(playbackService === SERVICE_AUDIUS) {\n    const trackUuid = queue.track.uuid,\n          audio = playback.files[trackUuid];\n\n    audio.currentTime = positionMilliseconds / 1000;\n    audio.play();\n  }\n}\n\n\n/*\n *\n */\nexport const playbackControlSkipToNext = function(playback, queue) {\n  const playbackService = queue.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.skipToNextItem();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.skipToNext();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    // TODO - seems to work out of the box :)\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    // TODO - refactor stuff to go inside of here instead\n  } else if(playbackService === SERVICE_AUDIUS) {\n    // TODO - refactor stuff to go inside of here instead\n  }\n}\n\n\n/*\n * \"Queues\" the (track) queue item up next given:\n *     - playback (singleton instance in the React application)\n *     - queue\n *     - nextUp\n *\n * In this context, queuing up the track means doing as much pre-loading as\n * possible.\n */\nexport const playbackControlQueue = function(playback, queue, nextUp) {\n  if(!nextUp) {\n    return;\n  }\n\n  const nowPlaying = queue,\n        playbackService = nowPlaying.track.service,\n        nextPlaybackService = nextUp.track.service;\n  let shouldAddToQueue;\n\n  // Apple Music\n  shouldAddToQueue = nextPlaybackService === SERVICE_APPLE_MUSIC;\n  if(shouldAddToQueue) {\n    const music = window.MusicKit.getInstance();\n    music.player.prepareToPlay(nextUp.track.externalId);\n\n    const canPlayNext = (\n      playbackService === SERVICE_APPLE_MUSIC &&\n      nextUp.playbackIntervals[0].startPosition === 0\n    );\n    if(canPlayNext) {\n      music.playNext({ song: nextUp.track.externalId });\n    }\n  }\n\n  // Spotify\n  shouldAddToQueue = (\n    playbackService === SERVICE_SPOTIFY &&\n    nextPlaybackService === SERVICE_SPOTIFY &&\n    nextUp.playbackIntervals[0].startPosition === 0\n  );\n  if(shouldAddToQueue) {\n    playback.spotifyApi.queue(nextUp.track.externalId);\n  }\n\n  // YouTube\n  // TODO\n\n  // Jukebox Radio\n  shouldAddToQueue = nextPlaybackService === SERVICE_JUKEBOX_RADIO;\n  if(shouldAddToQueue) {\n    fetchTrackGetFiles(nextUp.track.uuid)\n      .then((responseJson) => {\n        store.dispatch(responseJson.redux);\n      });\n  }\n\n  // Audius\n  shouldAddToQueue = nextPlaybackService === SERVICE_AUDIUS;\n  if(shouldAddToQueue) {\n    store.dispatch({\n      \"type\": \"playback/loadAudius\",\n      \"payload\": {\n        \"id\": nextUp.track.externalId,\n        \"trackUuid\": nextUp.track.uuid,\n      }\n    });\n  }\n}\n\n\nexport const playbackChangeVolume = function(playback, queue, volumeLevel) {\n  const music = window.MusicKit.getInstance();\n  music.player.volume = volumeLevel;\n\n  try {\n    playback.spotifyApi.setVolume(volumeLevel * 100);\n  } catch (e) {\n    //\n  }\n\n  try {\n    playback.youTubeApi.setVolume(volumeLevel * 100);\n  } catch (e) {\n    //\n  }\n\n  const trackUuid = queue?.track?.uuid,\n        audios = playback.files[trackUuid];\n\n  try {\n    if(audios) {\n      audios.all.volume = volumeLevel;\n      audios.drums.volume = volumeLevel;\n      audios.vocals.volume = volumeLevel;\n      audios.bass.volume = volumeLevel;\n      audios.other.volume = volumeLevel;\n    }\n  } catch (e) {\n    //\n  }\n\n  try {\n    if(audios) {\n      audios.volume = volumeLevel;\n    }\n  } catch (e) {\n    //\n  }\n}\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport { connect } from 'react-redux';\nimport { fetchUpdateUserSettings } from './network';\nimport styles from './UserSettings.module.css';\nimport { iconBack } from './../../icons';\n\n\nfunction UserSettings(props) {\n\n  /*\n   * \n   */\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  // TODO actually impliment the disabled behavior\n  // eslint-disable-next-line\n  const [controlsEnabled, setControlsEnabled] = useState(true);\n\n  if (!props.userSettings) {\n    return <></>;\n  }\n\n  const handleAppleMusic = function() {\n    const music = window.MusicKit.getInstance();\n    if(!music.musicUserToken) {\n      music.authorize();\n    }\n  }\n\n  function updateIdleQueue(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      idleQueue: event.target.checked\n    }});\n    fetchUpdateUserSettings('idle_after_now_playing', event.target.checked);\n  }\n\n  function updateSpeakVoice(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      speakVoice: event.target.checked\n    }})\n    fetchUpdateUserSettings('mute_voice_recordings', event.target.checked);\n  }\n\n  function updateFocusMode(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      focusMode: event.target.checked\n    }})\n    fetchUpdateUserSettings('focus_mode', event.target.checked);\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n\n      <button className={styles.CloseModal}\n              onClick={closeModal}>\n        {iconBack}\n      </button>\n\n      <div className={styles.Body}>\n        <h3>\n          Settings\n        </h3>\n\n        <a href={props.userSettings.spotify.authorizationUrl}>Connect your Spotify Premium account.</a>\n\n        <a href={\"#apple-music\"} onClick={handleAppleMusic}>Connect your Apple Music account.</a>\n\n        <div>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.idleQueue} onChange={updateIdleQueue} disabled={!controlsEnabled}/>\n            Idle After Queue\n          </label>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.speakVoice} onChange={updateSpeakVoice} disabled={!controlsEnabled}/>\n            Speak Voice Recordings\n          </label>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.focusMode} onChange={updateFocusMode} disabled={!controlsEnabled}/>\n            Focus Mode\n          </label>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  userSettings: state.userSettings\n});\n\nexport default connect(mapStateToProps)(UserSettings);\n","export const iconScanForward = (\n  <svg width=\"32\" height=\"30\" viewBox=\"0 0 32 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M30.9998 2.49805V11.4998H21.998\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M27.2341 19.0006C26.2588 21.761 24.4129 24.1297 21.9743 25.7497C19.5357 27.3697 16.6367 28.1532 13.7141 27.9822C10.7914 27.8113 8.00356 26.695 5.77052 24.8017C3.53749 22.9085 1.98029 20.3407 1.33357 17.4854C0.68686 14.6301 0.985673 11.6419 2.18499 8.97125C3.3843 6.30055 5.41913 4.09199 7.98285 2.67838C10.5466 1.26476 13.5003 0.722688 16.3989 1.13383C19.2975 1.54498 21.984 2.88707 24.0535 4.95786L30.9998 11.4991\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.112 18.04V19H8.804V18.04H10.508V13.36C10.42 13.48 10.26 13.616 10.028 13.768C9.796 13.912 9.544 14.036 9.272 14.14C9 14.244 8.76 14.296 8.552 14.296V13.288C8.728 13.288 8.92 13.24 9.128 13.144C9.344 13.04 9.552 12.92 9.752 12.784C9.952 12.648 10.12 12.52 10.256 12.4C10.4 12.28 10.484 12.196 10.508 12.148H11.588V18.04H13.112ZM20.1223 15.484C20.1223 16.188 19.9903 16.816 19.7263 17.368C19.4623 17.912 19.1023 18.34 18.6463 18.652C18.1903 18.964 17.6703 19.12 17.0863 19.12C16.5023 19.12 15.9823 18.964 15.5263 18.652C15.0703 18.34 14.7103 17.912 14.4463 17.368C14.1823 16.816 14.0503 16.188 14.0503 15.484C14.0503 14.78 14.1823 14.156 14.4463 13.612C14.7103 13.06 15.0703 12.628 15.5263 12.316C15.9823 11.996 16.5023 11.836 17.0863 11.836C17.6703 11.836 18.1903 11.996 18.6463 12.316C19.1023 12.628 19.4623 13.06 19.7263 13.612C19.9903 14.156 20.1223 14.78 20.1223 15.484ZM19.0543 15.484C19.0543 14.956 18.9703 14.492 18.8023 14.092C18.6343 13.692 18.4023 13.38 18.1063 13.156C17.8103 12.932 17.4703 12.82 17.0863 12.82C16.6943 12.82 16.3503 12.932 16.0543 13.156C15.7583 13.38 15.5263 13.692 15.3583 14.092C15.1903 14.492 15.1063 14.956 15.1063 15.484C15.1063 16.012 15.1903 16.476 15.3583 16.876C15.5263 17.268 15.7583 17.576 16.0543 17.8C16.3503 18.024 16.6943 18.136 17.0863 18.136C17.4703 18.136 17.8103 18.024 18.1063 17.8C18.4023 17.576 18.6343 17.268 18.8023 16.876C18.9703 16.476 19.0543 16.012 19.0543 15.484Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\n\nexport const iconScanBackward = (\n  <svg width=\"32\" height=\"30\" viewBox=\"0 0 32 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.00019 2.49805V11.4998H10.002\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.76591 19.0006C5.74115 21.761 7.58714 24.1297 10.0257 25.7497C12.4643 27.3697 15.3633 28.1532 18.2859 27.9822C21.2086 27.8113 23.9964 26.695 26.2295 24.8017C28.4625 22.9085 30.0197 20.3407 30.6664 17.4854C31.3131 14.6301 31.0143 11.6419 29.815 8.97125C28.6157 6.30055 26.5809 4.09199 24.0171 2.67838C21.4534 1.26476 18.4997 0.722688 15.6011 1.13383C12.7025 1.54498 10.016 2.88707 7.94653 4.95786L1.00017 11.4991\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M16.112 18.04V19H11.804V18.04H13.508V13.36C13.42 13.48 13.26 13.616 13.028 13.768C12.796 13.912 12.544 14.036 12.272 14.14C12 14.244 11.76 14.296 11.552 14.296V13.288C11.728 13.288 11.92 13.24 12.128 13.144C12.344 13.04 12.552 12.92 12.752 12.784C12.952 12.648 13.12 12.52 13.256 12.4C13.4 12.28 13.484 12.196 13.508 12.148H14.588V18.04H16.112ZM23.1223 15.484C23.1223 16.188 22.9903 16.816 22.7263 17.368C22.4623 17.912 22.1023 18.34 21.6463 18.652C21.1903 18.964 20.6703 19.12 20.0863 19.12C19.5023 19.12 18.9823 18.964 18.5263 18.652C18.0703 18.34 17.7103 17.912 17.4463 17.368C17.1823 16.816 17.0503 16.188 17.0503 15.484C17.0503 14.78 17.1823 14.156 17.4463 13.612C17.7103 13.06 18.0703 12.628 18.5263 12.316C18.9823 11.996 19.5023 11.836 20.0863 11.836C20.6703 11.836 21.1903 11.996 21.6463 12.316C22.1023 12.628 22.4623 13.06 22.7263 13.612C22.9903 14.156 23.1223 14.78 23.1223 15.484ZM22.0543 15.484C22.0543 14.956 21.9703 14.492 21.8023 14.092C21.6343 13.692 21.4023 13.38 21.1063 13.156C20.8103 12.932 20.4703 12.82 20.0863 12.82C19.6943 12.82 19.3503 12.932 19.0543 13.156C18.7583 13.38 18.5263 13.692 18.3583 14.092C18.1903 14.492 18.1063 14.956 18.1063 15.484C18.1063 16.012 18.1903 16.476 18.3583 16.876C18.5263 17.268 18.7583 17.576 19.0543 17.8C19.3503 18.024 19.6943 18.136 20.0863 18.136C20.4703 18.136 20.8103 18.024 21.1063 17.8C21.4023 17.576 21.6343 17.268 21.8023 16.876C21.9703 16.476 22.0543 16.012 22.0543 15.484Z\" fill=\"#0047FF\"/>\n  </svg>\n);\n\n\nexport const iconPlayCircle = (\n  <svg width=\"65\" height=\"65\" viewBox=\"0 0 65 65\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M32.5 64C49.897 64 64 49.897 64 32.5C64 15.103 49.897 1 32.5 1C15.103 1 1 15.103 1 32.5C1 49.897 15.103 64 32.5 64Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n    <path d=\"M26 20L45 32.5L26 45V20Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n  </svg>\n);\n\n\nexport const iconPauseCircle = (\n  <svg width=\"65\" height=\"65\" viewBox=\"0 0 65 65\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M32.5 64C49.897 64 64 49.897 64 32.5C64 15.103 49.897 1 32.5 1C15.103 1 1 15.103 1 32.5C1 49.897 15.103 64 32.5 64Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n    <path d=\"M26 20V45M39 45V20\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" fill=\"#FFF\"/>\n  </svg>\n);\n\n\nexport const iconNotStartedCircle = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" enableBackground=\"new 0 0 24 24\" height=\"48px\" viewBox=\"0 0 24 24\" width=\"48px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/><path d=\"M12,4c4.41,0,8,3.59,8,8s-3.59,8-8,8s-8-3.59-8-8S7.59,4,12,4 M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10 s10-4.48,10-10C22,6.48,17.52,2,12,2L12,2z M11,8H9v8h2V8z M17,12l-5-4v8L17,12z\"/></g></svg>\n)\n\n\nexport const iconMusic = (\n  <svg\n    width=\"28\"\n    height=\"28\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n\n\nexport const iconMic = (\n  <svg\n    width=\"26\"\n    height=\"26\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\nexport const iconGear = (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z\" fill=\"white\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" stroke=\"#0047FF\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n","import React, { useState } from \"react\";\n\nimport { connect } from 'react-redux';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\n\nimport { cycleVolumeLevel, featureIsEnabled } from '../../PlaybackApp/utils';\nimport { playbackChangeVolume } from '../../PlaybackApp/controls';\nimport { iconNextTrack, iconPrevTrack } from '../../PlaybackApp/icons';\nimport ParentProgressBar from '../../PlaybackApp/ParentProgressBar/ParentProgressBar';\nimport { iconSpotify, iconYouTube, iconAppleMusic, iconLogoAlt, iconAudius } from '../../../icons';\nimport { SERVICE_SPOTIFY, SERVICE_YOUTUBE, SERVICE_APPLE_MUSIC, SERVICE_JUKEBOX_RADIO, SERVICE_AUDIUS } from '../../../config/services';\nimport UserSettings from '../../UserSettings/UserSettings'\n\nimport styles from './BottomBar.module.css';\nimport {\n  iconGear,\n  // eslint-disable-next-line\n  iconScanForward,\n  // eslint-disable-next-line\n  iconScanBackward,\n  iconPlayCircle,\n  iconPauseCircle,\n} from './icons';\n\n\nfunction BottomBar(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid],\n        playback = props.playback,\n        audioVolumeLevel = playback.volumeLevel.audio;\n\n  // eslint-disable-next-line\n  const controlsEnabled = featureIsEnabled(props),\n        nowPlayingTrackService = nowPlaying?.track?.service;\n\n  const [showModal, setShowModal] = useState(false);\n\n  /*\n   * Opens the \"User Settings\" modal.\n   */\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  /*\n   * Closes the \"User Settings\" modal.\n   */\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  let serviceSvg;\n  if(nowPlayingTrackService === SERVICE_SPOTIFY) {\n    serviceSvg = iconSpotify;\n  } else if(nowPlayingTrackService === SERVICE_YOUTUBE) {\n    serviceSvg = iconYouTube;\n  } else if(nowPlayingTrackService === SERVICE_APPLE_MUSIC) {\n    serviceSvg = iconAppleMusic;\n  } else if(nowPlayingTrackService === SERVICE_JUKEBOX_RADIO) {\n    serviceSvg = iconLogoAlt;\n  } else if(nowPlayingTrackService === SERVICE_AUDIUS) {\n    serviceSvg = iconAudius;\n  }\n\n  /*\n   * Modify playback to seek in a certain diretion ('forward' or 'backward').\n   */\n  const handleNext = function(direction) {\n    if(!controlsEnabled) {\n      return;\n    }\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"pause\",\n          status: \"kickoff\",\n          fake: true,\n        },\n      },\n    });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"next\",\n          status: \"kickoff\",\n          fake: false,\n        },\n      },\n    });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"play\",\n          status: \"kickoff\",\n          fake: true,\n        },\n      },\n    });\n  };\n\n  /*\n   * Modify playback to seek in a certain diretion ('forward' or 'backward').\n   */\n  const handlePrev = function(direction) {\n    if(!controlsEnabled) {\n      return;\n    }\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"pause\",\n          status: \"kickoff\",\n          fake: true,\n        },\n      },\n    });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"prev\",\n          status: \"kickoff\",\n          fake: false,\n        },\n      },\n    });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"play\",\n          timestampMilliseconds: 0,\n          status: \"kickoff\",\n          fake: true,\n        },\n      },\n    });\n  };\n\n  /*\n   * Modify playback to play or pause, whichever one is relevant.\n   * NOTE: If no song is currently playing, then the \"play button\" will\n   *       actually perform the \"nextTrack\" action.\n   */\n  const handlePlayPause = async function() {\n    if(!controlsEnabled) {\n      return;\n    }\n    if(nowPlaying?.status === \"played\") {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"pause\",\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n    } else if(nowPlaying?.status === 'paused') {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"play\",\n            timestampMilliseconds: nowPlaying.statusAt - nowPlaying.startedAt,\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n    } else {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"next\",\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"play\",\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n    }\n  }\n\n  /*\n   * When a user toggles volume level. It cycles through predefined volume\n   * levels.\n   */\n  const handleCycleVolumeLevel = function() {\n    const nextVolumeLevel = cycleVolumeLevel(audioVolumeLevel);\n    playbackChangeVolume(playback, nowPlaying, nextVolumeLevel);\n    props.dispatch({ type: 'playback/cycleVolumeLevelAudio' });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.BottomBar}>\n\n      <div className={styles.ProgressBarContainer}>\n        <ParentProgressBar queue={nowPlaying}\n                           mode={\"player\"}\n                           playbackControls={props.playbackControls}\n                           allowMarkerSeek={true}\n                           allowMarkerDelete={false}\n                           allowIntervalPlay={false}\n                           allowIntervalDelete={false}>\n        </ParentProgressBar>\n      </div>\n\n      <div className={styles.Settings}>\n        <button onClick={openModal}>\n          {iconGear}\n        </button>\n      </div>\n      <UserSettings isOpen={showModal}\n                    closeModal={closeModal} />\n\n      <button className={styles.Volume} onClick={handleCycleVolumeLevel}>\n        <CircularProgressbarWithChildren\n              value={audioVolumeLevel * 100}\n              circleRatio={0.75}\n              strokeWidth={3}\n              styles={buildStyles({\n                rotation: 1 / 2 + 1 / 8,\n                strokeLinecap: \"butt\",\n                pathColor: \"#0047FF\",\n                trailColor: \"#EAEAEA\",\n                pathTransitionDuration: 0.15,\n              })} >\n          <div className={styles.IconContainer}>\n            {serviceSvg}\n          </div>\n        </CircularProgressbarWithChildren>\n      </button>\n\n      <div className={styles.Playback}>\n        <button onClick={handlePrev}\n                disabled={!controlsEnabled} >\n          {iconPrevTrack}\n        </button>\n        <button onClick={handlePlayPause}\n                disabled={!controlsEnabled} >\n          {nowPlaying && nowPlaying.status === \"played\" ?\n            iconPauseCircle : iconPlayCircle\n          }\n        </button>\n        <button onClick={handleNext}\n                disabled={!controlsEnabled} >\n          {iconNextTrack}\n        </button>\n      </div>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    queueMap: state.queueMap,\n    playback: state.playback,\n    main: state.main,\n});\n\n\nexport default connect(mapStateToProps)(BottomBar);\n","export const iconLogo = (\n  <svg width=\"38\" height=\"38\" viewBox=\"0 0 213 213\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect width=\"213\" height=\"213\" fill=\"#0047FF\"/>\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M65.9999 172.354L65.9999 140.822C93.3189 140.822 115.465 118.675 115.465 91.3561L115.465 91.3535L147 91.3535L147 91.3544C147 136.089 110.735 172.354 66 172.354C66 172.354 65.9999 172.354 65.9999 172.354Z\" fill=\"white\"/>\n    <circle cx=\"130.924\" cy=\"56.7267\" r=\"16.0763\" fill=\"white\"/>\n  </svg>\n);\n","import React, { useState } from \"react\";\n\nimport { connect } from 'react-redux';\nimport { Link } from \"react-router-dom\";\n\nimport styles from './SideBar.module.css';\nimport { iconLogo } from './icons';\n\n\nfunction SideBar(props) {\n\n  /*\n   * \n   */\n  const sideBar = props.sideBar;\n\n  // eslint-disable-next-line\n  const [counter, setCounter] = useState(0);\n\n  /*\n   * Switches the active tab, updating styles in the side bar.\n   */\n  const handleTab = function(tab) {\n    props.dispatch({\n      type: \"sideBar/selectTab\",\n      payload: { tab },\n    });\n  }\n\n  // TODO: refactor these inline CSS styles into classes.\n  let top;\n  if (sideBar.tab === \"search\") {\n    top = \"28px\";\n  } else if (sideBar.tab === \"queue\") {\n    top = \"91.5px\";\n  } else if (sideBar.tab === \"feed\") {\n    top = \"155px\";\n  }\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.SideBar}>\n\n      <div className={styles.Logo}>\n        {iconLogo}\n      </div>\n\n      <div className={styles.MenuContainer}>\n        <div className={styles.Menu}\n            onClick={(e) => { setCounter(prev => prev + 1); }}>\n          <div className={(sideBar.tab === \"search\" && styles.LiSelected) || \"\"}>\n            <Link to=\"/app/search\" onClick={() => { handleTab(\"search\"); }} style={{color: \"#000\"}}>Search</Link>\n          </div>\n          <div className={(sideBar.tab === \"queue\" && styles.LiSelected) || \"\"}>\n            <Link to=\"/app/queue\" onClick={() => { handleTab(\"queue\"); }} style={{color: \"#000\"}}>Queue</Link>\n          </div>\n          <div className={(sideBar.tab === \"feed\" && styles.LiSelected) || \"\"}>\n            <Link to=\"/app/feed\" onClick={() => { handleTab(\"feed\"); }} style={{color: \"#000\"}}>Feed</Link>\n          </div>\n        </div>\n\n        <div className={styles.BlockContainer}>\n          <div className={styles.Block} style={{top}}></div>\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    sideBar: state.sideBar,\n});\n\n\nexport default connect(mapStateToProps)(SideBar);\n","import React, { useState, useEffect } from \"react\";\n\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\n\nimport FeedApp from '../../FeedApp/FeedApp';\nimport QueueApp from '../../QueueApp/QueueApp';\nimport MiniQueue from '../../QueueApp/MiniQueue/MiniQueue';\nimport SearchApp from '../../SearchApp/SearchApp';\nimport MiniNotes from '../../SearchApp/MiniNotes/MiniNotes';\nimport WelcomeApp from '../../WelcomeApp/WelcomeApp';\n\nimport BottomBar from '../BottomBar/BottomBar';\nimport SideBar from '../SideBar/SideBar';\n\nimport styles from './Session.module.css';\n\n\nfunction Session(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        queueMap = props.queueMap,\n        nowPlaying = queueMap[stream.nowPlayingUuid],\n        nextUpQueueUuids = props.nextUpQueueUuids;\n\n  const [showModal, setShowModal] = useState(false);\n  const [forceHideModal, setForceHideModal] = useState(false);\n\n  /*\n   * Closes the \"Welcome\" modal.\n   */\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  /*\n   * Switches the active tab, updating styles in the side bar.\n   */\n  const handleTab = function(tab) {\n    props.dispatch({\n      type: \"sideBar/selectTab\",\n      payload: { tab },\n    });\n  }\n\n  useEffect(() => {\n    const shouldDisplayModal = (\n      nowPlaying?.status !== \"played\" &&\n      nowPlaying?.status !== 'paused' &&\n      !nextUpQueueUuids.length &&\n      !forceHideModal\n    )\n    if(!shouldDisplayModal) {\n      return;\n    }\n    setShowModal(true);\n    setForceHideModal(true);\n  }, [nowPlaying, nextUpQueueUuids, forceHideModal])\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.Session}>\n\n      <WelcomeApp isOpen={showModal}\n                  closeModal={closeModal} />\n\n      <div className={styles.Top}>\n\n        {/* SIDE BAR */}\n        <SideBar />\n\n        <div className={styles.Content}>\n          <Switch>\n\n            {/* FEED */}\n            <Route path=\"/app/feed\">\n              <FeedApp playbackControls={props.playbackControls}/>\n            </Route>\n\n            {/* QUEUE */}\n            <Route path=\"/app/queue\">\n              <div className={styles.PrimaryContent}>\n                <QueueApp playbackControls={props.playbackControls}/>\n              </div>\n              <div className={styles.SecondaryContent}>\n                <MiniNotes />\n              </div>\n            </Route>\n\n            {/* SEARCH */}\n            <Route path=\"/app/search\">\n              <div className={styles.PrimaryContent}>\n                <SearchApp />\n              </div>\n                <div className={styles.SecondaryContent}>\n                  <MiniNotes />\n                  <Link to=\"/app/queue\" onClick={() => { handleTab(\"queue\"); }} style={{ textDecoration: 'none', color: \"#000\" }}>\n                    <MiniQueue />\n                  </Link>\n                </div>\n            </Route>\n\n          </Switch>\n        </div>\n      </div>\n\n      {/* BOTTOM BAR */}\n      <BottomBar playbackControls={props.playbackControls} />\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    queueMap: state.queueMap,\n    nextUpQueueUuids: state.nextUpQueueUuids,\n});\n\n\nexport default connect(mapStateToProps)(Session);\n","import {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from '../FeedApp/network';\n\nimport { store } from '../../utils/redux';\n\n\n/*\n * Load comments and voice recordings to update the feed.\n */\nexport const fetchUpdateFeed = async function(trackUuid) {\n  const responseJsonTextCommentList = await fetchTextCommentList(trackUuid);\n  store.dispatch(responseJsonTextCommentList.redux);\n  const responseJsonVoiceRecordingList = await fetchVoiceRecordingList(trackUuid);\n  store.dispatch(responseJsonVoiceRecordingList.redux);\n};\n","import { store } from '../../utils/redux';\n\n\nexport const onpause = function() {\n  const reduxState = store.getState();\n  if(reduxState.playback.action !== \"paused\") {\n    console.log('Paused, Hmm?');\n    return;\n  }\n  const action = null;\n  store.dispatch({\n    type: \"playback/action\",\n    payload: { action },\n  });\n}\n\nexport const onplay = function() {\n  const reduxState = store.getState();\n  if(reduxState.playback.action !== \"played\") {\n    console.log('Played, Hmm?');\n    return;\n  }\n  const action = null;\n  store.dispatch({\n    type: \"playback/action\",\n    payload: { action },\n  });\n}\n\nexport const onseeked = function() {\n  const reduxState = store.getState();\n\n  // TODO: should be \"seeked\"\n  if(reduxState.playback.action !== \"played\") {\n    console.log('Seeked, Hmm?');\n    return;\n  }\n  const action = null;\n  store.dispatch({\n    type: \"playback/action\",\n    payload: { action },\n  });\n}\n","import React, { useEffect } from \"react\";\n\nimport { connect } from 'react-redux';\nimport { Switch, Route } from \"react-router-dom\";\n\nimport SpotifySync from '../SpotifySync/SpotifySync';\nimport Session from './Session/Session';\nimport { fetchUpdateFeed } from '../FeedApp/utils';\nimport { fetchPauseTrack, fetchPlayTrack, fetchScan, fetchNextTrack, fetchPrevTrack, fetchTrackGetFiles } from '../PlaybackApp/Player/network';\nimport { getLeafQueue } from '../QueueApp/utils';\nimport {\n  SERVICE_JUKEBOX_RADIO,\n  SERVICE_AUDIUS,\n} from '../../config/services';\nimport { onplay, onpause, onseeked } from './utils';\n\n\nfunction MainApp(props) {\n\n  const main = props.main,\n        stream = props.stream,\n        feedApp = props.feedApp,\n        playback = props.playback,\n        queueMap = props.queueMap,\n        lastUpQueueUuids = props.lastUpQueueUuids,\n        nextUpQueueUuids = props.nextUpQueueUuids,\n        nowPlaying = queueMap[playback.nowPlayingUuid],\n        lastUp = getLeafQueue(lastUpQueueUuids[lastUpQueueUuids.length - 1], queueMap),\n        nextUp = getLeafQueue(nextUpQueueUuids[0], queueMap);\n\n  /*\n   *\n   */\n  const seek = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n    props.dispatch({ type: \"main/clearAutoplayTimeoutId\" });\n\n    const action = main.actions[0],\n          timestampMilliseconds = action.timestampMilliseconds;\n\n    // Seek in the playback engine\n    const isSeeking = props.playbackControls.seek(timestampMilliseconds);\n\n    if(!isSeeking) {\n      // If seek failed for some reason, return early.\n      props.dispatch({ type: 'main/actionShift' });\n      props.dispatch({ type: 'main/enable' });\n      return;\n    }\n    props.dispatch({\n      type: 'feed/takeAction',\n      payload: {\n        timestampMilliseconds: timestampMilliseconds,\n        action: \"seeked\",\n        trackUuid: nowPlaying.track.uuid,\n      },\n    });\n\n    if(!timestampMilliseconds) {\n      // If routine seek, (skipping an muted interval) return early to prevent\n      // hitting the API.\n      props.dispatch({ type: 'main/actionShift' });\n      props.dispatch({ type: 'main/enable' });\n      return;\n    }\n\n    // Seek in the API layer\n    const startedAt = Date.now() - timestampMilliseconds;\n    if(!action.fake) {\n      await fetchScan(startedAt);\n    }\n\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  /*\n   *\n   */\n  const pause = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n\n    const action = main.actions[0];\n\n    // Pause in the playback engine\n    const isPausing = props.playbackControls.pause();\n\n    if(!isPausing) {\n      // If pause failed for some reason, return early.\n      props.dispatch({ type: 'main/actionShift' });\n      props.dispatch({ type: 'main/enable' });\n      return;\n    }\n    props.dispatch({\n      type: 'feed/takeAction',\n      payload: {\n        action: \"paused\",\n      },\n    });\n\n    // Pause in the API layer\n    if(!action.fake) {\n      await fetchPauseTrack();\n    }\n\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  /*\n   *\n   */\n  const play = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n    props.dispatch({ type: \"main/clearAutoplayTimeoutId\" });\n\n    const action = main.actions[0],\n          timestampMilliseconds = action.timestampMilliseconds;\n\n    // Play in the playback engine\n    const isPlaying = props.playbackControls.play(timestampMilliseconds);\n    if(!isPlaying) {\n      // If play failed for some reason, return early.\n      props.dispatch({ type: 'main/actionShift' });\n      props.dispatch({ type: 'main/enable' });\n      return;\n    }\n    props.dispatch({\n      type: 'feed/takeAction',\n      payload: {\n        timestampMilliseconds: timestampMilliseconds,\n        action: \"played\",\n        trackUuid: nowPlaying.track.uuid,\n      },\n    });\n\n    // Pause in the API layer\n    if(!action.fake) {\n      await fetchPlayTrack(timestampMilliseconds);\n    }\n\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  const next = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n    props.dispatch({ type: 'stream/nextTrack' });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"mount\",\n          queue: nextUp,\n          status: \"kickoff\",\n          fake: true,  // symbolic, not functional\n        },\n      },\n    });\n    await fetchNextTrack(false);\n    props.dispatch({ type: 'main/actionShift' });\n  }\n\n  const prev = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n    props.dispatch({ type: 'stream/prevTrack' });\n    props.dispatch({\n      type: \"main/addAction\",\n      payload: {\n        action: {\n          name: \"mount\",\n          queue: lastUp,\n          status: \"kickoff\",\n          fake: true,  // symbolic, not functional\n        },\n      },\n    });\n    await fetchPrevTrack(false);\n    props.dispatch({ type: 'main/actionShift' });\n  }\n\n  const loadAudio = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n\n    const action = main.actions[0],\n          queue = action.queue;\n\n    if(queue.track.service === SERVICE_JUKEBOX_RADIO) {\n      const responseJson = await fetchTrackGetFiles(queue.track.uuid);\n      responseJson.redux.payload = {\n        ...responseJson.redux.payload, onplay, onpause, onseeked,\n      };\n      props.dispatch(responseJson.redux);\n    }\n    if(queue.track.service === SERVICE_AUDIUS) {\n      props.dispatch({\n        \"type\": \"playback/loadAudius\",\n        \"payload\": {\n          \"id\": queue.track.externalId,\n          \"trackUuid\": queue.track.uuid,\n          onplay, onpause, onseeked,\n        },\n      });\n    }\n\n    // TODO: This actions should really be shifted once the audio file is\n    //       properly loaded.\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  const loadFeed = async function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n\n    const action = main.actions[0],\n          queue = action.queue;\n\n    await fetchUpdateFeed(queue.track.uuid);\n\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  const mount = function() {\n    props.dispatch({ type: 'main/actionStart' });\n    props.dispatch({ type: 'main/disable' });\n\n    const action = main.actions[0];\n    let payload;\n    if(action.queue) {\n      payload = { queue: action.queue };\n    } else if(action.stream) {\n      payload = { stream: action.stream };\n    }\n    props.dispatch({ type: \"playback/mount\", payload });\n\n    props.dispatch({ type: 'main/actionShift' });\n    props.dispatch({ type: 'main/enable' });\n  }\n\n  /*\n   * An action was triggered or changed somewhere in the application. This\n   * handles the change accordingly.\n   */\n  useEffect(function() {\n    console.log(main.actions)\n    if(!main.actions.length) {\n      // We only do something if there is something to do.\n      return;\n    }\n\n    const action = main.actions[0];\n    if(action.status !== \"kickoff\") {\n      // Something is already in progress.\n      return;\n    }\n\n    if(playback.action) {\n      // Playback action is still in progress.\n      return;\n    }\n\n    if(action.name === \"seek\") {\n      seek();\n    } else if(action.name === \"pause\") {\n      pause();\n    } else if(action.name === \"play\") {\n      play();\n    } else if(action.name === \"next\") {\n      next();\n    } else if(action.name === \"prev\") {\n      prev();\n    } else if(action.name === \"loadAudio\") {\n      loadAudio();\n    } else if(action.name === \"loadFeed\") {\n      loadFeed();\n    } else if(action.name === \"mount\") {\n      mount();\n    }\n  // eslint-disable-next-line\n  }, [main, playback])\n\n  /*\n   * Schedules \"next track\" behavior after \"now playing\" terminates.\n   */\n  useEffect(function() {\n    if(playback.nowPlayingUuid !== stream.nowPlayingUuid) {\n      return;\n    }\n    if(main.autoplayTimeoutId || !playback.isPlaying) {\n      return;\n    }\n\n    const timestampMilliseconds = Date.now() - nowPlaying.startedAt,\n          remainingMilliseconds = nowPlaying.durationMilliseconds - timestampMilliseconds,\n          timeoutDelay = remainingMilliseconds - 5000;\n\n    const timeoutId = setTimeout(kickoffAutoplay, timeoutDelay);\n    props.dispatch({\n      type: \"main/setAutoplayTimeoutId\",\n      payload: { timeoutId },\n    });\n  // eslint-disable-next-line\n  }, [main, playback])\n\n  const kickoffAutoplay = function() {\n    props.dispatch({ type: 'main/disable' });\n\n    const timestampMilliseconds = Date.now() - nowPlaying.startedAt,\n          remainingMilliseconds = nowPlaying.durationMilliseconds - timestampMilliseconds,\n          timeoutDelay = remainingMilliseconds - 4000;\n\n    setTimeout(initializeAutoplay, timeoutDelay);\n  }\n\n  const initializeAutoplay = function() {\n\n    console.log('TODO: pre-loading for autoplay');\n\n    const timestampMilliseconds = Date.now() - nowPlaying.startedAt,\n          remainingMilliseconds = nowPlaying.durationMilliseconds - timestampMilliseconds,\n          timeoutDelay = remainingMilliseconds;\n\n    setTimeout(function() {\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"next\",\n            status: \"kickoff\",\n            fake: false,\n          },\n        },\n      });\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"play\",\n            status: \"kickoff\",\n            fake: true,\n          },\n        },\n      });\n    }, timeoutDelay);\n  }\n\n  useEffect(function() {\n    if(playback.nowPlayingUuid === stream.nowPlayingUuid) {\n      return;\n    }\n    if(main.autoplayTimeoutId || !playback.isPlaying) {\n      return;\n    }\n\n    const timestampMilliseconds = Date.now() - nowPlaying.startedAt,\n          remainingMilliseconds = nowPlaying.durationMilliseconds - timestampMilliseconds,\n          timeoutDelay = remainingMilliseconds;\n\n    const timeoutId = setTimeout(resetStartedAt, timeoutDelay);\n    props.dispatch({\n      type: \"main/setAutoplayTimeoutId\",\n      payload: { timeoutId },\n    });\n  // eslint-disable-next-line\n  }, [main, playback]);\n\n  const resetStartedAt = function() {\n    const now = Date.now();\n    props.dispatch({\n      type: 'queue/update',\n      payload: {\n        queues: [\n          {\n            ...nowPlaying,\n            startedAt: now,\n            statusAt: now,\n            status: \"paused\",\n          }\n        ]\n      },\n    });\n  }\n\n  /*\n   * Used to preload for soon-to-be-played queue items.\n   */\n  useEffect(function() {\n    const queues = [lastUp, nowPlaying, nextUp];\n    const queuesAlreadyLoading = new Set(\n      main.actions\n      .filter(a => a.name === 'loadAudio')\n      .map(a => a.queue.uuid)\n    );\n\n    // Preload audio\n    for(const queue of queues) {\n      if(!queue?.track) {\n        // No queue, nothing to load.\n        continue;\n      }\n\n      const rawAudioServices = new Set();\n      rawAudioServices.add(SERVICE_JUKEBOX_RADIO);\n      rawAudioServices.add(SERVICE_AUDIUS);\n      if(!rawAudioServices.has(queue.track.service)) {\n        // We only need to load audio from raw audio services.\n        continue;\n      }\n\n      if(queuesAlreadyLoading.has(queue.uuid) || playback.files.hasOwnProperty(queue.track.uuid)) {\n        // Audio is already loading or loaded.\n        continue;\n      }\n\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"loadAudio\",\n            queue: queue,\n            status: \"kickoff\",\n            fake: true,  // symbolic, not functional\n          },\n        },\n      });\n    }\n\n    // Preload feed\n    const queuesAlreadyLoadingFeed = new Set(\n      main.actions\n      .filter(a => a.name === 'loadFeed')\n      .map(a => a.queue.uuid)\n    );\n    for(const queue of queues) {\n      if(!queue?.track) {\n        // No queue, nothing to load.\n        continue;\n      }\n\n      if(queuesAlreadyLoadingFeed.has(queue.uuid)) {\n        // Feed is already loading.\n        continue;\n      }\n\n      if(feedApp.trackMap.hasOwnProperty(queue.track.uuid)) {\n        // Feed is already loaded.\n        continue;\n      }\n\n      props.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"loadFeed\",\n            queue: queue,\n            status: \"kickoff\",\n            fake: false,  // symbolic, not functional\n          },\n        },\n      });\n    }\n  // eslint-disable-next-line\n  }, [playback])\n\n  /*\n   * \n   */\n  return (\n    <Switch>\n      <Route path=\"/app/:content\">\n        <Session playbackControls={props.playbackControls} />\n      </Route>\n      <Route path=\"/u/:username\">\n        <span>PROFILE</span>\n      </Route>\n      <Route path=\"/spotify\">\n        <SpotifySync />\n      </Route>\n      <Route>\n        <Session playbackControls={props.playbackControls} />\n      </Route>\n    </Switch>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  main: state.main,\n  playback: state.playback,\n  queueMap: state.queueMap,\n  lastUpQueueUuids: state.lastUpQueueUuids,\n  nextUpQueueUuids: state.nextUpQueueUuids,\n  stream: state.stream,\n  feedApp: state.feedApp,\n});\n\n\nexport default connect(mapStateToProps)(MainApp);\n","export const appendScript = async function(scriptPath) {\n  return new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src = scriptPath;\n    script.async = true;\n    script.onload = () => { resolve(); };\n    document.body.appendChild(script);\n  });\n}\n","import { useEffect, useState } from \"react\";\n\nimport { connect } from 'react-redux';\nimport YouTube from 'react-youtube';\n\nimport MainApp from '../MainApp/MainApp';\nimport { fetchGetUserSettings } from '../UserSettings/network';\nimport {\n  SERVICE_YOUTUBE,\n} from '../../config/services';\nimport { appendScript } from '../../utils/async';\nimport { store } from '../../utils/redux';\n\nimport {\n  playbackControlStart,\n  playbackControlSeek,\n  playbackControlPause,\n} from './controls';\nimport { getPositionMilliseconds, updateSpotifyPlayer } from './utils';\nimport styles from './PlaybackApp.module.css';\n\n\nconst SpotifyWebApi = require('spotify-web-api-js');\n\n\nfunction PlaybackApp(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        playback = props.playback,\n        userSettings = props.userSettings,\n        feedApp = props.feedApp,\n        sideBar = props.sideBar;\n\n  const queueMap = props.queueMap,\n        nowPlaying = queueMap[playback.nowPlayingUuid];\n\n  // Convenience values to help clarify setting up playback SDKs.\n  const [appleMusicSDKReady, setAppleMusicSDKReady] = useState(false);\n  const [spotifySDKReady, setSpotifySDKReady] = useState(false);\n  const [spotifySDKDeviceID, setSpotifySDKDeviceID] = useState(undefined);\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// PLAYBACK INTERFACE\n\n  /*\n   * Seek to the expected position in the track. This may be called in 2 cases:\n   *   1: a user prompts a manual seek event.\n   *   2: a seekTimeout event is triggered, meaning the now playing track must\n   *      seek to the new expected track progress (in the case of a muted\n   *      interval).\n   */\n  const seek = async function(timestampMilliseconds = undefined) {\n    if(!nowPlaying) {\n      // A queue must be mounted to the playback engine.\n      return false;\n    }\n    if(!playback.isPlaying) {\n      // That something in must also currently be playing.\n      return false;\n    }\n    if(playback.action) {\n      // No other action can be in progress, like playing a new track.\n      return false;\n    }\n\n    // Valid conditions, so we seek.\n    const action = 'played';\n    props.dispatch({\n      type: 'playback/action',\n      payload: { action },\n    });\n\n    // Clear scheduled \"seek\"\n    props.dispatch({ type: 'playback/clearSeekTimeoutId' });\n\n    const startedAt = (\n      timestampMilliseconds === undefined ?\n      nowPlaying.startedAt : Date.now() - timestampMilliseconds\n    );\n    nowPlaying.startedAt = startedAt;\n    playbackControlSeek(playback, nowPlaying, startedAt);\n\n    // We need to update the queue object as well.\n    props.dispatch({\n      type: 'queue/update',\n      payload: {\n        queues: [\n          {\n            ...nowPlaying,\n            startedAt,\n            statusAt: Date.now(),\n            status: \"played\",\n          }\n        ]\n      },\n    });\n\n    // Let the caller know that seek was initiated.\n    return true;\n  }\n\n  /*\n   * Toggling the player from \"playing\" to \"paused.\"\n   */\n  const pause = async function() {\n    if(!nowPlaying) {\n      // A queue must be mounted to the playback engine.\n      return false;\n    }\n    if(!playback.isPlaying) {\n      // That something in must also currently be playing.\n      return false;\n    }\n    if(playback.action) {\n      // No other action can be in progress, like playing a new track.\n      return false;\n    }\n\n    // Valid conditions, so we pause.\n    const action = 'paused';\n    props.dispatch({\n      type: 'playback/action',\n      payload: { action },\n    });\n\n    // Clear scheduled \"seek\"\n    props.dispatch({ type: 'playback/clearSeekTimeoutId' });\n\n    playbackControlPause(playback, nowPlaying);\n\n    // We need to update the queue object as well.\n    props.dispatch({\n      type: 'queue/update',\n      payload: {\n        queues: [\n          {\n            ...nowPlaying,\n            statusAt: Date.now(),\n            status: \"paused\",\n          }\n        ]\n      },\n    });\n\n    // Let the caller know that pause was initiated.\n    return true;\n  }\n\n  /*\n   * Toggling the player from the \"paused\" to \"playing\" state.\n   */\n  const play = async function(timestampMilliseconds = undefined) {\n    if(!nowPlaying) {\n      // A queue must be mounted to the playback engine.\n      return false;\n    }\n    if(playback.isPlaying) {\n      // That something must also not be currently playing.\n      return false;\n    }\n    if(playback.action) {\n      // No other action can be in progress, like playing a new track.\n      return false;\n    }\n\n    // Valid conditions, so we play.\n    const action = 'played';\n    props.dispatch({\n      type: 'playback/action',\n      payload: { action },\n    });\n\n    const now = Date.now(),\n          startedAt = (\n            timestampMilliseconds ?\n            now - timestampMilliseconds : now\n          );\n    nowPlaying.status = 'played';\n    nowPlaying.statusAt = now;\n    nowPlaying.startedAt = startedAt;\n\n    playbackControlStart(playback, nowPlaying);\n\n    // We need to update the queue object as well.\n    props.dispatch({\n      type: 'queue/update',\n      payload: {\n        queues: [\n          {\n            ...nowPlaying,\n            startedAt,\n            statusAt: now,\n            status: \"played\",\n          }\n        ]\n      },\n    });\n\n    return true;\n  }\n\n  /*\n   * Passed down to child components so they can have a handle on playback.\n   */\n  const playbackControls = { seek, pause, play };\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// PLAYBACK ENGINE\n  useEffect(() => {\n\n    // debouncer\n    const needsToScheduleAddToQueue = (\n      nowPlaying?.status === \"played\" &&\n      playback.isPlaying &&\n      !playback.seekTimeoutId\n    );\n    if(!needsToScheduleAddToQueue) {\n      return;\n    }\n\n    // Schedule task that modifies playback due to configured intervals.\n    const arr = getPositionMilliseconds(nowPlaying, nowPlaying.startedAt),\n          seekTimeoutDuration = arr[1];\n    if(seekTimeoutDuration) {\n      const timeoutId = setTimeout(function() {\n        const action = {\n          name: \"seek\",\n          status: \"kickoff\",\n          fake: true,\n        };\n        props.dispatch({\n          type: \"main/addAction\",\n          payload: { action },\n        });\n      }, seekTimeoutDuration);\n      props.dispatch({\n        type: 'playback/setSeekTimeoutId',\n        payload: { timeoutId },\n      });\n    }\n\n  // eslint-disable-next-line\n  }, [playback]);\n\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// LOAD SDKs\n  useEffect(() => {\n    appendSpotifySDK();\n    appendAppleMusicSDK();\n  }, []);\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// SPOTIFY\n\n  /*\n   * Loads the Spotify SDK.\n   */\n  const appendSpotifySDK = function() {\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      setSpotifySDKReady(true);\n    };\n    appendScript(\"https://sdk.scdn.co/spotify-player.js\");\n  };\n\n  /*\n   * Spotify SDK script has been loaded. Now initialize the SDK.\n   */\n  useEffect(() => {\n    if(!spotifySDKReady) {\n      return;\n    }\n\n    // Define the Spotify Web SDK.\n    const player = new window.Spotify.Player({\n      name: 'Jukebox Radio',\n      getOAuthToken: (cb) => {\n        fetchGetUserSettings()\n          .then(responseJson => {\n            const spotifyAccessToken = responseJson.data.spotify.accessToken;\n            if(spotifyAccessToken) {\n              // Spotify's SDK automatically refreshes the access token\n              // periodically so it always has a valid token.\n              cb(spotifyAccessToken);\n              // The SpotifyWebApi interface must be updated as well.\n              const spotifyApi = new SpotifyWebApi();\n              spotifyApi.setAccessToken(responseJson.data.spotify.accessToken);\n              props.dispatch({\n                type: 'playback/spotify',\n                payload: { spotifyApi: spotifyApi },\n              });\n            }\n          });\n      }\n    });\n\n    // Once player is ready, tranfer playback to Spotify Web SDK.\n    player.addListener('ready', ({ device_id }) => {\n      setSpotifySDKDeviceID(device_id);\n    });\n\n    // TODO: Listen to Spotify events.\n    player.addListener('player_state_changed', (state) => {\n      if(!state) {\n        return;\n      }\n      // console.log(`Time delta: ${Date.now() - state.timestamp}`)\n      // console.log(state)\n      const reduxState = store.getState(),\n            reduxPlayback = reduxState.playback;\n      if(!reduxPlayback.loaded.spotify) {\n        props.dispatch({\n          type: \"playback/loaded\",\n          payload: { service: \"spotify\" },\n        });\n      }\n\n      // let shouldCheckPosition = !state.paused;\n\n      // Release lock!\n      // console.log(\"action (in spotify event listner)\", reduxState.playback.action)\n      if(reduxState.playback.action === \"paused\" && state.paused) {\n        // shouldCheckPosition = true;\n        const action = null;\n        props.dispatch({\n          type: \"playback/action\",\n          payload: { action },\n        });\n      } else if(reduxState.playback.action === \"played\" && !state.paused) {\n        // shouldCheckPosition = true;\n        const action = null;\n        props.dispatch({\n          type: \"playback/action\",\n          payload: { action },\n        });\n      } else if(reduxState.playback.action === \"seek\") {\n        const action = null;\n        props.dispatch({\n          type: \"playback/action\",\n          payload: { action },\n        });\n      }\n\n      // Release lock after seek as successfully taken place.\n      // TODO: the following!\n      // if(shouldCheckPosition) {\n      //   const delay = Date.now() - state.timestamp,\n      //         reduxNowPlaying = reduxState.queueMap[reduxState.playback.nowPlayingUuid],\n      //         arr = getPositionMilliseconds(reduxNowPlaying, reduxNowPlaying.startedAt),\n      //         enginePosition = arr[0],\n      //         spotifyPosition = state.position + delay,\n      //         delta = enginePosition - spotifyPosition;\n      //   console.log(enginePosition, spotifyPosition, enginePosition - spotifyPosition, (delta > 5 || delta < -5));\n      //\n      //   if(delta > 5 || delta < -5) {\n      //     const startedAt = nowPlaying.startedAt - delta;\n      //     props.dispatch({\n      //       type: 'queue/update',\n      //       payload: { queues: [{ ...nowPlaying, startedAt }] },\n      //     });\n      //   }\n      // }\n    });\n\n    // Kick off initialization.\n    player.connect();\n\n  // eslint-disable-next-line\n  }, [spotifySDKReady]);\n\n  useEffect(() => {\n    if(!spotifySDKDeviceID) {\n      return;\n    }\n    updateSpotifyPlayer(playback, spotifySDKDeviceID);\n    props.dispatch({ type: 'playback/enable' });\n  // eslint-disable-next-line\n  }, [spotifySDKDeviceID])\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// APPLE MUSIC\n\n  const appendAppleMusicSDK = function() {\n    appendScript(\"https://js-cdn.music.apple.com/musickit/v1/musickit.js\")\n      .then(() => {\n        setAppleMusicSDKReady(true);\n      });\n  };\n\n  useEffect(() => {\n    if(!appleMusicSDKReady) {\n      return;\n    }\n\n    window.addEventListener('musickitloaded', () => {\n      props.dispatch({\n        type: \"playback/loaded\",\n        payload: { service: \"appleMusic\" },\n      });\n    })\n\n    // Define the Apple Music Web SDK.\n    const player = window.MusicKit.configure({\n      developerToken: userSettings.appleMusic.token,\n      app: {\n        name: 'Jukebox Radio',\n        build: '0.0.1',\n      },\n    });\n\n    // TODO: Listen to Apple Music events.\n    player.addEventListener(\"playbackStateDidChange\", (e) => {\n      const reduxState = store.getState(),\n            playbackStates = window.MusicKit.PlaybackStates;\n\n      const didPlay = (\n        (\n          (playbackStates[e.oldState] === \"seeking\" && playbackStates[e.state] === \"playing\") ||\n          (playbackStates[e.oldState] === \"waiting\" && playbackStates[e.state] === \"playing\")\n        ) &&\n        reduxState.playback.action === \"played\"\n      )\n      if(didPlay) {\n        const action = null;\n        props.dispatch({\n          type: \"playback/action\",\n          payload: { action },\n        });\n      }\n\n      const didPause = (\n        playbackStates[e.oldState] === \"playing\" &&\n        playbackStates[e.state] === \"paused\" &&\n        reduxState.playback.action === \"paused\"\n      )\n      if(didPause) {\n        const action = null;\n        props.dispatch({\n          type: \"playback/action\",\n          payload: { action },\n        });\n      }\n    });\n\n  // eslint-disable-next-line\n  }, [appleMusicSDKReady]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  //// YOUTUBE\n  let youTubeContainerStyle = {},\n      youTubeWidth = 300,\n      youTubeHeight = 169;\n  if(nowPlaying?.track?.service === SERVICE_YOUTUBE) {\n    if(stream.nowPlayingUuid === playback.nowPlayingUuid) {\n      if(sideBar.tab === \"feed\" && feedApp.contentContainer) {\n        const containerRect = feedApp.contentContainer;\n        youTubeWidth = containerRect.width - 88;\n        youTubeHeight = youTubeWidth / 16 * 9;\n        youTubeContainerStyle = {\n          position: \"absolute\",\n          width: youTubeWidth,\n          height: youTubeHeight,\n          top: `${95 + 44}px`,\n          left: `${341 + 44}px`,\n          zIndex: 16,\n        }\n      } else {\n        youTubeContainerStyle = {\n          position: \"absolute\",\n          width: 300,\n          height: 169,\n          top: \"95px\",\n          right: \"57px\",\n          boxShadow: \"4px 4px 12px rgba(0, 0, 0, 0.15)\",\n        };\n      }\n    } else {\n      console.log('pop up queue view')\n      youTubeContainerStyle = {\n        position: \"fixed\",\n        top: \"295px\",\n        right: \"257px\",\n      };\n    }\n  } else {\n    youTubeContainerStyle = {\n      display: \"none\",\n    };\n  }\n\n  const currentQueue = nowPlaying,\n        isYouTube = currentQueue?.track?.service === SERVICE_YOUTUBE;\n\n  const youTubeStart = isYouTube ? Math.floor(currentQueue.playbackIntervals[0].startPosition / 1000) : null,\n        youTubeVideoId = isYouTube ? currentQueue?.track?.externalId : null,\n        youTubeOpts = {\n          width: \"100%\",\n          height: \"100%\",\n          playerVars: {\n            // https://developers.google.com/youtube/player_parameters\n            autoplay: 0,   // the initial video will automatically start to play\n            controls: 0,   // hide playback controls\n            disablekb: 1,  // disable keyboard controls\n            fs: 0,         // disable full screen\n            iv_load_policy: 3,\n            modestbranding: 1,  // minimal YT branding\n            origin: 'jukeboxrad.io',\n            playsinline: 1,\n            start: youTubeStart,\n          },\n        };\n\n  const onYouTubeReady = function(e) {\n    const youTubeApi = e.target;\n\n    props.dispatch({\n      type: \"playback/loaded\",\n      payload: { service: \"youtube\" },\n    });\n\n    if(playback.youTubeAutoplay) {\n      youTubeApi.playVideo();\n      props.dispatch({\n        type: 'playback/youTubeTriggerAutoplay',\n        payload: { autoplay: false },\n      });\n    }\n\n    props.dispatch({\n      type: 'playback/youTube',\n      payload: { youTubeApi },\n    });\n  }\n\n  const onYouTubePause = function() {\n    // console.log(playback.youTubeApi.getCurrentTime())\n    if(!playback.action) {\n      return;\n    }\n    const action = null;\n    props.dispatch({\n      type: \"playback/action\",\n      payload: { action },\n    });\n  }\n\n  const onYouTubePlay = function() {\n    // console.log(playback.youTubeApi.getCurrentTime())\n    if(!playback.action) {\n      return;\n    }\n    const action = null;\n    props.dispatch({\n      type: \"playback/action\",\n      payload: { action },\n    });\n  }\n\n\n  /*\n   * \n   */\n  return (\n    <>\n      <div className={styles.YouTubeContainer}\n           style={youTubeContainerStyle}>\n          <YouTube videoId={youTubeVideoId}\n                   opts={youTubeOpts}\n                   onReady={onYouTubeReady}\n                   onPause={onYouTubePause}\n                   onPlay={onYouTubePlay} />\n      </div>\n      <MainApp playbackControls={playbackControls}/>\n    </>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    playback: state.playback,\n    queueMap: state.queueMap,\n    lastUpQueueUuids: state.lastUpQueueUuids,\n    nextUpQueueUuids: state.nextUpQueueUuids,\n    userSettings: state.userSettings,\n    feedApp: state.feedApp,\n    sideBar: state.sideBar,\n});\n\n\nexport default connect(mapStateToProps)(PlaybackApp);\n","import './App.css';\nimport {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from './components/FeedApp/network';\nimport { fetchVerifyToken } from './components/Login/network';\nimport {\n  fetchStreamGet,\n  fetchPauseTrack,\n} from './components/PlaybackApp/Player/network';\nimport { fetchGetUserSettings } from './components/UserSettings/network';\nimport { fetchQueueList } from './components/QueueApp/network'\nimport { store } from './utils/redux'\nimport Login from './components/Login/Login';\nimport PlaybackApp from './components/PlaybackApp/PlaybackApp';\nimport { useEffect, useState } from \"react\";\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport TimeAgo from 'javascript-time-ago'\nimport en from 'javascript-time-ago/locale/en'\n\n\nfunction App() {\n\n  // Keeps track of the status of the webpage\n  //\n  //    - initial:          When the page is first loaded\n  //    - unauthenticated:  The client does NOT have a valid access token\n  //    - authenticated:    The client has a valid access token\n  //    - ready:            All API data has been loaded\n  const [status, setStatus] = useState('initial');\n\n  //////////////////////\n  // componentDidMount\n  useEffect(() => {\n    async function loadData() {\n      let responseJson;\n\n      // 1: Verify authentication.\n      const authResponse = await fetchVerifyToken();\n      if (!authResponse) {\n        setStatus('unauthenticated');\n        return;\n      }\n\n      // Update status.\n      setStatus('authenticated');\n\n      // 1B: Fetch user settings!\n      responseJson = await fetchGetUserSettings();\n      await store.dispatch({\n        type: 'user/get-settings',\n        userSettings: responseJson.data,\n      });\n\n      // 2: Load stream.\n      responseJson = await fetchStreamGet();\n      await store.dispatch(responseJson.redux);\n\n      // 2.5: Mount the stream for playback\n      const state = store.getState(),\n            stream = state.stream,\n            queueMap = state.queueMap,\n            nowPlaying = queueMap[stream.nowPlayingUuid];\n\n      store.dispatch({\n        type: \"main/addAction\",\n        payload: {\n          action: {\n            name: \"mount\",\n            stream: stream,\n            status: \"kickoff\",\n            fake: true,  // symbolic, not functional\n          },\n        },\n      });\n\n      // 4: Load the queue.\n      responseJson = await fetchQueueList();\n      await store.dispatch(responseJson.redux);\n\n      // IMPORTANT: need to reload stream from state to get cleaned stream.\n      if(nowPlaying?.track?.uuid) {\n        // 5: Load relevant comments.\n        const textCommentsJsonResponse = await fetchTextCommentList(nowPlaying?.track?.uuid);\n        await store.dispatch(textCommentsJsonResponse.redux);\n\n        // 6: Load relevant voice recordings. This will also generate the feed.\n        const voiceRecordingsJsonResponse = await fetchVoiceRecordingList(nowPlaying?.track?.uuid);\n        await store.dispatch(voiceRecordingsJsonResponse.redux);\n      }\n\n      // Update status.\n      setStatus('ready');\n    }\n    TimeAgo.addDefaultLocale(en);\n    loadData();\n\n    // Start PWA\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('worker.js', {scope: '.'}).then(function(registration) {\n        console.log('Worker registration successful', registration.scope);\n      });\n    }\n    // End PWA\n\n    // Prestyle side bar\n    store.dispatch({\n      type: \"sideBar/selectTab\",\n      payload: { tab: window.location.pathname.substring(5) },\n    });\n\n    // Define behavior for when the webpage is closed.\n    window.addEventListener(\"beforeunload\", (e) => {\n      e.preventDefault();\n      const state = store.getState(),\n            stream = state.stream,\n            queueMap = state.queueMap,\n            nowPlaying = queueMap[stream.nowPlayingUuid];\n      if(nowPlaying.status !== \"played\") {\n        return;\n      }\n      fetchPauseTrack();\n    });\n  }, []);\n\n  window.addEventListener('playbackStateDidChange', (event) => {\n    console.log('apple loaded!!');\n  });\n\n  // When the page is initially loaded, display nothing.\n  if(status === 'initial') {\n    return <></>;\n  }\n\n  // If the user is NOT authenticated, display the login portal.\n  if(status === 'unauthenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          <Login />\n        </Provider>\n      </Router>\n    )\n  }\n\n  // if the user is not authenticated, only display the login portal\n  if(status === 'authenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          <div style={{\n            textAlign: \"center\",\n            lineHeight: \"100vh\",\n            fontSize: \"24px\",\n            fontWeight: \"400\",\n            letterSpacing: \"0.03em\",\n          }}>\n            Loading...\n          </div>\n        </Provider>\n      </Router>\n    )\n  }\n\n  // display the main UI now that everything is loaded up\n\n  /*\n   * \n   */\n  return (\n    <Router>\n      <Provider store={store}>\n        <div className=\"app-main-container\">\n          <PlaybackApp />\n        </div>\n      </Provider>\n    </Router>\n  );\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Upload_Modal__2GjDz\",\"ModalOverlay\":\"Upload_ModalOverlay__wVh9q\",\"CloseModal\":\"Upload_CloseModal__16yvT\",\"Login\":\"Upload_Login__1Djzz\",\"FormBlock\":\"Upload_FormBlock__2ls6S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedApp\":\"FeedApp_FeedApp__2YJHa\",\"ContentContainer\":\"FeedApp_ContentContainer__35Ble\",\"ImageContainer\":\"FeedApp_ImageContainer__2bkPv\",\"FeedWrapper\":\"FeedApp_FeedWrapper__5dQdY\",\"Feed\":\"FeedApp_Feed__3NWaq\",\"ComposeBar\":\"FeedApp_ComposeBar__1Ruxz\",\"NotationButton\":\"FeedApp_NotationButton__I_SwR\",\"RecordButton\":\"FeedApp_RecordButton__3saQA\",\"SubmitButton\":\"FeedApp_SubmitButton__2uOQ-\",\"spotify\":\"FeedApp_spotify__uumF9\",\"apple_music\":\"FeedApp_apple_music__1nUmb\",\"youtube\":\"FeedApp_youtube__1OvA_\",\"audius\":\"FeedApp_audius__2vOKN\",\"jukebox_radio\":\"FeedApp_jukebox_radio__3q45Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideBar\":\"SideBar_SideBar__2JzAY\",\"Logo\":\"SideBar_Logo__3Rpb1\",\"MenuContainer\":\"SideBar_MenuContainer__Vo66M\",\"Menu\":\"SideBar_Menu__2AXUO\",\"LiSelected\":\"SideBar_LiSelected__I4UGd\",\"BlockContainer\":\"SideBar_BlockContainer__1xblm\",\"Block\":\"SideBar_Block__pWG7t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueApp\":\"QueueApp_QueueApp__3OUXI\",\"NowPlaying\":\"QueueApp_NowPlaying__1b43j\",\"NowPlayingArt\":\"QueueApp_NowPlayingArt__lmZtW\",\"NowPlayingInformation\":\"QueueApp_NowPlayingInformation__2MrMS\",\"NowPlayingDuration\":\"QueueApp_NowPlayingDuration__2hzHf\",\"QueueContainer\":\"QueueApp_QueueContainer__1NMWJ\",\"PlaybackDuration\":\"QueueApp_PlaybackDuration__1DbyU\",\"AddToQueue\":\"QueueApp_AddToQueue__1Zpmd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueCollection\":\"QueueCollection_QueueCollection__2uTSJ\",\"QueueCollectionMain\":\"QueueCollection_QueueCollectionMain__2fm5w\",\"AlbumArtContainer\":\"QueueCollection_AlbumArtContainer__1LjHs\",\"QueueInformation\":\"QueueCollection_QueueInformation__3MDGa\",\"ButtonContainer\":\"QueueCollection_ButtonContainer__1NOfG\",\"DurationContainer\":\"QueueCollection_DurationContainer__2u08t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProgressBarMarker\":\"ProgressBarMarker_ProgressBarMarker__157Kt\",\"ProgressBarMarkerPointer\":\"ProgressBarMarker_ProgressBarMarkerPointer__1WtJ4\",\"ProgressBarMarkerPointerGrey\":\"ProgressBarMarker_ProgressBarMarkerPointerGrey__1nISi\",\"ProgressBarMarkerPointerExtensionGrey\":\"ProgressBarMarker_ProgressBarMarkerPointerExtensionGrey__2gIcW\",\"ProgressBarMarkerPointerExtension\":\"ProgressBarMarker_ProgressBarMarkerPointerExtension__23ZOu\",\"HoverContainer\":\"ProgressBarMarker_HoverContainer__2DQHs\",\"ProgressBarMarkerName\":\"ProgressBarMarker_ProgressBarMarkerName__3XKgL\",\"Delete\":\"ProgressBarMarker_Delete__qeuaM\",\"Play\":\"ProgressBarMarker_Play__DOjgc\",\"Stop\":\"ProgressBarMarker_Stop__1-uih\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueTrackHead\":\"QueueTrack_QueueTrackHead__1p7iu\",\"QueueTrackChild\":\"QueueTrack_QueueTrackChild__1kwMH\",\"AlbumArtContainer\":\"QueueTrack_AlbumArtContainer__31HWs\",\"QueueInformationHead\":\"QueueTrack_QueueInformationHead__T9dRY\",\"QueueInformationChild\":\"QueueTrack_QueueInformationChild__3laIO\",\"TrackInfoDuration\":\"QueueTrack_TrackInfoDuration__3KwoI\",\"ButtonContainer\":\"QueueTrack_ButtonContainer__1X5d4\",\"ButtonHead\":\"QueueTrack_ButtonHead__1L5IW\",\"ButtonChild\":\"QueueTrack_ButtonChild__1CWxx\",\"DurationContainerChild\":\"QueueTrack_DurationContainerChild__3O650\",\"DurationContainerHead\":\"QueueTrack_DurationContainerHead__3tRZT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchResult\":\"SearchResult_SearchResult__djXCo\",\"SearchResultSubmitted\":\"SearchResult_SearchResultSubmitted__2krh6\",\"ImageParent\":\"SearchResult_ImageParent__1wD2d\",\"ResultInformation\":\"SearchResult_ResultInformation__1iB5a\",\"ServiceLogo\":\"SearchResult_ServiceLogo__38ftd\",\"AddButton\":\"SearchResult_AddButton__1rvJ4\",\"AddButtonInverted\":\"SearchResult_AddButtonInverted__bx1zo\",\"ggSpinner\":\"SearchResult_ggSpinner__iNeQG\",\"spinner\":\"SearchResult_spinner__u3axZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"ABCNotationCompose_Modal__3HIof\",\"ModalOverlay\":\"ABCNotationCompose_ModalOverlay__1KyWJ\",\"CloseModal\":\"ABCNotationCompose_CloseModal__3DepO\",\"ContentContainer\":\"ABCNotationCompose_ContentContainer__3gDoD\",\"NotationContainer\":\"ABCNotationCompose_NotationContainer__PAwEe\",\"RenderingContainer\":\"ABCNotationCompose_RenderingContainer__27LEj\",\"RenderingWrapper\":\"ABCNotationCompose_RenderingWrapper__HaopG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProgressAll\":\"ChildProgressBar_ProgressAll__2IIt8\",\"ProgressSolo\":\"ChildProgressBar_ProgressSolo__2uX4J\",\"ProgressMuted\":\"ChildProgressBar_ProgressMuted__QW2lL\",\"ProgressHoverContainerAll\":\"ChildProgressBar_ProgressHoverContainerAll__13YPC\",\"ProgressHoverContainerMuted\":\"ChildProgressBar_ProgressHoverContainerMuted__33OBN\",\"ProgressHoverPointerAll\":\"ChildProgressBar_ProgressHoverPointerAll__1azTz\",\"ProgressHoverPointerMuted\":\"ChildProgressBar_ProgressHoverPointerMuted__3TOh1\",\"ProgressHoverPurpose\":\"ChildProgressBar_ProgressHoverPurpose__1v52t\",\"ProgressHoverDelete\":\"ChildProgressBar_ProgressHoverDelete__2kn7E\",\"HoverContainer\":\"ChildProgressBar_HoverContainer__GlWxc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Session\":\"Session_Session__3G52u\",\"Top\":\"Session_Top__3uCH7\",\"Content\":\"Session_Content__3lPl4\",\"MainContent\":\"Session_MainContent__2jQHq\",\"PrimaryContent\":\"Session_PrimaryContent__3yGCf\",\"SecondaryContent\":\"Session_SecondaryContent__1Uvc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ABCNotationDisplayContainer\":\"ABCNotationDisplay_ABCNotationDisplayContainer__1XIAg\",\"ABCNotationDisplay\":\"ABCNotationDisplay_ABCNotationDisplay__2WbrS\",\"ABCNotationDisplayDeleted\":\"ABCNotationDisplay_ABCNotationDisplayDeleted__30l7q\",\"HoverBuffer\":\"ABCNotationDisplay_HoverBuffer__23EQ0\",\"HoverContainer\":\"ABCNotationDisplay_HoverContainer__2-ckV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VoiceRecordingContainer\":\"VoiceRecording_VoiceRecordingContainer__3KlG9\",\"VoiceRecording\":\"VoiceRecording_VoiceRecording__29j03\",\"VoiceRecordingDeleted\":\"VoiceRecording_VoiceRecordingDeleted__3_8Xz\",\"HoverBuffer\":\"VoiceRecording_HoverBuffer__1o_ZD\",\"HoverContainer\":\"VoiceRecording_HoverContainer__IkgPO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextCommentContainer\":\"TextComment_TextCommentContainer__SVUy9\",\"TextComment\":\"TextComment_TextComment__92FmQ\",\"TextCommentDeleted\":\"TextComment_TextCommentDeleted__2uxdr\",\"HoverBuffer\":\"TextComment_HoverBuffer__3Q-eC\",\"HoverContainer\":\"TextComment_HoverContainer__2jQUc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BottomBar\":\"BottomBar_BottomBar__3MLzc\",\"ProgressBarContainer\":\"BottomBar_ProgressBarContainer__3JWuw\",\"Playback\":\"BottomBar_Playback__3N-qW\",\"Settings\":\"BottomBar_Settings__20SLM\",\"Volume\":\"BottomBar_Volume__25kUh\",\"IconContainer\":\"BottomBar_IconContainer__3n8pF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ParentProgressBar\":\"ParentProgressBar_ParentProgressBar__2FcI4\",\"ProgressBar\":\"ParentProgressBar_ProgressBar__uCese\",\"ProgressPointer\":\"ParentProgressBar_ProgressPointer__2qz3g\",\"ProgressMarkerContainer\":\"ParentProgressBar_ProgressMarkerContainer__g8qrF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"UserSettings_Modal__3TYHr\",\"ModalOverlay\":\"UserSettings_ModalOverlay__28qDn\",\"CloseModal\":\"UserSettings_CloseModal__1AD3L\",\"Body\":\"UserSettings_Body__1j89O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotableText\":\"NotableText_NotableText__gYPiJ\",\"Popover\":\"NotableText_Popover__1cHGj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SystemActionContainer\":\"SystemAction_SystemActionContainer__2HNLC\",\"SystemAction\":\"SystemAction_SystemAction__2qCDO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TrackDetailApp\":\"TrackDetailApp_TrackDetailApp__2pNUa\",\"CloseModal\":\"TrackDetailApp_CloseModal__2ssSn\",\"Preview\":\"TrackDetailApp_Preview__3QeWE\",\"PreviewImgContainer\":\"TrackDetailApp_PreviewImgContainer__1Vz4u\",\"PreviewImg\":\"TrackDetailApp_PreviewImg__1Lb5-\",\"PreviewControlContainer\":\"TrackDetailApp_PreviewControlContainer__CWL7L\",\"PreviewControl\":\"TrackDetailApp_PreviewControl__1Buba\",\"PreviewControlScan\":\"TrackDetailApp_PreviewControlScan__2B4g_\",\"TabButtonContainer\":\"TrackDetailApp_TabButtonContainer__3N1LG\",\"TabButton\":\"TrackDetailApp_TabButton__1DxpH\",\"TabButtonActive\":\"TrackDetailApp_TabButtonActive__3qweT\",\"MotiveContainer\":\"TrackDetailApp_MotiveContainer__3csY5\",\"MotiveCheckboxContainer\":\"TrackDetailApp_MotiveCheckboxContainer__mNmTb\",\"Form\":\"TrackDetailApp_Form__4-ngK\",\"FormLabel\":\"TrackDetailApp_FormLabel__1_Ctj\",\"FormInput\":\"TrackDetailApp_FormInput__2RyXX\",\"FormSelect\":\"TrackDetailApp_FormSelect__2rpk1\",\"FormSubmit\":\"TrackDetailApp_FormSubmit__1WPZd\",\"Modal\":\"TrackDetailApp_Modal__1mVpe\",\"ModalOverlay\":\"TrackDetailApp_ModalOverlay__1lvxm\",\"ModalContent\":\"TrackDetailApp_ModalContent__t34KR\",\"QueueName\":\"TrackDetailApp_QueueName__doJks\",\"ProgressBar\":\"TrackDetailApp_ProgressBar__3T_Ui\"};"],"sourceRoot":""}