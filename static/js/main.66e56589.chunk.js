(this["webpackJsonpjukebox-radio"]=this["webpackJsonpjukebox-radio"]||[]).push([[0],{17:function(e,t,n){e.exports={Session:"Session_Session__3G52u",Top:"Session_Top__3uCH7",Content:"Session_Content__3lPl4",PrimaryContent:"Session_PrimaryContent__3yGCf",SecondaryContent:"Session_SecondaryContent__1Uvc2"}},18:function(e,t,n){e.exports={Player:"Player_Player__Xx8fy",Div:"Player_Div__1Mznx",Button:"Player_Button__1lbWu",Image:"Player_Image__1PWwp",MoreNextUp:"Player_MoreNextUp__2_uZ-"}},191:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(24),i=n.n(s),u=(n(96),n(2)),o=n.n(u),l=n(4),d=n(6),p=(n(98),"https://prod.jukeboxrad.io"),b="GET",j="POST";function x(){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(o.a.mark((function e(){var t,n,a,r,c,s,i,u,l,b,j,x,f,h,v,O,m,y,k,g,w,C,_,P=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.length>0&&void 0!==P[0]?P[0]:"",n=P.length>1&&void 0!==P[1]?P[1]:"",a=P.length>2&&void 0!==P[2]?P[2]:{},n=p+n,"GET"===t){e.next=16;break}for(c=new FormData,s=0,i=Object.entries(a);s<i.length;s++)u=Object(d.a)(i[s],2),l=u[0],b=u[1],c.append(l,b);return j={headers:{}},(x=localStorage.getItem("accessToken"))&&(j.headers.Authorization="Bearer ".concat(x)),f=new Request(n,j),e.next=13,fetch(f,{method:t,mode:"cors",body:c});case 13:r=e.sent,e.next=26;break;case 16:for(h=new URLSearchParams,v=0,O=Object.entries(a);v<O.length;v++)m=Object(d.a)(O[v],2),y=m[0],k=m[1],h.set(y,k);return g=n+"/?"+h.toString(),w={headers:{"Content-Type":"application/json"}},(C=localStorage.getItem("accessToken"))&&(w.headers.Authorization="Bearer ".concat(C)),_=new Request(g,w),e.next=25,fetch(_,{method:t,mode:"cors"});case 25:r=e.sent;case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/text-comment/create/",{text:t,format:n,textCommentUuid:a,textCommentTimestamp:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/comments/text-comment/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/comments/voice-recording/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/auth/obtain-tokens/",{username:t,password:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/initialize/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("accessToken"),e.next=3,x(j,"/auth/verify-token/",{token:t});case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/streams/stream/get");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/music/track/get-files",{trackUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/next-track/",{nowPlayingTotalDurationMilliseconds:t,isPlanned:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/pause-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/play-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/prev-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/scan-backward/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/stream/scan-forward/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/streams/queue/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/queue/delete/",{queueUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/users/user/get-settings");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/users/user/update-settings/",{field:t,value:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e,t){if(!e.nowPlaying)return[void 0,void 0];for(var n,a=Date.now()-t,r=0,c=0;;){var s=e.nowPlaying.playbackIntervals[r],i=s[1]-s[0],u=a-c;if(u<i){a=s[0]+u,n=s[1]-a;break}r+=1,c+=i}return r===e.nowPlaying.playbackIntervals.length-1&&(n=void 0),[a,n]},I=function(e){return(null===e||void 0===e?void 0:e.isPaused)?e.pausedAt-e.startedAt:(null===e||void 0===e?void 0:e.isPlaying)?Date.now()-e.startedAt:void 0},F="spotify",R="youtube",D="jukebox_radio",q=function(e,t){var n=t.nowPlaying.track.service;if(n===F)e.spotifyApi.pause();else if(n===R)e.youTubeApi.pauseVideo();else if(n===D){var a=t.nowPlaying.track.uuid;e.files[a].audio.pause()}},L=function(e,t){var n=t.nowPlaying.track.service;if(n===F)e.spotifyApi.play();else if(n===R)e.youTubeApi.playVideo();else if(n===D){var a=t.nowPlaying.track.uuid;e.files[a].audio.play()}},E=function(e,t,n){var a=A(t,n)[0],r=t.nowPlaying.track.service;if(r===F)e.spotifyApi.seek(a);else if(r===R)e.youTubeApi.seekTo(a/1e3),e.youTubeApi.playVideo();else if(r===D){var c=t.nowPlaying.track.uuid,s=e.files[c].audio;s.currentTime=a/1e3,s.play()}},V=n(8),Z=n(3),H=n(43),J="hide",z=function(e){var t=e.stream,n=W(t),a=Object(d.a)(n,3),r=a[0],c=a[1],s=a[2];if(!r)return[];var i=Object(V.a)(e.textComments),u=Object(V.a)(e.voiceRecordings),o=[].concat(Object(V.a)(i),Object(V.a)(u));return o=(o=(o=o.map((function(e){var t=e.timestampMilliseconds>s&&e.timestampMilliseconds<=c,n=e.timestampMilliseconds>c&&e.timestampMilliseconds<=r;return e.renderStatus=t?"history":n?"display":J,Object(Z.a)({},e)}))).filter((function(e){return e.renderStatus!==J}))).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}))},W=function(e){var t;if(!(null===e||void 0===e||null===(t=e.nowPlaying)||void 0===t?void 0:t.track))return[void 0,void 0,void 0];for(var n=e.startedAt,a=e.isPlaying?Date.now()-n:e.pausedAt-n,r=0,c=0,s=0,i=0;;){var u=e.nowPlaying.playbackIntervals[r],o=u[1]-u[0],l=void 0;if((l=a-3e4-i)>=0&&l<o&&(c=u[0]+l),(l=a-3e4-45e3-i)>=0&&l<o&&(s=u[0]+l),(l=a-i)<o){a=u[0]+l;break}r+=1,i+=o}return[a,c,s]},X=function(e){return Object(Z.a)(Object(Z.a)({},e),{},{feed:z(e)})},Y=function(e,t){var n=Object(Z.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=[].concat(Object(V.a)(n[a]),[r]).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return n[a]=c,Object(Z.a)(Object(Z.a)({},e),{},{trackMarkerMap:n})},G=function(e,t){var n=Object(Z.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=n[t.queueUuid].filter((function(e){return e.uuid!==r.uuid}));return n[a]=c,Object(Z.a)(Object(Z.a)({},e),{},{trackMarkerMap:n})},K=function(e,t){var n=t.queueUuid,a=t.markers,r=Object(Z.a)({},e.trackMarkerMap);return r[n]=a,Object(Z.a)(Object(Z.a)({},e),{},{trackMarkerMap:r})},$=n(31),ee=function(e){return e[e.length-1]},te=function(e){return e.length?e[0].children.length?e[0].children[0]:e[0]:void 0},ne=function(e,t){var n=function(e){var t=0;if(e.children.length){var n,a=Object($.a)(e.children);try{for(a.s();!(n=a.n()).done;){t+=n.value.totalDurationMilliseconds}}catch(r){a.e(r)}finally{a.f()}}else t+=e.totalDurationMilliseconds;return t},a=I(t),r=0;return a&&(r=t.nowPlaying.totalDurationMilliseconds-a),e.length?1===e.length?r+n(e[0]):r+e.reduce((function(e,t){return"number"!==typeof e&&(e=n(e)),e+n(t)})):r+0},ae=function e(t){var n,a=Object(Z.a)({},t);if(a.children.length){var r=a.children.map(e),c=r.reduce((function(e,t){return e+t.durationMilliseconds}),0);return a.children=r,a.totalDurationMilliseconds=c,a}var s=a.intervals,i=null===(n=a.track)||void 0===n?void 0:n.durationMilliseconds;if(!s.length)return a.totalDurationMilliseconds=i,a.playbackIntervals=[[0,i]],a;var u,o,l,d=[],p=Object($.a)(s);try{for(p.s();!(l=p.n()).done;){var b=l.value;if(b.lowerBound){if(b.upperBound){u||(u=0),o=b.lowerBound.timestampMilliseconds,d.push([u,o]),u=b.upperBound.timestampMilliseconds,o=void 0;continue}u||(u=0),o=b.lowerBound.timestampMilliseconds,d.push([u,o]),u=void 0;break}u=b.upperBound.timestampMilliseconds}}catch(x){p.e(x)}finally{p.f()}u&&(o=i,d.push([u,o]));var j=d.reduce((function(e,t){return e+(t[1]-t[0])}),0);return a.totalDurationMilliseconds=j,a.playbackIntervals=d,a},re=function(e,t){var n=t.lastUpQueues.map(ae),a=t.nextUpQueues.map(ae),r=e._lastPlayed;r&&n.push(r);var c=e.stream;c.isPlaying||c.isPaused||!c.nowPlaying||(n.push(c.nowPlaying),c=Object(Z.a)(Object(Z.a)({},c),{},{nowPlaying:void 0}));var s=n.length?n[n.length-1]:void 0,i=a.length?a[0].children.length?a[0].children[0]:a[0]:void 0;return Object(Z.a)(Object(Z.a)({},e),{},{stream:c,lastUp:s,lastUpQueues:n,nextUp:i,nextUpQueues:a})},ce=function(e,t){var n=t.stream,a=n.nowPlaying,r=Object(Z.a)({},e);if(a&&(n.nowPlaying=ae(a)),r.stream=n,n.isPlaying||n.isPaused||!n.nowPlaying){if(n.isPlaying){var c=Date.now()-n.startedAt;c&&c>=n.nowPlaying.totalDurationMilliseconds&&(r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1)}}else r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1;return r},se=function(e,t){var n={stream:Object(Z.a)(Object(Z.a)({},e.stream),{},{isPlaying:!0,isPaused:!1,startedAt:t.startedAt})};return ce(e,n)},ie=function(e,t){var n={stream:Object(Z.a)(Object(Z.a)({},e.stream),{},{isPlaying:!1,isPaused:!0,pausedAt:t.pausedAt})};return ce(e,n)},ue=function(e,t){var n=Object(V.a)(e.lastUpQueues),a=Object(V.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],s=n[n.length-1],i=(null===r||void 0===r?void 0:r.parentUuid)&&(null===c||void 0===c?void 0:c.uuid)&&(null===r||void 0===r?void 0:r.parentUuid)===(null===c||void 0===c?void 0:c.uuid);return r&&(i?c.children.unshift(r):a.unshift(r)),n.pop(),Object(Z.a)(Object(Z.a)({},e),{},{stream:Object(Z.a)(Object(Z.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:s,isPlaying:!0,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:void 0})},oe=function(e,t){var n=Object(V.a)(e.lastUpQueues),a=Object(V.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],s=c?c.children.length?c.children[0]:c:void 0;return r&&n.push(r),c&&(c.children.length?(c.children.shift(),c.children.length||a.shift()):a.shift()),Object(Z.a)(Object(Z.a)({},e),{},{stream:Object(Z.a)(Object(Z.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:s,isPlaying:!!s,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:r})},le=function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{playback:Object(Z.a)(Object(Z.a)({},e.playback),{},{spotifyApi:t.spotifyApi,isReady:!0})})},de=function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{playback:Object(Z.a)(Object(Z.a)({},e.playback),{},{youTubeApi:t.youTubeApi})})},pe=function(e){var t=te(e.nextUpQueues);if(!t)return Object(Z.a)({},e);var n=Object(Z.a)({},e.playback),a=e.stream.nowPlaying,r=a.track.service===F&&t.track.service===F&&0===t.playbackIntervals[0][0],c=t.track.service===D;if(r){!function(e,t,n){t.nowPlaying.track.service===F&&e.spotifyApi.queue(n.track.externalId)}(e.playback,e.stream,t),n.queuedUp=!0;var s=a.playbackIntervals;s[s.length-1][1]===a.track.durationMilliseconds&&(n.noopNextTrack=!0)}else c&&w(t.track.uuid).then((function(e){Le.dispatch(e.redux)}));return Object(Z.a)(Object(Z.a)({},e),{},{playback:n})},be=function(e){var t=te(e.nextUpQueues),n=e.playback.queuedUp,a=e.playback.noopNextTrack,r=e.playback.addToQueueTimeoutId,c=e.playback.nextSeekTimeoutId,s=Object(Z.a)(Object(Z.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1});return!t||a?(s.addToQueueTimeoutId=void 0,Object(Z.a)(Object(Z.a)({},e),{},{playback:s})):n?(function(e,t){t.nowPlaying.track.service===F&&e.spotifyApi.skipToNext()}(e.playback,e.stream),s.addToQueueTimeoutId=void 0,Object(Z.a)(Object(Z.a)({},e),{},{playback:s})):(clearTimeout(r),clearTimeout(c),s.isPlaying=!1,s.addToQueueTimeoutId=void 0,s.nextSeekTimeoutId=void 0,Object(Z.a)(Object(Z.a)({},e),{},{playback:s}))},je=function(e,t){var n=e;n=be(n);var a=t.payload,r=n.stream.nowPlaying;return a.startedAt=n.stream.startedAt+r.totalDurationMilliseconds,n=oe(n,a)},xe=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(Z.a)(Object(Z.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1,isPlaying:!1,addToQueueTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(Z.a)(Object(Z.a)({},e),{},{playback:a})},fe=function(e){var t=Object(Z.a)(Object(Z.a)({},e.playback),{},{isPlaying:!0});return Object(Z.a)(Object(Z.a)({},e),{},{playback:t})},he=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(Z.a)(Object(Z.a)({},e.playback),{},{addToQueueTimeoutId:void 0,nextSeekTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(Z.a)(Object(Z.a)({},e),{},{playback:a})},ve=function(e,t){var n=Object(Z.a)(Object(Z.a)({},e.playback),{},{addToQueueTimeoutId:t.addToQueueTimeoutId});return Object(Z.a)(Object(Z.a)({},e),{},{playback:n})},Oe=function(e,t){var n=e.playback.nextSeekTimeoutId,a=Object(Z.a)(Object(Z.a)({},e.playback),{},{nextSeekTimeoutId:t.nextSeekTimeoutId});return clearTimeout(n),Object(Z.a)(Object(Z.a)({},e),{},{playback:a})},me=function(e){return Object(Z.a)(Object(Z.a)({},e),{},{playback:Object(Z.a)(Object(Z.a)({},e.playback),{},{controlsEnabled:!1})})},ye=function(e){return Object(Z.a)(Object(Z.a)({},e),{},{playback:Object(Z.a)(Object(Z.a)({},e.playback),{},{controlsEnabled:!0})})},ke=function(e,t){var n=Object(Z.a)({},e.playback),a=Object(Z.a)({},e.playback.files),r=new Audio(t.track.audioUrl);return a[t.track.uuid]={audio:r},Object(Z.a)(Object(Z.a)({},e),{},{playback:Object(Z.a)(Object(Z.a)({},n),{},{files:a})})},ge=function(e){return function(t){return t.uuid===e}},we=function(e,t){return t.upperBound?e.upperBound?e.upperBound.timestampMilliseconds-e.upperBound.timestampMilliseconds:1:-1},Ce=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,s=e.nextUpQueues,i=-1;c&&(i=s.findIndex(ge(c)),s=s[i].children),n=s.findIndex(ge(r));var u=s[n],o=[].concat(Object(V.a)(u.intervals),[a]).sort(we),l=Object(V.a)(e.nextUpQueues);-1!==i?l[i].children[n].intervals=o:l[n].intervals=o;var d=l.map(ae);return Object(Z.a)(Object(Z.a)({},e),{},{nextUpQueues:d})},_e=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,s=e.nextUpQueues,i=-1;c&&(i=s.findIndex(ge(c)),s=s[i].children),n=s.findIndex(ge(r));var u,o=s[n],l=Object(V.a)(o.intervals).filter((u=a.uuid,function(e){return e.uuid!==u})),d=Object(V.a)(e.nextUpQueues);-1!==i?d[i].children[n].intervals=l:d[n].intervals=l;var p=d.map(ae);return Object(Z.a)(Object(Z.a)({},e),{},{nextUpQueues:p})},Pe=function(e,t){var n=t.textComments,a=Object(Z.a)(Object(Z.a)({},e),{},{textComments:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Se=function(e,t){var n=[].concat(Object(V.a)(e.textComments),[t.textComment]),a=Object(Z.a)(Object(Z.a)({},e),{},{textComments:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Te=function(e,t){var n=e.textComments.filter((function(e){return e.uuid!==t.textCommentUuid})),a=Object(Z.a)(Object(Z.a)({},e),{},{textComments:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Ue=function(e,t){var n=t.textCommentModification,a=t.textCommentUuid,r=Object(V.a)(e.textComments),c=r.findIndex((function(e){return e.uuid===a})),s=r[c],i=Object(V.a)(s.modifications);i.push(n);var u=i.sort((function(e,t){return e.startPtr-t.startPtr}));return r[c].modifications=u,Object(Z.a)(Object(Z.a)({},e),{},{textComments:r})},Me=function(e,t){var n=t.voiceRecordings,a=Object(Z.a)(Object(Z.a)({},e),{},{voiceRecordings:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Ne=function(e,t){var n=[].concat(Object(V.a)(e.voiceRecordings),[t.voiceRecording]),a=Object(Z.a)(Object(Z.a)({},e),{},{voiceRecordings:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Qe=function(e,t){var n=e.voiceRecordings.filter((function(e){return e.uuid!==t.voiceRecordingUuid})),a=Object(Z.a)(Object(Z.a)({},e),{},{voiceRecordings:n});return Object(Z.a)(Object(Z.a)({},a),{},{feed:z(a)})},Be=function(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{userSettings:Object(Z.a)(Object(Z.a)({},e.userSettings),t)})},Ae={nextUpQueues:[],lastUpQueues:[],_lastPlayed:void 0,textComments:[],voiceRecordings:[],feed:[],userSettings:void 0,trackMarkerMap:{},playback:{controlsEnabled:!1,spotifyApi:void 0,isPlaying:!1,queuedUp:!1,noopNextTrack:!1,addToQueueTimeoutId:void 0,isReady:!1,files:{}}};function Ie(e,t){var n=Object(Z.a)({},e.stream),a=n.nowPlaying;return n.isPlaying=!1,n.isPaused=!1,n.nowPlaying=void 0,Object(Z.a)(Object(Z.a)({},e),{},{stream:n,_lastPlayed:a})}function Fe(e,t){var n=e.nextUpQueues.filter((function(e){return e.uuid!==t.queueUuid}));return Object(Z.a)(Object(Z.a)({},e),{},{nextUpQueues:n})}function Re(e,t){var n=Object(V.a)(e.nextUpQueues),a=n.findIndex((function(e){return e.uuid===t.parentUuid})),r=n[a].children.filter((function(e){return e.uuid!==t.queueUuid}));return n[a].children=r,r.length||(n=n.filter((function(e){return e.uuid!==t.parentUuid}))),Object(Z.a)(Object(Z.a)({},e),{},{nextUpQueues:n})}function De(e,t){var n=e.textComments.findIndex((function(e){return e.uuid===t.textCommentUuid})),a=Object(V.a)(e.textComments);return a[n].modifications=[],Object(Z.a)(Object(Z.a)({},e),{},{textComments:a})}function qe(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{userSettings:t.userSettings})}var Le=Object(H.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stream/set":return ce(e,t.payload);case"stream/play":return se(e,t.payload);case"stream/pause":return ie(e,t.payload);case"stream/prevTrack":return ue(e,t.payload);case"stream/nextTrack":return oe(e,t.payload);case"stream/expire":return Ie(e);case"queue/listSet":return re(e,t.payload);case"queue/deleteNode":return Fe(e,t);case"queue/deleteChildNode":return Re(e,t);case"textComment/listSet":return Pe(e,t.payload);case"textComment/create":return Se(e,t);case"textComment/delete":return Te(e,t);case"textCommentModification/create":return Ue(e,t.payload);case"textComment/clearModifications":return De(e,t);case"voiceRecording/create":return Ne(e,t);case"voiceRecording/listSet":return Me(e,t.payload);case"voiceRecording/delete":return Qe(e,t);case"user/get-settings":return qe(e,t);case"marker/create":return Y(e,t.payload);case"marker/delete":return G(e,t.payload);case"marker/list":return K(e,t.payload);case"queueInterval/create":return Ce(e,t.payload);case"queueInterval/delete":return _e(e,t.payload);case"playback/disable":return me(e);case"playback/enable":return ye(e);case"playback/spotify":return le(e,t.payload);case"playback/youTube":return de(e,t.payload);case"playback/addToQueue":return pe(e);case"playback/plannedNextTrack":return je(e,t.payload);case"playback/start":return xe(e);case"playback/started":return fe(e);case"playback/addToQueueReschedule":return he(e);case"playback/addToQueueScheduled":return ve(e,t.payload);case"playback/nextSeekScheduled":return Oe(e,t.payload);case"userSettings/update":return Be(e,t.payload);case"playback/loadFiles":return ke(e,t.payload);case"feed/update":return X(e);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0})),Ee=n(10),Ve=n(32),Ze=n.n(Ve);var He=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(d.a)(i,2),p=u[0],b=u[1],j=Object(r.useState)(!1),x=Object(d.a)(j,2),f=x[0],h=x[1],v=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(c,p);case 3:if((n=e.sent).access&&n.refresh){e.next=6;break}return e.abrupt("return");case 6:return localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),e.next=10,y();case 10:window.location.href="/app/search";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("form",{className:Ze.a.Login,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("h3",{children:"Sign in"}),Object(a.jsx)("p",{children:"Contact a system administrator for login information."}),Object(a.jsx)("p",{children:"At this time, new registrations are on a case by case basis."}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:["Username\xa0\xa0",Object(a.jsx)("input",{type:"text",name:"username",placeholder:"username",value:c,onChange:function(e){s(e.target.value)}})]}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:["Password\xa0\xa0",Object(a.jsx)("input",{type:"password",name:"password",placeholder:"password",value:p,onChange:function(e){b(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:[Object(a.jsx)("input",{type:"checkbox",name:"remember-me",value:f,onChange:function(e){h(e.target.value)}}),"Remember Me"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:Ze.a.FormBlock,children:[Object(a.jsx)("button",{type:"submit",children:"Sign In"}),Object(a.jsxs)("span",{children:["\xa0\xa0",Object(a.jsx)(Ee.b,{to:"/forgotpassword",children:"Forgot Password?"})]})]})]})},Je=n(7),ze=n(72),We=n(11),Xe=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/users/user/connect-spotify/",{code:t,error:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Ye=function(e){return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.search,n=new URLSearchParams(t),a=n.get("code"),r=n.get("error"),e.next=3,Xe(a,r);case 3:window.location.href="../app/search";case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)("p",{children:"Redirecting..."})},Ge=n(17),Ke=n.n(Ge),$e=n(25),et=n.n($e),tt=n(75),nt=n.n(tt),at=n(38),rt=n.n(at),ct=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/voice-recording/create/",{audioFile:t,transcriptData:n,transcriptFinal:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),st=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/voice-recording/delete/",{voiceRecordingUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=n(76),ut=n(81),ot=n.n(ut),lt="bold",dt="italicize",pt="strikethrough",bt=[lt,dt,pt],jt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/text-comment-modification/create/",{textCommentUuid:t,style:n,anchorOffset:a,focusOffset:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var xt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.textColor,n=Object(r.useRef)(null),c=Object(r.useState)(!0),s=Object(d.a)(c,2),i=s[0],u=s[1],p=Object(r.useState)(null),b=Object(d.a)(p,2),j=b[0],x=b[1],f=Object(r.useState)(null),h=Object(d.a)(f,2),v=h[0],O=h[1],m=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data.uuid,t.next=3,jt(a,n,j,v);case 3:r=t.sent,e.dispatch(r.redux),u(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=window.getSelection()).anchorNode===t.focusNode){e.next=6;break}return u(!1),x(null),O(null),e.abrupt("return");case 6:n=parseInt(t.anchorNode.parentNode.getAttribute("offset")),u(!0),x(n+t.anchorOffset),O(n+t.focusOffset);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),x(null),O(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:ot.a.NotableText,style:{color:t},children:[Object(a.jsx)("p",{ref:n,children:function(){for(var t=e.data,n=t.text,r=t.modifications,c=0,s=Object(a.jsx)(a.Fragment,{}),i=0;i<r.length;i++){var u=r[i],o=n.substring(c,u.startPtr),l=n.substring(u.startPtr,u.endPtr);s=Object(a.jsxs)(a.Fragment,{children:[s,Object(a.jsx)("span",{offset:c,children:o}),u.type===lt&&Object(a.jsx)("b",{children:Object(a.jsx)("span",{children:l})}),u.type===dt&&Object(a.jsx)("i",{children:Object(a.jsx)("span",{children:l})}),u.type===pt&&Object(a.jsx)("strike",{children:Object(a.jsx)("span",{children:l})})]}),c=u.endPtr}var d=n.substring(c,n.length);return s=Object(a.jsxs)(a.Fragment,{children:[s,Object(a.jsx)("span",{offset:c,children:d})]})}()}),Object(a.jsx)(it.a,{selectionRef:n,onTextSelect:y,onTextUnselect:k,isOpen:i,children:bt.map((function(e,t){return Object(a.jsx)("button",{type:"button",onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)}))),children:e},t)}))})]})})),ft=n(82),ht=n.n(ft),vt=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/text-comment/delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/comments/text-comment-modification/list-delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var mt=Object(Je.b)((function(e){return{}}))((function(e){var t,n=e.data,r=n.uuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt(r);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot(r);case 2:return t.next=4,e.dispatch({type:"textComment/clearModifications",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t="history"===n.renderStatus?"grey":"display"===n.renderStatus?"black":"red",Object(a.jsxs)("div",{className:ht.a.TextComment,children:[Object(a.jsx)(xt,{data:n,textColor:t}),Object(a.jsx)("button",{type:"button",onClick:s,children:"Clear modifications"}),Object(a.jsx)("button",{type:"button",onClick:c,children:"Delete"})]})})),yt=n(83),kt=n(84),gt=n.n(kt);var wt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt(n);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:n});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:gt.a.ABCNotation,children:[Object(a.jsx)(yt.Notation,{notation:t.text,engraverParams:{staffwidth:278}}),Object(a.jsx)("button",{type:"button",onClick:r,children:"Delete"})]})})),Ct=n(85),_t=n.n(Ct);var Pt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st(n);case 2:e.dispatch({type:"voiceRecording/delete",voiceRecordingUuid:n});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:_t.a.VoiceRecording,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"null"===t.transcriptFinal?"<transcript not available>":t.transcriptFinal})}),Object(a.jsx)("button",{type:"submit",onClick:r,children:"Delete"})]})}));var St=Object(Je.b)((function(e){return{stream:e.stream,textComments:e.textComments,voiceRecordings:e.voiceRecordings,feed:e.feed}}))((function(e){var t=e.feed,n=e.stream,c=Object(r.useState)(""),s=Object(d.a)(c,2),i=s[0],u=s[1],p=Object(r.useState)(void 0),b=Object(d.a)(p,2),j=b[0],x=b[1],f=Object(r.useState)(void 0),v=Object(d.a)(f,2),O=v[0],m=v[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),g=k[0],w=k[1],C=Object(r.useState)(!1),_=Object(d.a)(C,2),P=_[0],S=_[1],T=Object(r.useState)(new nt.a({bitRate:320})),U=Object(d.a)(T,1)[0],M=Object(r.useState)([]),N=Object(d.a)(M,1)[0];Object(r.useEffect)((function(){var t=setInterval((function(){e.dispatch({type:"feed/update"})}),50);return function(){clearInterval(t)}}),[]);var Q=function(e){if(!j){var t=W(n)[0];m(t),x(n.nowPlaying.track.uuid)}u(e.target.value)},B=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=g?"abc_notation":"text",t.next=4,h(i,a,j,O);case 4:return r=t.sent,t.next=7,e.dispatch({type:"textComment/create",textComment:r.data});case 7:m(void 0),x(void 0),u("");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=Object($e.useSpeechRecognition)(),I=A.transcript,F=A.resetTranscript;return Object(a.jsxs)("div",{className:rt.a.FeedApp,children:[Object(a.jsx)("div",{className:rt.a.Feed,children:Object(a.jsx)("div",{className:rt.a.FeedWrapper,children:t.map((function(e,t){if("TextComment"===e.class){if("text"===e.format)return Object(a.jsx)(mt,{data:e},t);if("abc_notation"===e.format)return Object(a.jsx)(wt,{data:e},t)}else if("VoiceRecording"===e.class)return Object(a.jsx)(Pt,{data:e},t);return Object(a.jsx)(a.Fragment,{})}))})}),Object(a.jsxs)("form",{className:rt.a.CreateTextComment,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("input",{type:"checkbox",value:g,onChange:function(e){w(e.target.checked)}}),Object(a.jsx)("button",{type:"button",onClick:function(){P?(et.a.browserSupportsSpeechRecognition()&&et.a.stopListening(),U.stop().getMp3().then((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];Object(l.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new File(a,"voice.mp3",{type:r.type,lastModified:Date.now()}),t.next=3,ct(n,JSON.stringify(N),I);case 3:return c=t.sent,t.next=6,e.dispatch({type:"voiceRecording/create",voiceRecording:c.data});case 6:et.a.browserSupportsSpeechRecognition()&&F();case 7:case"end":return t.stop()}}),t)})))()})),S(!1)):(et.a.browserSupportsSpeechRecognition()&&et.a.startListening({continuous:!0}),U.start(),S(!0))},disabled:!n.isPlaying,children:"Record"}),g?Object(a.jsx)("textarea",{type:"text",name:"text",placeholder:"text",value:i,onChange:Q,disabled:!n.isPlaying}):Object(a.jsx)("input",{type:"text",name:"text",placeholder:"text",value:i,onChange:Q,disabled:!n.isPlaying}),Object(a.jsx)("button",{type:"submit",disabled:!n.isPlaying,children:"Send"})]})]})})),Tt=n(86),Ut=n.n(Tt);var Mt=function(e){return Object(a.jsx)("div",{className:Ut.a.MiniFeed,children:Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Feed..."})})})},Nt=n(56),Qt=n.n(Nt),Bt=n(26),At=n.n(Bt),It=n(30),Ft=n.n(It),Rt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/marker/create/",{trackUuid:t,timestampMilliseconds:n,queueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/marker/delete/",{markerUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/streams/marker/list",{trackUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,s){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/queue-interval/create/",{queueUuid:t,lowerBoundMarkerUuid:n,upperBoundMarkerUuid:a,isMuted:r,repeatCount:c,parentQueueUuid:s});case 2:return i=e.sent,e.next=5,i.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,s){return e.apply(this,arguments)}}(),Et=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/queue-interval/delete/",{queueIntervalUuid:t,queueUuid:n,parentQueueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var Vt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,s=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Et(n.uuid,r,c);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=n.lowerBound?n.lowerBound.timestampMilliseconds/1e3:"beginning",u=n.upperBound?n.upperBound.timestampMilliseconds/1e3:"end";return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[i," =>",u,"(",n.isMuted?"muted":"played",")"]}),Object(a.jsx)("button",{onClick:s,children:"Delete"})]})}));var Zt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.trackMarker,r=t.queueUuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(n.uuid,r);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:["@ ",n.timestampMilliseconds/1e3]}),Object(a.jsx)("button",{onClick:c,children:"Delete"})]})}));var Ht=Object(Je.b)((function(e){return{trackMarkerMap:e.trackMarkerMap}}))((function(e){var t=e.data,n=t.uuid,c=t.parentUuid,s=e.shouldOpenModal,i=e.setShouldOpenModal,u=e.isOpen,p=e.openModal,b=e.closeModal,j=e.trackMarkerMap[n]||[],x=Object(r.useState)(""),f=Object(d.a)(x,2),h=f[0],v=f[1],O=Object(r.useState)("null"),m=Object(d.a)(O,2),y=m[0],k=m[1],g=Object(r.useState)("null"),w=Object(d.a)(g,2),C=w[0],_=w[1],P=function(){var a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Rt(t.track.uuid,h,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:v("");case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),S=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Lt(t.uuid,y,C,!0,null,c);case 2:return a=n.sent,n.next=5,e.dispatch(a.redux);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){function a(){return(a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,qt(t.track.uuid,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:p();case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}s&&(i(!1),function(){a.apply(this,arguments)}())}),[s]),Object(a.jsxs)(Ft.a,{isOpen:u,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:b,children:"Close"}),Object(a.jsx)("p",{children:"Markers"}),j.map((function(e,t){return Object(a.jsx)(Zt,{data:{trackMarker:e,queueUuid:n}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",name:"timestampMilliseconds",placeholder:"timestamp",value:h,onChange:function(e){v(e.target.value)}}),Object(a.jsx)("button",{onClick:P,children:"Create Marker"})]}),Object(a.jsx)("p",{children:"Intervals"}),t.intervals.map((function(e,t){return Object(a.jsx)(Vt,{data:{queueInterval:e,queueUuid:n,parentQueueUuid:c}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsxs)("select",{value:y,onChange:function(e){k(e.target.value)},children:[Object(a.jsx)("option",{value:"null",children:"Beginning"}),j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)}))]}),Object(a.jsxs)("select",{value:C,onChange:function(e){_(e.target.value)},children:[j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)})),Object(a.jsx)("option",{value:"null",children:"End"})]}),Object(a.jsx)("button",{onClick:S,children:"Mute Interval"})]})]})})),Jt=n(44),zt=n.n(Jt);var Wt=Object(Je.b)((function(e){return{stream:e.stream,lastUp:e.lastUp}}))((function(e){var t,n=e.data,c=e.stream,s=e.lastUp,i=Object(r.useState)(!1),u=Object(d.a)(i,2),p=u[0],b=u[1],j=Object(r.useState)(!1),x=Object(d.a)(j,2),f=x[0],h=x[1],v=(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.index)||(null===s||void 0===s?void 0:s.index),O=!v||v<n.index,m=n.parentUuid&&O?"-":"";return Object(a.jsxs)("div",{className:zt.a.QueueTrack,children:[Object(a.jsxs)("span",{children:[m,n.track.name]}),O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:zt.a.Button,type:"button",onClick:function(){h(!0)},children:"Edit"}),Object(a.jsx)("button",{className:zt.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"})]}),Object(a.jsx)(Ht,{data:n,isOpen:p,shouldOpenModal:f,setShouldOpenModal:h,openModal:function(){b(!0)},closeModal:function(){b(!1)}})]})}));var Xt=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n,c=e.data,s=e.stream,i=e.lastUpQueues,u=i[i.length-1],p=c.uuid;console.log((null===s||void 0===s?void 0:s.isPlaying)&&(null===s||void 0===s||null===(t=s.nowPlaying)||void 0===t?void 0:t.parentUuid)===p);var b=(null===s||void 0===s?void 0:s.nowPlaying)&&(null===s||void 0===s||null===(n=s.nowPlaying)||void 0===n?void 0:n.parentUuid)===p||!(null===s||void 0===s?void 0:s.nowPlaying)&&(null===u||void 0===u?void 0:u.parentUuid)&&(null===u||void 0===u?void 0:u.parentUuid)===p,j=Object(r.useState)(b),x=Object(d.a)(j,2),f=x[0],h=x[1],v=function(e){h(!f)};return Object(a.jsxs)("div",{className:At.a.QueueCollection,children:[Object(a.jsxs)("div",{className:At.a.Item,children:[Object(a.jsx)("span",{children:Object(a.jsx)("i",{children:c.collection.name})}),"\xa0\xa0",c.children.length>0&&!f&&Object(a.jsx)("button",{className:At.a.Button,type:"button",onClick:v,children:"More"}),"\xa0\xa0",c.children.length>0&&f&&Object(a.jsx)("button",{className:At.a.Button,type:"button",onClick:v,children:"Less"}),"\xa0\xa0",!b&&Object(a.jsx)("button",{className:At.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(c);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"})]}),c.children.length>0&&f&&Object(a.jsx)("div",{className:At.a.Children,children:c.children.map((function(t,n){return Object(a.jsx)(Wt,{data:t,destroy:e.destroy},n)}))})]})})),Yt=n(196);var Gt=Object(Je.b)((function(e){return{stream:e.stream,nextUpQueues:e.nextUpQueues,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n,r=e.nextUpQueues,c=e.stream,s=null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.name,i=ne(r,c),u=new Date(Date.now()+i),d=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.uuid,t.next=3,N(a);case 3:(r=n.parentUuid)?e.dispatch({type:"queue/deleteChildNode",parentUuid:r,queueUuid:a}):e.dispatch({type:"queue/deleteNode",queueUuid:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:Qt.a.QueueApp,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Last up..."})}),Object(a.jsx)("div",{children:e.lastUpQueues.map((function(e,t){return e.track?Object(a.jsx)(Wt,{data:e,destroy:function(){}},t):Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Now playing..."})}),s?Object(a.jsx)("p",{children:s}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Nothing is playing..."})})]}),Object(a.jsx)("h2",{children:Object(a.jsx)("i",{children:"Next up..."})}),Object(a.jsxs)("div",{children:[r.map((function(e,t){return e.collection?Object(a.jsx)(Xt,{data:e,destroy:d},e.uuid):e.track?Object(a.jsx)(Wt,{data:e,destroy:d},e.uuid):Object(a.jsx)(a.Fragment,{})})),i?Object(a.jsx)("p",{children:Object(a.jsxs)("i",{children:["Playback will end\xa0",Object(a.jsx)(Yt.a,{future:!0,date:u,locale:"en-US"})]})}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"There is nothing in the queue."})}),Object(a.jsx)(Ee.b,{to:"/app/search",children:Object(a.jsx)("button",{className:Qt.a.AddToQueue,children:"Add to Queue"})})]})]})})),Kt=n(58),$t=n.n(Kt);var en=Object(Je.b)((function(e){return{nextUpQueues:e.nextUpQueues,stream:e.stream}}))((function(e){var t=e.nextUpQueues,n=function(e){if(e.length){var t,n=[],a=Object($.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.children.length){var c,s=Object($.a)(r.children);try{for(s.s();!(c=s.n()).done;){var i=c.value;n.push(i)}}catch(u){s.e(u)}finally{s.f()}}else n.push(r)}}catch(u){a.e(u)}finally{a.f()}return n}}([t[0]]),r=[].concat(Object(V.a)(n),Object(V.a)(t.slice(1))),c=e.stream;console.log(r);var s=ne(t,c),i=new Date(Date.now()+s);return Object(a.jsxs)("div",{className:$t.a.MiniQueue,children:[Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Next up..."})}),s?Object(a.jsx)("p",{children:Object(a.jsxs)("i",{children:["Playback will end\xa0",Object(a.jsx)(Yt.a,{future:!0,date:i,locale:"en-US"})]})}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"There is nothing in the queue."})}),Object(a.jsx)("div",{children:r.map((function(e,t){var n,r;return Object(a.jsx)("div",{className:$t.a.MiniQueueItem,children:(null===(n=e.track)||void 0===n?void 0:n.name)||(null===(r=e.collection)||void 0===r?void 0:r.name)})}))})]})})),tn=n(27),nn=n.n(tn),an=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,s,i,u){var l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(b,"/music/search",{query:t,providerSpotify:n,providerYouTube:a,providerJukeboxRadio:r,formatTrack:c,formatAlbum:s,formatPlaylist:i,formatVideo:u});case 2:return l=e.sent,e.next=5,l.json();case 5:return d=e.sent,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,s,i,u){return e.apply(this,arguments)}}(),rn=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/streams/queue/create/",{className:t,genericUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cn=n(34),sn=n.n(cn),un=Object(a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z",fill:"currentColor"})});var on=function(e){var t=e.data,n=e.addToQueue,c=Object(r.useState)(!1),s=Object(d.a)(c,2),i=s[0],u=s[1],p=Object(r.useState)(!1),b=Object(d.a)(p,2),j=b[0],x=b[1],f=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n(t.class,t.uuid);case 3:x(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:sn.a.SearchResult,children:[Object(a.jsxs)("span",{children:[t.provider," ",t.format," ",t.name,"\xa0\xa0\xa0\xa0\xa0"]}),!i&&!j&&Object(a.jsx)("button",{type:"button",className:sn.a.Button,onClick:f,disabled:!1,children:"Add"}),i&&!j&&Object(a.jsx)("button",{type:"button",className:sn.a.Button,disabled:!0,children:Object(a.jsx)("i",{className:sn.a.ggSpinner})}),j&&Object(a.jsx)("button",{type:"button",className:sn.a.Button,disabled:!0,children:un})]})},ln=n(21),dn=n.n(ln),pn=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c){var s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(j,"/music/track/create/",{audioFile:t,imageFile:n,trackName:a,artistName:r,albumName:c});case 2:return s=e.sent,e.next=5,s.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}();var bn=function(e){var t=Object(r.useState)(0),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(d.a)(i,2),p=u[0],b=u[1],j=Object(r.useState)(""),x=Object(d.a)(j,2),f=x[0],h=x[1],v=Object(r.useState)(""),O=Object(d.a)(v,2),m=O[0],y=O[1],k=Object(r.useState)(""),g=Object(d.a)(k,2),w=g[0],C=g[1],_=Object(r.useState)(""),P=Object(d.a)(_,2),S=P[0],T=P[1],U=Object(r.useState)(""),M=Object(d.a)(U,2),N=M[0],Q=M[1],B=e.isOpen,A=e.closeModal,I=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,pn(f,m,w,S,N);case 3:b(!1),s((function(e){return e+2})),C(""),T(""),Q(""),A();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(Ft.a,{isOpen:B,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:A,disabled:p,children:"Close"}),Object(a.jsxs)("div",{className:dn.a.Login,children:[Object(a.jsx)("h3",{children:"Upload"}),Object(a.jsxs)("label",{className:dn.a.FormBlock,children:["Audio file",Object(a.jsx)("input",{type:"file",name:"audioFile",onChange:function(e){h(e.target.files[0])},disabled:p},c)]}),Object(a.jsxs)("label",{className:dn.a.FormBlock,children:["Image file",Object(a.jsx)("input",{type:"file",name:"imageFile",onChange:function(e){y(e.target.files[0])},disabled:p},c+1)]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:dn.a.FormBlock,children:["Track name",Object(a.jsx)("input",{type:"text",name:"trackName",placeholder:"Track name",value:w,onChange:function(e){C(e.target.value)},disabled:p})]}),Object(a.jsxs)("label",{className:dn.a.FormBlock,children:["Artist name",Object(a.jsx)("input",{type:"text",name:"artistName",placeholder:"Artist name",value:S,onChange:function(e){T(e.target.value)},disabled:p})]}),Object(a.jsxs)("label",{className:dn.a.FormBlock,children:["Album name",Object(a.jsx)("input",{type:"text",name:"albumName",placeholder:"Album name",value:N,onChange:function(e){Q(e.target.value)},disabled:p})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:dn.a.FormBlock,children:Object(a.jsx)("button",{type:"submit",onClick:I,disabled:p,children:"Submit"})})]})]})};var jn=Object(Je.b)((function(e){return{}}))((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(d.a)(i,2),p=u[0],b=u[1],j=Object(r.useState)(!0),x=Object(d.a)(j,2),f=x[0],h=x[1],v=Object(r.useState)(!0),O=Object(d.a)(v,2),m=O[0],y=O[1],k=Object(r.useState)(!0),g=Object(d.a)(k,2),w=g[0],C=g[1],_=Object(r.useState)(!0),P=Object(d.a)(_,2),S=P[0],T=P[1],U=Object(r.useState)(!0),N=Object(d.a)(U,2),Q=N[0],B=N[1],A=Object(r.useState)(!0),I=Object(d.a)(A,2),F=I[0],R=I[1],D=Object(r.useState)(!0),q=Object(d.a)(D,2),L=q[0],E=q[1],V=Object(r.useState)(!1),Z=Object(d.a)(V,2),H=Z[0],J=Z[1],z=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,an(p,f,m,w,S,Q,F,L);case 4:t=e.sent,s(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var t=Object(l.a)(o.a.mark((function t(n,a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rn(n,a);case 2:return t.next=4,M();case 4:r=t.sent,e.dispatch(r.redux);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:nn.a.SearchApp,children:[Object(a.jsx)("h3",{children:"Search"}),Object(a.jsx)("button",{onClick:function(){J(!0)},children:"Upload"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:nn.a.FormBlock,children:["Query \xa0",Object(a.jsx)("input",{type:"text",name:"query",placeholder:"",value:p,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&z()}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:nn.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:f,onChange:function(e){h(e.target.checked)}}),"Spotify"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.youTube",checked:m,onChange:function(e){y(e.target.checked)}}),"YouTube"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.jukeboxRadio",checked:w,onChange:function(e){C(e.target.checked)}}),"Jukebox Radio"]})]}),Object(a.jsxs)("div",{className:nn.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:S,onChange:function(e){T(e.target.checked)}}),"Track"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:Q,onChange:function(e){B(e.target.checked)}}),"Album"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:F,onChange:function(e){R(e.target.checked)}}),"Playlist"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:L,onChange:function(e){E(e.target.checked)}}),"Video"]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:nn.a.FormBlock,onClick:z,children:Object(a.jsx)("button",{type:"submit",children:"Search"})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:nn.a.SearchResults,children:c.map((function(e,t){return Object(a.jsx)(on,{data:e,addToQueue:W},t)}))}),Object(a.jsx)(bn,{isOpen:H,closeModal:function(){J(!1)}})]})})),xn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M6 17L14 12L6 7V17Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M18 7H15V12V17H18V7Z",fill:"currentColor"})]}),fn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M18 17L10 12L18 7V17Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M6 7H9V17H6V7Z",fill:"currentColor"})]}),hn=n(18),vn=n.n(hn);var On=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues,playback:e.playback}}))((function(e){var t,n,c,s,i,u,o=e.stream,l=e.playback,p=null===(t=o.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.imageUrl,b=null===o||void 0===o||null===(c=o.nowPlaying)||void 0===c?void 0:c.track,j=ee(e.lastUpQueues),x=te(e.nextUpQueues),f=Object(r.useState)(0),h=Object(d.a)(f,2),v=(h[0],h[1]);return 1===(null===o||void 0===o||null===(s=o.nowPlaying)||void 0===s?void 0:s.index)||j||window.location.reload(),Object(r.useEffect)((function(){var e=setInterval((function(){v((function(e){return e+1}))}),100);return function(){clearInterval(e)}}),[]),Object(a.jsxs)("div",{className:vn.a.Player,children:[Object(a.jsxs)("div",{className:vn.a.Div,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Last..."})}),Object(a.jsx)("p",{children:null===j||void 0===j||null===(i=j.track)||void 0===i?void 0:i.name})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:vn.a.Div,children:[Object(a.jsx)("h2",{children:Object(a.jsx)("i",{children:"Now playing..."})}),p&&Object(a.jsx)("img",{alt:"",src:p,className:vn.a.Image}),((null===o||void 0===o?void 0:o.isPlaying)||(null===o||void 0===o?void 0:o.isPaused))&&Object(a.jsx)("h3",{children:null===b||void 0===b?void 0:b.name}),!(null===o||void 0===o?void 0:o.isPlaying)&&!(null===o||void 0===o?void 0:o.isPaused)&&Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Waiting..."})})]}),Object(a.jsx)("div",{className:vn.a.Div,children:Object(a.jsx)("progress",{value:I(o),max:null===o||void 0===o||null===(u=o.nowPlaying)||void 0===u?void 0:u.totalDurationMilliseconds})}),Object(a.jsxs)("div",{className:vn.a.Div,children:[Object(a.jsx)("button",{className:vn.a.Button,onClick:e.prevTrack,disabled:!l.controlsEnabled,children:fn}),Object(a.jsx)("button",{className:vn.a.Button,onClick:e.nextTrack,disabled:!l.controlsEnabled,children:xn})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:vn.a.Div,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Next..."})}),Object(a.jsx)("p",{children:null===x||void 0===x?void 0:x.track.name})]}),Object(a.jsx)(Ee.b,{to:"/app/queue",children:Object(a.jsx)("button",{className:vn.a.MoreNextUp,children:"More"})})]})})),mn=n(87),yn=n.n(mn);var kn=Object(Je.b)((function(e){return{stream:e.stream}}))((function(e){var t,n,r,c,s=e.stream,i=null===(t=s.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.imageUrl,u=null===s||void 0===s||null===(r=s.nowPlaying)||void 0===r||null===(c=r.track)||void 0===c?void 0:c.name;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Now playing..."})}),i&&Object(a.jsx)("img",{alt:"",src:i,className:yn.a.Image}),u?Object(a.jsx)("p",{children:u}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Nothing is playing..."})})]})})),gn=n(20),wn=n.n(gn),Cn=Object(a.jsx)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M13.6378 15.529L15.052 16.9432L20.0018 11.9934L15.052 7.0437L13.6378 8.45791L16.1363 10.9564H7.99823C5.78909 10.9564 3.99823 12.7472 3.99823 14.9564V16.9564H5.99823V14.9564C5.99823 13.8518 6.89366 12.9564 7.99823 12.9564H16.2104L13.6378 15.529Z",fill:"currentColor"})}),_n=Object(a.jsx)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M10.3623 15.529L8.94804 16.9432L3.99829 11.9934L8.94804 7.0437L10.3623 8.45791L7.86379 10.9564H16.0018C18.2109 10.9564 20.0018 12.7472 20.0018 14.9564V16.9564H18.0018V14.9564C18.0018 13.8518 17.1063 12.9564 16.0018 12.9564H7.78965L10.3623 15.529Z",fill:"currentColor"})}),Pn=Object(a.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M16 12L10 16.3301V7.66987L16 12Z",fill:"currentColor"})]}),Sn=Object(a.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M9 9H11V15H9V9Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M15 15H13V9H15V15Z",fill:"currentColor"}),Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})]});var Tn=Object(Je.b)((function(e){return{stream:e.stream,playback:e.playback,nextUpQueues:e.nextUpQueues}}))((function(e){var t=e.playbackControls,n=e.stream,r=e.playback,c=e.nextUpQueues,s=!n.nowPlaying||n.isPaused||!r.controlsEnabled,i=!n.nowPlaying||!r.controlsEnabled,u=!n.nowPlaying&&!!c.length,o=!n.nowPlaying&&!c.length,l=function(e){s||t.seek(e)};return Object(a.jsxs)("div",{className:wn.a.BottomBar,children:[Object(a.jsxs)("div",{className:wn.a.ExtraControl,children:[u&&Object(a.jsx)("button",{className:wn.a.ExtraControlButton,onClick:function(){t.nextTrack()},children:"Start Playback"}),o&&Object(a.jsx)(Ee.b,{to:"/app/search",children:Object(a.jsx)("button",{className:wn.a.ExtraControlButton,children:"Add to Queue"})})]}),Object(a.jsxs)("div",{className:wn.a.Playback,children:[Object(a.jsx)("button",{className:wn.a.PlaybackButton,onClick:function(){l("backward")},disabled:s,children:_n}),Object(a.jsx)("button",{className:wn.a.PlaybackButton,onClick:function(){i||(n.isPlaying&&t.pause(),n.isPaused&&t.play())},disabled:i,children:n.nowPlaying&&n.isPlaying?Sn:Pn}),Object(a.jsx)("button",{className:wn.a.PlaybackButton,onClick:function(){l("forward")},disabled:s,children:Cn})]})]})}));var Un=Object(Je.b)((function(e){return{userSettings:e.userSettings}}))((function(e){var t=e.isOpen,n=e.closeModal,c=Object(r.useState)(!0),s=Object(d.a)(c,2),i=s[0];return s[1],e.userSettings?Object(a.jsxs)(Ft.a,{isOpen:t,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:n,children:"Close"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:e.userSettings.spotify.authorizationUrl,children:"Connect Your Spotify Account"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.idleQueue,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{idleQueue:t.target.checked}}),B("idle_after_now_playing",t.target.checked)},disabled:!i}),"Idle After Queue"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.speakVoice,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{speakVoice:t.target.checked}}),B("mute_voice_recordings",t.target.checked)},disabled:!i}),"Speak Voice Recordings"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.focusMode,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{focusMode:t.target.checked}}),B("focus_mode",t.target.checked)},disabled:!i}),"Focus Mode"]}),Object(a.jsx)("br",{})]})]})]}):Object(a.jsx)(a.Fragment,{})})),Mn=n(45),Nn=n.n(Mn),Qn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}),Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"})]}),Bn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 15C6.65685 15 8 13.6569 8 12C8 10.3431 6.65685 9 5 9C3.34315 9 2 10.3431 2 12C2 13.6569 3.34315 15 5 15ZM5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z",fill:"currentColor"}),Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15ZM12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",fill:"currentColor"}),Object(a.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22 12C22 13.6569 20.6569 15 19 15C17.3431 15 16 13.6569 16 12C16 10.3431 17.3431 9 19 9C20.6569 9 22 10.3431 22 12ZM20 12C20 12.5523 19.5523 13 19 13C18.4477 13 18 12.5523 18 12C18 11.4477 18.4477 11 19 11C19.5523 11 20 11.4477 20 12Z",fill:"currentColor"})]});var An=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],s=n[1];return Object(a.jsxs)("div",{className:Nn.a.SideBar,children:[Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:Nn.a.Center,children:Qn}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(Ee.b,{to:"/app/feed",children:"Feed"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ee.b,{to:"/app/player",children:"Player"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ee.b,{to:"/app/queue",children:"Queue"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ee.b,{to:"/app/search",children:"Search"})})]}),Object(a.jsx)("div",{className:Nn.a.Center,children:Object(a.jsx)("button",{onClick:function(){s(!0)},children:Bn})}),Object(a.jsx)(Un,{isOpen:c,closeModal:function(){s(!1)}})]})};var In=function(e){return Object(a.jsxs)("div",{className:Ke.a.Session,children:[Object(a.jsxs)("div",{className:Ke.a.Top,children:[Object(a.jsx)(An,{}),Object(a.jsx)("div",{className:Ke.a.Content,children:Object(a.jsxs)(We.c,{children:[Object(a.jsx)(We.a,{path:"/app/feed",children:Object(a.jsx)("div",{className:Ke.a.PrimaryContent,children:Object(a.jsx)(St,{})})}),Object(a.jsxs)(We.a,{path:"/app/player",children:[Object(a.jsx)("div",{className:Ke.a.PrimaryContent,children:Object(a.jsx)(On,{nextTrack:e.playbackControls.nextTrack,prevTrack:e.playbackControls.prevTrack,seek:e.playbackControls.seek,pause:e.playbackControls.pause,play:e.playbackControls.play})}),Object(a.jsx)("div",{className:Ke.a.SecondaryContent,children:Object(a.jsx)(Ee.b,{to:"/app/feed",children:Object(a.jsx)(Mt,{})})})]}),Object(a.jsxs)(We.a,{path:"/app/queue",children:[Object(a.jsx)("div",{className:Ke.a.PrimaryContent,children:Object(a.jsx)(Gt,{})}),Object(a.jsx)("div",{className:Ke.a.SecondaryContent,children:Object(a.jsx)(Ee.b,{to:"/app/player",children:Object(a.jsx)(kn,{})})})]}),Object(a.jsxs)(We.a,{path:"/app/search",children:[Object(a.jsx)("div",{className:Ke.a.PrimaryContent,children:Object(a.jsx)(jn,{})}),Object(a.jsx)("div",{className:Ke.a.SecondaryContent,children:Object(a.jsx)(Ee.b,{to:"/app/queue",children:Object(a.jsx)(en,{})})})]})]})})]}),Object(a.jsx)(Tn,{playbackControls:e.playbackControls})]})};var Fn=function(e){return Object(a.jsxs)(We.c,{children:[Object(a.jsx)(We.a,{path:"/app/:content",children:Object(a.jsx)(In,{playbackControls:e.playbackControls})}),Object(a.jsx)(We.a,{path:"/u/:username",children:Object(a.jsx)("span",{children:"PROFILE"})}),Object(a.jsx)(We.a,{path:"/spotify",children:Object(a.jsx)(Ye,{})})]})},Rn=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.next=5,O();case 5:n=e.sent,Le.dispatch(t.redux),Le.dispatch(n.redux);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Dn=Object(Je.b)((function(e){return{stream:e.stream,playback:e.playback,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues}}))((function(e){var t,n,c=e.stream,s=e.playback,i=ee(e.lastUpQueues),u=te(e.nextUpQueues),p=Object(r.useState)(!1),b=Object(d.a)(p,2),j=b[0],x=b[1],f=Object(r.useState)({}),h=Object(d.a)(f,2),v=h[0],O=h[1],m=Object(r.useState)({}),y=Object(d.a)(m,2),k=y[0],g=y[1],M=function(e,t){var n=c.nowPlaying,a=null===n||void 0===n?void 0:n.playbackIntervals,r=a?a[a.length-1]:void 0;return(null===n||void 0===n?void 0:n.track)&&(n.track.service===D||n.track.service===F&&!(null===e||void 0===e?void 0:e.track)||n.track.service===F&&e.track.service!==F&&(!t||r[1]!==n.totalDurationMilliseconds&&t))},N=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,C(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!0);case 4:return a=t.sent,g(a),t.next=8,e.dispatch({type:"playback/addToQueue"});case 8:x(!0);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return M(u,!0)&&q(s,c),t.next=3,e.dispatch({type:"playback/plannedNextTrack",payload:{payload:k.redux}});case 3:return t.next=5,e.dispatch({type:"playback/enable"});case 5:return t.next=7,Rn();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(M(i,!1)&&q(s,c),(null===(n=i.track)||void 0===n?void 0:n.service)!==D){t.next=9;break}return t.next=6,w(i.track.uuid);case 6:return a=t.sent,t.next=9,e.dispatch(a.redux);case 9:return t.next=11,S();case 11:return r=t.sent,t.next=14,e.dispatch(r.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,Rn();case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(M(u,!1)&&q(s,c),(null===u||void 0===u?void 0:u.track.service)!==D){t.next=9;break}return t.next=6,w(u.track.uuid);case 6:return a=t.sent,t.next=9,e.dispatch(a.redux);case 9:return t.next=11,C(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!1);case 11:return r=t.sent,t.next=14,e.dispatch(r.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,Rn();case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r,i,u,l,d,p,b=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.length>0&&void 0!==b[0]?b[0]:void 0,t.next=3,e.dispatch({type:"playback/disable"});case 3:if("forward"!==n){t.next=14;break}return t.next=6,U(c.nowPlaying.totalDurationMilliseconds);case 6:if(400!==t.sent.system.status){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:a=c.startedAt-1e4,t.next=22;break;case 14:if("backward"!==n){t.next=21;break}return t.next=17,T();case 17:r=new Date,i=r.getTime(),u=c.startedAt+1e4,a=i-u>0?u:i,t.next=22;break;case 21:a=c.startedAt;case 22:return t.next=24,e.dispatch({type:"stream/set",payload:{stream:Object(Z.a)(Object(Z.a)({},c),{},{startedAt:a})}});case 24:return l=A(c,a),d=l[1],E(s,c,a),t.next=28,e.dispatch({type:"playback/addToQueueReschedule"});case 28:return d&&(p=setTimeout((function(){V()}),d),e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:p}})),t.next=31,e.dispatch({type:"playback/enable"});case 31:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,_();case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:return t.next=9,e.dispatch({type:"playback/addToQueueReschedule"});case 9:return q(s,c),clearTimeout(v),t.next=13,e.dispatch({type:"playback/enable"});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,P();case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:if(s.isPlaying){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:return t.next=13,e.dispatch({type:"playback/addToQueueReschedule"});case 13:return L(s,c),t.next=16,e.dispatch({type:"playback/enable"});case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){if(c.isPlaying&&s.isPlaying&&!s.addToQueueTimeoutId&&(null===c||void 0===c?void 0:c.nowPlaying)){var t=Date.now()-c.startedAt,n=c.nowPlaying.totalDurationMilliseconds-t,a=setTimeout((function(){N()}),n-5e3);e.dispatch({type:"playback/addToQueueScheduled",payload:{addToQueueTimeoutId:a}});var r=A(c,c.startedAt)[1];if(r){var i=setTimeout((function(){V()}),r);e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:i}})}}}),[s]),Object(r.useEffect)((function(){if(j){x(!1);var e=Date.now()-c.startedAt,t=c.nowPlaying.totalDurationMilliseconds-e,n=setTimeout((function(){Q()}),t);clearTimeout(v),O(n)}}),[j]),c.isPlaying&&!s.isPlaying&&s.isReady&&function(){var t;(null===(t=c.nowPlaying)||void 0===t?void 0:t.track)&&(e.dispatch({type:"playback/started"}),function(e,t){var n=A(t,t.startedAt)[0],a=t.nowPlaying.track.service;if(a===F)e.spotifyApi.play({uris:[t.nowPlaying.track.externalId],position_ms:n});else if(a===R)e.youTubeApi.seekTo(n/1e3),e.youTubeApi.playVideo();else if(a===D){var r=t.nowPlaying.track.uuid,c=e.files[r].audio;n>0&&(c.currentTime=n/1e3),c.play()}}(s,c))}();var z={nextTrack:I,prevTrack:B,seek:V,pause:H,play:J},W=null===(t=c.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.externalId;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsx)(ze.a,{videoId:W,opts:{height:"135",width:"240",playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,iv_load_policy:3,modestbranding:1,origin:"jukeboxrad.io",playsinline:1}},onReady:function(t){var n=t.target;e.dispatch({type:"playback/youTube",payload:{youTubeApi:n}})}})}),Object(a.jsx)(Fn,{playbackControls:z})]})})),qn=n(195),Ln=n(88),En=n(190);var Vn=function(){var e=Object(r.useState)("initial"),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r,s,i,u,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:if(e.sent){e.next=6;break}return c("unauthenticated"),e.abrupt("return");case 6:return c("authenticated"),e.next=9,g();case 9:return n=e.sent,e.next=12,Le.dispatch(n.redux);case 12:if(a=n.redux.payload,(null===(r=null===(t=a.stream.nowPlaying)||void 0===t?void 0:t.track)||void 0===r?void 0:r.service)!==D){e.next=20;break}return s=r.uuid,e.next=17,w(s);case 17:return n=e.sent,e.next=20,Le.dispatch(n.redux);case 20:return e.next=22,M();case 22:return n=e.sent,e.next=25,Le.dispatch(n.redux);case 25:return e.next=27,v();case 27:return i=e.sent,e.next=30,Le.dispatch(i.redux);case 30:return e.next=32,O();case 32:return u=e.sent,e.next=35,Le.dispatch(u.redux);case 35:return e.next=37,Q();case 37:return l=e.sent,e.next=40,Le.dispatch({type:"user/get-settings",userSettings:l.data});case 40:if(!l.data.spotify.accessToken){e.next=46;break}return(d=new En).setAccessToken(l.data.spotify.accessToken),e.next=46,Le.dispatch({type:"playback/spotify",payload:{spotifyApi:d}});case 46:Le.dispatch({type:"playback/enable"}),c("ready");case 48:case"end":return e.stop()}}),e)})))).apply(this,arguments)}qn.a.addDefaultLocale(Ln),function(){e.apply(this,arguments)}(),window.addEventListener("beforeunload",(function(e){e.preventDefault();var t=Le.getState();t.stream.isPlaying&&(_(),q(t.playback,t.stream))}))}),[]),"initial"===n?Object(a.jsx)(a.Fragment,{}):"unauthenticated"===n?Object(a.jsx)(Ee.a,{children:Object(a.jsx)(Je.a,{store:Le,children:Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)("div",{className:"app-main",children:Object(a.jsx)(He,{})})})})}):"authenticated"===n?Object(a.jsx)(Ee.a,{children:Object(a.jsx)(Je.a,{store:Le,children:"Loading..."})}):Object(a.jsx)(Ee.a,{children:Object(a.jsx)(Je.a,{store:Le,children:Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)(Dn,{})})})})},Zn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Vn,{})}),document.getElementById("root")),Zn()},20:function(e,t,n){e.exports={BottomBar:"BottomBar_BottomBar__3MLzc",Playback:"BottomBar_Playback__3N-qW",PlaybackButton:"BottomBar_PlaybackButton__1axWT",Volume:"BottomBar_Volume__25kUh",VolumeButton:"BottomBar_VolumeButton__26qBR",ExtraControl:"BottomBar_ExtraControl__2zuEs",ExtraControlButton:"BottomBar_ExtraControlButton__3Kvpp"}},21:function(e,t,n){e.exports={Upload:"Upload_Upload__tMDig",FormBlock:"Upload_FormBlock__2ls6S"}},26:function(e,t,n){e.exports={QueueCollection:"QueueCollection_QueueCollection__2uTSJ",Item:"QueueCollection_Item__2k6HI",Button:"QueueCollection_Button__KLnuj",Children:"QueueCollection_Children__1Q1i5"}},27:function(e,t,n){e.exports={SearchApp:"SearchApp_SearchApp__Mfcqz",FormBlock:"SearchApp_FormBlock__1myUf",SearchResults:"SearchApp_SearchResults__p1J6y"}},32:function(e,t,n){e.exports={Login:"Login_Login__1ujut",FormBlock:"Login_FormBlock__S_rix"}},34:function(e,t,n){e.exports={SearchResult:"SearchResult_SearchResult__djXCo",Button:"SearchResult_Button__1Hbjl",ggSpinner:"SearchResult_ggSpinner__iNeQG",spinner:"SearchResult_spinner__u3axZ"}},38:function(e,t,n){e.exports={FeedApp:"FeedApp_FeedApp__2YJHa",Feed:"FeedApp_Feed__3NWaq",FeedWrapper:"FeedApp_FeedWrapper__5dQdY",CreateTextComment:"FeedApp_CreateTextComment__1tCDm"}},44:function(e,t,n){e.exports={QueueTrack:"QueueTrack_QueueTrack__cD3iI",Button:"QueueTrack_Button__3peLA"}},45:function(e,t,n){e.exports={SideBar:"SideBar_SideBar__2JzAY",Center:"SideBar_Center__SYGR6"}},56:function(e,t,n){e.exports={QueueApp:"QueueApp_QueueApp__3OUXI",AddToQueue:"QueueApp_AddToQueue__1Zpmd"}},58:function(e,t,n){e.exports={MiniQueue:"MiniQueue_MiniQueue__2HfJP",MiniQueueItem:"MiniQueue_MiniQueueItem__2-wsK"}},81:function(e,t,n){e.exports={NotableText:"NotableText_NotableText__gYPiJ"}},82:function(e,t,n){e.exports={TextComment:"TextComment_TextComment__92FmQ",Notated:"TextComment_Notated__8XL21"}},84:function(e,t,n){e.exports={ABCNotation:"ABCNotation_ABCNotation__rkME2"}},85:function(e,t,n){e.exports={VoiceRecording:"VoiceRecording_VoiceRecording__29j03"}},86:function(e,t,n){e.exports={MiniFeed:"MiniFeed_MiniFeed__2GXUK"}},87:function(e,t,n){e.exports={MiniPlayer:"MiniPlayer_MiniPlayer__w1Mms",Image:"MiniPlayer_Image__1dVlH"}},96:function(e,t,n){},98:function(e,t,n){}},[[191,1,2]]]);
//# sourceMappingURL=main.66e56589.chunk.js.map