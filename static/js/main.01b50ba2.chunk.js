(this["webpackJsonpjukebox-radio"]=this["webpackJsonpjukebox-radio"]||[]).push([[0],{13:function(e,t,n){e.exports={Player:"Player_Player__RgpZ6",Div:"Player_Div__HhfjS",Button:"Player_Button__1m74t"}},179:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),u=n(22),s=n.n(u),i=(n(84),n(2)),o=n.n(i),l=n(4),d=n(5),p=(n(86),"https://prod.jukeboxrad.io"),b="GET",j="POST";function f(){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(o.a.mark((function e(){var t,n,a,r,c,u,s,i,l,b,j,f,x,v,h,O,m,y,k,g,w,T,P,S=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:"",n=S.length>1&&void 0!==S[1]?S[1]:"",a=S.length>2&&void 0!==S[2]?S[2]:{},n=p+n,"GET"===t){e.next=16;break}for(c=new FormData,u=0,s=Object.entries(a);u<s.length;u++)i=Object(d.a)(s[u],2),l=i[0],b=i[1],c.append(l,b);return j={headers:{}},(f=localStorage.getItem("accessToken"))&&(j.headers.Authorization="Bearer ".concat(f)),x=new Request(n,j),e.next=13,fetch(x,{method:t,mode:"cors",body:c});case 13:r=e.sent,e.next=26;break;case 16:for(v=new URLSearchParams,h=0,O=Object.entries(a);h<O.length;h++)m=Object(d.a)(O[h],2),y=m[0],k=m[1],v.set(y,k);return g=n+"/?"+v.toString(),w={headers:{"Content-Type":"application/json"}},(T=localStorage.getItem("accessToken"))&&(w.headers.Authorization="Bearer ".concat(T)),P=new Request(g,w),e.next=25,fetch(P,{method:t,mode:"cors"});case 25:r=e.sent;case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment/create/",{text:t,format:n,textCommentUuid:a,textCommentTimestamp:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/comments/text-comment/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/comments/voice-recording/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/auth/obtain-tokens/",{username:t,password:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/initialize/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("accessToken"),e.next=3,f(j,"/auth/verify-token/",{token:t});case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/stream/get");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/music/track/get-files",{trackUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/next-track/",{nowPlayingTotalDurationMilliseconds:t,isPlanned:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/pause-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/play-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/prev-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/scan-backward/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/scan-forward/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/queue/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue/delete/",{queueUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/users/user/get-settings");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/users/user/update-settings/",{field:t,value:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e,t){if(!e.nowPlaying)return[void 0,void 0];for(var n,a=Date.now()-t,r=0,c=0;;){var u=e.nowPlaying.playbackIntervals[r],s=u[1]-u[0],i=a-c;if(i<s){a=u[0]+i,n=u[1]-a;break}r+=1,c+=s}return r===e.nowPlaying.playbackIntervals.length-1&&(n=void 0),[a,n]},B="spotify",F="youtube",R="jukebox_radio",D=function(e,t){var n=t.nowPlaying.track.service;if(n===B)e.spotifyApi.pause();else if(n===F)e.youTubeApi.pauseVideo();else if(n===R){var a=t.nowPlaying.track.uuid;e.files[a].audio.pause()}},q=function(e,t){var n=t.nowPlaying.track.service;if(n===B)e.spotifyApi.play();else if(n===F)e.youTubeApi.playVideo();else if(n===R){var a=t.nowPlaying.track.uuid;e.files[a].audio.play()}},E=function(e,t,n){var a=A(t,n)[0],r=t.nowPlaying.track.service;if(r===B)e.spotifyApi.seek(a);else if(r===F)e.youTubeApi.seekTo(a/1e3),e.youTubeApi.playVideo();else if(r===R){var c=t.nowPlaying.track.uuid,u=e.files[c].audio;u.currentTime=a/1e3,u.play()}},L=n(9),V=n(3),J=n(37),z="hide",X=function(e){var t=e.stream,n=Y(t),a=Object(d.a)(n,3),r=a[0],c=a[1],u=a[2];if(!r)return[];var s=Object(L.a)(e.textComments),i=Object(L.a)(e.voiceRecordings),o=[].concat(Object(L.a)(s),Object(L.a)(i));return o=(o=(o=o.map((function(e){var t=e.timestampMilliseconds>u&&e.timestampMilliseconds<=c,n=e.timestampMilliseconds>c&&e.timestampMilliseconds<=r;return e.renderStatus=t?"history":n?"display":z,Object(V.a)({},e)}))).filter((function(e){return e.renderStatus!==z}))).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}))},Y=function(e){var t;if(!(null===e||void 0===e||null===(t=e.nowPlaying)||void 0===t?void 0:t.track))return[void 0,void 0,void 0];for(var n=e.startedAt,a=e.isPlaying?Date.now()-n:e.pausedAt-n,r=0,c=0,u=0,s=0;;){var i=e.nowPlaying.playbackIntervals[r],o=i[1]-i[0],l=void 0;if((l=a-3e4-s)>=0&&l<o&&(c=i[0]+l),(l=a-3e4-45e3-s)>=0&&l<o&&(u=i[0]+l),(l=a-s)<o){a=i[0]+l;break}r+=1,s+=o}return[a,c,u]},H=function(e){return Object(V.a)(Object(V.a)({},e),{},{feed:X(e)})},Z=function(e,t){var n=Object(V.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=[].concat(Object(L.a)(n[a]),[r]).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return n[a]=c,Object(V.a)(Object(V.a)({},e),{},{trackMarkerMap:n})},G=function(e,t){var n=Object(V.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=n[t.queueUuid].filter((function(e){return e.uuid!==r.uuid}));return n[a]=c,Object(V.a)(Object(V.a)({},e),{},{trackMarkerMap:n})},W=function(e,t){var n=t.queueUuid,a=t.markers,r=Object(V.a)({},e.trackMarkerMap);return r[n]=a,Object(V.a)(Object(V.a)({},e),{},{trackMarkerMap:r})},K=function(e){return e[e.length-1]},$=function(e){return e.length?e[0].children.length?e[0].children[0]:e[0]:void 0},ee=n(61),te=function e(t){var n,a=Object(V.a)({},t);if(a.children.length){var r=a.children.map(e),c=r.reduce((function(e,t){return e+t.durationMilliseconds}),0);return a.children=r,a.totalDurationMilliseconds=c,a}var u=a.intervals,s=null===(n=a.track)||void 0===n?void 0:n.durationMilliseconds;if(!u.length)return a.totalDurationMilliseconds=s,a.playbackIntervals=[[0,s]],a;var i,o,l,d=[],p=Object(ee.a)(u);try{for(p.s();!(l=p.n()).done;){var b=l.value;if(b.lowerBound){if(b.upperBound){i||(i=0),o=b.lowerBound.timestampMilliseconds,d.push([i,o]),i=b.upperBound.timestampMilliseconds,o=void 0;continue}i||(i=0),o=b.lowerBound.timestampMilliseconds,d.push([i,o]),i=void 0;break}i=b.upperBound.timestampMilliseconds}}catch(f){p.e(f)}finally{p.f()}i&&(o=s,d.push([i,o]));var j=d.reduce((function(e,t){return e+(t[1]-t[0])}),0);return a.totalDurationMilliseconds=j,a.playbackIntervals=d,a},ne=function(e,t){var n=t.lastUpQueues.map(te),a=t.nextUpQueues.map(te),r=e._lastPlayed;r&&n.push(r);var c=e.stream;c.isPlaying||c.isPaused||!c.nowPlaying||(n.push(c.nowPlaying),c=Object(V.a)(Object(V.a)({},c),{},{nowPlaying:void 0}));var u=n.length?n[n.length-1]:void 0,s=a.length?a[0].children.length?a[0].children[0]:a[0]:void 0;return Object(V.a)(Object(V.a)({},e),{},{stream:c,lastUp:u,lastUpQueues:n,nextUp:s,nextUpQueues:a})},ae=function(e,t){var n=t.stream,a=n.nowPlaying,r=Object(V.a)({},e);if(a&&(n.nowPlaying=te(a)),r.stream=n,n.isPlaying||n.isPaused||!n.nowPlaying){if(n.isPlaying){var c=Date.now()-n.startedAt;c&&c>=n.nowPlaying.totalDurationMilliseconds&&(r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1)}}else r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1;return r},re=function(e,t){var n={stream:Object(V.a)(Object(V.a)({},e.stream),{},{isPlaying:!0,isPaused:!1,startedAt:t.startedAt})};return ae(e,n)},ce=function(e,t){var n={stream:Object(V.a)(Object(V.a)({},e.stream),{},{isPlaying:!1,isPaused:!0,pausedAt:t.pausedAt})};return ae(e,n)},ue=function(e,t){var n=Object(L.a)(e.lastUpQueues),a=Object(L.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],u=n[n.length-1],s=(null===r||void 0===r?void 0:r.parentUuid)&&(null===c||void 0===c?void 0:c.uuid)&&(null===r||void 0===r?void 0:r.parentUuid)===(null===c||void 0===c?void 0:c.uuid);return r&&(s?c.children.unshift(r):a.unshift(r)),n.pop(),Object(V.a)(Object(V.a)({},e),{},{stream:Object(V.a)(Object(V.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:u,isPlaying:!0,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:void 0})},se=function(e,t){var n=Object(L.a)(e.lastUpQueues),a=Object(L.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],u=c?c.children.length?c.children[0]:c:void 0;return r&&n.push(r),c&&(c.children.length?(c.children.shift(),c.children.length||a.shift()):a.shift()),Object(V.a)(Object(V.a)({},e),{},{stream:Object(V.a)(Object(V.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:u,isPlaying:!!u,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:r})},ie=function(e,t){return Object(V.a)(Object(V.a)({},e),{},{playback:Object(V.a)(Object(V.a)({},e.playback),{},{spotifyApi:t.spotifyApi,isReady:!0})})},oe=function(e,t){return Object(V.a)(Object(V.a)({},e),{},{playback:Object(V.a)(Object(V.a)({},e.playback),{},{youTubeApi:t.youTubeApi})})},le=function(e){var t=$(e.nextUpQueues);if(!t)return Object(V.a)({},e);var n=Object(V.a)({},e.playback),a=e.stream.nowPlaying;a.track.service===B&&t.track.service===B&&0===t.playbackIntervals[0][0]&&(!function(e,t,n){t.nowPlaying.track.service===B&&e.spotifyApi.queue(n.track.externalId)}(e.playback,e.stream,t),n.queuedUp=!0,a.playbackIntervals[a.playbackIntervals.length-1][1]===a.track.durationMilliseconds&&(n.noopNextTrack=!0));return Object(V.a)(Object(V.a)({},e),{},{playback:n})},de=function(e){var t=$(e.nextUpQueues),n=e.playback.queuedUp,a=e.playback.noopNextTrack,r=e.playback.addToQueueTimeoutId,c=e.playback.nextSeekTimeoutId,u=Object(V.a)(Object(V.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1});return!t||a?(u.addToQueueTimeoutId=void 0,Object(V.a)(Object(V.a)({},e),{},{playback:u})):n?(function(e,t){t.nowPlaying.track.service===B&&e.spotifyApi.skipToNext()}(e.playback,e.stream),u.addToQueueTimeoutId=void 0,Object(V.a)(Object(V.a)({},e),{},{playback:u})):(clearTimeout(r),clearTimeout(c),u.isPlaying=!1,u.addToQueueTimeoutId=void 0,u.nextSeekTimeoutId=void 0,Object(V.a)(Object(V.a)({},e),{},{playback:u}))},pe=function(e,t){var n=e;n=de(n);var a=t.payload,r=n.stream.nowPlaying;return a.startedAt=n.stream.startedAt+r.totalDurationMilliseconds,n=se(n,a)},be=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(V.a)(Object(V.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1,isPlaying:!1,addToQueueTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(V.a)(Object(V.a)({},e),{},{playback:a})},je=function(e){var t=Object(V.a)(Object(V.a)({},e.playback),{},{isPlaying:!0});return Object(V.a)(Object(V.a)({},e),{},{playback:t})},fe=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(V.a)(Object(V.a)({},e.playback),{},{addToQueueTimeoutId:void 0,nextSeekTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(V.a)(Object(V.a)({},e),{},{playback:a})},xe=function(e,t){var n=Object(V.a)(Object(V.a)({},e.playback),{},{addToQueueTimeoutId:t.addToQueueTimeoutId});return Object(V.a)(Object(V.a)({},e),{},{playback:n})},ve=function(e,t){var n=e.playback.nextSeekTimeoutId,a=Object(V.a)(Object(V.a)({},e.playback),{},{nextSeekTimeoutId:t.nextSeekTimeoutId});return clearTimeout(n),Object(V.a)(Object(V.a)({},e),{},{playback:a})},he=function(e){return Object(V.a)(Object(V.a)({},e),{},{playback:Object(V.a)(Object(V.a)({},e.playback),{},{controlsEnabled:!1})})},Oe=function(e){return Object(V.a)(Object(V.a)({},e),{},{playback:Object(V.a)(Object(V.a)({},e.playback),{},{controlsEnabled:!0})})},me=function(e,t){var n=Object(V.a)({},e.playback),a=Object(V.a)({},e.playback.files),r=new Audio(t.track.audioUrl);return a[t.track.uuid]={audio:r},Object(V.a)(Object(V.a)({},e),{},{playback:Object(V.a)(Object(V.a)({},n),{},{files:a})})},ye=function(e){return function(t){return t.uuid===e}},ke=function(e,t){return t.upperBound?e.upperBound?e.upperBound.timestampMilliseconds-e.upperBound.timestampMilliseconds:1:-1},ge=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,u=e.nextUpQueues,s=-1;c&&(s=u.findIndex(ye(c)),u=u[s].children),n=u.findIndex(ye(r));var i=u[n],o=[].concat(Object(L.a)(i.intervals),[a]).sort(ke),l=Object(L.a)(e.nextUpQueues);-1!==s?l[s].children[n].intervals=o:l[n].intervals=o;var d=l.map(te);return Object(V.a)(Object(V.a)({},e),{},{nextUpQueues:d})},we=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,u=e.nextUpQueues,s=-1;c&&(s=u.findIndex(ye(c)),u=u[s].children),n=u.findIndex(ye(r));var i,o=u[n],l=Object(L.a)(o.intervals).filter((i=a.uuid,function(e){return e.uuid!==i})),d=Object(L.a)(e.nextUpQueues);-1!==s?d[s].children[n].intervals=l:d[n].intervals=l;var p=d.map(te);return Object(V.a)(Object(V.a)({},e),{},{nextUpQueues:p})},Te=function(e,t){var n=t.textComments,a=Object(V.a)(Object(V.a)({},e),{},{textComments:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},Pe=function(e,t){var n=[].concat(Object(L.a)(e.textComments),[t.textComment]),a=Object(V.a)(Object(V.a)({},e),{},{textComments:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},Se=function(e,t){var n=e.textComments.filter((function(e){return e.uuid!==t.textCommentUuid})),a=Object(V.a)(Object(V.a)({},e),{},{textComments:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},Ue=function(e,t){var n=t.textCommentModification,a=t.textCommentUuid,r=Object(L.a)(e.textComments),c=r.findIndex((function(e){return e.uuid===a})),u=r[c],s=Object(L.a)(u.modifications);s.push(n);var i=s.sort((function(e,t){return e.startPtr-t.startPtr}));return r[c].modifications=i,Object(V.a)(Object(V.a)({},e),{},{textComments:r})},Ce=function(e,t){var n=t.voiceRecordings,a=Object(V.a)(Object(V.a)({},e),{},{voiceRecordings:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},Qe=function(e,t){var n=[].concat(Object(L.a)(e.voiceRecordings),[t.voiceRecording]),a=Object(V.a)(Object(V.a)({},e),{},{voiceRecordings:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},_e=function(e,t){var n=e.voiceRecordings.filter((function(e){return e.uuid!==t.voiceRecordingUuid})),a=Object(V.a)(Object(V.a)({},e),{},{voiceRecordings:n});return Object(V.a)(Object(V.a)({},a),{},{feed:X(a)})},Ne=function(e,t){return Object(V.a)(Object(V.a)({},e),{},{userSettings:Object(V.a)(Object(V.a)({},e.userSettings),t)})},Me={nextUpQueues:[],lastUpQueues:[],_lastPlayed:void 0,textComments:[],voiceRecordings:[],feed:[],userSettings:void 0,trackMarkerMap:{},playback:{controlsEnabled:!1,spotifyApi:void 0,isPlaying:!1,queuedUp:!1,noopNextTrack:!1,addToQueueTimeoutId:void 0,isReady:!1,files:{}}};function Ie(e,t){var n=Object(V.a)({},e.stream),a=n.nowPlaying;return n.isPlaying=!1,n.isPaused=!1,n.nowPlaying=void 0,Object(V.a)(Object(V.a)({},e),{},{stream:n,_lastPlayed:a})}function Ae(e,t){var n=e.nextUpQueues.filter((function(e){return e.uuid!==t.queueUuid}));return Object(V.a)(Object(V.a)({},e),{},{nextUpQueues:n})}function Be(e,t){var n=Object(L.a)(e.nextUpQueues),a=n.findIndex((function(e){return e.uuid===t.parentUuid})),r=n[a].children.filter((function(e){return e.uuid!==t.queueUuid}));return n[a].children=r,r.length||(n=n.filter((function(e){return e.uuid!==t.parentUuid}))),Object(V.a)(Object(V.a)({},e),{},{nextUpQueues:n})}function Fe(e,t){var n=e.textComments.findIndex((function(e){return e.uuid===t.textCommentUuid})),a=Object(L.a)(e.textComments);return a[n].modifications=[],Object(V.a)(Object(V.a)({},e),{},{textComments:a})}function Re(e,t){return Object(V.a)(Object(V.a)({},e),{},{userSettings:t.userSettings})}var De=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stream/set":return ae(e,t.payload);case"stream/play":return re(e,t.payload);case"stream/pause":return ce(e,t.payload);case"stream/prevTrack":return ue(e,t.payload);case"stream/nextTrack":return se(e,t.payload);case"stream/expire":return Ie(e);case"queue/listSet":return ne(e,t.payload);case"queue/deleteNode":return Ae(e,t);case"queue/deleteChildNode":return Be(e,t);case"textComment/listSet":return Te(e,t.payload);case"textComment/create":return Pe(e,t);case"textComment/delete":return Se(e,t);case"textCommentModification/create":return Ue(e,t.payload);case"textComment/clearModifications":return Fe(e,t);case"voiceRecording/create":return Qe(e,t);case"voiceRecording/listSet":return Ce(e,t.payload);case"voiceRecording/delete":return _e(e,t);case"user/get-settings":return Re(e,t);case"marker/create":return Z(e,t.payload);case"marker/delete":return G(e,t.payload);case"marker/list":return W(e,t.payload);case"queueInterval/create":return ge(e,t.payload);case"queueInterval/delete":return we(e,t.payload);case"playback/disable":return he(e);case"playback/enable":return Oe(e);case"playback/spotify":return ie(e,t.payload);case"playback/youTube":return oe(e,t.payload);case"playback/addToQueue":return le(e);case"playback/plannedNextTrack":return pe(e,t.payload);case"playback/start":return be(e);case"playback/started":return je(e);case"playback/addToQueueReschedule":return fe(e);case"playback/addToQueueScheduled":return xe(e,t.payload);case"playback/nextSeekScheduled":return ve(e,t.payload);case"userSettings/update":return Ne(e,t.payload);case"playback/loadFiles":return me(e,t.payload);case"feed/update":return H(e);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0})),qe=n(12),Ee=n(27),Le=n.n(Ee);var Ve=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],u=n[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),p=i[0],b=i[1],j=Object(r.useState)(!1),f=Object(d.a)(j,2),x=f[0],v=f[1],h=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(c,p);case 3:if((n=e.sent).access&&n.refresh){e.next=6;break}return e.abrupt("return");case 6:return localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),e.next=10,y();case 10:window.location.reload();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("form",{className:Le.a.Login,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("h3",{children:"Sign in"}),Object(a.jsxs)("p",{children:["If you have not created an account yet, then please ",Object(a.jsx)(qe.b,{to:"/signup",children:"Sign Up"})," first."]}),Object(a.jsxs)("label",{className:Le.a.FormBlock,children:["Username",Object(a.jsx)("input",{type:"text",name:"username",placeholder:"username",value:c,onChange:function(e){u(e.target.value)}})]}),Object(a.jsxs)("label",{className:Le.a.FormBlock,children:["Password",Object(a.jsx)("input",{type:"password",name:"password",placeholder:"password",value:p,onChange:function(e){b(e.target.value)}})]}),Object(a.jsxs)("label",{className:Le.a.FormBlock,children:[Object(a.jsx)("input",{type:"checkbox",name:"remember-me",value:x,onChange:function(e){v(e.target.value)}}),"Remember Me"]}),Object(a.jsxs)("div",{className:Le.a.FormBlock,children:[Object(a.jsx)("button",{type:"submit",children:"Sign In"}),Object(a.jsx)("span",{children:Object(a.jsx)(qe.b,{to:"/forgotpassword",children:"Forgot Password?"})})]})]})},Je=n(7),ze=n(63),Xe=n(10),Ye=n(23),He=n.n(Ye),Ze=n(66),Ge=n.n(Ze),We=n(49),Ke=n.n(We),$e=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/voice-recording/create/",{audioFile:t,transcriptData:n,transcriptFinal:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),et=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/voice-recording/delete/",{voiceRecordingUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=n(67),nt=n(72),at=n.n(nt),rt="bold",ct="italicize",ut="strikethrough",st=[rt,ct,ut],it=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment-modification/create/",{textCommentUuid:t,style:n,anchorOffset:a,focusOffset:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return u=e.sent,e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var ot=Object(Je.b)((function(e){return{}}))((function(e){var t=e.textColor,n=Object(r.useRef)(null),c=Object(r.useState)(!0),u=Object(d.a)(c,2),s=u[0],i=u[1],p=Object(r.useState)(null),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)(null),v=Object(d.a)(x,2),h=v[0],O=v[1],m=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data.uuid,t.next=3,it(a,n,j,h);case 3:r=t.sent,e.dispatch(r.redux),i(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=window.getSelection()).anchorNode===t.focusNode){e.next=6;break}return i(!1),f(null),O(null),e.abrupt("return");case 6:n=parseInt(t.anchorNode.parentNode.getAttribute("offset")),i(!0),f(n+t.anchorOffset),O(n+t.focusOffset);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!1),f(null),O(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:at.a.NotableText,style:{color:t},children:[Object(a.jsx)("p",{ref:n,children:function(){for(var t=e.data,n=t.text,r=t.modifications,c=0,u=Object(a.jsx)(a.Fragment,{}),s=0;s<r.length;s++){var i=r[s],o=n.substring(c,i.startPtr),l=n.substring(i.startPtr,i.endPtr);u=Object(a.jsxs)(a.Fragment,{children:[u,Object(a.jsx)("span",{offset:c,children:o}),i.type===rt&&Object(a.jsx)("b",{children:Object(a.jsx)("span",{children:l})}),i.type===ct&&Object(a.jsx)("i",{children:Object(a.jsx)("span",{children:l})}),i.type===ut&&Object(a.jsx)("strike",{children:Object(a.jsx)("span",{children:l})})]}),c=i.endPtr}var d=n.substring(c,n.length);return u=Object(a.jsxs)(a.Fragment,{children:[u,Object(a.jsx)("span",{offset:c,children:d})]})}()}),Object(a.jsx)(tt.a,{selectionRef:n,onTextSelect:y,onTextUnselect:k,isOpen:s,children:st.map((function(e,t){return Object(a.jsx)("button",{type:"button",onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)}))),children:e},t)}))})]})})),lt=n(73),dt=n.n(lt),pt=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment/delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment-modification/list-delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var jt=Object(Je.b)((function(e){return{}}))((function(e){var t,n=e.data,r=n.uuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt(r);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt(r);case 2:return t.next=4,e.dispatch({type:"textComment/clearModifications",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t="history"===n.renderStatus?"grey":"display"===n.renderStatus?"black":"red",Object(a.jsxs)("div",{className:dt.a.TextComment,children:[Object(a.jsx)(ot,{data:n,textColor:t}),Object(a.jsx)("button",{type:"button",onClick:u,children:"Clear modifications"}),Object(a.jsx)("button",{type:"button",onClick:c,children:"Delete"})]})})),ft=n(74),xt=n(75),vt=n.n(xt);var ht=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt(n);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:n});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:vt.a.ABCNotation,children:[Object(a.jsx)(ft.Notation,{notation:t.text,engraverParams:{staffwidth:278}}),Object(a.jsx)("button",{type:"button",onClick:r,children:"Delete"})]})})),Ot=n(76),mt=n.n(Ot);var yt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(n);case 2:e.dispatch({type:"voiceRecording/delete",voiceRecordingUuid:n});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:mt.a.VoiceRecording,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"null"===t.transcriptFinal?"<transcript not available>":t.transcriptFinal})}),Object(a.jsx)("button",{type:"submit",onClick:r,children:"Delete"})]})}));var kt=Object(Je.b)((function(e){return{stream:e.stream,textComments:e.textComments,voiceRecordings:e.voiceRecordings,feed:e.feed}}))((function(e){var t=e.feed,n=e.stream,c=Object(r.useState)(""),u=Object(d.a)(c,2),s=u[0],i=u[1],p=Object(r.useState)(void 0),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)(void 0),h=Object(d.a)(x,2),O=h[0],m=h[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),g=k[0],w=k[1],T=Object(r.useState)(!1),P=Object(d.a)(T,2),S=P[0],U=P[1],C=Object(r.useState)(new Ge.a({bitRate:320})),Q=Object(d.a)(C,1)[0],_=Object(r.useState)([]),N=Object(d.a)(_,1)[0];Object(r.useEffect)((function(){var t=setInterval((function(){e.dispatch({type:"feed/update"})}),50);return function(){clearInterval(t)}}),[]);var M=function(e){if(!j){var t=Y(n)[0];m(t),f(n.nowPlaying.track.uuid)}i(e.target.value)},I=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=g?"abc_notation":"text",t.next=4,v(s,a,j,O);case 4:return r=t.sent,t.next=7,e.dispatch({type:"textComment/create",textComment:r.data});case 7:m(void 0),f(void 0),i("");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=Object(Ye.useSpeechRecognition)(),B=A.transcript,F=A.resetTranscript;return Object(a.jsxs)("div",{className:Ke.a.FeedApp,children:[Object(a.jsx)("div",{children:t.map((function(e,t){if("TextComment"===e.class){if("text"===e.format)return Object(a.jsx)(jt,{data:e},t);if("abc_notation"===e.format)return Object(a.jsx)(ht,{data:e},t)}else if("VoiceRecording"===e.class)return Object(a.jsx)(yt,{data:e},t);return Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsxs)("form",{className:Ke.a.CreateTextComment,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("input",{type:"checkbox",value:g,onChange:function(e){w(e.target.checked)}}),Object(a.jsx)("button",{type:"button",onClick:function(){S?(He.a.browserSupportsSpeechRecognition()&&He.a.stopListening(),Q.stop().getMp3().then((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];Object(l.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new File(a,"voice.mp3",{type:r.type,lastModified:Date.now()}),t.next=3,$e(n,JSON.stringify(N),B);case 3:return c=t.sent,t.next=6,e.dispatch({type:"voiceRecording/create",voiceRecording:c.data});case 6:He.a.browserSupportsSpeechRecognition()&&F();case 7:case"end":return t.stop()}}),t)})))()})),U(!1)):(He.a.browserSupportsSpeechRecognition()&&He.a.startListening({continuous:!0}),Q.start(),U(!0))},disabled:!n.isPlaying,children:"Record"}),g?Object(a.jsx)("textarea",{type:"text",name:"text",placeholder:"text",value:s,onChange:M,disabled:!n.isPlaying}):Object(a.jsx)("input",{type:"text",name:"text",placeholder:"text",value:s,onChange:M,disabled:!n.isPlaying}),Object(a.jsx)("button",{type:"submit",disabled:!n.isPlaying,children:"Send"})]})]})})),gt=n(77),wt=n.n(gt),Tt=n(24),Pt=n.n(Tt),St=n(78),Ut=n.n(St),Ct=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/marker/create/",{trackUuid:t,timestampMilliseconds:n,queueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/marker/delete/",{markerUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_t=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/marker/list",{trackUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,u){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue-interval/create/",{queueUuid:t,lowerBoundMarkerUuid:n,upperBoundMarkerUuid:a,isMuted:r,repeatCount:c,parentQueueUuid:u});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,u){return e.apply(this,arguments)}}(),Mt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue-interval/delete/",{queueIntervalUuid:t,queueUuid:n,parentQueueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var It=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,u=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Mt(n.uuid,r,c);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=n.lowerBound?n.lowerBound.timestampMilliseconds/1e3:"beginning",i=n.upperBound?n.upperBound.timestampMilliseconds/1e3:"end";return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s," =>",i,"(",n.isMuted?"muted":"played",")"]}),Object(a.jsx)("button",{onClick:u,children:"Delete"})]})}));var At=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.trackMarker,r=t.queueUuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qt(n.uuid,r);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:["@ ",n.timestampMilliseconds/1e3]}),Object(a.jsx)("button",{onClick:c,children:"Delete"})]})}));var Bt=Object(Je.b)((function(e){return{trackMarkerMap:e.trackMarkerMap}}))((function(e){var t=e.data,n=t.uuid,c=t.parentUuid,u=e.shouldOpenModal,s=e.setShouldOpenModal,i=e.isOpen,p=e.openModal,b=e.closeModal,j=e.trackMarkerMap[n]||[],f=Object(r.useState)(""),x=Object(d.a)(f,2),v=x[0],h=x[1],O=Object(r.useState)("null"),m=Object(d.a)(O,2),y=m[0],k=m[1],g=Object(r.useState)("null"),w=Object(d.a)(g,2),T=w[0],P=w[1],S=function(){var a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ct(t.track.uuid,v,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:h("");case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),U=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Nt(t.uuid,y,T,!0,null,c);case 2:return a=n.sent,n.next=5,e.dispatch(a.redux);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){function a(){return(a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_t(t.track.uuid,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:p();case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}u&&(s(!1),function(){a.apply(this,arguments)}())}),[u]),Object(a.jsxs)(Ut.a,{isOpen:i,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:b,children:"Close"}),Object(a.jsx)("p",{children:"Markers"}),j.map((function(e,t){return Object(a.jsx)(At,{data:{trackMarker:e,queueUuid:n}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",name:"timestampMilliseconds",placeholder:"timestamp",value:v,onChange:function(e){h(e.target.value)}}),Object(a.jsx)("button",{onClick:S,children:"Create Marker"})]}),Object(a.jsx)("p",{children:"Intervals"}),t.intervals.map((function(e,t){return Object(a.jsx)(It,{data:{queueInterval:e,queueUuid:n,parentQueueUuid:c}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsxs)("select",{value:y,onChange:function(e){k(e.target.value)},children:[Object(a.jsx)("option",{value:"null",children:"Beginning"}),j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)}))]}),Object(a.jsxs)("select",{value:T,onChange:function(e){P(e.target.value)},children:[j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)})),Object(a.jsx)("option",{value:"null",children:"End"})]}),Object(a.jsx)("button",{onClick:U,children:"Mute Interval"})]})]})})),Ft=n(38),Rt=n.n(Ft);var Dt=Object(Je.b)((function(e){return{stream:e.stream,lastUp:e.lastUp}}))((function(e){var t,n=e.data,c=e.stream,u=e.lastUp,s=Object(r.useState)(!1),i=Object(d.a)(s,2),p=i[0],b=i[1],j=Object(r.useState)(!1),f=Object(d.a)(j,2),x=f[0],v=f[1];console.log(p);var h=(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.index)||(null===u||void 0===u?void 0:u.index),O=!h||h<n.index,m=n.parentUuid&&O?"-":"";return Object(a.jsxs)("div",{className:Rt.a.QueueTrack,children:[Object(a.jsxs)("span",{children:[m,n.track.name]}),O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:Rt.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"}),Object(a.jsx)("button",{className:Rt.a.Button,type:"button",onClick:function(){v(!0)},children:"Edit"})]}),Object(a.jsx)(Bt,{data:n,isOpen:p,shouldOpenModal:x,setShouldOpenModal:v,openModal:function(){b(!0)},closeModal:function(){b(!1),console.log("false close")}})]})}));var qt=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n=e.data,c=e.stream,u=e.lastUpQueues,s=u[u.length-1],i=e.data.uuid,p=(null===c||void 0===c?void 0:c.isPlaying)&&(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.parentUuid)===i||!(null===c||void 0===c?void 0:c.isPlaying)&&(null===s||void 0===s?void 0:s.parentUuid)&&(null===s||void 0===s?void 0:s.parentUuid)===i,b=Object(r.useState)(p),j=Object(d.a)(b,2),f=j[0],x=j[1],v=function(e){x(!f)};return Object(a.jsxs)("div",{className:Pt.a.QueueCollection,children:[Object(a.jsxs)("div",{className:Pt.a.Item,children:[Object(a.jsx)("span",{children:n.collection.name}),!p&&Object(a.jsx)("button",{className:Pt.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"}),n.children.length>0&&!f&&Object(a.jsx)("button",{className:Pt.a.Button,type:"button",onClick:v,children:"More"}),n.children.length>0&&f&&Object(a.jsx)("button",{className:Pt.a.Button,type:"button",onClick:v,children:"Less"})]}),n.children.length>0&&f&&Object(a.jsx)("div",{className:Pt.a.Children,children:n.children.map((function(t,n){return Object(a.jsx)(Dt,{data:t,destroy:e.destroy},n)}))})]})}));var Et=Object(Je.b)((function(e){return{stream:e.stream,nextUpQueues:e.nextUpQueues,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n,r,c=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.uuid,t.next=3,N(a);case 3:(r=n.parentUuid)?e.dispatch({type:"queue/deleteChildNode",parentUuid:r,queueUuid:a}):e.dispatch({type:"queue/deleteNode",queueUuid:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:wt.a.Queue,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Last up..."})}),Object(a.jsx)("div",{children:e.lastUpQueues.map((function(e,t){return e.track?Object(a.jsx)(Dt,{data:e,destroy:function(){}},t):Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Now playing..."})}),Object(a.jsx)("p",{children:null===(t=e.stream)||void 0===t||null===(n=t.nowPlaying)||void 0===n||null===(r=n.track)||void 0===r?void 0:r.name})]}),Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Next up..."})}),Object(a.jsx)("div",{children:e.nextUpQueues.map((function(e,t){return e.collection?Object(a.jsx)(qt,{data:e,destroy:c},e.uuid):e.track?Object(a.jsx)(Dt,{data:e,destroy:c},e.uuid):Object(a.jsx)(a.Fragment,{})}))})]})})),Lt=n(29),Vt=n.n(Lt),Jt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,u,s,i){var l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/music/search",{query:t,providerSpotify:n,providerYouTube:a,providerJukeboxRadio:r,formatTrack:c,formatAlbum:u,formatPlaylist:s,formatVideo:i});case 2:return l=e.sent,e.next=5,l.json();case 5:return d=e.sent,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,u,s,i){return e.apply(this,arguments)}}(),zt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue/create/",{className:t,genericUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Xt=function(e){var t=e.data;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[t.provider," ",t.format," ",t.name]}),Object(a.jsx)("button",{type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addToQueue(e.data.class,e.data.uuid);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Add"})]})};var Yt=Object(Je.b)((function(e){return{}}))((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],u=n[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),p=i[0],b=i[1],j=Object(r.useState)(!0),f=Object(d.a)(j,2),x=f[0],v=f[1],h=Object(r.useState)(!0),O=Object(d.a)(h,2),m=O[0],y=O[1],k=Object(r.useState)(!0),g=Object(d.a)(k,2),w=g[0],T=g[1],P=Object(r.useState)(!0),S=Object(d.a)(P,2),U=S[0],C=S[1],Q=Object(r.useState)(!0),N=Object(d.a)(Q,2),M=N[0],I=N[1],A=Object(r.useState)(!0),B=Object(d.a)(A,2),F=B[0],R=B[1],D=Object(r.useState)(!0),q=Object(d.a)(D,2),E=q[0],L=q[1],V=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Jt(p,x,m,w,U,M,F,E);case 3:n=e.sent,u(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var t=Object(l.a)(o.a.mark((function t(n,a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zt(n,a);case 2:return u([]),t.next=5,_();case 5:return r=t.sent,t.next=8,e.dispatch(r.redux);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{className:Vt.a.Login,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("h3",{children:"Search"}),Object(a.jsxs)("label",{className:Vt.a.FormBlock,children:["Query \xa0",Object(a.jsx)("input",{type:"text",name:"query",placeholder:"",value:p,onChange:function(e){b(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:Vt.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:x,onChange:function(e){v(e.target.checked)}}),"Spotify"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.youTube",checked:m,onChange:function(e){y(e.target.checked)}}),"YouTube"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.jukeboxRadio",checked:w,onChange:function(e){T(e.target.checked)}}),"Jukebox Radio"]})]}),Object(a.jsxs)("div",{className:Vt.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:U,onChange:function(e){C(e.target.checked)}}),"Track"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:M,onChange:function(e){I(e.target.checked)}}),"Album"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:F,onChange:function(e){R(e.target.checked)}}),"Playlist"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:E,onChange:function(e){L(e.target.checked)}}),"Video"]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:Vt.a.FormBlock,children:Object(a.jsx)("button",{type:"submit",children:"Search"})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:c.map((function(e,t){return Object(a.jsx)(Xt,{data:e,addToQueue:J},t)}))})]})})),Ht=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/users/user/connect-spotify/",{code:t,error:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Zt=function(e){return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.search,n=new URLSearchParams(t),a=n.get("code"),r=n.get("error"),e.next=3,Ht(a,r);case 3:window.location.href="../search?service=spotify";case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)("p",{children:"Redirecting..."})},Gt=n(19),Wt=n.n(Gt),Kt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c){var u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/music/track/create/",{audioFile:t,imageFile:n,trackName:a,artistName:r,albumName:c});case 2:return u=e.sent,e.next=5,u.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}();var $t=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],u=n[1],s=Object(r.useState)(""),i=Object(d.a)(s,2),p=i[0],b=i[1],j=Object(r.useState)(""),f=Object(d.a)(j,2),x=f[0],v=f[1],h=Object(r.useState)(""),O=Object(d.a)(h,2),m=O[0],y=O[1],k=Object(r.useState)(""),g=Object(d.a)(k,2),w=g[0],T=g[1],P=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Kt(c,p,x,m,w);case 3:v(""),y(""),T("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("form",{className:Wt.a.Login,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("h3",{children:"Upload"}),Object(a.jsxs)("label",{className:Wt.a.FormBlock,children:["Audio file",Object(a.jsx)("input",{type:"file",name:"audioFile",onChange:function(e){u(e.target.files[0])}})]}),Object(a.jsxs)("label",{className:Wt.a.FormBlock,children:["Image file",Object(a.jsx)("input",{type:"file",name:"imageFile",onChange:function(e){b(e.target.files[0])}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:Wt.a.FormBlock,children:["Track name",Object(a.jsx)("input",{type:"text",name:"trackName",placeholder:"Track name",value:x,onChange:function(e){v(e.target.value)}})]}),Object(a.jsxs)("label",{className:Wt.a.FormBlock,children:["Artist name",Object(a.jsx)("input",{type:"text",name:"artistName",placeholder:"Artist name",value:m,onChange:function(e){y(e.target.value)}})]}),Object(a.jsxs)("label",{className:Wt.a.FormBlock,children:["Album name",Object(a.jsx)("input",{type:"text",name:"albumName",placeholder:"Album name",value:w,onChange:function(e){T(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:Wt.a.FormBlock,children:Object(a.jsx)("button",{type:"submit",children:"Submit"})})]})},en=n(13),tn=n.n(en);var nn=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues,playback:e.playback}}))((function(e){var t,n,c,u=e.stream,s=e.playback,i=null===u||void 0===u||null===(t=u.nowPlaying)||void 0===t?void 0:t.track,o=K(e.lastUpQueues),l=$(e.nextUpQueues),p=Object(r.useState)(0),b=Object(d.a)(p,2),j=(b[0],b[1]);return 1===(null===u||void 0===u||null===(n=u.nowPlaying)||void 0===n?void 0:n.index)||o||window.location.reload(),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:tn.a.Div,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Last..."})}),Object(a.jsx)("p",{children:null===o||void 0===o||null===(c=o.track)||void 0===c?void 0:c.name})]}),Object(a.jsxs)("div",{className:tn.a.Div,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Now playing..."})}),((null===u||void 0===u?void 0:u.isPlaying)||(null===u||void 0===u?void 0:u.isPaused))&&Object(a.jsx)("p",{children:null===i||void 0===i?void 0:i.name}),!(null===u||void 0===u?void 0:u.isPlaying)&&!(null===u||void 0===u?void 0:u.isPaused)&&Object(a.jsx)("p",{children:"Waiting..."})]}),Object(a.jsxs)("div",{className:tn.a.Div,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Next..."})}),Object(a.jsx)("p",{children:null===l||void 0===l?void 0:l.track.name})]}),Object(a.jsx)("div",{className:tn.a.Div,children:((null===u||void 0===u?void 0:u.isPaused)?u.pausedAt-u.startedAt:(null===u||void 0===u?void 0:u.isPlaying)?Date.now()-u.startedAt:void 0)||"Waiting..."}),Object(a.jsxs)("div",{className:tn.a.Div,children:[Object(a.jsx)("button",{className:tn.a.Button,onClick:e.prevTrack,disabled:!s.controlsEnabled,children:"Prev"}),(null===u||void 0===u?void 0:u.isPaused)&&Object(a.jsx)("button",{className:tn.a.Button,onClick:e.play,disabled:!s.controlsEnabled,children:"Play"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(a.jsx)("button",{className:tn.a.Button,onClick:e.pause,disabled:!s.controlsEnabled,children:"Pause"}),Object(a.jsx)("button",{className:tn.a.Button,onClick:e.nextTrack,disabled:!s.controlsEnabled,children:"Next"})]}),Object(a.jsxs)("div",{className:tn.a.Div,children:[(null===u||void 0===u?void 0:u.isPlaying)&&Object(a.jsx)("button",{className:tn.a.Button,onClick:function(){e.seek("backward")},disabled:!s.controlsEnabled,children:"Backward"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(a.jsx)("button",{className:tn.a.Button,onClick:function(){e.seek("forward")},disabled:!s.controlsEnabled,children:"Forward"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(a.jsx)("button",{className:tn.a.Button,onClick:function(){j((function(e){return e+1}))},disabled:!s.controlsEnabled,children:"Progress"})]})]})}));var an=Object(Je.b)((function(e){return{userSettings:e.userSettings}}))((function(e){var t=Object(r.useState)(!0),n=Object(d.a)(t,2),c=n[0];return n[1],e.userSettings?Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:e.userSettings.spotify.authorizationUrl,children:"Connect Your Spotify Account"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.idleQueue,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{idleQueue:t.target.checked}}),I("idle_after_now_playing",t.target.checked)},disabled:!c}),"Idle After Queue"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.speakVoice,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{speakVoice:t.target.checked}}),I("mute_voice_recordings",t.target.checked)},disabled:!c}),"Speak Voice Recordings"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.focusMode,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{focusMode:t.target.checked}}),I("focus_mode",t.target.checked)},disabled:!c}),"Focus Mode"]}),Object(a.jsx)("br",{})]})]}):Object(a.jsx)(a.Fragment,{})}));var rn=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/settings",children:"Settings"})}),Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/feed",children:"Feed"})}),Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/player",children:"Player"})}),Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/queue",children:"Queue"})}),Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/search",children:"Search"})}),Object(a.jsx)("li",{children:Object(a.jsx)(qe.b,{to:"/upload",children:"Upload"})})]})}),Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)("div",{className:"app-main",children:Object(a.jsxs)(Xe.c,{children:[Object(a.jsx)(Xe.a,{path:"/settings",children:Object(a.jsx)(an,{})}),Object(a.jsx)(Xe.a,{path:"/feed",children:Object(a.jsx)(kt,{})}),Object(a.jsx)(Xe.a,{path:"/player",children:Object(a.jsx)(nn,{nextTrack:e.playbackControls.nextTrack,prevTrack:e.playbackControls.prevTrack,seek:e.playbackControls.seek,pause:e.playbackControls.pause,play:e.playbackControls.play})}),Object(a.jsx)(Xe.a,{path:"/queue",children:Object(a.jsx)(Et,{})}),Object(a.jsx)(Xe.a,{path:"/search",children:Object(a.jsx)(Yt,{})}),Object(a.jsx)(Xe.a,{path:"/upload",children:Object(a.jsx)($t,{})}),Object(a.jsx)(Xe.a,{path:"/spotify",children:Object(a.jsx)(Zt,{})})]})})})]})},cn=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.next=5,O();case 5:n=e.sent,De.dispatch(t.redux),De.dispatch(n.redux);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var un=Object(Je.b)((function(e){return{stream:e.stream,playback:e.playback,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues}}))((function(e){var t,n,c=e.stream,u=e.playback,s=K(e.lastUpQueues),i=$(e.nextUpQueues),p=Object(r.useState)(!1),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)({}),v=Object(d.a)(x,2),h=v[0],O=v[1],m=Object(r.useState)({}),y=Object(d.a)(m,2),k=y[0],g=y[1],_=function(e,t){var n=c.nowPlaying,a=null===n||void 0===n?void 0:n.playbackIntervals,r=a?a[a.length-1]:void 0;return(null===n||void 0===n?void 0:n.track)&&(n.track.service===R||n.track.service===B&&!(null===e||void 0===e?void 0:e.track)||n.track.service===B&&e.track.service!==B&&(!t||r[1]!==n.totalDurationMilliseconds&&t))},N=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,T(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!0);case 4:if(a=t.sent,i.track.service!==R){t.next=11;break}return t.next=8,w(i.track.uuid);case 8:return r=t.sent,t.next=11,e.dispatch(r.redux);case 11:return g(a),t.next=14,e.dispatch({type:"playback/addToQueue"});case 14:f(!0);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _(i,!0)&&D(u,c),t.next=3,e.dispatch({type:"playback/plannedNextTrack",payload:{payload:k.redux}});case 3:return t.next=5,e.dispatch({type:"playback/enable"});case 5:return t.next=7,cn();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(_(s,!1)&&D(u,c),(null===(n=s.track)||void 0===n?void 0:n.service)!==R){t.next=9;break}return t.next=6,w(s.track.uuid);case 6:return a=t.sent,t.next=9,e.dispatch(a.redux);case 9:return t.next=11,U();case 11:return r=t.sent,t.next=14,e.dispatch(r.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,cn();case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(_(i,!1)&&D(u,c),(null===i||void 0===i?void 0:i.track.service)!==R){t.next=9;break}return t.next=6,w(i.track.uuid);case 6:return a=t.sent,t.next=9,e.dispatch(a.redux);case 9:return t.next=11,T(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!1);case 11:return r=t.sent,t.next=14,e.dispatch(r.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,cn();case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r,s,i,l,d,p,b=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.length>0&&void 0!==b[0]?b[0]:void 0,t.next=3,e.dispatch({type:"playback/disable"});case 3:if("forward"!==n){t.next=14;break}return t.next=6,Q(c.nowPlaying.totalDurationMilliseconds);case 6:if(400!==t.sent.system.status){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:a=c.startedAt-1e4,t.next=22;break;case 14:if("backward"!==n){t.next=21;break}return t.next=17,C();case 17:r=new Date,s=r.getTime(),i=c.startedAt+1e4,a=s-i>0?i:s,t.next=22;break;case 21:a=c.startedAt;case 22:return t.next=24,e.dispatch({type:"stream/set",payload:{stream:Object(V.a)(Object(V.a)({},c),{},{startedAt:a})}});case 24:return l=A(c,a),d=l[1],E(u,c,a),t.next=28,e.dispatch({type:"playback/addToQueueReschedule"});case 28:return d&&(p=setTimeout((function(){J()}),d),e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:p}})),t.next=31,e.dispatch({type:"playback/enable"});case 31:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,P();case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:return t.next=9,e.dispatch({type:"playback/addToQueueReschedule"});case 9:return D(u,c),clearTimeout(h),t.next=13,e.dispatch({type:"playback/enable"});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,S();case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:if(u.isPlaying){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:return t.next=13,e.dispatch({type:"playback/addToQueueReschedule"});case 13:return q(u,c),t.next=16,e.dispatch({type:"playback/enable"});case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){if(c.isPlaying&&u.isPlaying&&!u.addToQueueTimeoutId&&(null===c||void 0===c?void 0:c.nowPlaying)){var t=Date.now()-c.startedAt,n=c.nowPlaying.totalDurationMilliseconds-t,a=setTimeout((function(){N()}),n-5e3);e.dispatch({type:"playback/addToQueueScheduled",payload:{addToQueueTimeoutId:a}});var r=A(c,c.startedAt)[1];if(r){var s=setTimeout((function(){J()}),r);e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:s}})}}}),[u]),Object(r.useEffect)((function(){if(j){f(!1);var e=Date.now()-c.startedAt,t=c.nowPlaying.totalDurationMilliseconds-e,n=setTimeout((function(){M()}),t);clearTimeout(h),O(n)}}),[j]),c.isPlaying&&!u.isPlaying&&u.isReady&&function(){var t;(null===(t=c.nowPlaying)||void 0===t?void 0:t.track)&&(e.dispatch({type:"playback/started"}),function(e,t){var n=A(t,t.startedAt)[0],a=t.nowPlaying.track.service;if(a===B)e.spotifyApi.play({uris:[t.nowPlaying.track.externalId],position_ms:n});else if(a===F)e.youTubeApi.seekTo(n/1e3),e.youTubeApi.playVideo();else if(a===R){var r=t.nowPlaying.track.uuid,c=e.files[r].audio;n>0&&(c.currentTime=n/1e3),c.play()}}(u,c))}();var Y={nextTrack:L,prevTrack:I,seek:J,pause:z,play:X},H=null===(t=c.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.externalId;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{zIndex:-1},children:Object(a.jsx)(ze.a,{videoId:H,opts:{height:"135",width:"240",playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,iv_load_policy:3,modestbranding:1,origin:"jukeboxrad.io",playsinline:1}},onReady:function(t){var n=t.target;e.dispatch({type:"playback/youTube",payload:{youTubeApi:n}})}})}),Object(a.jsx)(rn,{playbackControls:Y})]})})),sn=n(178);var on=function(){var e=Object(r.useState)("initial"),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r,u,s,i,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:if(e.sent){e.next=6;break}return c("unauthenticated"),e.abrupt("return");case 6:return c("authenticated"),e.next=9,g();case 9:return n=e.sent,e.next=12,De.dispatch(n.redux);case 12:if(a=n.redux.payload,(null===(r=null===(t=a.stream.nowPlaying)||void 0===t?void 0:t.track)||void 0===r?void 0:r.service)!==R){e.next=20;break}return u=r.uuid,e.next=17,w(u);case 17:return n=e.sent,e.next=20,De.dispatch(n.redux);case 20:return e.next=22,_();case 22:return n=e.sent,e.next=25,De.dispatch(n.redux);case 25:return e.next=27,h();case 27:return s=e.sent,e.next=30,De.dispatch(s.redux);case 30:return e.next=32,O();case 32:return i=e.sent,e.next=35,De.dispatch(i.redux);case 35:return e.next=37,M();case 37:return l=e.sent,e.next=40,De.dispatch({type:"user/get-settings",userSettings:l.data});case 40:if(!l.data.spotify.accessToken){e.next=46;break}return(d=new sn).setAccessToken(l.data.spotify.accessToken),e.next=46,De.dispatch({type:"playback/spotify",payload:{spotifyApi:d}});case 46:De.dispatch({type:"playback/enable"}),c("ready"),console.log("ready");case 49:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),window.addEventListener("beforeunload",(function(e){e.preventDefault();var t=De.getState();t.stream.isPlaying&&(P(),D(t.playback,t.stream))}))}),[]),"initial"===n?Object(a.jsx)(a.Fragment,{}):"unauthenticated"===n?Object(a.jsx)(qe.a,{children:Object(a.jsx)(Je.a,{store:De,children:Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)("div",{className:"app-main",children:Object(a.jsx)(Ve,{})})})})}):"authenticated"===n?Object(a.jsx)(qe.a,{children:Object(a.jsx)(Je.a,{store:De,children:"Loading..."})}):Object(a.jsx)(qe.a,{children:Object(a.jsx)(Je.a,{store:De,children:Object(a.jsx)(un,{})})})},ln=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),a(e),r(e),c(e),u(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(on,{})}),document.getElementById("root")),ln()},19:function(e,t,n){e.exports={Upload:"Upload_Upload__tMDig",FormBlock:"Upload_FormBlock__2ls6S"}},24:function(e,t,n){e.exports={QueueCollection:"QueueCollection_QueueCollection__2uTSJ",Item:"QueueCollection_Item__2k6HI",Button:"QueueCollection_Button__KLnuj",Children:"QueueCollection_Children__1Q1i5"}},27:function(e,t,n){e.exports={Login:"Login_Login__1ujut",FormBlock:"Login_FormBlock__S_rix"}},29:function(e,t,n){e.exports={Search:"Search_Search__2SQmI",FormBlock:"Search_FormBlock__3ZZZJ"}},38:function(e,t,n){e.exports={QueueTrack:"QueueTrack_QueueTrack__cD3iI",Button:"QueueTrack_Button__3peLA"}},49:function(e,t,n){e.exports={FeedApp:"FeedApp_FeedApp__2YJHa"}},72:function(e,t,n){e.exports={NotableText:"NotableText_NotableText__gYPiJ"}},73:function(e,t,n){e.exports={TextComment:"TextComment_TextComment__92FmQ",Notated:"TextComment_Notated__8XL21"}},75:function(e,t,n){e.exports={ABCNotation:"ABCNotation_ABCNotation__rkME2"}},76:function(e,t,n){e.exports={VoiceRecording:"VoiceRecording_VoiceRecording__29j03"}},77:function(e,t,n){e.exports={QueueApp:"QueueApp_QueueApp__3OUXI"}},84:function(e,t,n){},86:function(e,t,n){}},[[179,1,2]]]);
//# sourceMappingURL=main.01b50ba2.chunk.js.map