{"version":3,"sources":["components/MainApp/Session/Session.module.css","components/QueueApp/QueueCollection/QueueCollection.module.css","config/global.js","utils/network.js","components/FeedApp/network.js","config/api.js","components/Login/network.js","components/PlaybackApp/Player/network.js","components/UserSettings/network.js","components/QueueApp/network.js","components/PlaybackApp/utils.js","config/services.js","utils/reducers/feed.js","utils/reducers/marker.js","components/QueueApp/utils.js","utils/reducers/queue.js","utils/reducers/stream.js","utils/reducers/playback.js","utils/reducers/queueInterval.js","utils/reducers/textComment.js","utils/reducers/textCommentModification.js","utils/reducers/voiceRecording.js","utils/reducers/userSettings.js","utils/redux.js","components/PlaybackApp/controls.js","components/Login/Login.js","components/SpotifySync/network.js","components/SpotifySync/SpotifySync.js","components/FeedApp/VoiceRecording/network.js","components/FeedApp/NotableText/constants.js","components/FeedApp/NotableText/network.js","components/FeedApp/NotableText/NotableText.js","components/FeedApp/TextComment/network.js","components/FeedApp/TextComment/TextComment.js","components/FeedApp/ABCNotationDisplay/ABCNotationDisplay.js","components/FeedApp/ABCNotationCompose/ABCNotationCompose.js","components/FeedApp/VoiceRecording/VoiceRecording.js","components/FeedApp/FeedApp.js","config/model.js","components/FeedApp/MiniFeed/MiniFeed.js","components/TrackDetailApp/Marker/network.js","components/TrackDetailApp/Interval/network.js","components/TrackDetailApp/icons.js","components/PlaybackApp/icons.js","components/PlaybackApp/ChildProgressBar/ChildProgressBar.js","components/PlaybackApp/ProgressBarMarker/ProgressBarMarker.js","components/PlaybackApp/ParentProgressBar/ParentProgressBar.js","components/TrackDetailApp/TrackDetailApp.js","components/QueueApp/icons.js","components/QueueApp/QueueTrack/QueueTrack.js","components/QueueApp/QueueCollection/QueueCollection.js","components/QueueApp/QueueApp.js","components/QueueApp/MiniQueue/MiniQueue.js","components/SearchApp/network.js","components/SearchApp/SearchResult/icons.js","components/SearchApp/SearchResult/SearchResult.js","components/Upload/network.js","components/Upload/Upload.js","components/SearchApp/SearchApp.js","components/WelcomeApp/icons.js","components/WelcomeApp/WelcomeApp.js","components/PlaybackApp/Player/Player.js","components/PlaybackApp/MiniPlayer/MiniPlayer.js","components/MainApp/BottomBar/icons.js","components/MainApp/BottomBar/BottomBar.js","components/UserSettings/UserSettings.js","components/MainApp/SideBar/icons.js","components/MainApp/SideBar/SideBar.js","components/MainApp/Session/Session.js","components/MainApp/MainApp.js","components/FeedApp/utils.js","components/PlaybackApp/PlaybackApp.js","App.js","reportWebVitals.js","index.js","components/PlaybackApp/Player/Player.module.css","components/QueueApp/QueueTrack/QueueTrack.module.css","components/MainApp/SideBar/SideBar.module.css","components/Upload/Upload.module.css","components/MainApp/BottomBar/BottomBar.module.css","components/PlaybackApp/ChildProgressBar/ChildProgressBar.module.css","components/SearchApp/SearchApp.module.css","components/Login/Login.module.css","components/PlaybackApp/ProgressBarMarker/ProgressBarMarker.module.css","components/SearchApp/SearchResult/SearchResult.module.css","components/WelcomeApp/WelcomeApp.module.css","components/FeedApp/FeedApp.module.css","components/PlaybackApp/ParentProgressBar/ParentProgressBar.module.css","components/QueueApp/QueueApp.module.css","components/QueueApp/MiniQueue/MiniQueue.module.css","components/TrackDetailApp/TrackDetailApp.module.css","components/FeedApp/NotableText/NotableText.module.css","components/FeedApp/TextComment/TextComment.module.css","components/FeedApp/ABCNotationDisplay/ABCNotationDisplay.module.css","components/FeedApp/VoiceRecording/VoiceRecording.module.css","components/FeedApp/MiniFeed/MiniFeed.module.css","components/PlaybackApp/MiniPlayer/MiniPlayer.module.css"],"names":["module","exports","BACKEND_DOMAIN","process","TYPE_GET","TYPE_POST","fetchBackend","a","method","url","data","formData","FormData","Object","entries","key","value","append","requestOptions","headers","token","localStorage","getItem","Authorization","request","Request","fetch","mode","body","response","searchParams","URLSearchParams","set","getUrl","toString","fetchTextCommentCreate","text","format","trackUuid","textCommentTimestamp","json","responseJson","fetchTextCommentList","fetchVoiceRecordingList","fetchAuthToken","username","password","fetchInitializeStream","fetchVerifyToken","status","undefined","fetchStreamGet","fetchTrackGetFiles","fetchNextTrack","nowPlayingTotalDurationMilliseconds","isPlanned","fetchPauseTrack","fetchPlayTrack","fetchPrevTrack","fetchScanBackward","fetchScanForward","fetchGetUserSettings","fetchUpdateUserSettings","field","fetchQueueList","fetchDeleteQueue","queueUuid","getPositionMilliseconds","stream","startedAt","nowPlaying","progress","isPaused","pausedAt","Date","now","seekTimeout","instrument","playbackIntervalIdx","cumulativeProgress","playbackInterval","playbackIntervals","playbackIntervalDuration","endPosition","startPosition","remainingProgress","purpose","length","cycleVolumeLevel","volumeLevel","SERVICE_APPLE_MUSIC","SERVICE_SPOTIFY","SERVICE_YOUTUBE","SERVICE_JUKEBOX_RADIO","RENDER_STATUS_HIDE","feedGenerate","state","displayThreshold","historyThreshold","textComments","voiceRecordings","aggregateFeed","map","el","shouldTagHistory","timestampMilliseconds","shouldTagDisplay","renderStatus","filter","i","sort","b","track","isPlaying","feedUpdate","feed","markerCreate","action","trackMarkerMap","marker","sortedMarkers","markerDelete","filteredMarkers","m","uuid","markerList","markers","getLastUpQueue","lastUpQueues","getNextUpQueue","nextUpQueues","children","getQueueDuration","queues","getDuration","queue","total","totalDurationMilliseconds","getProgress","reduce","curr","finalizeQueue","copy","editedChildren","q","durationMilliseconds","collection","service","imageUrl","replace","intervals","trackDurationMilliseconds","allIntervals","lastBound","interval","lowerBound","upperBound","push","queueListSet","payload","_lastPlayed","lastUp","nextUp","queueDeleteNode","filteredQueues","queueDeleteChildNode","parentIndex","findIndex","parentUuid","filteredChildren","streamSet","obj","streamPlay","updatedPayload","streamPause","streamPrevTrack","lastNowPlaying","nextUpQueue","nextNowPlaying","isTrackInCollection","unshift","pop","streamNextTrack","shift","playbackAppleMusic","playback","appleMusic","api","appleMusicApi","isReady","playbackSpotify","spotifyApi","playbackYouTube","youTubeApi","playbackAddToQueue","appleMusicShouldAddToQueue","spotifyShouldAddToQueue","queuedUp","noopNextTrack","playbackPlannedNextTrack","updatedState","addToQueueTimeoutId","nextSeekTimeoutId","clearTimeout","playbackPlannedNextTrackHelper","childPayload","updatedNowPlaying","playbackStart","playbackStarted","playbackAddToQueueReschedule","playbackAddToQueueScheduled","playbackNextSeekScheduled","playbackDisable","controlsEnabled","playbackEnable","playbackLoadFiles","files","audiosObj","all","Audio","audioUrl","stems","stem","playbackCycleVolumeLevelAudio","audioLevel","audio","findByUuid","o","sortQueueIntervals","queueIntervalCreate","index","queueInterval","parentQueueUuid","trackQueue","sortedQueueIntervals","finalizedNextUpQueues","queueIntervalDelete","filteredQueueIntervals","textCommentListSet","textCommentCreate","textComment","textCommentDelete","textCommentUuid","textCommentModificationCreate","existingIdx","textCommentModifications","modifiedModification","modified","deletedModifications","deleted","textCommentIndex","t","modifications","startPtr","idx","deletedModification","textCommentClearModifications","voiceRecordingListSet","voiceRecordingCreate","voiceRecording","voiceRecordingDelete","voiceRecordingUuid","userSettingsUpdate","userSettings","userGetSettings","initialState","voice","store","createStore","type","window","__REDUX_DEVTOOLS_EXTENSION__","trace","playbackControlPause","playbackService","MusicKit","getInstance","player","pause","pauseVideo","audios","paused","playbackControlPlay","play","playVideo","playbackControlSeek","arr","positionMilliseconds","seekToTime","seek","seekTo","instr","aud","currentTime","playbackControlSkipToNext","skipToNextItem","skipToNext","playbackControlQueue","nextPlaybackService","music","prepareToPlay","externalId","playNext","song","then","dispatch","redux","Login","props","useState","setUsername","setPassword","rememberMe","setRememberMe","handleSubmit","e","preventDefault","access","refresh","setItem","location","href","className","styles","onSubmit","FormBlock","name","placeholder","onChange","target","to","fetchUserConnectSpotify","code","error","SpotifySync","useEffect","queryString","search","urlParams","get","postData","fetchCreateVoiceRecording","audioFile","transcriptData","transcriptFinal","fetchDeleteVoiceRecording","STYLE_BOLD","STYLE_ITALICIZE","STYLE_STRIKETHROUGH","STYLE_HIGHLIGHT","STYLE_CHOICES","fetchCreateTextCommentModification","style","anchorOffset","focusOffset","connect","textColor","selectableRef","useRef","selectableIsShowable","setSelectableIsShowable","setAnchorOffset","setFocusOffset","handleNotation","onTextSelect","selection","getSelection","anchorValue","parseInt","anchorNode","parentNode","getAttribute","focusValue","focusNode","onTextUnselect","NotableText","color","ref","textCommentText","Set","modification","j","endPtr","add","textCommentHtml","char","stylesObj","has","offset","renderTextComment","selectionRef","isOpen","onClick","fetchDeleteTextComment","fetchListDeleteTextCommentModifications","deleteTextComment","clearModifications","TextComment","abcNotation","abcNotationUuid","deleteAbcNotation","ABCNotationDisplay","notation","engraverParams","staffwidth","closeModal","isDisabled","setIsDisabled","setText","createABCNotation","ariaHideApp","disabled","handleDelete","VoiceRecording","setTrackUuid","setTextCommentTimestamp","isRecording","setIsRecording","MicRecorder","bitRate","recorder","showModal","setShowModal","periodicTask","setInterval","clearInterval","createTextComment","useSpeechRecognition","transcript","resetTranscript","FeedApp","Feed","FeedWrapper","class","CreateTextComment","position","SpeechRecognition","browserSupportsSpeechRecognition","stopListening","stop","getMp3","buffer","blob","file","File","lastModified","JSON","stringify","startListening","continuous","start","MiniFeed","fetchStreamMarkerCreate","fetchStreamMarkerDelete","markerUuid","fetchStreamMarkerList","fetchStreamQueueIntervalCreate","lowerBoundMarkerUuid","upperBoundMarkerUuid","repeatCount","fetchStreamQueueIntervalDelete","queueIntervalUuid","iconForward1000","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","iconForward100","iconBackward100","iconBackward1000","iconPlay","iconBack","iconNextTrack","stroke-width","stroke-linecap","stroke-linejoin","iconPrevTrack","iconUpTriangle","iconDownTriangle","iconTrash","cleanedPurpose","duration","editable","intervalWidth","progressClass","includes","charAt","toUpperCase","slice","hovering","setHovering","deleteTrackInterval","onMouseEnter","onMouseLeave","ProgressHoverContainer","ProgressHoverPointer","HoverContainer","ProgressHoverPurpose","ProgressHoverDelete","deleteTrackMarker","ProgressBarMarker","left","styleLeft","ProgressBarMarkerPointer","ProgressBarMarkerName","ProgressBarMarkerDelete","pointerLeftDistance","runningPix","pix","setCounter","prev","ParentProgressBar","ProgressPointer","ProgressBar","ProgressMarkerContainer","shouldOpenModal","setShouldOpenModal","openModal","tab","setTab","formMarkerTimestamp","setFormMarkerTimestamp","formMarkerName","setFormMarkerName","setPurpose","setLowerBoundMarkerUuid","setUpperBoundMarkerUuid","createTrackMarker","createQueueInterval","loadData","Modal","overlayClassName","ModalOverlay","CloseModal","ModalContent","Preview","PreviewImgContainer","PreviewImg","provider","join","src","alt","PreviewControlContainer","PreviewControl","QueueName","TabButtonContainer","TabButton","CreateMarkerForm","CreateMarkerFormLabel","CreateMarkerFormInput","CreateMarkerFormSubmit","CreateIntervalForm","CreateIntervalFormLabel","CreateIntervalFormSelect","CreateIntervalFormSubmit","iconEdit","iconRemove","iconExpand","iconCollapse","mainClass","buttonClass","AlbumArtContainer","TrackInfoContainer","TrackInfoName","TrackInfoArtistName","artistName","ButtonContainer","destroy","isCurrentlyPlayingCollection","reveal","setReveal","QueueCollection","QueueCollectionMain","CollectionInfoContainer","CollectionInfoName","CollectionInfoArtistName","Button","Children","queueDuration","endsAt","destroyQueueItem","QueueApp","PlaybackDuration","ReactTimeAgo","future","date","locale","AddToQueue","flattenedQueue","expandedQueues","flattenedQueues","child","flattenQueues","MiniQueue","MiniQueueItem","fetchSearchMusicLibrary","query","providerAppleMusic","providerSpotify","providerYouTube","providerJukeboxRadio","formatTrack","formatAlbum","formatPlaylist","formatVideo","fetchCreateQueue","genericUuid","iconCheck","SearchResult","searchResult","addToQueue","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","handleAddToQueue","ggSpinner","fetchCreateTrack","imageFile","trackName","albumName","Upload","inputKey","setInputKey","setAudioFile","setImageFile","setTrackName","setArtistName","setAlbumName","searchResults","setSearchResults","setQuery","serviceAppleMusic","setServiceAppleMusic","serviceSpotify","setServiceSpotify","serviceYouTube","setServiceYouTube","serviceJukeboxRadio","setServiceJukeboxRadio","setFormatTrack","setFormatAlbum","setFormatPlaylist","setFormatVideo","responseJsonQueueList","SearchApp","SearchBar","onKeyDown","event","checked","SearchResults","iconPlug","fillRule","clipRule","history","useHistory","WelcomeApp","musicUserToken","authorize","spotify","accessToken","authorizationUrl","reload","Player","Div","Image","prevTrack","nextTrack","MoreNextUp","nowPlayingTrackName","iconScanForward","iconScanBackward","iconPlayCircle","iconPauseCircle","enableBackground","iconMusic","playbackControls","audioVolumeLevel","scanDisabled","playPauseDisabled","handleSeek","direction","BottomBar","Volume","VolumeButton","nextVolumeLevel","volume","setVolume","drums","vocals","bass","other","playbackChangeVolume","circleRatio","buildStyles","rotation","trailColor","Playback","PlaybackButton","idleQueue","speakVoice","focusMode","iconLogo","cx","cy","r","iconMore","SideBar","Logo","Menu","Search","Queue","Settings","forceHideModal","setForceHideModal","Session","Top","Content","path","PrimaryContent","SecondaryContent","MainApp","updateFeed","responseJsonTextCommentList","responseJsonVoiceRecordingList","SpotifyWebApi","require","appleMusicSDKReady","setAppleMusicSDKReady","spotifySDKReady","setSpotifySDKReady","spotifySDKDeviceID","setSpotifySDKDeviceID","spotifySDKInit","setSpotifySDKInit","messageScheduleNextTrack","setMessageScheduleNextTrack","plannedNextTrackTimeoutId","setPlannedNextTrackTimeoutId","nextTrackJson","setNextTrackJson","shouldPauseOnTrackChange","nextPlayingQueue","lastPlaybackInterval","setQueue","delayPositionMilliseconds","uris","position_ms","playbackControlStart","responseJsonNextTrack","plannedNextTrack","responseJsonPrevTrack","system","epochNow","getTime","proposedStartedAt","seekTimeoutDuration","seekTimeoutId","setTimeout","jsonResponse","script","document","createElement","async","Promise","resolve","Spotify","onSpotifyWebPlaybackSDKReady","appendChild","appendSpotifySDK","onload","configure","developerToken","app","build","addEventListener","console","log","getOAuthToken","cb","setAccessToken","addListener","device_id","transferMyPlayback","updateSpotifyPlayer","timeLeft","timeoutId","timeoutDuration","videoId","display","opts","playerVars","autoplay","controls","disablekb","fs","iv_load_policy","modestbranding","origin","playsinline","onReady","onPause","onPlay","App","setStatus","nowPlayingTrack","textCommentsJsonResponse","voiceRecordingsJsonResponse","TimeAgo","addDefaultLocale","en","getState","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6a6e438c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Session\":\"Session_Session__3G52u\",\"Top\":\"Session_Top__3uCH7\",\"Content\":\"Session_Content__3lPl4\",\"PrimaryContent\":\"Session_PrimaryContent__3yGCf\",\"SecondaryContent\":\"Session_SecondaryContent__1Uvc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueCollection\":\"QueueCollection_QueueCollection__2uTSJ\",\"QueueCollectionMain\":\"QueueCollection_QueueCollectionMain__2fm5w\",\"AlbumArtContainer\":\"QueueCollection_AlbumArtContainer__1LjHs\",\"Spotify\":\"QueueCollection_Spotify__1-wZO\",\"YouTube\":\"QueueCollection_YouTube__3tuMj\",\"Audius\":\"QueueCollection_Audius__1qIdF\",\"Upload\":\"QueueCollection_Upload__XqDd5\",\"CollectionInfoContainer\":\"QueueCollection_CollectionInfoContainer__ogQIx\",\"CollectionInfoName\":\"QueueCollection_CollectionInfoName__3ojel\",\"CollectionInfoArtistName\":\"QueueCollection_CollectionInfoArtistName__1XRUw\",\"ButtonContainer\":\"QueueCollection_ButtonContainer__1NOfG\",\"Button\":\"QueueCollection_Button__KLnuj\"};","const BACKEND_DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\nconst TYPE_GET = 'GET';\nconst TYPE_POST = 'POST';\n\nexport { BACKEND_DOMAIN, TYPE_GET, TYPE_POST }\n","import { BACKEND_DOMAIN } from '../config/global'\n\n\nasync function fetchBackend(method = '', url = '', data = {}) {\n  let response;\n\n  url = BACKEND_DOMAIN + url;\n\n  if(method !== 'GET') {\n\n    // aggregate form data in one place\n    const formData = new FormData();\n    for (const [key, value] of Object.entries(data)) {\n      formData.append(key, value);\n    }\n    // for (const [key, value] of Object.entries(files)) {\n    //   formData.append(key, value);\n    // }\n\n    // authenticate request if possible\n    let requestOptions = {headers: {}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(url, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n      body: formData,\n    });\n  } else {\n\n    // translate form data for GET\n    let searchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(data)) {\n      searchParams.set(key, value);\n    }\n    const getUrl = url + '/?' + searchParams.toString();\n\n    // authenticate request if possible\n    let requestOptions = {headers: {'Content-Type': 'application/json'}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(getUrl, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n    });\n  }\n\n  return response;\n}\n\nexport { fetchBackend }\n","import {\n  ENDPOINT_TEXT_COMMENT_CREATE,\n  ENDPOINT_TEXT_COMMENT_LIST,\n  ENDPOINT_VOICE_RECORDING_LIST\n} from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n\n/*\n * Fetches...\n */\nexport const fetchTextCommentCreate = async (text, format, trackUuid, textCommentTimestamp) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_CREATE,\n    { text, format, trackUuid, textCommentTimestamp },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchTextCommentList = async (trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TEXT_COMMENT_LIST,\n    { trackUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchVoiceRecordingList = async (trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_VOICE_RECORDING_LIST,\n    { trackUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","// NOTE: If the API endpoint is a GET, then there is no ending slash.\n//       Else, the endpoint is probably a POST and there should be a slash.\n\n\n// AUTHENTICATION\nexport const ENDPOINT_OBTAIN_TOKENS = '/auth/obtain-tokens/'\nexport const ENDPOINT_REFRESH_TOKEN = '/auth/refresh-token/'\nexport const ENDPOINT_VERIFY_TOKEN = '/auth/verify-token/'\n\n// USER\nexport const ENDPOINT_USER_GET_SETTINGS = '/users/user/get-settings'\nexport const ENDPOINT_USER_UPDATE_SETTINGS = '/users/user/update-settings/'\nexport const ENDPOINT_USER_CONNECT_SPOTIFY = '/users/user/connect-spotify/'\n\n// TEXT COMMENT\nexport const ENDPOINT_TEXT_COMMENT_CREATE = '/comments/text-comment/create/'\nexport const ENDPOINT_TEXT_COMMENT_DELETE = '/comments/text-comment/delete/'\nexport const ENDPOINT_TEXT_COMMENT_LIST = '/comments/text-comment/list'\n\n// TEXT COMMENT MODIFICATION\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE = '/comments/text-comment-modification/create/'\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE = '/comments/text-comment-modification/list-delete/'\n\n// VOICE RECORDING\nexport const ENDPOINT_VOICE_RECORDING_CREATE = '/comments/voice-recording/create/'\nexport const ENDPOINT_VOICE_RECORDING_DELETE = '/comments/voice-recording/delete/'\nexport const ENDPOINT_VOICE_RECORDING_LIST = '/comments/voice-recording/list'\n\n// TRACK\nexport const ENDPOINT_TRACK_CREATE = '/music/track/create/'\nexport const ENDPOINT_TRACK_GET_FILES = '/music/track/get-files'\n\n// MUSIC\nexport const ENDPOINT_MUSIC_SEARCH = '/music/search'\n\n// QUEUE\nexport const ENDPOINT_QUEUE_CREATE = '/streams/queue/create/'\nexport const ENDPOINT_QUEUE_DELETE = '/streams/queue/delete/'\nexport const ENDPOINT_QUEUE_LIST = '/streams/queue/list'\n\n// STREAM\nexport const ENDPOINT_STREAM_GET = '/streams/stream/get'\nexport const ENDPOINT_STREAM_INITIALIZE = '/streams/stream/initialize/'\nexport const ENDPOINT_STREAM_NEXT_TRACK = '/streams/stream/next-track/'\nexport const ENDPOINT_STREAM_PAUSE_TRACK = '/streams/stream/pause-track/'\nexport const ENDPOINT_STREAM_PLAY_TRACK = '/streams/stream/play-track/'\nexport const ENDPOINT_STREAM_PREV_TRACK = '/streams/stream/prev-track/'\nexport const ENDPOINT_STREAM_SCAN_BACKWARD = '/streams/stream/scan-backward/'\nexport const ENDPOINT_STREAM_SCAN_FORWARD = '/streams/stream/scan-forward/'\n\n// MARKER\nexport const ENDPOINT_MARKER_CREATE = '/streams/marker/create/'\nexport const ENDPOINT_MARKER_DELETE = '/streams/marker/delete/'\nexport const ENDPOINT_MARKER_LIST = '/streams/marker/list'\n\n// QUEUE INTERVAL\nexport const ENDPOINT_QUEUE_INTERVAL_CREATE = '/streams/queue-interval/create/'\nexport const ENDPOINT_QUEUE_INTERVAL_DELETE = '/streams/queue-interval/delete/'\n","import {\n  ENDPOINT_OBTAIN_TOKENS,\n  ENDPOINT_STREAM_INITIALIZE,\n  ENDPOINT_VERIFY_TOKEN,\n} from '../../config/api'\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchAuthToken = async (username, password) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_OBTAIN_TOKENS,\n    { username: username, password: password },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchInitializeStream = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_INITIALIZE,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchVerifyToken = async () => {\n  const token = localStorage.getItem('accessToken');\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VERIFY_TOKEN,\n    { token: token }\n  );\n  if(response.status !== 200) {\n    //throw new Error(\"Not logged in!\");\n    return undefined;\n  }\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import {\n  ENDPOINT_STREAM_GET,\n  ENDPOINT_TRACK_GET_FILES,\n  ENDPOINT_STREAM_NEXT_TRACK,\n  ENDPOINT_STREAM_PAUSE_TRACK,\n  ENDPOINT_STREAM_PLAY_TRACK,\n  ENDPOINT_STREAM_PREV_TRACK,\n  ENDPOINT_STREAM_SCAN_BACKWARD,\n  ENDPOINT_STREAM_SCAN_FORWARD,\n} from '../../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../../config/global'\nimport { fetchBackend } from '../../../utils/network'\n\n\n/*\n * Fetches...\n */\nconst fetchStreamGet = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_STREAM_GET,\n  );\n  return await response.json();\n};\n\n\nconst fetchTrackGetFiles = async(trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TRACK_GET_FILES,\n    { trackUuid },\n  );\n  return await response.json();\n}\n\n\n/*\n * Fetches...\n */\nconst fetchNextTrack = async (nowPlayingTotalDurationMilliseconds, isPlanned) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_NEXT_TRACK,\n    { nowPlayingTotalDurationMilliseconds, isPlanned }\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPauseTrack = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PAUSE_TRACK,\n    { nowPlayingTotalDurationMilliseconds },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPlayTrack = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PLAY_TRACK,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPrevTrack = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PREV_TRACK,\n    { nowPlayingTotalDurationMilliseconds },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchScanBackward = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_SCAN_BACKWARD,\n    { nowPlayingTotalDurationMilliseconds },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchScanForward = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_SCAN_FORWARD,\n    { nowPlayingTotalDurationMilliseconds }\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\nexport {\n  fetchStreamGet,\n  fetchNextTrack,\n  fetchPauseTrack,\n  fetchPlayTrack,\n  fetchPrevTrack,\n  fetchScanBackward,\n  fetchScanForward,\n  fetchTrackGetFiles,\n}\n","import {\n  ENDPOINT_USER_GET_SETTINGS,\n  ENDPOINT_USER_UPDATE_SETTINGS,\n} from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an user settings from the server.\n */\nexport const fetchGetUserSettings = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_USER_GET_SETTINGS,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Set user settings on the server.\n */\nexport const fetchUpdateUserSettings = async (field, value) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_UPDATE_SETTINGS,\n    { field, value },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import { ENDPOINT_QUEUE_LIST, ENDPOINT_QUEUE_DELETE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchQueueList = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_QUEUE_LIST,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchDeleteQueue = async (queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_DELETE,\n    { queueUuid: queueUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","/*\n * This gets the position that the track should be at.\n *\n * @return [\n *   progress: Time in milliseconds,\n *   seekTimeout: Time in milliseconds until the next seek should happen,\n * ]\n */\nexport const getPositionMilliseconds = function(stream, startedAt) {\n  if(!stream.nowPlaying) {\n    return [undefined, undefined];\n  }\n\n  let progress;\n  if(stream.isPaused) {\n    progress = stream.pausedAt - startedAt;\n  } else {\n    progress = Date.now() - startedAt;\n  }\n\n  let instrument = 'all',\n      seekTimeout,\n      playbackIntervalIdx = 0,\n      cumulativeProgress = 0;\n  while(true) {\n    const playbackInterval = stream.nowPlaying.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval.endPosition - playbackInterval.startPosition,\n          remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval.startPosition + remainingProgress;\n      instrument = playbackInterval.purpose;\n      seekTimeout = playbackInterval.endPosition - progress;\n      break;\n    }\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  if(playbackIntervalIdx === stream.nowPlaying.playbackIntervals.length - 1) {\n    seekTimeout = undefined;\n  }\n\n  return [progress, seekTimeout, instrument];\n}\n\n\n/*\n * Get the progress of a stream.\n */\nexport const getProgress = function(stream) {\n  if(stream?.isPaused) {\n    return stream.pausedAt - stream.startedAt;\n  } else if(stream?.isPlaying) {\n    return Date.now() - stream.startedAt;\n  } else {\n    return undefined;\n  }\n};\n\n\n/*\n *\n */\nexport const updateSpotifyPlayer = function(playback, device_id) {\n  playback.spotifyApi.transferMyPlayback([device_id])\n}\n\n\nexport const cycleVolumeLevel = function(volumeLevel) {\n  const MUTED = 0.00,\n        LOW = 0.30,\n        HIGH = 0.60,\n        FULL = 1.00;\n  if(volumeLevel > HIGH) {\n    return HIGH;\n  } else if(volumeLevel > LOW) {\n    return LOW;\n  } else if(volumeLevel > MUTED) {\n    return MUTED;\n  } else {\n    return FULL;\n  }\n}\n","export const SERVICE_APPLE_MUSIC = 'apple_music';\nexport const SERVICE_SPOTIFY = 'spotify';\nexport const SERVICE_YOUTUBE = 'youtube';\nexport const SERVICE_JUKEBOX_RADIO = 'jukebox_radio';\n","/*\n * - hide:    A tag given to a feed item which should not be shown.\n * - history: A tag given to a feed item which signifies that it is no longer\n *            relevant. This is because it has been lingering on for a\n *            significant amount of time since its original context.\n * - display: A tag given to a feed item which signifies that it is still\n *            \"fresh.\" It is within a reasonable amount of time since its\n *            original context.\n */\nconst RENDER_STATUS_HISTORY = 'history',\n      RENDER_STATUS_DISPLAY = 'display',\n      RENDER_STATUS_HIDE = 'hide',\n      DISPLAY_DURATION = 30000,\n      HISTORY_DURATION = 45000;\n\n/*\n * Regenerates the feed. When regenerating the feed, it takes the previous\n * feed, then adds new items and removes stale items. This is exported because\n * other reducers need to re-generate the feed.\n */\nexport const feedGenerate = function(state) {\n\n  const stream = state.stream,\n        [progress, displayThreshold, historyThreshold] = getPositionMilliseconds(stream);\n\n  if(!progress) {\n    return [];\n  }\n\n  const textComments = [...state.textComments],\n        voiceRecordings = [...state.voiceRecordings];\n  let aggregateFeed = [...textComments, ...voiceRecordings];\n\n  aggregateFeed = aggregateFeed.map(el => {\n    const shouldTagHistory = (\n            el.timestampMilliseconds > historyThreshold &&\n            el.timestampMilliseconds <= displayThreshold\n          ),\n          shouldTagDisplay = (\n            el.timestampMilliseconds > displayThreshold &&\n            el.timestampMilliseconds <= progress\n          );\n\n    if(shouldTagHistory) {\n      el.renderStatus = RENDER_STATUS_HISTORY;\n    } else if(shouldTagDisplay) {\n      el.renderStatus = RENDER_STATUS_DISPLAY;\n    } else {\n      el.renderStatus = RENDER_STATUS_HIDE;\n    }\n\n    return { ...el };\n  });\n  aggregateFeed = aggregateFeed.filter(i => (\n    i.renderStatus !== RENDER_STATUS_HIDE\n  ));\n  aggregateFeed = aggregateFeed.sort((a, b) => {\n    return a.timestampMilliseconds - b.timestampMilliseconds;\n  });\n  return aggregateFeed;\n}\n\n\n/*\n * Helper method which gets the timestamp marker thresholds to help define\n * which comments should be displayed.\n */\nconst getPositionMilliseconds = function(stream) {\n\n  if(!stream?.nowPlaying?.track) {\n    return [undefined, undefined, undefined];\n  }\n\n  const startedAt = stream.startedAt;\n\n  let progress = (\n        stream.isPlaying ? Date.now() - startedAt : stream.pausedAt - startedAt\n      ),\n      playbackIntervalIdx = 0,\n      displayThreshold = 0,\n      historyThreshold = 0,\n      cumulativeProgress = 0;\n\n  while(true) {\n    const playbackInterval = stream.nowPlaying.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval.endPosition - playbackInterval.startPosition;\n    let remainingProgress;\n\n    // if display threshold progress definition has been reached\n    const displayProgress = (progress - DISPLAY_DURATION);\n    remainingProgress = displayProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      displayThreshold = playbackInterval.startPosition + remainingProgress;\n    }\n\n    // if history threshold progress definition has been reached\n    const historyProgress = (progress - DISPLAY_DURATION - HISTORY_DURATION);\n    remainingProgress = historyProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      historyThreshold = playbackInterval.startPosition + remainingProgress;\n    }\n\n    // if the progress definition has been reached\n    remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval.startPosition + remainingProgress;\n      break;\n    }\n\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  return [progress, displayThreshold, historyThreshold];\n}\n\n\n/*\n * Generates the feed.\n */\nexport const feedUpdate = function(state) {\n  return {\n    ...state,\n    feed: feedGenerate(state),\n  }\n}\n","/*\n * Create a marker relevant to a queue item (track).\n */\nexport const markerCreate = function(state, action) {\n  const trackMarkerMap = { ...state.trackMarkerMap },\n        queueUuid = action.queueUuid,\n        marker = action.marker,\n        markers = [...trackMarkerMap[queueUuid], marker],\n        sortedMarkers = markers.sort((a, b) => {\n          return a.timestampMilliseconds - b.timestampMilliseconds;\n        });\n  trackMarkerMap[queueUuid] = sortedMarkers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap,\n  };\n}\n\n\n/*\n * Delete a marker relevant to a queue item (track).\n */\nexport const markerDelete = function(state, action) {\n  const trackMarkerMap = { ...state.trackMarkerMap },\n        queueUuid = action.queueUuid,\n        marker = action.marker,\n        markers = trackMarkerMap[action.queueUuid],\n        filteredMarkers = markers.filter(m => m.uuid !== marker.uuid);\n  trackMarkerMap[queueUuid] = filteredMarkers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap,\n  };\n}\n\n\n/*\n * Set the markers on a queue item (track).\n */\nexport const markerList = function(state, action) {\n  const queueUuid = action.queueUuid,\n        markers = action.markers,\n        trackMarkerMap = { ...state.trackMarkerMap };\n  trackMarkerMap[queueUuid] = markers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap\n  };\n}\n","import { getProgress } from '../PlaybackApp/utils';\n\n\n/*\n * Returns the (track) queue item that was last played.\n */\nexport const getLastUpQueue = function(lastUpQueues) {\n  return lastUpQueues[lastUpQueues.length - 1];\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getNextUpQueue = function(nextUpQueues) {\n  return (\n    nextUpQueues.length ?\n      (nextUpQueues[0].children.length ?\n        nextUpQueues[0].children[0] :\n        nextUpQueues[0]) :\n      undefined\n  );\n}\n\n\n/*\n *\n */\nexport const flattenQueues = function(queues) {\n  if(!queues.length) {\n    return undefined;\n  }\n\n  const flattenedQueues = [];\n  for(let queue of queues) {\n    if(queue.children.length) {\n      for(let child of queue.children) {\n        flattenedQueues.push(child);\n      }\n    } else {\n      flattenedQueues.push(queue);\n    }\n  }\n\n  return flattenedQueues;\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getQueueDuration = function(queues, stream) {\n\n  // Determines the duration of a queue object.\n  const getDuration = function(queue) {\n    let total = 0;\n    if(queue.children.length) {\n      for(let child of queue.children) {\n        total += child.totalDurationMilliseconds;\n      }\n    } else {\n      total += queue.totalDurationMilliseconds;\n    }\n    return total;\n  }\n\n  // Reducer function which reduces an array of queues into total duration.\n  const reducer = function(total, curr) {\n    if(typeof(total) !== 'number') {\n      total = getDuration(total);\n    }\n    total += getDuration(curr);\n    return total;\n  };\n\n  // In addition to whatever is queued up, we must add the remaining progress\n  // of whatever is now playing in the stream.\n  const progress = getProgress(stream);\n  let remainingProgress = 0;\n  if(progress) {\n    remainingProgress = stream.nowPlaying.totalDurationMilliseconds - progress;\n  }\n\n  // Now add determine the total length of all queue objects.\n  // NOTE: Reduce works differently in JavaScript than in Python! Someone\n  //       explain this madness to me!! 0x213F\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\n  if(!queues.length) {\n    return remainingProgress + 0;\n  } else if (queues.length === 1) {\n    return remainingProgress + getDuration(queues[0]);\n  } else {\n    return remainingProgress + queues.reduce(reducer);\n  }\n}\n","import { SERVICE_APPLE_MUSIC } from './../../config/services';\n\n/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const finalizeQueue = function(queue) {\n  const copy = { ...queue };\n\n  // Recursive case: parent node (queue item of format collection)\n  if(copy.children.length) {\n    const editedChildren = copy.children.map(finalizeQueue),\n          totalDurationMilliseconds = editedChildren.reduce((total, q) => (\n            total + q.durationMilliseconds\n          ), 0);\n    copy.children = editedChildren;\n    copy.totalDurationMilliseconds = totalDurationMilliseconds;\n\n    if(copy.collection?.service === SERVICE_APPLE_MUSIC) {\n      copy.collection.imageUrl = copy.collection.imageUrl.replace(\"{w}\", \"300\");\n      copy.collection.imageUrl = copy.collection.imageUrl.replace(\"{h}\", \"300\");\n    }\n\n    return copy;\n  }\n\n  // Some data cleaning that probably shouldn't happen here.\n  if(copy.track?.service === SERVICE_APPLE_MUSIC) {\n    copy.track.imageUrl = copy.track.imageUrl.replace(\"{w}\", \"300\");\n    copy.track.imageUrl = copy.track.imageUrl.replace(\"{h}\", \"300\");\n  }\n\n  const intervals = copy.intervals,\n        trackDurationMilliseconds = copy.track?.durationMilliseconds;\n\n  // Base case: no configured intervals\n  if(!intervals.length) {\n    copy.totalDurationMilliseconds = trackDurationMilliseconds;\n    copy.playbackIntervals = [\n      {\n        startPosition: 0,\n        endPosition: trackDurationMilliseconds,\n        purpose: \"all\",\n        uuid: null,\n      }\n    ];\n    copy.allIntervals = [\n      {\n        startPosition: 0,\n        endPosition: trackDurationMilliseconds,\n        purpose: \"all\",\n        uuid: null,\n      }\n    ];\n    return copy;\n  }\n\n  const allIntervals = [];\n  let lastBound;\n  for(const interval of intervals) {\n    const lowerBound = interval.lowerBound?.timestampMilliseconds,\n          upperBound = interval.upperBound?.timestampMilliseconds;\n\n    ////////////////////////////////////////////////////////////////////////////\n    // TRIMMED\n    if(interval.purpose === 'muted') {\n\n\n\n      // Trimmed && No LOWER bound\n      // Meaning, the beginning of the track is trimmed.\n      if(!interval.lowerBound) {\n        allIntervals.push({\n          startPosition: 0,\n          endPosition: interval.upperBound.timestampMilliseconds,\n          purpose: \"muted\",\n          uuid: interval.uuid,\n        });\n        lastBound = interval.upperBound.timestampMilliseconds;\n        continue;\n      }\n\n      // Base case: need to add playback window upfront.\n      if(!allIntervals.length) {\n        allIntervals.push({\n          startPosition: 0,\n          endPosition: lowerBound,\n          purpose: \"all\",\n          uuid: undefined,\n        });\n      }\n\n      // Trimmed && No UPPER bound\n      // Meaning, the end of the track is trimmed.\n      if(!interval.upperBound) {\n\n        // One more case to consider here...\n        // Same concept as the ** below\n        if(lastBound && lastBound !== lowerBound) {\n          allIntervals.push({\n            startPosition: lastBound,\n            endPosition: lowerBound,\n            purpose: \"all\",\n            uuid: undefined,\n          });\n        }\n\n        allIntervals.push({\n          startPosition: lowerBound || 0,\n          endPosition: trackDurationMilliseconds,\n          purpose: \"muted\",\n          uuid: interval.uuid,\n        });\n        lastBound = undefined;\n        continue;\n      }\n\n      // Trimmed && Mismatched last bound **\n      // Meaning, there is an implicit normal playback interval.\n      if(lastBound && lastBound !== lowerBound) {\n        allIntervals.push({\n          startPosition: lastBound,\n          endPosition: lowerBound,\n          purpose: \"all\",\n          uuid: undefined,\n        });\n        // NO CONTINUE\n      }\n\n      allIntervals.push({\n        startPosition: lowerBound,\n        endPosition: upperBound,\n        purpose: interval.purpose,\n        uuid: interval.uuid,\n      });\n\n      lastBound = upperBound;\n      continue;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////\n    // STEM SEPERATION\n\n    // No LOWER bound\n    // Meaning, the beginning of the track is an implicit normal playback\n    // interval.\n    if(interval.lowerBound && lowerBound !== 0) {\n      allIntervals.push({\n        startPosition: 0,\n        endPosition: lowerBound,\n        purpose: \"all\",\n        uuid: undefined,\n      });\n    }\n\n    allIntervals.push({\n      startPosition: lowerBound || 0,\n      endPosition: upperBound || trackDurationMilliseconds,\n      purpose: interval.purpose,\n      uuid: interval.uuid,\n    });\n\n    lastBound = upperBound;\n    continue;\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // LAST BUT NOT LEAST...\n  if(lastBound && lastBound !== trackDurationMilliseconds) {\n    allIntervals.push({\n      startPosition: lastBound,\n      endPosition: trackDurationMilliseconds,\n      purpose: \"all\",\n      uuid: undefined,\n    });\n  }\n\n  const playbackIntervals = allIntervals.filter(i => i.purpose !== \"muted\");\n\n  const totalDurationMilliseconds = playbackIntervals.reduce((total, i) => (\n    total + (i.endPosition - i.startPosition)\n  ), 0);\n\n  copy.totalDurationMilliseconds = totalDurationMilliseconds;\n  copy.playbackIntervals = playbackIntervals;\n  copy.allIntervals = allIntervals;\n\n  return copy;\n}\n\n\n/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const queueListSet = function(state, payload) {\n  const lastUpQueues = payload.lastUpQueues.map(finalizeQueue),\n        nextUpQueues = payload.nextUpQueues.map(finalizeQueue),\n        _lastPlayed = state._lastPlayed;\n\n  if(_lastPlayed) {\n    lastUpQueues.push(_lastPlayed);\n  }\n\n  let stream = state.stream;\n  if(!stream.isPlaying && !stream.isPaused && stream.nowPlaying) {\n    lastUpQueues.push(stream.nowPlaying);\n    stream = { ...stream, nowPlaying: undefined }\n  }\n\n  const lastUp = (\n          !lastUpQueues.length ?\n            undefined :\n            lastUpQueues[lastUpQueues.length - 1]\n        ),\n        nextUp = (\n          !nextUpQueues.length ? undefined : (\n            !nextUpQueues[0].children.length ?\n              nextUpQueues[0] :\n              nextUpQueues[0].children[0]\n          )\n        );\n\n  return {\n    ...state,\n    stream: stream,\n    lastUp: lastUp,\n    lastUpQueues: lastUpQueues,\n    nextUp: nextUp,\n    nextUpQueues: nextUpQueues,\n  }\n}\n\n\nexport const queueDeleteNode = function(state, action) {\n  const queues = state.nextUpQueues,\n        filteredQueues = queues.filter(i => i.uuid !== action.queueUuid);\n\n  return {\n    ...state,\n    nextUpQueues: filteredQueues,\n  }\n}\n\n\nexport const queueDeleteChildNode = function(state, action) {\n  let queues = [...state.nextUpQueues];\n  const parentIndex = queues.findIndex(i => i.uuid === action.parentUuid),\n        children = queues[parentIndex].children,\n        filteredChildren = children.filter(i => i.uuid !== action.queueUuid);\n\n  queues[parentIndex].children = filteredChildren;\n\n  if(!filteredChildren.length) {\n    queues = queues.filter(i => i.uuid !== action.parentUuid);\n  }\n\n  return {\n    ...state,\n    nextUpQueues: queues,\n  }\n}\n"," import { finalizeQueue } from './queue';\n\n\n/*\n * ...\n */\nexport const streamSet = function(state, payload) {\n  const stream = payload.stream,\n        nowPlaying = stream.nowPlaying,\n        obj = { ...state };\n\n  if(nowPlaying) {\n    stream.nowPlaying = finalizeQueue(nowPlaying);\n  }\n\n  obj.stream = stream;\n\n  if(!stream.isPlaying && !stream.isPaused && stream.nowPlaying) {\n    obj.lastUp = stream.nowPlaying;\n    obj._lastPlayed = stream.nowPlaying;\n    obj.stream.nowPlaying = undefined;\n    obj.stream.isPlaying = false;\n    obj.stream.isPaused = false;\n  } else if(stream.isPlaying) {\n    const progress = Date.now() - stream.startedAt;\n    if(progress && progress >= stream.nowPlaying.totalDurationMilliseconds) {\n      obj.lastUp = stream.nowPlaying;\n      obj._lastPlayed = stream.nowPlaying;\n      obj.stream.nowPlaying = undefined;\n      obj.stream.isPlaying = false;\n      obj.stream.isPaused = false;\n    }\n  }\n\n  return obj;\n}\n\n\n/*\n * ...\n */\nexport const streamPlay = function(state, payload) {\n  const updatedPayload = {\n    stream: {\n      ...state.stream,\n      isPlaying: true,\n      isPaused: false,\n      startedAt: payload.startedAt,\n    }\n  };\n  return streamSet(state, updatedPayload);\n}\n\n\n/*\n * ...\n */\nexport const streamPause = function(state, payload) {\n  const updatedPayload = {\n    stream: {\n      ...state.stream,\n      isPlaying: false,\n      isPaused: true,\n      pausedAt: payload.pausedAt,\n    }\n  };\n  return streamSet(state, updatedPayload);\n}\n\n\n/*\n * Set the stream context.\n */\nexport const streamPrevTrack = function(state, payload) {\n  const lastUpQueues = [...state.lastUpQueues],\n        nextUpQueues = [...state.nextUpQueues],\n        lastNowPlaying = state.stream.nowPlaying,\n        nextUpQueue = nextUpQueues[0],\n        nextNowPlaying = lastUpQueues[lastUpQueues.length - 1];\n\n  const isTrackInCollection = (\n    lastNowPlaying?.parentUuid &&\n    nextUpQueue?.uuid &&\n    lastNowPlaying?.parentUuid === nextUpQueue?.uuid\n  );\n  if(lastNowPlaying) {\n    if(isTrackInCollection) {\n      nextUpQueue.children.unshift(lastNowPlaying);\n    } else {\n      nextUpQueues.unshift(lastNowPlaying);\n    }\n  }\n\n  lastUpQueues.pop();\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        startedAt: payload.startedAt,\n        nowPlaying: nextNowPlaying,\n        isPlaying: true,\n        isPaused: false,\n      },\n      lastUpQueues: lastUpQueues,\n      nextUpQueues: nextUpQueues,\n      _lastPlayed: undefined,\n  };\n}\n\n\n/*\n * ...\n */\nexport const streamNextTrack = function(state, payload) {\n  const lastUpQueues = [...state.lastUpQueues],\n        nextUpQueues = [...state.nextUpQueues],\n        lastNowPlaying = state.stream.nowPlaying,\n        nextUpQueue = nextUpQueues[0],\n        nextNowPlaying = (\n          nextUpQueue ?\n            (nextUpQueue.children.length ?\n              nextUpQueue.children[0] :\n              nextUpQueue) :\n            undefined\n        );\n\n  if(lastNowPlaying) {\n    lastUpQueues.push(lastNowPlaying);\n  }\n\n  if(nextUpQueue) {\n    if(nextUpQueue.children.length) {\n      nextUpQueue.children.shift();\n      if(!nextUpQueue.children.length) {\n        nextUpQueues.shift();\n      }\n    } else {\n      nextUpQueues.shift();\n    }\n  }\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        startedAt: payload.startedAt,\n        nowPlaying: nextNowPlaying,\n        isPlaying: !!nextNowPlaying,\n        isPaused: false,\n      },\n      lastUpQueues: lastUpQueues,\n      nextUpQueues: nextUpQueues,\n      _lastPlayed: lastNowPlaying,\n  };\n}\n","import {\n  SERVICE_APPLE_MUSIC,\n  SERVICE_SPOTIFY,\n} from '../../config/services';\nimport { getNextUpQueue } from '../../components/QueueApp/utils';\nimport { cycleVolumeLevel } from '../../components/PlaybackApp/utils';\nimport { streamNextTrack } from './stream';\n\n\nexport const playbackAppleMusic = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      appleMusic: {\n        api: payload.appleMusicApi,\n      },\n      isReady: true,\n    }\n  }\n}\n\n\n/*\n *\n */\nexport const playbackSpotify = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      spotifyApi: payload.spotifyApi,\n      isReady: true,\n    }\n  }\n}\n\n\nexport const playbackYouTube = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      youTubeApi: payload.youTubeApi,\n      // TODO refactor ready flags\n    }\n  }\n}\n\n\n/*\n * Assumptions:\n *   - There is currently something playing in the stream.\n *   - We are not certain that something is up next.\n */\nexport const playbackAddToQueue = function(state) {\n  const nextUp = getNextUpQueue(state.nextUpQueues);\n  if(!nextUp) {\n    return { ...state };\n  }\n\n  const playback = { ...state.playback },\n        nowPlaying = state.stream.nowPlaying,\n        appleMusicShouldAddToQueue = (\n          nowPlaying.track.service === SERVICE_APPLE_MUSIC &&\n          nextUp.track.service === SERVICE_APPLE_MUSIC &&\n          nextUp.playbackIntervals[0].startPosition === 0\n        ),\n        spotifyShouldAddToQueue = (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          nextUp.track.service === SERVICE_SPOTIFY &&\n          nextUp.playbackIntervals[0].startPosition === 0\n        );\n\n  if(appleMusicShouldAddToQueue) {\n    playback.queuedUp = true;\n\n    const playbackIntervals = nowPlaying.playbackIntervals,\n          lastInterval = (\n            playbackIntervals[playbackIntervals.length - 1]\n          );\n    if(lastInterval.endPosition === nowPlaying.track.durationMilliseconds) {\n      playback.noopNextTrack = true;\n    }\n  }\n\n  if(spotifyShouldAddToQueue) {\n    playback.queuedUp = true;\n\n    const playbackIntervals = nowPlaying.playbackIntervals,\n          lastInterval = (\n            playbackIntervals[playbackIntervals.length - 1]\n          );\n    if(lastInterval.endPosition === nowPlaying.track.durationMilliseconds) {\n      playback.noopNextTrack = true;\n    }\n  }\n\n  return {\n    ...state,\n    playback: playback,\n  }\n}\n\n\n/*\n *\n */\nconst playbackPlannedNextTrackHelper = function(state) {\n  const nextUp = getNextUpQueue(state.nextUpQueues),\n        queuedUp = state.playback.queuedUp,\n        noopNextTrack = state.playback.noopNextTrack,\n        addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          queuedUp: false,\n          noopNextTrack: false,\n        };\n  if(!nextUp || noopNextTrack) {\n    playback.addToQueueTimeoutId = undefined;\n    return {\n      ...state,\n      playback: playback,\n    };\n  }\n\n  if(queuedUp) {\n    playback.addToQueueTimeoutId = undefined;\n    return {\n      ...state,\n      playback: playback,\n    };\n  }\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n  playback.isPlaying = false;\n  playback.addToQueueTimeoutId = undefined;\n  playback.nextSeekTimeoutId = undefined;\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\n/*\n *\n */\nexport const playbackPlannedNextTrack = function(state, payload) {\n  let updatedState = state;\n  updatedState = playbackPlannedNextTrackHelper(updatedState);\n  const childPayload = payload.payload,  // yes\n        updatedNowPlaying = updatedState.stream.nowPlaying;\n  childPayload.startedAt = (\n    updatedState.stream.startedAt + updatedNowPlaying.totalDurationMilliseconds\n  );\n  updatedState = streamNextTrack(updatedState, childPayload);\n  return updatedState;\n}\n\n\n/*\n *\n */\nexport const playbackStart = function(state) {\n  const addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          queuedUp: false,\n          noopNextTrack: false,\n          isPlaying: false,\n          addToQueueTimeoutId: undefined,\n        };\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\n/*\n *\n */\nexport const playbackStarted = function(state) {\n  const playback = {\n          ...state.playback,\n          isPlaying: true,\n        };\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackAddToQueueReschedule = function(state) {\n  const addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          addToQueueTimeoutId: undefined,\n          nextSeekTimeoutId: undefined,\n        };\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackAddToQueueScheduled = function(state, payload) {\n  const playback = {\n          ...state.playback,\n          addToQueueTimeoutId: payload.addToQueueTimeoutId,\n        };\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackNextSeekScheduled = function(state, payload) {\n  const nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          nextSeekTimeoutId: payload.nextSeekTimeoutId,\n        };\n\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackDisable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: false,\n    }\n  }\n}\n\n\nexport const playbackEnable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: true,\n    }\n  }\n}\n\n\nexport const playbackLoadFiles = function(state, payload) {\n  const playback = { ...state.playback },\n        files = { ...state.playback.files };\n\n  const audiosObj = { all: new Audio(payload.track.audioUrl) };\n\n  for(const stem of payload.track.stems) {\n    audiosObj[stem.instrument] = new Audio(stem.audioUrl);\n  }\n\n  files[payload.track.uuid] = audiosObj;\n  return {\n    ...state,\n    playback: {\n      ...playback,\n      files: files,\n    }\n  };\n}\n\n\nexport const playbackCycleVolumeLevelAudio = function(state) {\n  const volumeLevel = { ...state.playback.volumeLevel },\n        audioLevel = volumeLevel.audio;\n\n  volumeLevel.audio = cycleVolumeLevel(audioLevel);\n\n  return {\n    ...state,\n    playback: { ...state.playback, volumeLevel },\n  }\n}\n"," import { finalizeQueue } from './queue';\n\n\n/*\n * Used to \"findIndex\" by uuid in an array.\n */\nconst findByUuid = function(uuid) {\n  return (o => o.uuid === uuid);\n}\n\n\n/*\n * Used to \"filter\" out by uuid in an array.\n */\nconst filterByUuid = function(uuid) {\n  return (o => o.uuid !== uuid);\n}\n\n\n/*\n * Used to \"sort\" and array containing queue intervals.\n */\nconst sortQueueIntervals = function(a, b) {\n  if(!b.upperBound) {\n    return -1;\n  } else if(!a.upperBound) {\n    return 1;\n  } else {\n    return (\n      a.upperBound.timestampMilliseconds -\n      a.upperBound.timestampMilliseconds\n    );\n  }\n}\n\n\n/*\n * Create a queue interval relevant to a queue item (track).\n */\nexport const queueIntervalCreate = function(state, action) {\n  const queueInterval = action.queueInterval,\n        queueUuid = action.queueUuid,\n        parentQueueUuid = action.parentQueueUuid;\n\n  // get the queue that the queue interval belongs too.\n  let queues = state.nextUpQueues;\n  let parentIndex = -1, index;\n  if(parentQueueUuid) {\n    parentIndex = queues.findIndex(findByUuid(parentQueueUuid));\n    queues = queues[parentIndex].children;\n  }\n  index = queues.findIndex(findByUuid(queueUuid));\n  const trackQueue = queues[index];\n\n  // add queue interval to that queue (and sort).\n  const queueIntervals = [...trackQueue.intervals, queueInterval],\n        sortedQueueIntervals = queueIntervals.sort(sortQueueIntervals);\n\n  // save the state\n  const nextUpQueues = [...state.nextUpQueues];\n  if(parentIndex !== -1) {\n    nextUpQueues[parentIndex].children[index].intervals = sortedQueueIntervals;\n  } else {\n    nextUpQueues[index].intervals = sortedQueueIntervals;\n  }\n\n  // update playback intervals\n  const finalizedNextUpQueues = nextUpQueues.map(finalizeQueue);\n\n  return {\n    ...state,\n    nextUpQueues: finalizedNextUpQueues,\n  };\n}\n\n\n/*\n * Delete a queue interval relevant to a queue item (track).\n */\nexport const queueIntervalDelete = function(state, action) {\n  const queueInterval = action.queueInterval,\n        queueUuid = action.queueUuid,\n        parentQueueUuid = action.parentQueueUuid;\n\n  // get the queue that the queue interval belongs too.\n  let queues = state.nextUpQueues;\n  let parentIndex = -1, index;\n  if(parentQueueUuid) {\n    parentIndex = queues.findIndex(findByUuid(parentQueueUuid));\n    queues = queues[parentIndex].children;\n  }\n  index = queues.findIndex(findByUuid(queueUuid));\n  const trackQueue = queues[index];\n\n  // delete queue interval from that queue.\n  const queueIntervals = [...trackQueue.intervals],\n        filteredQueueIntervals = queueIntervals.filter(filterByUuid(queueInterval.uuid));\n\n  // save the state\n  const nextUpQueues = [...state.nextUpQueues];\n  if(parentIndex !== -1) {\n    nextUpQueues[parentIndex].children[index].intervals = filteredQueueIntervals;\n  } else {\n    nextUpQueues[index].intervals = filteredQueueIntervals;\n  }\n\n  // update playback intervals\n  const finalizedNextUpQueues = nextUpQueues.map(finalizeQueue);\n\n  return {\n   ...state,\n   nextUpQueues: finalizedNextUpQueues,\n  };\n}\n","import { feedGenerate } from './feed';\n\n\n/*\n * ...\n */\nexport const textCommentListSet = function(state, payload) {\n  const textComments = payload.textComments,\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n *\n */\nexport const textCommentCreate = function(state, payload) {\n  const textComments = [...state.textComments, payload.textComment],\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n *\n */\nexport const textCommentDelete = function(state, payload) {\n  const deleteByUuid = i => i.uuid !== payload.textCommentUuid,\n        textComments = state.textComments.filter(deleteByUuid),\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n","/*\n * ...\n */\nexport const textCommentModificationCreate = function(state, payload) {\n  const textCommentModifications = payload.textCommentModifications,\n        modifiedModification = textCommentModifications.modified,\n        deletedModifications = textCommentModifications.deleted,\n        textCommentUuid = payload.textCommentUuid,\n        textComments = [...state.textComments],\n        textCommentIndex = textComments.findIndex(t => (\n          t.uuid === textCommentUuid\n        )),\n        textComment = textComments[textCommentIndex];\n\n  let modifications = [...textComment.modifications],\n      existingIdx;\n  existingIdx = modifications.findIndex(t => (\n    t.uuid === modifiedModification.uuid\n  ));\n  if(existingIdx !== -1) {\n    modifications[existingIdx] = modifiedModification;\n  } else {\n    modifications.push(modifiedModification);\n    modifications = modifications.sort((a, b) => {\n      return a.startPtr - b.startPtr;\n    });\n  }\n\n  if(deletedModifications) {\n    for(let idx=0; idx < deletedModifications.length; idx++) {\n      const deletedModification = deletedModifications[idx];\n      existingIdx = modifications.findIndex(t => (\n        t.uuid === deletedModifications.uuid\n      ));\n      if(existingIdx !== -1) {\n        modifications = modifications.filter(i => i.uuid !== deletedModification.uuid);\n      }\n    }\n  }\n\n  textComments[textCommentIndex].modifications = modifications;\n\n  return {\n    ...state,\n    textComments: textComments,\n  }\n}\n\n\n/*\n * ...\n */\nexport const textCommentClearModifications = function(state, payload) {\n  const textCommentIndex = state.textComments.findIndex(t => t.uuid === payload.textCommentUuid),\n        textComments = [...state.textComments];\n\n  textComments[textCommentIndex].modifications = [];\n\n  return {\n    ...state,\n    textComments: textComments,\n  }\n}\n","import { feedGenerate } from './feed';\n\n\n/*\n * ...\n */\nexport const voiceRecordingListSet = function(state, payload) {\n  const voiceRecordings = payload.voiceRecordings,\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingCreate = function(state, action) {\n  const voiceRecordings = [...state.voiceRecordings, action.voiceRecording],\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingDelete = function(state, action) {\n  const deleteByUuid = i => i.uuid !== action.voiceRecordingUuid,\n        voiceRecordings = state.voiceRecordings.filter(deleteByUuid),\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n","export const userSettingsUpdate = function(state, payload) {\n  return {\n    ...state,\n    userSettings: {\n        ...state.userSettings,\n        ...payload,\n    }\n  }\n}\n\n\nexport const userGetSettings = function(state, action) {\n  return {\n    ...state,\n    userSettings: action.userSettings,\n  }\n}\n","import { createStore } from 'redux';\nimport { feedUpdate } from './reducers/feed';\nimport {\n  markerCreate,\n  markerDelete,\n  markerList,\n} from './reducers/marker';\nimport {\n  playbackAppleMusic,\n  playbackSpotify,\n  playbackYouTube,\n  playbackAddToQueue,\n  playbackPlannedNextTrack,\n  playbackStart,\n  playbackStarted,\n  playbackAddToQueueReschedule,\n  playbackAddToQueueScheduled,\n  playbackNextSeekScheduled,\n  playbackDisable,\n  playbackEnable,\n  playbackLoadFiles,\n  playbackCycleVolumeLevelAudio,\n} from  './reducers/playback';\nimport {\n  queueListSet,\n  queueDeleteNode,\n  queueDeleteChildNode,\n} from './reducers/queue';\nimport {\n  queueIntervalCreate,\n  queueIntervalDelete,\n} from './reducers/queueInterval';\nimport {\n  streamSet,\n  streamPlay,\n  streamPause,\n  streamPrevTrack,\n  streamNextTrack,\n} from './reducers/stream';\nimport {\n  textCommentListSet,\n  textCommentCreate,\n  textCommentDelete,\n} from './reducers/textComment';\nimport {\n  textCommentModificationCreate,\n  textCommentClearModifications,\n} from './reducers/textCommentModification';\nimport {\n  voiceRecordingListSet,\n  voiceRecordingCreate,\n  voiceRecordingDelete,\n} from './reducers/voiceRecording';\nimport {\n  userSettingsUpdate,\n  userGetSettings,\n} from './reducers/userSettings';\n\n\nconst initialState = {\n  nextUpQueues: [],\n  lastUpQueues: [],\n  _lastPlayed: undefined,\n  textComments: [],\n  voiceRecordings: [],\n  feed: [],\n  userSettings: undefined,\n  trackMarkerMap: {},\n  playback: {\n    controlsEnabled: false,\n    spotifyApi: undefined,\n    youTubeApi: undefined,\n    appleMusic: {},\n    isPlaying: false,\n    queuedUp: false,\n    noopNextTrack: false,\n    addToQueueTimeoutId: undefined,\n    isReady: false,\n    files: {},\n    volumeLevel: {\n      audio: 1.00,\n      voice: 1.00,\n    },\n  },\n}\n\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    ////////////////////////////////////////////////////////////////////////////\n    // STREAM\n    case \"stream/set\":\n      return streamSet(state, action.payload);\n    case \"stream/play\":\n      return streamPlay(state, action.payload);\n    case \"stream/pause\":\n      return streamPause(state, action.payload);\n    case \"stream/prevTrack\":\n      return streamPrevTrack(state, action.payload);\n    case \"stream/nextTrack\":\n      return streamNextTrack(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // QUEUE\n    case \"queue/listSet\":\n      return queueListSet(state, action.payload);\n    case \"queue/deleteNode\":\n      return queueDeleteNode(state, action);\n    case \"queue/deleteChildNode\":\n      return queueDeleteChildNode(state, action);\n    case \"textComment/listSet\":\n    ////////////////////////////////////////////////////////////////////////////\n    // TEXT COMMENT\n      return textCommentListSet(state, action.payload);\n    case \"textComment/create\":\n      return textCommentCreate(state, action.payload);\n    case \"textComment/delete\":\n      return textCommentDelete(state, action.payload);\n    case \"textCommentModification/create\":\n      return textCommentModificationCreate(state, action.payload);\n    case \"textComment/clearModifications\":\n      return textCommentClearModifications(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // VOICE RECORDING\n    case \"voiceRecording/create\":\n      return voiceRecordingCreate(state, action);\n    case \"voiceRecording/listSet\":\n      return voiceRecordingListSet(state, action.payload);\n    case \"voiceRecording/delete\":\n      return voiceRecordingDelete(state, action);\n    ////////////////////////////////////////////////////////////////////////////\n    // FEED\n    case \"feed/update\":\n      return feedUpdate(state);\n    ////////////////////////////////////////////////////////////////////////////\n    // USER\n    case \"user/get-settings\":\n      return userGetSettings(state, action);\n    case \"userSettings/update\":\n      return userSettingsUpdate(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // MARKER\n    case \"marker/create\":\n      return markerCreate(state, action.payload);\n    case \"marker/delete\":\n      return markerDelete(state, action.payload);\n    case \"marker/list\":\n      return markerList(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // QUEUE INTERVAL\n    case \"queueInterval/create\":\n      return queueIntervalCreate(state, action.payload);\n    case \"queueInterval/delete\":\n      return queueIntervalDelete(state, action.payload);\n    ////////////////////////////////////////////////////////////////////////////\n    // PLAYBACK\n    case \"playback/disable\":\n      return playbackDisable(state);\n    case \"playback/enable\":\n      return playbackEnable(state);\n    case \"playback/appleMusic\":\n      return playbackAppleMusic(state, action.payload);\n    case \"playback/spotify\":\n      return playbackSpotify(state, action.payload);\n    case \"playback/youTube\":\n      return playbackYouTube(state, action.payload);\n    case \"playback/addToQueue\":\n      return playbackAddToQueue(state);\n    case \"playback/plannedNextTrack\":\n      return playbackPlannedNextTrack(state, action.payload);\n    case \"playback/start\":\n      return playbackStart(state);\n    case \"playback/started\":\n      return playbackStarted(state);\n    case \"playback/addToQueueReschedule\":\n      return playbackAddToQueueReschedule(state);\n    case \"playback/addToQueueScheduled\":\n      return playbackAddToQueueScheduled(state, action.payload);\n    case \"playback/nextSeekScheduled\":\n      return playbackNextSeekScheduled(state, action.payload);\n    case \"playback/loadFiles\":\n      return playbackLoadFiles(state, action.payload);\n    case \"playback/cycleVolumeLevelAudio\":\n      return playbackCycleVolumeLevelAudio(state);\n    // case \"@redux/INIT\":\n    //   return state;\n    default:\n      return state;\n      // throw new Error(`Unregistered Redux event: ${action.type}`);\n  }\n}\n\n\nexport const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({ trace: true }));\n","import { getPositionMilliseconds } from './utils';\n\nimport {\n  SERVICE_APPLE_MUSIC,\n  SERVICE_SPOTIFY,\n  SERVICE_YOUTUBE,\n  SERVICE_JUKEBOX_RADIO,\n} from '../../config/services';\nimport {\n  fetchTrackGetFiles,\n} from './Player/network';\nimport { store } from '../../utils/redux';\n\n\n/*\n * Executes the \"start\" of playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlStart = function(playback, stream) {\n  const arr = getPositionMilliseconds(stream, stream.startedAt),\n        positionMilliseconds = arr[0],\n        instrument = arr[2],\n        playbackService = stream.nowPlaying.track.service;\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.setQueue({ song: stream.nowPlaying.track.externalId })\n      .then(() => {\n        music.player.play()\n          .then(() => {\n            music.player.pause()\n              .then(() => {\n                const delayArr = getPositionMilliseconds(stream, stream.startedAt),\n                      delayPositionMilliseconds = delayArr[0];\n                music.player.seekToTime(delayPositionMilliseconds / 1000)\n                  .then(() => {\n                    music.player.play();\n                  });\n              });\n          });\n      });\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play({\n      uris: [stream.nowPlaying.track.externalId],\n      position_ms: positionMilliseconds,\n    });\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.seekTo(positionMilliseconds / 1000);\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid][instrument];\n    if(positionMilliseconds > 0) {\n      audio.currentTime = positionMilliseconds / 1000;\n    }\n    audio.play();\n  }\n};\n\n\n/*\n * \"Pauses\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlPause = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.pause();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.pause();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.pauseVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audios = playback.files[trackUuid];\n    // eslint-disable-next-line\n    for(const [instrument, audio] of Object.entries(audios)) {\n      if(audio.paused) {\n        audio.pause();\n      }\n    }\n  }\n}\n\n\n/*\n * \"Plays\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlPlay = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.play();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const arr = getPositionMilliseconds(stream, stream.startedAt),\n          instrument = arr[2],\n          trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid][instrument];\n    audio.play();\n  }\n}\n\n\n/*\n * \"Seeks\" the current playback given to the expected position given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlSeek = function(playback, stream, startedAt) {\n  const arr = getPositionMilliseconds(stream, startedAt),\n        positionMilliseconds = arr[0],\n        instrument = arr[2],\n        playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.seekToTime(positionMilliseconds / 1000);\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.seek(positionMilliseconds);\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.seekTo(positionMilliseconds / 1000);\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audios = playback.files[trackUuid],\n          audio = audios[instrument];\n\n    // Pause everything else so only the new stem is played\n    for(const [instr, aud] of Object.entries(audios)) {\n      if(instr === instrument) {\n        continue;\n      }\n      if(!aud.paused) {\n        aud.pause();\n      }\n    }\n\n    audio.currentTime = positionMilliseconds / 1000;\n    audio.play();\n  }\n}\n\n\n/*\n *\n */\nexport const playbackControlSkipToNext = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_APPLE_MUSIC) {\n    const music = window.MusicKit.getInstance();\n    music.player.skipToNextItem();\n  } else if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.skipToNext();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    // TODO - seems to work out of the box :)\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    // TODO - refactor stuff to go inside of here instead\n  }\n}\n\n\n/*\n * \"Queues\" the (track) queue item up next given:\n *     - playback (singleton instance in the React application)\n *     - stream\n *     - nextUp\n *\n * In this context, queuing up the track means doing as much pre-loading as\n * possible.\n */\nexport const playbackControlQueue = function(playback, stream, nextUp) {\n  if(!nextUp) {\n    return;\n  }\n\n  const nowPlaying = stream.nowPlaying,\n        playbackService = nowPlaying.track.service,\n        nextPlaybackService = nextUp.track.service;\n  let shouldAddToQueue;\n\n  // Apple Music\n  shouldAddToQueue = nextPlaybackService === SERVICE_APPLE_MUSIC;\n  if(shouldAddToQueue) {\n    const music = window.MusicKit.getInstance();\n    music.player.prepareToPlay(nextUp.track.externalId);\n\n    const canPlayNext = (\n      playbackService === SERVICE_APPLE_MUSIC &&\n      nextUp.playbackIntervals[0].startPosition === 0\n    );\n    if(canPlayNext) {\n      music.playNext({ song: nextUp.track.externalId });\n    }\n  }\n\n  // Spotify\n  shouldAddToQueue = (\n    playbackService === SERVICE_SPOTIFY &&\n    nextPlaybackService === SERVICE_SPOTIFY &&\n    nextUp.playbackIntervals[0].startPosition === 0\n  );\n  if(shouldAddToQueue) {\n    playback.spotifyApi.queue(nextUp.track.externalId);\n  }\n\n  // YouTube\n  // TODO\n\n  // Jukebox Radio\n  shouldAddToQueue = nextPlaybackService === SERVICE_JUKEBOX_RADIO;\n  if(shouldAddToQueue) {\n    fetchTrackGetFiles(nextUp.track.uuid)\n      .then((responseJson) => {\n        store.dispatch(responseJson.redux);\n      });\n  }\n}\n\n\nexport const playbackChangeVolume = function(playback, stream, volumeLevel) {\n  const music = window.MusicKit.getInstance();\n  music.player.volume = volumeLevel;\n\n  playback.spotifyApi.setVolume(volumeLevel * 100);\n\n  playback.youTubeApi.setVolume(volumeLevel * 100);\n\n  const trackUuid = stream.nowPlaying?.track?.uuid,\n        audios = playback.files[trackUuid];\n  if(audios) {\n    audios.all.volume = volumeLevel;\n    audios.drums.volume = volumeLevel;\n    audios.vocals.volume = volumeLevel;\n    audios.bass.volume = volumeLevel;\n    audios.other.volume = volumeLevel;\n  }\n}\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from './Login.module.css';\n\nimport { fetchAuthToken, fetchInitializeStream } from './network';\n\n\nfunction Login(props) {\n\n  /*\n   * \n   */\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [rememberMe, setRememberMe] = useState(false);\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function(e) {\n    e.preventDefault();\n\n    const responseJson = await fetchAuthToken(username, password);\n    if(!responseJson.access || !responseJson.refresh) {\n      return;\n    }\n\n    localStorage.setItem('accessToken', responseJson.access);\n    localStorage.setItem('refreshToken', responseJson.refresh);\n\n    await fetchInitializeStream();\n\n    window.location.href = '/app/search';\n  }\n\n  return (\n    <form className={styles.Login} onSubmit={async (e) => { await handleSubmit(e); }}>\n      <h3>Sign in</h3>\n      <p>Contact a system administrator for login information.</p>\n      <p>At this time, new registrations are on a case by case basis.</p>\n\n      <br></br>\n\n      <label className={styles.FormBlock}>\n        Username&nbsp;&nbsp;\n        <input type=\"text\"\n               name=\"username\"\n               placeholder=\"username\"\n               value={username}\n               onChange={(e) => {setUsername(e.target.value)}} />\n      </label>\n\n      <label className={styles.FormBlock}>\n        Password&nbsp;&nbsp;\n        <input type=\"password\"\n               name=\"password\"\n               placeholder=\"password\"\n               value={password}\n               onChange={(e) => {setPassword(e.target.value)}} />\n      </label>\n\n      <br></br>\n\n      <label className={styles.FormBlock}>\n        <input type=\"checkbox\"\n               name=\"remember-me\"\n               value={rememberMe}\n               onChange={(e) => {setRememberMe(e.target.value)}} />\n        Remember Me\n      </label>\n\n      <br></br>\n\n      <div className={styles.FormBlock}>\n        <button type=\"submit\">\n          Sign In\n        </button>\n        <span>&nbsp;&nbsp;<Link to=\"/forgotpassword\">Forgot Password?</Link></span>\n      </div>\n    </form>\n  );\n}\n\nexport default Login;\n","import { ENDPOINT_USER_CONNECT_SPOTIFY } from '../../config/api';\nimport { TYPE_POST } from '../../config/global';\nimport { fetchBackend } from '../../utils/network';\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchUserConnectSpotify = async (code, error) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_CONNECT_SPOTIFY,\n    { code, error },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useEffect } from \"react\";\n// import styles from './SpotifySync.module.css';\n\nimport { fetchUserConnectSpotify } from './network';\n\n\nfunction SpotifySync(props) {\n\n  useEffect(() => {\n    async function postData() {\n      const queryString = window.location.search,\n            urlParams = new URLSearchParams(queryString),\n            code = urlParams.get('code'),\n            error = urlParams.get('error');\n\n      await fetchUserConnectSpotify(code, error);\n\n      window.location.href = '../app/search'\n    }\n    postData();\n  }, []);\n\n  return (\n    <p>Redirecting...</p>\n  );\n}\n\nexport default SpotifySync;\n","import {\n  ENDPOINT_VOICE_RECORDING_CREATE,\n  ENDPOINT_VOICE_RECORDING_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * POST creates a voice recording.\n */\nexport const fetchCreateVoiceRecording = async (\n  audioFile, transcriptData, transcriptFinal\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_CREATE,\n    { audioFile, transcriptData, transcriptFinal },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * POST deletes a voice recording.\n */\nexport const fetchDeleteVoiceRecording = async (voiceRecordingUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_DELETE,\n    { voiceRecordingUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","export const STYLE_BOLD = 'bold';\nexport const STYLE_ITALICIZE = 'italicize';\nexport const STYLE_STRIKETHROUGH = 'strikethrough';\nexport const STYLE_HIGHLIGHT = 'highlight';\n\n\nexport const STYLE_CHOICES = [\n  STYLE_BOLD,\n  STYLE_ITALICIZE,\n  STYLE_STRIKETHROUGH,\n  STYLE_HIGHLIGHT,\n];\n","import {\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * POST creates a style modification for a text comment.\n */\nexport const fetchCreateTextCommentModification = async (\n  textCommentUuid, style, anchorOffset, focusOffset\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n    { textCommentUuid, style, anchorOffset, focusOffset },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useRef, useState } from \"react\";\nimport { connect } from 'react-redux';\nimport Popover from 'react-text-selection-popover';\nimport styles from './NotableText.module.css';\nimport {\n  STYLE_BOLD,\n  STYLE_ITALICIZE,\n  STYLE_STRIKETHROUGH,\n  STYLE_HIGHLIGHT,\n  STYLE_CHOICES,\n} from './constants';\nimport { fetchCreateTextCommentModification } from './network';\n\n\nfunction NotableText(props) {\n\n  /*\n   * \n   */\n  const textColor = props.textColor;\n\n  const selectableRef = useRef(null);\n\n  const [selectableIsShowable, setSelectableIsShowable] = useState(true);\n  const [anchorOffset, setAnchorOffset] = useState(null);\n  const [focusOffset, setFocusOffset] = useState(null);\n\n  /*\n   * When the user highlights part of the comment.\n   */\n  const handleNotation = async function(style) {\n    const textCommentUuid = props.data.uuid;\n    const responseJson = await fetchCreateTextCommentModification(\n      textCommentUuid,\n      style,\n      anchorOffset,\n      focusOffset,\n    );\n    props.dispatch(responseJson.redux)\n    setSelectableIsShowable(false);\n  }\n\n  /*\n   * ...\n   */\n  const onTextSelect = async function() {\n    const selection = window.getSelection();\n\n    // // Invalid text selection\n    // if(selection.anchorNode !== selection.focusNode) {\n    //   setSelectableIsShowable(false);\n    //   setAnchorOffset(null);\n    //   setFocusOffset(null);\n    //   return;\n    // }\n\n    // NOTE: anchor is where the user starts selecting text, focus is the end\n    //       of the selection.\n    const anchorValue = parseInt(selection.anchorNode.parentNode.getAttribute('offset')) - 1;\n    const focusValue = parseInt(selection.focusNode.parentNode.getAttribute('offset'));\n    setSelectableIsShowable(true);\n    setAnchorOffset(anchorValue);\n    setFocusOffset(focusValue);\n  }\n\n  /*\n   * ...\n   */\n  const onTextUnselect = async function() {\n    setSelectableIsShowable(false);\n    setAnchorOffset(null);\n    setFocusOffset(null);\n  }\n\n  /*\n   * When rendering a text comment, the text has to be displayed along with all\n   * of its annotations. Here the comment string is spliced into many\n   * substrings. If a substring has an accompanying modification, then Rough\n   * Notation is used to display the underline, strike-through, or highlight.\n   */\n  const renderTextComment = function() {\n    const textComment = props.data,\n          textCommentText = textComment.text,\n          modifications = textComment.modifications;\n\n    // Initializes an array of empty sets.\n    const styles = [];\n    for(let i=0; i< textCommentText.length; i++) {\n      styles[i] = new Set();\n    }\n\n    // Adds styles to each set.\n    for(let i=0; i < modifications.length; i++) {\n      const modification = modifications[i];\n\n      for(let j=modification.startPtr; j < modification.endPtr; j++) {\n        styles[j].add(modification.style);\n      }\n    }\n\n    // Generate the comment\n    let textCommentHtml = <></>\n    for(let i=0; i < styles.length; i++) {\n      const char = textCommentText[i],\n            style = styles[i];\n\n      const stylesObj = {};\n      if(style.has(STYLE_BOLD)) {\n        stylesObj['fontWeight'] = 'bold';\n      }\n      if(style.has(STYLE_ITALICIZE)) {\n        stylesObj['fontStyle'] = 'italic';\n      }\n      if(style.has(STYLE_STRIKETHROUGH)) {\n        stylesObj['textDecoration'] = 'line-through';\n      }\n      if(style.has(STYLE_HIGHLIGHT)) {\n        stylesObj['backgroundColor'] = 'yellow';\n      }\n\n      textCommentHtml = <>\n        {textCommentHtml}\n        <span offset={i} style={stylesObj}>\n          {char}\n        </span>\n      </>\n    }\n\n    return textCommentHtml;\n\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.NotableText} style={{color: textColor}}>\n\n      <p ref={selectableRef}>\n        {renderTextComment()}\n      </p>\n\n      <Popover selectionRef={selectableRef} onTextSelect={onTextSelect} onTextUnselect={onTextUnselect} isOpen={selectableIsShowable}>\n        {STYLE_CHOICES.map((style, index) => {\n          return (\n            <button key={index}\n                    type=\"button\"\n                    onClick={async () => { await handleNotation(style); }}>\n              {style}\n            </button>\n          );\n        })}\n      </Popover>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(NotableText);\n","import {\n  ENDPOINT_TEXT_COMMENT_DELETE,\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n} from '../../../config/api'\nimport { TYPE_POST } from '../../../config/global'\nimport { fetchBackend } from '../../../utils/network'\n\n\n/*\n * POST delete a text comment.\n */\nexport const fetchDeleteTextComment = async (textCommentUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * POST deletes all modifcations that belong to a text comment.\n */\nexport const fetchListDeleteTextCommentModifications = async (\n  textCommentUuid\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport NotableText from '../NotableText/NotableText';\nimport styles from './TextComment.module.css';\nimport {\n  fetchDeleteTextComment,\n  fetchListDeleteTextCommentModifications,\n} from './network';\n\n\nfunction TextComment(props) {\n\n  /*\n   * \n   */\n  const textComment = props.data,\n        textCommentUuid = textComment.uuid;\n\n  /*\n   * Deletes a text comment.\n   */\n  const deleteTextComment = async function() {\n    const responseJson = await fetchDeleteTextComment(textCommentUuid);\n    props.dispatch(responseJson.redux);\n  }\n\n  /*\n   * Clears all styled modifications on this text comment.\n   */\n  const clearModifications = async function() {\n    const responseJson = await fetchListDeleteTextCommentModifications(textCommentUuid);\n    await props.dispatch(responseJson.redux);\n  }\n\n  let textColor;\n  if(textComment.renderStatus === 'history') {\n    textColor = 'grey';\n  } else if(textComment.renderStatus === 'display') {\n    textColor = 'black';\n  } else {\n    textColor = 'red';\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.TextComment}>\n      <NotableText data={textComment} textColor={textColor}></NotableText>\n\n      <button type=\"button\" onClick={clearModifications}>\n        Clear modifications\n      </button>\n\n      <button type=\"button\" onClick={deleteTextComment}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(TextComment);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { Notation } from 'react-abc';\nimport styles from './ABCNotationDisplay.module.css';\nimport { fetchDeleteTextComment } from '../TextComment/network';\n\n\nfunction ABCNotationDisplay(props) {\n\n  /*\n   * \n   */\n  const abcNotation = props.data,\n        abcNotationUuid = abcNotation.uuid;\n\n  /*\n   * Deletes a music notation graphic.\n   *\n   * NOTE: ABCNotation is a proxy model of TextComment. Everything underneath\n   * the hood runs inside TextComment.\n   */\n  const deleteAbcNotation = async function() {\n    const responseJson = await fetchDeleteTextComment(abcNotationUuid);\n    props.dispatch(responseJson.redux);\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.ABCNotationDisplay}>\n\n      <Notation notation={abcNotation.text}\n                engraverParams={{ staffwidth: 278 }}/>\n\n      <button type=\"button\" onClick={deleteAbcNotation}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ABCNotationDisplay);\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport { Notation } from 'react-abc';\nimport { connect } from 'react-redux';\nimport { fetchTextCommentCreate } from './../network';\n\n\nfunction ABCNotationCompose(props) {\n\n  /*\n   * \n   */\n  const trackUuid = props.trackUuid,\n        textCommentTimestamp = props.textCommentTimestamp,\n        format = 'abc_notation',\n        isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [text, setText] = useState('');\n\n  /*\n   * When a user submits a new comment.\n   */\n  const createABCNotation = async function() {\n    setIsDisabled(true);\n    const responseJson = await fetchTextCommentCreate(\n      text, format, trackUuid, textCommentTimestamp\n    );\n\n    props.dispatch(responseJson.redux);\n    closeModal();\n    setText('');\n    setIsDisabled(false);\n  }\n\n  const handleTextChange = function(e) {\n    setText(e.target.value);\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}\n              disabled={isDisabled}>\n        Close\n      </button>\n\n      <br></br><br></br>\n\n      <div>\n        <textarea type=\"text\"\n                  name=\"text\"\n                  placeholder=\"text\"\n                  value={text}\n                  onChange={handleTextChange}\n                  disabled={isDisabled} />\n\n        <Notation notation={text}\n                  engraverParams={{ staffwidth: 278 }}/>\n      </div>\n\n      <button onClick={createABCNotation}\n              disabled={isDisabled}>\n        Post\n      </button>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({});\n\nexport default connect(mapStateToProps)(ABCNotationCompose);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './VoiceRecording.module.css';\nimport { fetchDeleteVoiceRecording } from './network';\n\n\nfunction VoiceRecording(props) {\n\n  /*\n   * \n   */\n  const voiceRecording = props.data,\n        voiceRecordingUuid = voiceRecording.uuid;\n\n  /*\n   * Delete a voice recording.\n   */\n  const handleDelete = async function() {\n    await fetchDeleteVoiceRecording(voiceRecordingUuid);\n    props.dispatch({\n      type: 'voiceRecording/delete',\n      voiceRecordingUuid: voiceRecordingUuid,\n    });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.VoiceRecording}>\n      <p>\n        <i>\n          {\n            voiceRecording.transcriptFinal === 'null' ?\n              '<transcript not available>' :\n              voiceRecording.transcriptFinal\n          }\n        </i>\n      </p>\n      <button type=\"submit\" onClick={handleDelete}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(VoiceRecording);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport styles from './FeedApp.module.css';\nimport { fetchTextCommentCreate } from './network';\nimport { fetchCreateVoiceRecording } from './VoiceRecording/network';\nimport TextComment from './TextComment/TextComment';\nimport ABCNotationDisplay from './ABCNotationDisplay/ABCNotationDisplay';\nimport ABCNotationCompose from './ABCNotationCompose/ABCNotationCompose';\nimport VoiceRecording from './VoiceRecording/VoiceRecording';\nimport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING } from '../../config/model';\nimport { getPositionMilliseconds } from '../PlaybackApp/utils';\n\n\nfunction FeedApp(props) {\n\n  /*\n   * \n   */\n  const feed = props.feed,\n        stream = props.stream;\n\n  const [text, setText] = useState('');\n  const [trackUuid, setTrackUuid] = useState(undefined);\n  const [textCommentTimestamp, setTextCommentTimestamp] = useState(undefined);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recorder] = useState(new MicRecorder({ bitRate: 320 }));\n  const [transcriptData] = useState([]);\n\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = function() {\n    const arr = getPositionMilliseconds(stream, stream.startedAt),\n          position = arr[0];\n    setTextCommentTimestamp(position);\n    setTrackUuid(stream.nowPlaying.track.uuid);\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // REGENERATE THE FEED\n  useEffect(() => {\n\n    const periodicTask = setInterval(() => {\n      props.dispatch({ type: \"feed/update\" });\n    }, 50);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n\n  // eslint-disable-next-line\n  }, []);\n\n  const handleTextChange = function(e) {\n    if(!trackUuid) {\n      const arr = getPositionMilliseconds(stream, stream.startedAt),\n            position = arr[0];\n      setTextCommentTimestamp(position);\n      setTrackUuid(stream.nowPlaying.track.uuid);\n    }\n    setText(e.target.value);\n  }\n\n  /*\n   * When a user submits a new comment.\n   */\n  const createTextComment = async function(e) {\n    e.preventDefault();\n    const format = 'text';\n    const responseJson = await fetchTextCommentCreate(\n      text, format, trackUuid, textCommentTimestamp\n    );\n\n    props.dispatch(responseJson.redux);\n    setTextCommentTimestamp(undefined);\n    setTrackUuid(undefined);\n    setText('');\n  }\n\n  const { transcript, resetTranscript } = useSpeechRecognition();\n\n  /*\n   * ...\n   */\n  const handleRecord = function() {\n    if(!isRecording) {\n      if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n        SpeechRecognition.startListening({ continuous: true });\n        // BUG: https://github.com/JamesBrill/react-speech-recognition/issues/81\n        //\n        // const recognition = SpeechRecognition.getRecognition();\n        // recognition.onresult = (e) => {\n        //   recognition.onresult(e);\n        //   const timeStamp = e.timeStamp,\n        //         transcript = e.results[0][0].transcript,\n        //         confidence = e.results[0][0].confidence,\n        //         isFinal = e.results[0].isFinal;\n        //   transcriptData.push({ timeStamp, transcript, confidence, isFinal });\n        //   setTranscriptData([...transcriptData]);\n        // }\n      }\n      recorder.start();\n      setIsRecording(true);\n    } else {\n      if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n        SpeechRecognition.stopListening();\n      }\n\n      recorder.stop()\n        .getMp3().then(([buffer, blob]) => {\n          (async function () {\n            const file = new File(buffer, 'voice.mp3', {\n              type: blob.type,\n              lastModified: Date.now(),\n            });\n\n            const responseJson = await fetchCreateVoiceRecording(file, JSON.stringify(transcriptData), transcript);\n\n            await props.dispatch({\n              type: 'voiceRecording/create',\n              voiceRecording: responseJson.data,\n            });\n\n            if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n              resetTranscript();\n            }\n          })()\n        });\n\n      setIsRecording(false);\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.FeedApp}>\n      <div className={styles.Feed}>\n        <div className={styles.FeedWrapper}>\n          {feed.map((value, index) => {\n            if(value.class === CLASS_TEXT_COMMENT) {\n              if(value.format === 'text') {\n                return <TextComment key={index} data={value} />;\n              } else if(value.format === 'abc_notation') {\n                return <ABCNotationDisplay key={index} data={value} />;\n              }\n            } else if(value.class === CLASS_VOICE_RECORDING) {\n              return <VoiceRecording key={index} data={value} />\n            }\n            return <></>;\n          })}\n        </div>\n      </div>\n\n      <form className={styles.CreateTextComment} onSubmit={async (e) => { await createTextComment(e); }}>\n        <button type=\"button\"\n                onClick={openModal}\n                disabled={!stream.isPlaying} >\n          Notation\n        </button>\n\n        <ABCNotationCompose trackUuid={trackUuid}\n                            textCommentTimestamp={textCommentTimestamp}\n                            isOpen={showModal}\n                            closeModal={closeModal} />\n        <button type=\"button\"\n                onClick={handleRecord}\n                disabled={!stream.isPlaying} >\n          Record\n        </button>\n        <input type=\"text\"\n               name=\"text\"\n               placeholder=\"text\"\n               value={text}\n               onChange={handleTextChange}\n               disabled={!stream.isPlaying} />\n        <button type=\"submit\"\n                disabled={!stream.isPlaying} >\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    textComments: state.textComments,\n    voiceRecordings: state.voiceRecordings,\n    feed: state.feed,\n});\n\n\nexport default connect(mapStateToProps)(FeedApp);\n","const CLASS_TEXT_COMMENT = 'TextComment'\nconst CLASS_VOICE_RECORDING = 'VoiceRecording'\n\nexport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING }\n","import React from \"react\";\nimport styles from './MiniFeed.module.css';\n\n\nfunction MiniFeed(props) {\n\n  return (\n    <div className={styles.MiniFeed}>\n      <h3><i>Feed...</i></h3>\n    </div>\n  );\n}\n\n\nexport default MiniFeed;\n","import {\n  ENDPOINT_MARKER_CREATE,\n  ENDPOINT_MARKER_DELETE,\n  ENDPOINT_MARKER_LIST,\n} from '../../../config/api';\nimport { TYPE_GET, TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Creates a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerCreate = async (trackUuid, timestampMilliseconds, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_CREATE,\n    { trackUuid, timestampMilliseconds, queueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Deletes a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerDelete = async (markerUuid, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_DELETE,\n    { markerUuid, queueUuid }\n  );\n  return await response.json();\n};\n\n/*\n * Fetches a list of markers for a given track. The queue context is passed so\n * the Redux state may be updated.\n */\nexport const fetchStreamMarkerList = async (trackUuid, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_MARKER_LIST,\n    { trackUuid, queueUuid }\n  );\n  return await response.json();\n};\n","import {\n  ENDPOINT_QUEUE_INTERVAL_CREATE,\n  ENDPOINT_QUEUE_INTERVAL_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalCreate = async (queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, purpose, repeatCount, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_CREATE,\n    { queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, purpose, repeatCount, parentQueueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalDelete = async (queueIntervalUuid, queueUuid, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_DELETE,\n    { queueIntervalUuid, queueUuid, parentQueueUuid }\n  );\n  return await response.json();\n};\n","export const iconForward1000 = (\n  <svg width=\"23\" height=\"21\" viewBox=\"0 0 23 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M21.4202 2.04883V8.14679H15.3223\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M18.8691 13.2272C18.2085 15.0971 16.958 16.7017 15.306 17.7991C13.6541 18.8965 11.6903 19.4273 9.71042 19.3115C7.73057 19.1957 5.842 18.4395 4.3293 17.157C2.8166 15.8744 1.76172 14.135 1.32363 12.2007C0.885529 10.2665 1.08795 8.24227 1.90039 6.43308C2.71283 4.6239 4.09126 3.12778 5.82798 2.17017C7.56469 1.21256 9.5656 0.845346 11.5292 1.12386C13.4927 1.40238 15.3126 2.31154 16.7145 3.71434L21.4201 8.14553\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M9.408 12.36V13H6.536V12.36H7.672V9.24C7.61333 9.32 7.50667 9.41067 7.352 9.512C7.19733 9.608 7.02933 9.69067 6.848 9.76C6.66667 9.82933 6.50667 9.864 6.368 9.864V9.192C6.48533 9.192 6.61333 9.16 6.752 9.096C6.896 9.02667 7.03467 8.94667 7.168 8.856C7.30133 8.76533 7.41333 8.68 7.504 8.6C7.6 8.52 7.656 8.464 7.672 8.432H8.392V12.36H9.408ZM11.6016 13.08C11.2549 13.08 10.9296 13.024 10.6256 12.912C10.3216 12.7947 10.0602 12.6213 9.84156 12.392L10.1136 11.896C10.3536 12.12 10.5936 12.28 10.8336 12.376C11.0736 12.472 11.3189 12.52 11.5696 12.52C11.8576 12.52 12.0922 12.4667 12.2736 12.36C12.4549 12.248 12.5456 12.0853 12.5456 11.872C12.5456 11.7173 12.4976 11.6027 12.4016 11.528C12.3109 11.4533 12.1802 11.392 12.0096 11.344C11.8389 11.2907 11.6362 11.232 11.4016 11.168C10.9696 11.0453 10.6389 10.9013 10.4096 10.736C10.1856 10.5653 10.0736 10.3173 10.0736 9.992C10.0736 9.59733 10.2229 9.29333 10.5216 9.08C10.8256 8.86133 11.2122 8.752 11.6816 8.752C12.3109 8.752 12.8069 8.94133 13.1696 9.32L12.8496 9.808C12.5242 9.472 12.1216 9.304 11.6416 9.304C11.4976 9.304 11.3562 9.32267 11.2176 9.36C11.0789 9.392 10.9642 9.45333 10.8736 9.544C10.7829 9.62933 10.7376 9.752 10.7376 9.912C10.7376 10.1093 10.8176 10.2507 10.9776 10.336C11.1376 10.4213 11.3722 10.5093 11.6816 10.6C11.9962 10.6907 12.2682 10.7813 12.4976 10.872C12.7322 10.9627 12.9136 11.08 13.0416 11.224C13.1696 11.368 13.2336 11.568 13.2336 11.824C13.2336 12.2187 13.0842 12.528 12.7856 12.752C12.4869 12.9707 12.0922 13.08 11.6016 13.08Z\" fill=\"#AFACAC\"/>\n  </svg>\n);\n\nexport const iconForward100 = (\n  <svg width=\"24\" height=\"21\" viewBox=\"0 0 24 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M22.1605 2.04883V8.14679H16.0625\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M19.6094 13.2272C18.9487 15.0971 17.6982 16.7017 16.0463 17.7991C14.3944 18.8965 12.4305 19.4273 10.4507 19.3115C8.47081 19.1957 6.58224 18.4395 5.06954 17.157C3.55683 15.8744 2.50196 14.135 2.06386 12.2007C1.62576 10.2665 1.82819 8.24227 2.64062 6.43308C3.45306 4.6239 4.8315 3.12778 6.56821 2.17017C8.30493 1.21256 10.3058 0.845346 12.2694 1.12386C14.233 1.40238 16.0528 2.31154 17.4548 3.71434L22.1604 8.14553\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M6.512 13V12.104H7.104V13H6.512ZM11.0252 12.36V13H8.15319V12.36H9.28919V9.24C9.23052 9.32 9.12385 9.41067 8.96919 9.512C8.81452 9.608 8.64652 9.69067 8.46519 9.76C8.28385 9.82933 8.12385 9.864 7.98519 9.864V9.192C8.10252 9.192 8.23052 9.16 8.36919 9.096C8.51319 9.02667 8.65185 8.94667 8.78519 8.856C8.91852 8.76533 9.03052 8.68 9.12119 8.6C9.21719 8.52 9.27319 8.464 9.28919 8.432H10.0092V12.36H11.0252ZM13.2188 13.08C12.8721 13.08 12.5468 13.024 12.2428 12.912C11.9388 12.7947 11.6774 12.6213 11.4588 12.392L11.7308 11.896C11.9708 12.12 12.2108 12.28 12.4508 12.376C12.6908 12.472 12.9361 12.52 13.1868 12.52C13.4748 12.52 13.7094 12.4667 13.8908 12.36C14.0721 12.248 14.1628 12.0853 14.1628 11.872C14.1628 11.7173 14.1148 11.6027 14.0188 11.528C13.9281 11.4533 13.7974 11.392 13.6268 11.344C13.4561 11.2907 13.2534 11.232 13.0188 11.168C12.5868 11.0453 12.2561 10.9013 12.0268 10.736C11.8028 10.5653 11.6908 10.3173 11.6908 9.992C11.6908 9.59733 11.8401 9.29333 12.1388 9.08C12.4428 8.86133 12.8294 8.752 13.2988 8.752C13.9281 8.752 14.4241 8.94133 14.7868 9.32L14.4668 9.808C14.1414 9.472 13.7388 9.304 13.2588 9.304C13.1148 9.304 12.9734 9.32267 12.8348 9.36C12.6961 9.392 12.5814 9.45333 12.4908 9.544C12.4001 9.62933 12.3548 9.752 12.3548 9.912C12.3548 10.1093 12.4348 10.2507 12.5948 10.336C12.7548 10.4213 12.9894 10.5093 13.2988 10.6C13.6134 10.6907 13.8854 10.7813 14.1148 10.872C14.3494 10.9627 14.5308 11.08 14.6588 11.224C14.7868 11.368 14.8508 11.568 14.8508 11.824C14.8508 12.2187 14.7014 12.528 14.4028 12.752C14.1041 12.9707 13.7094 13.08 13.2188 13.08Z\" fill=\"#AFACAC\"/>\n  </svg>\n);\n\nexport const iconBackward100 = (\n  <svg width=\"24\" height=\"21\" viewBox=\"0 0 24 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.83953 2.04883V8.14679H7.9375\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.39063 13.2272C5.05128 15.0971 6.30179 16.7017 7.95372 17.7991C9.60565 18.8965 11.5695 19.4273 13.5493 19.3115C15.5292 19.1957 17.4178 18.4395 18.9305 17.157C20.4432 15.8744 21.498 14.135 21.9361 12.2007C22.3742 10.2665 22.1718 8.24227 21.3594 6.43308C20.5469 4.6239 19.1685 3.12778 17.4318 2.17017C15.6951 1.21256 13.6942 0.845346 11.7306 1.12386C9.76702 1.40238 7.94715 2.31154 6.54524 3.71434L1.83965 8.14553\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M9.512 13V12.104H10.104V13H9.512ZM14.0252 12.36V13H11.1532V12.36H12.2892V9.24C12.2305 9.32 12.1239 9.41067 11.9692 9.512C11.8145 9.608 11.6465 9.69067 11.4652 9.76C11.2839 9.82933 11.1239 9.864 10.9852 9.864V9.192C11.1025 9.192 11.2305 9.16 11.3692 9.096C11.5132 9.02667 11.6519 8.94667 11.7852 8.856C11.9185 8.76533 12.0305 8.68 12.1212 8.6C12.2172 8.52 12.2732 8.464 12.2892 8.432H13.0092V12.36H14.0252ZM16.2188 13.08C15.8721 13.08 15.5468 13.024 15.2428 12.912C14.9388 12.7947 14.6774 12.6213 14.4588 12.392L14.7308 11.896C14.9708 12.12 15.2108 12.28 15.4508 12.376C15.6908 12.472 15.9361 12.52 16.1868 12.52C16.4748 12.52 16.7094 12.4667 16.8908 12.36C17.0721 12.248 17.1628 12.0853 17.1628 11.872C17.1628 11.7173 17.1148 11.6027 17.0188 11.528C16.9281 11.4533 16.7974 11.392 16.6268 11.344C16.4561 11.2907 16.2534 11.232 16.0188 11.168C15.5868 11.0453 15.2561 10.9013 15.0268 10.736C14.8028 10.5653 14.6908 10.3173 14.6908 9.992C14.6908 9.59733 14.8401 9.29333 15.1388 9.08C15.4428 8.86133 15.8294 8.752 16.2988 8.752C16.9281 8.752 17.4241 8.94133 17.7868 9.32L17.4668 9.808C17.1414 9.472 16.7388 9.304 16.2588 9.304C16.1148 9.304 15.9734 9.32267 15.8348 9.36C15.6961 9.392 15.5814 9.45333 15.4908 9.544C15.4001 9.62933 15.3548 9.752 15.3548 9.912C15.3548 10.1093 15.4348 10.2507 15.5948 10.336C15.7548 10.4213 15.9894 10.5093 16.2988 10.6C16.6134 10.6907 16.8854 10.7813 17.1148 10.872C17.3494 10.9627 17.5308 11.08 17.6588 11.224C17.7868 11.368 17.8508 11.568 17.8508 11.824C17.8508 12.2187 17.7014 12.528 17.4028 12.752C17.1041 12.9707 16.7094 13.08 16.2188 13.08Z\" fill=\"#AFACAC\"/>\n  </svg>\n);\n\nexport const iconBackward1000 = (\n  <svg width=\"23\" height=\"21\" viewBox=\"0 0 23 21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.57977 2.04883V8.14679H7.67773\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.13086 13.2272C4.79151 15.0971 6.04202 16.7017 7.69395 17.7991C9.34588 18.8965 11.3097 19.4273 13.2896 19.3115C15.2694 19.1957 17.158 18.4395 18.6707 17.157C20.1834 15.8744 21.2383 14.135 21.6764 12.2007C22.1145 10.2665 21.912 8.24227 21.0996 6.43308C20.2872 4.6239 18.9087 3.12778 17.172 2.17017C15.4353 1.21256 13.4344 0.845346 11.4708 1.12386C9.50725 1.40238 7.68739 2.31154 6.28548 3.71434L1.57988 8.14553\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.408 12.36V13H10.536V12.36H11.672V9.24C11.6133 9.32 11.5067 9.41067 11.352 9.512C11.1973 9.608 11.0293 9.69067 10.848 9.76C10.6667 9.82933 10.5067 9.864 10.368 9.864V9.192C10.4853 9.192 10.6133 9.16 10.752 9.096C10.896 9.02667 11.0347 8.94667 11.168 8.856C11.3013 8.76533 11.4133 8.68 11.504 8.6C11.6 8.52 11.656 8.464 11.672 8.432H12.392V12.36H13.408ZM15.6016 13.08C15.2549 13.08 14.9296 13.024 14.6256 12.912C14.3216 12.7947 14.0602 12.6213 13.8416 12.392L14.1136 11.896C14.3536 12.12 14.5936 12.28 14.8336 12.376C15.0736 12.472 15.3189 12.52 15.5696 12.52C15.8576 12.52 16.0922 12.4667 16.2736 12.36C16.4549 12.248 16.5456 12.0853 16.5456 11.872C16.5456 11.7173 16.4976 11.6027 16.4016 11.528C16.3109 11.4533 16.1802 11.392 16.0096 11.344C15.8389 11.2907 15.6362 11.232 15.4016 11.168C14.9696 11.0453 14.6389 10.9013 14.4096 10.736C14.1856 10.5653 14.0736 10.3173 14.0736 9.992C14.0736 9.59733 14.2229 9.29333 14.5216 9.08C14.8256 8.86133 15.2122 8.752 15.6816 8.752C16.3109 8.752 16.8069 8.94133 17.1696 9.32L16.8496 9.808C16.5242 9.472 16.1216 9.304 15.6416 9.304C15.4976 9.304 15.3562 9.32267 15.2176 9.36C15.0789 9.392 14.9642 9.45333 14.8736 9.544C14.7829 9.62933 14.7376 9.752 14.7376 9.912C14.7376 10.1093 14.8176 10.2507 14.9776 10.336C15.1376 10.4213 15.3722 10.5093 15.6816 10.6C15.9962 10.6907 16.2682 10.7813 16.4976 10.872C16.7322 10.9627 16.9136 11.08 17.0416 11.224C17.1696 11.368 17.2336 11.568 17.2336 11.824C17.2336 12.2187 17.0842 12.528 16.7856 12.752C16.4869 12.9707 16.0922 13.08 15.6016 13.08Z\" fill=\"#AFACAC\"/>\n  </svg>\n);\n\nexport const iconPlay = (\n  <svg width=\"17\" height=\"23\" viewBox=\"0 0 17 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 1L16 11.5L1 22V1Z\" stroke=\"#AFACAC\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconBack = (\n  <svg width=\"27\" height=\"27\" viewBox=\"0 0 27 27\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.5 8.5L8.5 13.5L13.5 18.5\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M18.793 13.1133H8.79297\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n","export const iconNextTrack = (\n  <svg width=\"22\" height=\"16\" viewBox=\"0 0 22 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12 15L21 8L12 1V15Z\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M1 15L10 8L1 1V15Z\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n);\n\n\nexport const iconPrevTrack = (\n  <svg width=\"22\" height=\"16\" viewBox=\"0 0 22 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 15L1 8L10 1V15Z\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M21 15L12 8L21 1V15Z\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n)\n\n\n\nexport const iconUpTriangle = (\n  <svg width=\"22\" height=\"18\" viewBox=\"0 0 22 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M11 1.04907e-06L21.3923 17.25L0.607694 17.25L11 1.04907e-06Z\" fill=\"#5BC9EC\"/>\n  </svg>\n)\n\n\nexport const iconDownTriangle = (\n  <svg width=\"22\" height=\"18\" viewBox=\"0 0 22 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M11 18L21.3923 0.75L0.607696 0.749998L11 18Z\" fill=\"#5BC9EC\"/>\n  </svg>\n)\n\nexport const iconTrash = (\n  <svg width=\"15\" height=\"16\" viewBox=\"0 0 15 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 3.80078H2.4H13.6\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.49844 3.8V2.4C4.49844 2.0287 4.64594 1.6726 4.90849 1.41005C5.17104 1.1475 5.52713 1 5.89844 1H8.69844C9.06974 1 9.42584 1.1475 9.68839 1.41005C9.95094 1.6726 10.0984 2.0287 10.0984 2.4V3.8M12.1984 3.8V13.6C12.1984 13.9713 12.0509 14.3274 11.7884 14.5899C11.5258 14.8525 11.1697 15 10.7984 15H3.79844C3.42713 15 3.07104 14.8525 2.80849 14.5899C2.54594 14.3274 2.39844 13.9713 2.39844 13.6V3.8H12.1984Z\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M5.89844 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M8.69922 7.30078V11.5008\" stroke=\"black\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n\n)\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './ChildProgressBar.module.css';\nimport { iconUpTriangle, iconTrash } from '../icons';\nimport { fetchStreamQueueIntervalDelete } from '../../TrackDetailApp/Interval/network';\n\n\nfunction ChildProgressBar(props) {\n\n  /*\n   * \n   */\n  const interval = props.interval,\n        duration = props.duration,\n        queue = props.queue,\n        editable = props.editable;\n\n  const intervalWidthDuration = interval.endPosition - interval.startPosition,\n        intervalWidth = intervalWidthDuration / duration * 100;\n\n  let cleanedPurpose;\n  cleanedPurpose = interval.purpose.includes('solo') ? 'solo' : interval.purpose;\n  cleanedPurpose = cleanedPurpose.charAt(0).toUpperCase() + cleanedPurpose.slice(1);\n\n  const progressClass = \"Progress\" + cleanedPurpose;\n\n  /*\n   * Hovering logic\n   */\n  const [hovering, setHovering] = useState(false);\n\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  /*\n   *\n   */\n  const deleteTrackInterval = async function() {\n    const responseJson = await fetchStreamQueueIntervalDelete(\n      interval.uuid, queue.uuid, queue.parentUuid\n    );\n    await props.dispatch(responseJson.redux);\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles[progressClass]}\n         style={{width: `${intervalWidth}%`}}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n      {editable && hovering &&\n        <div className={styles.ProgressHoverContainer}>\n          <div className={styles.ProgressHoverPointer}>\n            {iconUpTriangle}\n          </div>\n\n          <div className={styles.HoverContainer}>\n            <div className={styles.ProgressHoverPurpose}>\n              {interval.purpose}\n            </div>\n            {interval.uuid &&\n              <button className={styles.ProgressHoverDelete}\n                      onClick={deleteTrackInterval}>\n                {iconTrash}\n              </button>\n            }\n          </div>\n        </div>\n      }\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ChildProgressBar);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './ProgressBarMarker.module.css';\nimport { iconUpTriangle, iconTrash } from '../icons';\nimport { fetchStreamMarkerDelete } from '../../TrackDetailApp/Marker/network';\n\n\nfunction ProgressBarMarker(props) {\n\n  const marker = props.marker,\n        queueUuid = props.queueUuid,\n        editable = props.editable;\n\n  const [hovering, setHovering] = useState(false);\n\n  /*\n   * ENTER\n   */\n  const onMouseEnter = function() {\n    setHovering(true);\n  }\n\n  /*\n   * LEAVE\n   */\n  const onMouseLeave = function() {\n    setHovering(false);\n  }\n\n  /*\n   * DELETE\n   */\n  const deleteTrackMarker = async function() {\n    const responseJson = await fetchStreamMarkerDelete(marker.uuid, queueUuid);\n    await props.dispatch(responseJson.redux);\n  }\n\n  return (\n    <div className={styles.ProgressBarMarker}\n         style={{left: marker.styleLeft}}\n         onMouseEnter={onMouseEnter}\n         onMouseLeave={onMouseLeave}>\n      <div className={styles.ProgressBarMarkerPointer}>\n        {iconUpTriangle}\n      </div>\n\n      <div className={styles.HoverContainer}>\n        {hovering &&\n          <div className={styles.ProgressBarMarkerName}>\n            {hovering && marker.name}\n          </div>\n        }\n\n        {hovering && editable &&\n          <button className={styles.ProgressBarMarkerDelete}\n                  onClick={deleteTrackMarker}>\n            {iconTrash}\n          </button>\n        }\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ProgressBarMarker);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './ParentProgressBar.module.css';\nimport { getPositionMilliseconds } from '../utils';\nimport ChildProgressBar from '../ChildProgressBar/ChildProgressBar';\nimport ProgressBarMarker from '../ProgressBarMarker/ProgressBarMarker';\nimport { iconDownTriangle } from '../icons';\n\n\nfunction ParentProgressBar(props) {\n\n  const queue = props.queue,\n        mode = props.mode,\n        allIntervals = queue.allIntervals,\n        duration = queue?.track?.durationMilliseconds || 0;\n\n  let position, pointerLeftDistance;\n  if(mode === \"player\") {\n    const stream = props.stream,\n          arr = getPositionMilliseconds(stream, stream.startedAt);\n    position = arr[0];\n    pointerLeftDistance = (position / duration) * 400 + \"px\";\n  }\n\n  const trackMarkerMap = props.trackMarkerMap,\n        markers = trackMarkerMap[queue.uuid] || [];\n\n  let runningPix = 0;\n  for(let i=0; i < markers.length; i++) {\n    let pix = markers[i].timestampMilliseconds / duration * 100;\n    pix -= runningPix;\n    markers[i].styleLeft = `calc(${pix}% - 11px)`;\n    runningPix += pix;\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // REGENERATE THE FEED\n  // eslint-disable-next-line\n  const [counter, setCounter] = useState(0);\n  useEffect(() => {\n\n    const periodicTask = setInterval(() => {\n      setCounter(prev => prev + 1);\n    }, 50);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n\n  // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div className={styles.ParentProgressBar}>\n      {mode === \"player\" &&\n        <div className={styles.ProgressPointer}\n             style={{left: pointerLeftDistance}}>\n          {iconDownTriangle}\n        </div>\n      }\n      <div className={styles.ProgressBar}>\n        {  // eslint-disable-next-line\n        allIntervals.map((interval, index) => {\n          return <ChildProgressBar key={interval.uuid || index}\n                                   interval={interval}\n                                   duration={duration}\n                                   queue={queue}\n                                   editable={mode === \"intervals\"}>\n                 </ChildProgressBar>;\n        })}\n      </div>\n      {mode === \"markers\" &&\n        <div className={styles.ProgressMarkerContainer}>\n          {  // eslint-disable-next-line\n          markers.map((marker, index) => {\n            return <ProgressBarMarker key={marker.uuid}\n                                      marker={marker}\n                                      queueUuid={queue.uuid}\n                                      editable={true} />;\n          })}\n        </div>\n      }\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  trackMarkerMap: state.trackMarkerMap,\n});\n\n\nexport default connect(mapStateToProps)(ParentProgressBar);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\nimport {\n  fetchStreamMarkerCreate,\n  fetchStreamMarkerList,\n} from './Marker/network';\nimport {\n  fetchStreamQueueIntervalCreate,\n} from './Interval/network';\nimport styles from './TrackDetailApp.module.css';\nimport { iconForward1000, iconForward100, iconBackward100, iconBackward1000, iconPlay, iconBack } from './icons';\nimport ParentProgressBar from '../PlaybackApp/ParentProgressBar/ParentProgressBar';\n\n\nfunction TrackDetailApp(props) {\n\n  /*\n   * \n   */\n  const queue = props.data,\n        queueUuid = queue.uuid,\n        parentQueueUuid = queue.parentUuid,\n        // modal\n        shouldOpenModal = props.shouldOpenModal,\n        setShouldOpenModal = props.setShouldOpenModal,\n        isOpen = props.isOpen,\n        openModal = props.openModal,\n        closeModal = props.closeModal,\n        // Redux\n        trackMarkerMap = props.trackMarkerMap,\n        markers = trackMarkerMap[queueUuid] || [];\n\n  const [tab, setTab] = useState('markers'),\n        [formMarkerTimestamp, setFormMarkerTimestamp] = useState(''),\n        [formMarkerName, setFormMarkerName] = useState('');\n\n  const [purpose, setPurpose] = useState('muted');\n  const [lowerBoundMarkerUuid, setLowerBoundMarkerUuid] = useState('null');\n  const [upperBoundMarkerUuid, setUpperBoundMarkerUuid] = useState('null');\n\n  /*\n   * Create a marker.\n   */\n  const createTrackMarker = async function() {\n    const responseJson = await fetchStreamMarkerCreate(\n      queue.track.uuid, formMarkerTimestamp, queueUuid\n    );\n    await props.dispatch(responseJson.redux);\n    setFormMarkerTimestamp('');\n    setFormMarkerName('');\n  }\n\n  /*\n   * Create an interval. Right now, the only interval is \"muted.\"\n   */\n  const createQueueInterval = async function() {\n    const responseJson = await fetchStreamQueueIntervalCreate(\n      queue.uuid,\n      lowerBoundMarkerUuid,\n      upperBoundMarkerUuid,\n      purpose,\n      null,\n      parentQueueUuid,\n    );\n    await props.dispatch(responseJson.redux);\n  }\n\n  ////////////////////////////////////////////////////////\n  // load markers that need to be displayed in the modal\n  useEffect(() => {\n    async function loadData() {\n      const responseJson = await fetchStreamMarkerList(\n        queue.track.uuid, queueUuid\n      );\n      await props.dispatch(responseJson.redux);\n      openModal();\n    }\n    if(!shouldOpenModal) {\n      return;\n    }\n    setShouldOpenModal(false);\n    loadData();\n  // eslint-disable-next-line\n  }, [shouldOpenModal])\n\n  /*\n   * Tab button: show markers UI\n   */\n  const showMarkers = function() {\n    setTab('markers');\n  }\n\n  /*\n   * Tab button: show markers UI\n   */\n  const showIntervals = function() {\n    setTab('intervals');\n  }\n\n  /*\n   * \n   */\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}\n           className={styles.Modal}\n           overlayClassName={styles.ModalOverlay}>\n\n      <button className={styles.CloseModal}\n              onClick={closeModal}>\n        {iconBack}\n      </button>\n\n      <div className={styles.ModalContent}>\n\n        <div className={styles.Preview}>\n          <div className={styles.PreviewImgContainer}>\n            <img className={[styles.PreviewImg, styles[queue.track.provider]].join(' ')}\n                 src={queue.track.imageUrl}\n                 alt={\"Album Art\"} />\n          </div>\n          <div className={styles.PreviewControlContainer}>\n            <button className={styles.PreviewControl}>{iconBackward1000}</button>\n            <button className={styles.PreviewControl}>{iconBackward100}</button>\n            <button className={styles.PreviewControl}>{iconPlay}</button>\n            <button className={styles.PreviewControl}>{iconForward100}</button>\n            <button className={styles.PreviewControl}>{iconForward1000}</button>\n          </div>\n        </div>\n\n        <div className={styles.QueueName}>\n          {queue.track.name}\n        </div>\n\n        <div className={styles.TabButtonContainer}>\n          <button className={styles.TabButton}\n                  onClick={showMarkers}>\n            Markers\n          </button>\n          <button className={styles.TabButton}\n                  onClick={showIntervals}>\n            Intervals\n          </button>\n        </div>\n\n        {tab === \"markers\" &&\n          <div className={styles.CreateMarkerForm}>\n            <label className={styles.CreateMarkerFormLabel}>\n              Marker Timestamp\n              <input className={styles.CreateMarkerFormInput}\n                     type=\"text\"\n                     value={formMarkerTimestamp}\n                     onChange={(e) => {setFormMarkerTimestamp(e.target.value)}} />\n            </label>\n\n            <label className={styles.CreateMarkerFormLabel}>\n              Marker Name\n              <input className={styles.CreateMarkerFormInput}\n                     type=\"text\"\n                     value={formMarkerName}\n                     onChange={(e) => {setFormMarkerName(e.target.value)}} />\n            </label>\n\n            <button className={styles.CreateMarkerFormSubmit}\n                    disabled={!(formMarkerTimestamp && formMarkerName)}\n                    onClick={createTrackMarker}>\n              Save\n            </button>\n          </div>\n        }\n\n        {tab === \"intervals\" &&\n          <div className={styles.CreateIntervalForm}>\n            <label className={styles.CreateIntervalFormLabel}>\n              Modification\n              <select className={styles.CreateIntervalFormSelect}\n                      value={purpose}\n                      onChange={(e) => {setPurpose(e.target.value)}}>\n                <option value={'muted'}>Trim</option>\n                <option value={'drums'}>Solo drums</option>\n                <option value={'vocals'}>Solo vocals</option>\n                <option value={'bass'}>Solo bass</option>\n                <option value={'other'}>Solo other</option>\n              </select>\n            </label>\n\n            <label className={styles.CreateIntervalFormLabel}>\n              Start Marker\n              <select className={styles.CreateIntervalFormSelect}\n                      value={lowerBoundMarkerUuid}\n                      onChange={(e) => {setLowerBoundMarkerUuid(e.target.value)}}>\n                <option value={'null'}>Beginning</option>\n                {markers.map((value, index) => (\n                  <option key={index} value={value.uuid}>@ {value.timestampMilliseconds}</option>\n                ))}\n              </select>\n            </label>\n\n            <label className={styles.CreateIntervalFormLabel}>\n              End Marker\n              <select className={styles.CreateIntervalFormSelect}\n                      value={upperBoundMarkerUuid}\n                      onChange={(e) => {setUpperBoundMarkerUuid(e.target.value)}}>\n                {markers.map((value, index) => (\n                  <option key={index} value={value.uuid}>@ {value.timestampMilliseconds}</option>\n                ))}\n                <option value={'null'}>End</option>\n              </select>\n            </label>\n\n            <button className={styles.CreateIntervalFormSubmit}\n                    onClick={createQueueInterval}>\n              Confirm\n            </button>\n          </div>\n        }\n\n        <div className={styles.ProgressBar}>\n          <ParentProgressBar queue={queue}\n                             stream={props.stream}\n                             mode={tab}>\n          </ParentProgressBar>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  trackMarkerMap: state.trackMarkerMap,\n  stream: state.stream,\n});\n\nexport default connect(mapStateToProps)(TrackDetailApp);\n","export const iconEdit = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 23 23\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10 3.12109H3C2.46957 3.12109 1.96086 3.33181 1.58579 3.70688C1.21071 4.08195 1 4.59066 1 5.12109V19.1211C1 19.6515 1.21071 20.1602 1.58579 20.5353C1.96086 20.9104 2.46957 21.1211 3 21.1211H17C17.5304 21.1211 18.0391 20.9104 18.4142 20.5353C18.7893 20.1602 19 19.6515 19 19.1211V12.1211\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M17.5 1.62132C17.8978 1.2235 18.4374 1 19 1C19.5626 1 20.1022 1.2235 20.5 1.62132C20.8978 2.01915 21.1213 2.55871 21.1213 3.12132C21.1213 3.68393 20.8978 4.2235 20.5 4.62132L11 14.1213L7 15.1213L8 11.1213L17.5 1.62132Z\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconRemove = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21.1211C16.5228 21.1211 21 16.6439 21 11.1211C21 5.59825 16.5228 1.12109 11 1.12109C5.47715 1.12109 1 5.59825 1 11.1211C1 16.6439 5.47715 21.1211 11 21.1211Z\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M14 8.12109L8 14.1211\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M8 8.12109L14 14.1211\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconExpand = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M7 9L11 14L15 9\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n);\n\nexport const iconCollapse = (\n  <svg width=\"23\" height=\"23\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z\" fill=\"#5BC9EC\" stroke=\"#5BC9EC\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M15 13.5L11 8.5L7 13.5\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  </svg>\n)\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport TrackDetailApp from '../../TrackDetailApp/TrackDetailApp'\nimport styles from './QueueTrack.module.css';\nimport { iconEdit, iconRemove } from '../icons';\n\n\nfunction QueueTrack(props) {\n\n  /*\n   * \n   */\n  const queue = props.data;\n\n  const [showModal, setShowModal] = useState(false);\n  const [shouldOpenModal, setShouldOpenModal] = useState(false);\n\n  const initializeModal = function() {\n    setShouldOpenModal(true);\n  }\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  const mainClass = queue.parentUuid ? \"QueueTrackChild\" : \"QueueTrackHead\",\n        buttonClass = queue.parentUuid ? \"ButtonChild\" : \"ButtonHead\";\n\n  /*\n   * \n   */\n  return (\n    <div className={styles[mainClass]}>\n      {!queue.parentUuid &&\n        <div className={styles.AlbumArtContainer}>\n          <img src={queue.track.imageUrl} alt={\"Album Art\"} />\n        </div>\n      }\n      <div className={styles.TrackInfoContainer}>\n        <div className={styles.TrackInfoName}>\n          {queue.track.name}\n        </div>\n        {!queue.parentUuid &&\n          <div className={styles.TrackInfoArtistName}>\n            {queue.track.artistName}\n          </div>\n        }\n      </div>\n      <div className={styles.ButtonContainer}>\n        <button className={styles[buttonClass]} type=\"button\" onClick={initializeModal}>\n          {iconEdit}\n        </button>\n        <button className={styles[buttonClass]} type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n          {iconRemove}\n        </button>\n      </div>\n      <TrackDetailApp data={queue}\n                 isOpen={showModal}\n                 shouldOpenModal={shouldOpenModal}\n                 setShouldOpenModal={setShouldOpenModal}\n                 openModal={openModal}\n                 closeModal={closeModal} />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({});\n\nexport default connect(mapStateToProps)(QueueTrack);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport styles from './QueueCollection.module.css';\nimport QueueTrack from '../QueueTrack/QueueTrack';\nimport { iconExpand, iconCollapse, iconRemove } from '../icons';\n\n\nfunction QueueCollection(props) {\n\n  /*\n   * \n   */\n  const queue = props.data,\n        stream = props.stream,\n        lastUpQueues = props.lastUpQueues,\n        lastUp = lastUpQueues[lastUpQueues.length - 1],\n        queueUuid = queue.uuid;\n\n  const isCurrentlyPlayingCollection = (\n    // Stream is NOW playing - \"now playing\" belongs to same parent UUID\n    (stream?.nowPlaying && stream?.nowPlaying?.parentUuid === queueUuid) ||\n    // Stream is NOT playing - \"last up\" belongs to same parent UUID\n    (!stream?.nowPlaying && lastUp?.parentUuid && lastUp?.parentUuid === queueUuid)\n  );\n\n\n  const [reveal, setReveal] = useState(isCurrentlyPlayingCollection);\n\n  /*\n   * When...\n   */\n  const toggleReveal = function(e) {\n    setReveal(!reveal);\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueCollection}>\n\n      <div className={styles.QueueCollectionMain}>\n        <div className={styles.AlbumArtContainer}>\n          <img src={queue.collection.imageUrl} alt={\"Album Art\"} />\n        </div>\n\n        <div className={styles.CollectionInfoContainer}>\n          <div className={styles.CollectionInfoName}>\n            {queue.collection.name}\n          </div>\n          <div className={styles.CollectionInfoArtistName}>\n            {queue.collection.artistName}\n          </div>\n        </div>\n        <div className={styles.ButtonContainer}>\n          <button className={styles.Button} type=\"button\" onClick={toggleReveal}>\n            {reveal ? iconCollapse: iconExpand}\n          </button>\n          <button className={styles.Button} type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n            {iconRemove}\n          </button>\n        </div>\n      </div>\n\n      {queue.children.length > 0 && reveal &&\n        <div className={styles.Children}>\n          {queue.children.map((value, index) => (\n            <QueueTrack key={index}\n                        data={value}\n                        destroy={props.destroy}>\n            </QueueTrack>\n          ))}\n        </div>\n      }\n    </div>\n  );\n\n}\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  lastUpQueues: state.lastUpQueues,\n});\n\nexport default connect(mapStateToProps)(QueueCollection);\n","import { connect } from 'react-redux'\nimport { Link } from \"react-router-dom\";\nimport styles from './QueueApp.module.css';\nimport { fetchDeleteQueue } from './network'\nimport QueueCollection from './QueueCollection/QueueCollection'\nimport QueueTrack from './QueueTrack/QueueTrack'\nimport { getQueueDuration } from './utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction QueueApp(props) {\n\n  const nextUpQueues = props.nextUpQueues,\n        stream = props.stream;\n\n  const queueDuration = getQueueDuration(nextUpQueues, stream);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * Called inside a child component, this first deletes the queue from the\n   * backend, then, on success, it deletes it from the front-end model and\n   * view.\n   */\n  const destroyQueueItem = async function(queue) {\n    const queueUuid = queue.uuid;\n\n    await fetchDeleteQueue(queueUuid);\n\n    const parentUuid = queue.parentUuid;\n    if(parentUuid) {\n      props.dispatch({\n        type: 'queue/deleteChildNode',\n        parentUuid: parentUuid,\n        queueUuid: queueUuid,\n      });\n    } else {\n      props.dispatch({\n        type: 'queue/deleteNode',\n        queueUuid: queueUuid,\n      });\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueApp}>\n      <div>\n        {  // eslint-disable-next-line\n        nextUpQueues.map((value, index) => {\n          if(value.collection) {\n            return (\n              <QueueCollection key={value.uuid}\n                               data={value}\n                               destroy={destroyQueueItem}>\n              </QueueCollection>\n            );\n          } else if(value.track) {\n            return (\n              <QueueTrack key={value.uuid}\n                          data={value}\n                          destroy={destroyQueueItem}>\n              </QueueTrack>\n            );\n          }\n        })}\n        <div className={styles.PlaybackDuration}>\n          {queueDuration ?\n            (\n              <p>\n                Playback will end&nbsp;\n                <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n              </p>\n            ) : (\n              <p>\n                There is nothing in the queue.\n              </p>\n            )\n          }\n        </div>\n        <Link to=\"/app/search\">\n          <button className={styles.AddToQueue}>\n            Add To Queue\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  nextUpQueues: state.nextUpQueues,\n  lastUpQueues: state.lastUpQueues,\n});\n\n\nexport default connect(mapStateToProps)(QueueApp);\n","import { connect } from 'react-redux'\nimport styles from './MiniQueue.module.css';\nimport { getQueueDuration, flattenQueues } from '../utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction MiniQueue(props) {\n\n  const nextUpQueues = props.nextUpQueues,\n        stream = props.stream;\n\n  let flattenedQueue, expandedQueues;\n  if(nextUpQueues.length) {\n    flattenedQueue = flattenQueues([nextUpQueues[0]]);\n    expandedQueues = [...flattenedQueue, ...nextUpQueues.slice(1)];\n  } else {\n    expandedQueues = [];\n  }\n\n  // TODO needs to add however much is left inside now playing.\n  const queueDuration = getQueueDuration(nextUpQueues, stream);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.MiniQueue}>\n      <h3><i>Next up...</i></h3>\n      {queueDuration ?\n        (\n          <p><i>\n            Playback will end&nbsp;\n            <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n          </i></p>\n        ) : (\n          <p><i>\n            There is nothing in the queue.\n          </i></p>\n        )\n      }\n      <div>\n        {expandedQueues.map((queue, index) => {\n          return (\n            <div key={index} className={styles.MiniQueueItem}>\n              {queue.track?.name || queue.collection?.name}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  nextUpQueues: state.nextUpQueues,\n  stream: state.stream,\n});\n\n\nexport default connect(mapStateToProps)(MiniQueue);\n","import { ENDPOINT_MUSIC_SEARCH, ENDPOINT_QUEUE_CREATE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchSearchMusicLibrary = async (query, providerAppleMusic, providerSpotify, providerYouTube, providerJukeboxRadio, formatTrack, formatAlbum, formatPlaylist, formatVideo) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_MUSIC_SEARCH,\n    {\n      query,\n      providerAppleMusic,\n      providerSpotify,\n      providerYouTube,\n      providerJukeboxRadio,\n      formatTrack,\n      formatAlbum,\n      formatPlaylist,\n      formatVideo,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchCreateQueue = async (className, genericUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_CREATE,\n    { className, genericUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","export const iconCheck = (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React, { useState } from 'react';\nimport styles from './SearchResult.module.css';\nimport { iconCheck } from './icons';\n\n\nfunction SearchResult(props) {\n  const searchResult = props.data,\n        addToQueue = props.addToQueue;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  const handleAddToQueue = async function() {\n    setIsSubmitting(true);\n    await addToQueue(searchResult.class, searchResult.uuid);\n    setIsSubmitted(true);\n  }\n\n  return (\n    <div className={styles.SearchResult}>\n      <span>\n        {searchResult.provider} {searchResult.format} {searchResult.name}\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n      </span>\n\n      { /* Initial state: button has not been clicked. */\n      !isSubmitting && !isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                onClick={handleAddToQueue}\n                disabled={false}>\n          Add\n        </button>\n      }\n\n      { /* Immediately after being clicked, disable and display spinner. */\n      isSubmitting && !isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                disabled={true}>\n          <i className={styles.ggSpinner}></i>\n        </button>\n      }\n\n      { /* Once loaded, stay disabled but display a check */\n      isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                disabled={true}>\n          {iconCheck}\n        </button>\n      }\n    </div>\n  );\n}\n\nexport default SearchResult;\n","import { ENDPOINT_TRACK_CREATE } from '../../config/api'\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchCreateTrack = async (audioFile, imageFile, trackName, artistName, albumName) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TRACK_CREATE,\n    {\n      audioFile: audioFile,\n      imageFile: imageFile,\n      trackName: trackName,\n      artistName: artistName,\n      albumName: albumName,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport styles from './Upload.module.css';\n\nimport { fetchCreateTrack } from './network';\n\n\nfunction Upload(props) {\n\n  /*\n   * \n   */\n  const [inputKey, setInputKey] = useState(0);\n\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [audioFile, setAudioFile] = useState('');\n  const [imageFile, setImageFile] = useState('');\n  const [trackName, setTrackName] = useState('');\n  const [artistName, setArtistName] = useState('');\n  const [albumName, setAlbumName] = useState('');\n\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function() {\n\n    // Hit the server.\n    setIsDisabled(true);\n    await fetchCreateTrack(\n      audioFile,\n      imageFile,\n      trackName,\n      artistName,\n      albumName,\n    );\n\n    // Reset the form.\n    setIsDisabled(false);\n    setInputKey(prev => prev + 2);\n    setTrackName('');\n    setArtistName('');\n    setAlbumName('');\n\n    // Close the modal.\n    closeModal();\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}\n              disabled={isDisabled}>Close</button>\n\n      <div className={styles.Login}>\n        <h3>Upload</h3>\n\n        <label className={styles.FormBlock}>\n          Audio file\n          <input type=\"file\"\n                 name=\"audioFile\"\n                 onChange={(e) => {setAudioFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Image file\n          <input type=\"file\"\n                 name=\"imageFile\"\n                 onChange={(e) => {setImageFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey + 1} />\n        </label>\n\n        <br></br>\n\n        <label className={styles.FormBlock}>\n          Track name\n          <input type=\"text\"\n                 name=\"trackName\"\n                 placeholder=\"Track name\"\n                 value={trackName}\n                 onChange={(e) => {setTrackName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Artist name\n          <input type=\"text\"\n                 name=\"artistName\"\n                 placeholder=\"Artist name\"\n                 value={artistName}\n                 onChange={(e) => {setArtistName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Album name\n          <input type=\"text\"\n                 name=\"albumName\"\n                 placeholder=\"Album name\"\n                 value={albumName}\n                 onChange={(e) => {setAlbumName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <br></br>\n\n        <div className={styles.FormBlock}>\n          <button type=\"submit\"\n                  onClick={handleSubmit}\n                  disabled={isDisabled}>\n            Submit\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default Upload;\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './SearchApp.module.css';\n\nimport { fetchSearchMusicLibrary, fetchCreateQueue } from './network';\nimport SearchResult from './SearchResult/SearchResult';\nimport Upload from '../Upload/Upload';\nimport { fetchQueueList } from '../QueueApp/network';\n\n\nfunction SearchApp(props) {\n\n  /*\n   * \n   */\n\n  const [searchResults, setSearchResults] = useState([]);\n\n  const [query, setQuery] = useState('');\n\n  // NOTE: These could be condensed, but I prefer explicitly writing them out.\n  const [serviceAppleMusic, setServiceAppleMusic] = useState(true);\n  const [serviceSpotify, setServiceSpotify] = useState(true);\n  const [serviceYouTube, setServiceYouTube] = useState(true);\n  const [serviceJukeboxRadio, setServiceJukeboxRadio] = useState(true);\n\n  const [formatTrack, setFormatTrack] = useState(true);\n  const [formatAlbum, setFormatAlbum] = useState(true);\n  const [formatPlaylist, setFormatPlaylist] = useState(true);\n  const [formatVideo, setFormatVideo] = useState(true);\n\n  const [showModal, setShowModal] = useState(false);\n\n  //const openModal = function() {\n    //setShowModal(true);\n  //}\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function() {\n    if(!query) {\n      return;\n    }\n    const responseJson = await fetchSearchMusicLibrary(\n      query,\n      serviceAppleMusic,\n      serviceSpotify,\n      serviceYouTube,\n      serviceJukeboxRadio,\n      formatTrack,\n      formatAlbum,\n      formatPlaylist,\n      formatVideo,\n    );\n    setSearchResults(responseJson.data);\n  }\n\n  /*\n   * When...\n   */\n  const addToQueue = async function(className, genericUuid) {\n    await fetchCreateQueue(\n      className,\n      genericUuid,\n    );\n\n    const responseJsonQueueList = await fetchQueueList();\n    props.dispatch(responseJsonQueueList.redux);\n  }\n\n  /*\n   *\n   */\n  const handleKeyDown = (event) => {\n   if (event.key === 'Enter') {\n     handleSubmit();\n   }\n }\n\n  return (\n    <div>\n      <div className={styles.SearchApp}>\n\n        <label>\n          &nbsp;\n          <input type=\"text\"\n                 name=\"query\"\n                 placeholder=\"\"\n                 className={styles.SearchBar}\n                 value={query}\n                 onChange={(e) => {setQuery(e.target.value)}}\n                 onKeyDown={handleKeyDown} />\n        </label>\n\n        <br></br>\n\n        <div className={styles.FormBlock}>\n          <label>\n            <input type=\"checkbox\"\n                   checked={serviceAppleMusic}\n                   onChange={(e) => {setServiceAppleMusic(e.target.checked)}} />\n            Apple Music\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={serviceSpotify}\n                   onChange={(e) => {setServiceSpotify(e.target.checked)}} />\n            Spotify\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   name=\"provider.youTube\"\n                   checked={serviceYouTube}\n                   onChange={(e) => {setServiceYouTube(e.target.checked)}} />\n            YouTube\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   name=\"provider.jukeboxRadio\"\n                   checked={serviceJukeboxRadio}\n                   onChange={(e) => {setServiceJukeboxRadio(e.target.checked)}} />\n            Jukebox Radio\n          </label>\n        </div>\n\n        <div className={styles.FormBlock}>\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatTrack}\n                   onChange={(e) => {setFormatTrack(e.target.checked)}} />\n            Track\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatAlbum}\n                   onChange={(e) => {setFormatAlbum(e.target.checked)}} />\n            Album\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatPlaylist}\n                   onChange={(e) => {setFormatPlaylist(e.target.checked)}} />\n            Playlist\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatVideo}\n                   onChange={(e) => {setFormatVideo(e.target.checked)}} />\n            Video\n          </label>\n        </div>\n\n        <br></br>\n\n        <div className={styles.FormBlock}\n             onClick={handleSubmit}>\n          <button type=\"submit\">\n            Search\n          </button>\n        </div>\n      </div>\n\n      <br></br>\n\n      <div className={styles.SearchResults}>\n        {searchResults.map((value, index) => (\n          <SearchResult key={value.uuid} data={value} addToQueue={addToQueue}></SearchResult>\n        ))}\n      </div>\n\n      <Upload isOpen={showModal}\n              closeModal={closeModal} />\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(SearchApp);\n","export const iconPlug = (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M9 2C8.44771 2 8 2.44772 8 3V5C8 5.55228 8.44771 6 9 6C9.55229 6 10 5.55228 10 5V3C10 2.44772 9.55229 2 9 2ZM8 9H16V11C16 13.2091 14.2091 15 12 15C9.79086 15 8 13.2091 8 11V9ZM13 16.917C15.8377 16.441 18 13.973 18 11V7H6V11C6 13.973 8.16229 16.441 11 16.917V22C11 22.5523 11.4477 23 12 23C12.5523 23 13 22.5523 13 22V16.917ZM14 3C14 2.44772 14.4477 2 15 2C15.5523 2 16 2.44772 16 3V5C16 5.55228 15.5523 6 15 6C14.4477 6 14 5.55228 14 5V3Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\nimport { useHistory } from \"react-router-dom\";\nimport styles from './WelcomeApp.module.css';\nimport { iconPlug } from './icons';\n\n\nfunction WelcomeApp(props) {\n\n  const history = useHistory();\n\n  const userSettings = props.userSettings,\n        playback = props.playback;\n\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  const handleAppleMusic = function() {\n    const music = window.MusicKit.getInstance();\n    if(!music.musicUserToken) {\n      playback.appleMusic.api.authorize();\n    } else {\n      history.push(\"/app/search\");\n      closeModal();\n    }\n  }\n\n  const handleSpotify = function () {\n    if(userSettings && !userSettings.spotify.accessToken) {\n      window.location.href = props.userSettings.spotify.authorizationUrl;\n    } else {\n      history.push(\"/app/search\");\n    }\n    closeModal();\n  }\n\n  const handleYouTube = function () {\n    history.push(\"/app/search\");\n    closeModal();\n  }\n\n  const handleLibrary = function () {\n    history.push(\"/app/search\");\n    closeModal();\n  }\n\n   /*\n    * \n    */\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <div className={styles.WelcomeApp}>\n        <button onClick={closeModal}>\n          Close\n        </button>\n        <h2>Welcome</h2>\n        <p>Where do you want to start?</p>\n\n        <button className={styles.Button}\n                onClick={handleAppleMusic}\n                disabled={!playback.appleMusic.api}>\n          {playback.appleMusic.api && !playback.appleMusic.api?.musicUserToken && iconPlug}\n          Apple Music\n        </button>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n\n        <button className={styles.Button}\n                onClick={handleSpotify}\n                disabled={!userSettings}>\n          {userSettings && !userSettings.spotify.accessToken && iconPlug}\n          Spotify\n        </button>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n\n        <button className={styles.Button}\n                onClick={handleYouTube}>\n          YouTube\n        </button>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n\n        <button className={styles.Button}\n                onClick={handleLibrary}>\n          Library\n        </button>\n      </div>\n    </Modal>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  userSettings: state.userSettings,\n  playback: state.playback,\n});\n\n\nexport default connect(mapStateToProps)(WelcomeApp);\n","import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport {\n  getNextUpQueue,\n  getLastUpQueue,\n} from '../../../components/QueueApp/utils';\nimport ParentProgressBar from '../ParentProgressBar/ParentProgressBar';\nimport { iconNextTrack, iconPrevTrack } from '../icons';\nimport styles from './Player.module.css';\n\n\nfunction Player(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        playback = props.playback,\n        imageUrl = stream.nowPlaying?.track?.imageUrl,\n        track = stream?.nowPlaying?.track,\n        lastUp = getLastUpQueue(props.lastUpQueues),\n        nextUp = getNextUpQueue(props.nextUpQueues);\n\n  // NOTE: This is a temporary mechanism to allow the user to refresh the\n  //       progress value on the front-end.\n  // eslint-disable-next-line\n  const [counter, setCounter] = useState(0);\n\n  const handleRefreshProgress = function() {\n    setCounter(prev => prev + 1);\n  }\n\n  // BUG: Edge case needed to refresh the webpage. In the future, there should\n  //      be an API endpoint to fetch additional past queue items.\n  if(stream?.nowPlaying?.index !== 1 && !lastUp) {\n    window.location.reload();\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // RELOAD PROGRESS BAR\n  useEffect(() => {\n    const periodicTask = setInterval(() => {\n      handleRefreshProgress();\n    }, 100);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n  // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div className={styles.Player}>\n      <div className={styles.Div}>\n        <h4><i>Last...</i></h4>\n        <p>{lastUp?.track?.name}</p>\n      </div>\n\n      <br></br>\n\n      <div className={styles.Div}>\n        <h2><i>Now playing...</i></h2>\n        {imageUrl &&\n          <img alt=\"\"\n               src={imageUrl}\n               className={styles.Image} />\n        }\n        {(stream?.isPlaying || stream?.isPaused) &&\n          <h3>{track?.name}</h3>\n        }\n        {(!stream?.isPlaying && !stream?.isPaused) &&\n          <h3><i>Waiting...</i></h3>\n        }\n      </div>\n\n      {stream?.nowPlaying &&\n        <div className={styles.Div}>\n          <ParentProgressBar queue={stream?.nowPlaying}\n                             stream={stream}\n                             mode={\"player\"}>\n          </ParentProgressBar>\n        </div>\n      }\n\n      <div className={styles.Div}>\n        <button className={styles.Button}\n                onClick={props.prevTrack}\n                disabled={!playback.controlsEnabled}>\n          {iconPrevTrack}\n        </button>\n        <button className={styles.Button}\n                onClick={props.nextTrack}\n                disabled={!playback.controlsEnabled}>\n          {iconNextTrack}\n        </button>\n      </div>\n\n      <br></br>\n\n      <div className={styles.Div}>\n        <h4><i>Next...</i></h4>\n        <p>{nextUp?.track.name}</p>\n      </div>\n\n      <Link to=\"/app/queue\">\n        <button className={styles.MoreNextUp}>\n          More\n        </button>\n      </Link>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    lastUpQueues: state.lastUpQueues,\n    nextUpQueues: state.nextUpQueues,\n    playback: state.playback,\n});\n\n\nexport default connect(mapStateToProps)(Player);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './MiniPlayer.module.css';\n\n\nfunction MiniPlayer(props) {\n\n  const stream = props.stream,\n        imageUrl = stream.nowPlaying?.track?.imageUrl,\n        nowPlayingTrackName = stream?.nowPlaying?.track?.name;\n\n  return (\n    <div>\n      <h3><i>Now playing...</i></h3>\n      {imageUrl &&\n        <img alt=\"\"\n             src={imageUrl}\n             className={styles.Image} />\n      }\n      {nowPlayingTrackName ?\n        (\n          <p>{nowPlayingTrackName}</p>\n        ) : (\n          <p><i>Nothing is playing...</i></p>\n        )\n      }\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n});\n\n\nexport default connect(mapStateToProps)(MiniPlayer);\n","export const iconScanForward = (\n  <svg width=\"32\" height=\"30\" viewBox=\"0 0 32 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M30.9998 2.49805V11.4998H21.998\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M27.2341 19.0006C26.2588 21.761 24.4129 24.1297 21.9743 25.7497C19.5357 27.3697 16.6367 28.1532 13.7141 27.9822C10.7914 27.8113 8.00356 26.695 5.77052 24.8017C3.53749 22.9085 1.98029 20.3407 1.33357 17.4854C0.68686 14.6301 0.985673 11.6419 2.18499 8.97125C3.3843 6.30055 5.41913 4.09199 7.98285 2.67838C10.5466 1.26476 13.5003 0.722688 16.3989 1.13383C19.2975 1.54498 21.984 2.88707 24.0535 4.95786L30.9998 11.4991\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M13.112 18.04V19H8.804V18.04H10.508V13.36C10.42 13.48 10.26 13.616 10.028 13.768C9.796 13.912 9.544 14.036 9.272 14.14C9 14.244 8.76 14.296 8.552 14.296V13.288C8.728 13.288 8.92 13.24 9.128 13.144C9.344 13.04 9.552 12.92 9.752 12.784C9.952 12.648 10.12 12.52 10.256 12.4C10.4 12.28 10.484 12.196 10.508 12.148H11.588V18.04H13.112ZM20.1223 15.484C20.1223 16.188 19.9903 16.816 19.7263 17.368C19.4623 17.912 19.1023 18.34 18.6463 18.652C18.1903 18.964 17.6703 19.12 17.0863 19.12C16.5023 19.12 15.9823 18.964 15.5263 18.652C15.0703 18.34 14.7103 17.912 14.4463 17.368C14.1823 16.816 14.0503 16.188 14.0503 15.484C14.0503 14.78 14.1823 14.156 14.4463 13.612C14.7103 13.06 15.0703 12.628 15.5263 12.316C15.9823 11.996 16.5023 11.836 17.0863 11.836C17.6703 11.836 18.1903 11.996 18.6463 12.316C19.1023 12.628 19.4623 13.06 19.7263 13.612C19.9903 14.156 20.1223 14.78 20.1223 15.484ZM19.0543 15.484C19.0543 14.956 18.9703 14.492 18.8023 14.092C18.6343 13.692 18.4023 13.38 18.1063 13.156C17.8103 12.932 17.4703 12.82 17.0863 12.82C16.6943 12.82 16.3503 12.932 16.0543 13.156C15.7583 13.38 15.5263 13.692 15.3583 14.092C15.1903 14.492 15.1063 14.956 15.1063 15.484C15.1063 16.012 15.1903 16.476 15.3583 16.876C15.5263 17.268 15.7583 17.576 16.0543 17.8C16.3503 18.024 16.6943 18.136 17.0863 18.136C17.4703 18.136 17.8103 18.024 18.1063 17.8C18.4023 17.576 18.6343 17.268 18.8023 16.876C18.9703 16.476 19.0543 16.012 19.0543 15.484Z\" fill=\"black\"/>\n  </svg>\n);\n\n\nexport const iconScanBackward = (\n  <svg width=\"32\" height=\"30\" viewBox=\"0 0 32 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1.00019 2.49805V11.4998H10.002\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M4.76591 19.0006C5.74115 21.761 7.58714 24.1297 10.0257 25.7497C12.4643 27.3697 15.3633 28.1532 18.2859 27.9822C21.2086 27.8113 23.9964 26.695 26.2295 24.8017C28.4625 22.9085 30.0197 20.3407 30.6664 17.4854C31.3131 14.6301 31.0143 11.6419 29.815 8.97125C28.6157 6.30055 26.5809 4.09199 24.0171 2.67838C21.4534 1.26476 18.4997 0.722688 15.6011 1.13383C12.7025 1.54498 10.016 2.88707 7.94653 4.95786L1.00017 11.4991\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M16.112 18.04V19H11.804V18.04H13.508V13.36C13.42 13.48 13.26 13.616 13.028 13.768C12.796 13.912 12.544 14.036 12.272 14.14C12 14.244 11.76 14.296 11.552 14.296V13.288C11.728 13.288 11.92 13.24 12.128 13.144C12.344 13.04 12.552 12.92 12.752 12.784C12.952 12.648 13.12 12.52 13.256 12.4C13.4 12.28 13.484 12.196 13.508 12.148H14.588V18.04H16.112ZM23.1223 15.484C23.1223 16.188 22.9903 16.816 22.7263 17.368C22.4623 17.912 22.1023 18.34 21.6463 18.652C21.1903 18.964 20.6703 19.12 20.0863 19.12C19.5023 19.12 18.9823 18.964 18.5263 18.652C18.0703 18.34 17.7103 17.912 17.4463 17.368C17.1823 16.816 17.0503 16.188 17.0503 15.484C17.0503 14.78 17.1823 14.156 17.4463 13.612C17.7103 13.06 18.0703 12.628 18.5263 12.316C18.9823 11.996 19.5023 11.836 20.0863 11.836C20.6703 11.836 21.1903 11.996 21.6463 12.316C22.1023 12.628 22.4623 13.06 22.7263 13.612C22.9903 14.156 23.1223 14.78 23.1223 15.484ZM22.0543 15.484C22.0543 14.956 21.9703 14.492 21.8023 14.092C21.6343 13.692 21.4023 13.38 21.1063 13.156C20.8103 12.932 20.4703 12.82 20.0863 12.82C19.6943 12.82 19.3503 12.932 19.0543 13.156C18.7583 13.38 18.5263 13.692 18.3583 14.092C18.1903 14.492 18.1063 14.956 18.1063 15.484C18.1063 16.012 18.1903 16.476 18.3583 16.876C18.5263 17.268 18.7583 17.576 19.0543 17.8C19.3503 18.024 19.6943 18.136 20.0863 18.136C20.4703 18.136 20.8103 18.024 21.1063 17.8C21.4023 17.576 21.6343 17.268 21.8023 16.876C21.9703 16.476 22.0543 16.012 22.0543 15.484Z\" fill=\"black\"/>\n  </svg>\n);\n\n\nexport const iconPlayCircle = (\n  <svg width=\"65\" height=\"65\" viewBox=\"0 0 65 65\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M32.5 64C49.897 64 64 49.897 64 32.5C64 15.103 49.897 1 32.5 1C15.103 1 1 15.103 1 32.5C1 49.897 15.103 64 32.5 64Z\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M26 20L45 32.5L26 45V20Z\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\n\nexport const iconPauseCircle = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" enableBackground=\"new 0 0 24 24\" height=\"48px\" viewBox=\"0 0 24 24\" width=\"48px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/></g><g><g><path d=\"M9,16h2V8H9V16z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z M13,16h2V8h-2V16z\"/></g></g></svg>\n);\n\n\nexport const iconNotStartedCircle = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" enableBackground=\"new 0 0 24 24\" height=\"48px\" viewBox=\"0 0 24 24\" width=\"48px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/><path d=\"M12,4c4.41,0,8,3.59,8,8s-3.59,8-8,8s-8-3.59-8-8S7.59,4,12,4 M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10 s10-4.48,10-10C22,6.48,17.52,2,12,2L12,2z M11,8H9v8h2V8z M17,12l-5-4v8L17,12z\"/></g></svg>\n)\n\n\nexport const iconMusic = (\n  <svg\n    width=\"28\"\n    height=\"28\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n\n\nexport const iconMic = (\n  <svg\n    width=\"26\"\n    height=\"26\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fillRule=\"evenodd\"\n      clipRule=\"evenodd\"\n      d=\"M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { cycleVolumeLevel } from '../../PlaybackApp/utils';\nimport { playbackChangeVolume } from '../../PlaybackApp/controls';\nimport styles from './BottomBar.module.css';\nimport {\n  iconScanForward,\n  iconScanBackward,\n  iconPlayCircle,\n  iconPauseCircle,\n  iconMusic,\n  // iconMic,\n} from './icons';\n\n\nfunction BottomBar(props) {\n\n  /*\n   * \n   */\n  const playbackControls = props.playbackControls,\n        stream = props.stream,\n        playback = props.playback,\n        audioVolumeLevel = playback.volumeLevel.audio;\n\n  const scanDisabled = (\n          !stream.nowPlaying ||\n          stream.isPaused ||\n          !playback.controlsEnabled\n        ),\n        playPauseDisabled = (\n          !stream.nowPlaying ||\n          !playback.controlsEnabled\n        );\n\n  /*\n   * Modify playback to seek in a certain diretion ('forward' or 'backward').\n   */\n  const handleSeek = function(direction) {\n    if(scanDisabled) {\n      return;\n    }\n    playbackControls.seek(direction);\n  };\n\n  /*\n   * Modify playback to play or pause, whichever one is relevant.\n   */\n  const handlePlayPause = function() {\n    if(playPauseDisabled) {\n      return;\n    }\n    if(stream.isPlaying) {\n      playbackControls.pause();\n    }\n    if(stream.isPaused) {\n      playbackControls.play();\n    }\n  }\n\n  const handleCycleVolumeLevel = function() {\n    const nextVolumeLevel = cycleVolumeLevel(audioVolumeLevel);\n    playbackChangeVolume(playback, stream, nextVolumeLevel);\n    props.dispatch({ type: 'playback/cycleVolumeLevelAudio' });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.BottomBar}>\n\n      <div className={styles.Volume}>\n        <button className={styles.VolumeButton}\n                onClick={handleCycleVolumeLevel}>\n          <CircularProgressbarWithChildren\n                value={audioVolumeLevel * 100}\n                circleRatio={0.75}\n                styles={buildStyles({\n                  rotation: 1 / 2 + 1 / 8,\n                  strokeLinecap: \"butt\",\n                  trailColor: \"#eee\",\n                })} >\n            {iconMusic}\n          </CircularProgressbarWithChildren>\n        </button>\n      </div>\n\n      <div className={styles.Playback}>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handleSeek('backward'); }}\n                disabled={scanDisabled} >\n          {iconScanBackward}\n        </button>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handlePlayPause(); }}\n                disabled={playPauseDisabled} >\n          {stream.nowPlaying && stream.isPlaying ?\n            iconPauseCircle : iconPlayCircle\n          }\n        </button>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handleSeek('forward'); }}\n                disabled={scanDisabled} >\n          {iconScanForward}\n        </button>\n      </div>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    playback: state.playback,\n});\n\n\nexport default connect(mapStateToProps)(BottomBar);\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport { connect } from 'react-redux';\nimport { fetchUpdateUserSettings } from './network';\n\n\nfunction UserSettings(props) {\n\n  /*\n   * \n   */\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  // TODO actually impliment the disabled behavior\n  // eslint-disable-next-line\n  const [controlsEnabled, setControlsEnabled] = useState(true);\n\n  if (!props.userSettings) {\n    return <></>;\n  }\n\n  function updateIdleQueue(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      idleQueue: event.target.checked\n    }});\n    fetchUpdateUserSettings('idle_after_now_playing', event.target.checked);\n  }\n\n  function updateSpeakVoice(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      speakVoice: event.target.checked\n    }})\n    fetchUpdateUserSettings('mute_voice_recordings', event.target.checked);\n  }\n\n  function updateFocusMode(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      focusMode: event.target.checked\n    }})\n    fetchUpdateUserSettings('focus_mode', event.target.checked);\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}>Close</button>\n\n      <br></br><br></br>\n\n      <div>\n        <a href={props.userSettings.spotify.authorizationUrl}>Connect Your Spotify Account</a>\n\n        <br></br><br></br>\n\n        <div>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.idleQueue} onChange={updateIdleQueue} disabled={!controlsEnabled}/>\n            Idle After Queue\n          </label><br/>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.speakVoice} onChange={updateSpeakVoice} disabled={!controlsEnabled}/>\n            Speak Voice Recordings\n          </label><br/>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.focusMode} onChange={updateFocusMode} disabled={!controlsEnabled}/>\n            Focus Mode\n          </label><br/>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  userSettings: state.userSettings\n});\n\nexport default connect(mapStateToProps)(UserSettings);\n","export const iconLogo = (\n  <svg width=\"38\" height=\"38\" viewBox=\"0 0 213 213\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect width=\"213\" height=\"213\" fill=\"#0047FF\"/>\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M65.9999 172.354L65.9999 140.822C93.3189 140.822 115.465 118.675 115.465 91.3561L115.465 91.3535L147 91.3535L147 91.3544C147 136.089 110.735 172.354 66 172.354C66 172.354 65.9999 172.354 65.9999 172.354Z\" fill=\"white\"/>\n    <circle cx=\"130.924\" cy=\"56.7267\" r=\"16.0763\" fill=\"white\"/>\n  </svg>\n);\n\n\nexport const iconR = (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 131 213\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M131 5.72619e-06C58.6507 2.5637e-06 -6.05259e-08 58.6507 0 131L51 131C51 86.8172 86.8172 51 131 51L131 5.72619e-06Z\" fill=\"#5BC9EC\"/>\n    <circle cx=\"26\" cy=\"187\" r=\"26\" transform=\"rotate(-180 26 187)\" fill=\"#5BC9EC\"/>\n  </svg>\n)\n\n\nexport const iconMore = (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    <path d=\"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15V15Z\" stroke=\"black\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n\n);\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UserSettings from '../../UserSettings/UserSettings'\nimport styles from './SideBar.module.css';\nimport { iconLogo, iconMore } from './icons';\n\n\nfunction SideBar(props) {\n\n  /*\n   * \n   */\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.SideBar}>\n\n      <div className={styles.Logo}>\n        {iconLogo}\n      </div>\n\n      <ul className={styles.Menu}>\n        <li className={styles.Search}>\n          <Link to=\"/app/search\">Search</Link>\n        </li>\n        <li className={styles.Queue}>\n          <Link to=\"/app/queue\">Queue</Link>\n        </li>\n        <li className={styles.Player}>\n          <Link to=\"/app/player\">Player</Link>\n        </li>\n        <li className={styles.Feed}>\n          <Link to=\"/app/feed\">Feed</Link>\n        </li>\n      </ul>\n\n      <div className={styles.Settings}>\n        <button onClick={openModal}>\n          {iconMore}\n        </button>\n      </div>\n\n      <UserSettings isOpen={showModal}\n                    closeModal={closeModal} />\n\n    </div>\n  );\n}\n\nexport default SideBar;\n","import React, { useState, useEffect } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport styles from './Session.module.css';\n\nimport FeedApp from '../../FeedApp/FeedApp';\nimport MiniFeed from '../../FeedApp/MiniFeed/MiniFeed';\nimport QueueApp from '../../QueueApp/QueueApp';\nimport MiniQueue from '../../QueueApp/MiniQueue/MiniQueue';\nimport SearchApp from '../../SearchApp/SearchApp';\nimport WelcomeApp from '../../WelcomeApp/WelcomeApp';\nimport Player from '../../PlaybackApp/Player/Player';\nimport MiniPlayer from '../../PlaybackApp/MiniPlayer/MiniPlayer';\n\nimport BottomBar from '../BottomBar/BottomBar';\nimport SideBar from '../SideBar/SideBar';\n\n\nfunction Session(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        nextUpQueues = props.nextUpQueues;\n\n  const [showModal, setShowModal] = useState(false);\n  const [forceHideModal, setForceHideModal] = useState(false);\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  useEffect(() => {\n    const shouldDisplayModal = (\n      !stream.isPlaying &&\n      !stream.isPaused &&\n      !nextUpQueues.length &&\n      !forceHideModal\n    )\n    if(!shouldDisplayModal) {\n      return;\n    }\n    setShowModal(true);\n    setForceHideModal(true);\n  }, [stream, nextUpQueues, forceHideModal])\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.Session}>\n\n      <WelcomeApp isOpen={showModal}\n                  closeModal={closeModal} />\n\n      <div className={styles.Top}>\n        <SideBar />\n\n        <div className={styles.Content}>\n\n        <Switch>\n          {/* FEED */}\n          <Route path=\"/app/feed\">\n            <div className={styles.PrimaryContent}>\n              <FeedApp />\n            </div>\n          </Route>\n          {/* PLAYER */}\n          <Route path=\"/app/player\">\n            <div className={styles.PrimaryContent}>\n              <Player nextTrack={props.playbackControls.nextTrack}\n                      prevTrack={props.playbackControls.prevTrack}\n                      seek={props.playbackControls.seek}\n                      pause={props.playbackControls.pause}\n                      play={props.playbackControls.play} />\n            </div>\n            <div className={styles.SecondaryContent}>\n              <Link to=\"/app/feed\">\n                <MiniFeed />\n              </Link>\n            </div>\n          </Route>\n          {/* QUEUE */}\n          <Route path=\"/app/queue\">\n            <div className={styles.PrimaryContent}>\n              <QueueApp />\n            </div>\n            <div className={styles.SecondaryContent}>\n              <Link to=\"/app/player\">\n                <MiniPlayer />\n              </Link>\n            </div>\n          </Route>\n          {/* SEARCH */}\n          <Route path=\"/app/search\">\n            <div className={styles.PrimaryContent}>\n              <SearchApp />\n            </div>\n            <div className={styles.SecondaryContent}>\n            <Link to=\"/app/queue\">\n              <MiniQueue />\n            </Link>\n            </div>\n          </Route>\n        </Switch>\n\n        </div>\n      </div>\n      <BottomBar playbackControls={props.playbackControls} />\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    nextUpQueues: state.nextUpQueues,\n});\n\n\nexport default connect(mapStateToProps)(Session);\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport SpotifySync from '../SpotifySync/SpotifySync';\n\nimport Session from './Session/Session';\n\n\nfunction MainApp(props) {\n\n  /*\n   * \n   */\n  return (\n\n    <Switch>\n      <Route path=\"/app/:content\">\n        <Session playbackControls={props.playbackControls} />\n      </Route>\n      <Route path=\"/u/:username\">\n        <span>PROFILE</span>\n      </Route>\n      <Route path=\"/spotify\">\n        <SpotifySync />\n      </Route>\n      <Route>\n        <Session playbackControls={props.playbackControls} />\n      </Route>\n    </Switch>\n  );\n}\n\n\nexport default MainApp;\n","import {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from '../FeedApp/network';\n\nimport { store } from '../../utils/redux';\n\n\n/*\n * Load comments and voice recordings to update the feed.\n */\nexport const updateFeed = async function(trackUuid) {\n  const responseJsonTextCommentList = await fetchTextCommentList(trackUuid);\n  const responseJsonVoiceRecordingList = await fetchVoiceRecordingList(trackUuid);\n  store.dispatch(responseJsonTextCommentList.redux);\n  store.dispatch(responseJsonVoiceRecordingList.redux);\n};\n","import { useEffect, useState } from \"react\";\nimport { connect } from 'react-redux';\nimport YouTube from 'react-youtube';\n\nimport {\n  playbackControlStart,\n  playbackControlSeek,\n  playbackControlPause,\n  playbackControlPlay,\n  playbackControlSkipToNext,\n  playbackControlQueue,\n} from './controls';\nimport { fetchGetUserSettings } from '../UserSettings/network';\nimport { getPositionMilliseconds, updateSpotifyPlayer } from './utils';\n\nimport MainApp from '../MainApp/MainApp';\nimport {\n  fetchNextTrack,\n  fetchPrevTrack,\n  fetchScanBackward,\n  fetchScanForward,\n  fetchTrackGetFiles,\n  fetchPauseTrack,\n  fetchPlayTrack,\n} from './Player/network';\nimport { updateFeed } from '../FeedApp/utils';\nimport { getLastUpQueue, getNextUpQueue } from '../QueueApp/utils';\n\nimport {\n  SERVICE_JUKEBOX_RADIO,\n  SERVICE_SPOTIFY,\n  SERVICE_APPLE_MUSIC,\n  SERVICE_YOUTUBE,\n} from '../../config/services';\n\nconst SpotifyWebApi = require('spotify-web-api-js');\n\n\nfunction PlaybackApp(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        playback = props.playback,\n        userSettings = props.userSettings,\n        lastUp = getLastUpQueue(props.lastUpQueues),\n        nextUp = getNextUpQueue(props.nextUpQueues);\n\n  const [appleMusicSDKReady, setAppleMusicSDKReady] = useState(false);\n\n  const [spotifySDKReady, setSpotifySDKReady] = useState(false);\n  const [spotifySDKDeviceID, setSpotifySDKDeviceID] = useState(undefined);\n  const [spotifySDKInit, setSpotifySDKInit] = useState(false);\n\n  // const [spotifyIsPaused, setSpotifyIsPaused] = useState(false);\n  // const [spotifyIsPlaying, setSpotifyIsPlaying] = useState(false);\n\n  const [messageScheduleNextTrack, setMessageScheduleNextTrack] = useState(false);\n  const [plannedNextTrackTimeoutId, setPlannedNextTrackTimeoutId] = useState({});\n  const [nextTrackJson, setNextTrackJson] = useState({});\n\n  /*\n   * Loads the Spotify SDK.\n   */\n  const appendSpotifySDK = function() {\n    const script = document.createElement(\"script\");\n    script.src = \"https://sdk.scdn.co/spotify-player.js\";\n    script.async = true;\n    new Promise(resolve => {\n      if (window.Spotify) {\n        resolve();\n      } else {\n        window.onSpotifyWebPlaybackSDKReady = resolve;\n      }\n    })\n      .then(() => {\n        setSpotifySDKReady(true);\n      });\n    document.body.appendChild(script);\n  };\n\n  /*\n   * Loads the Spotify SDK.\n   */\n  const appendAppleMusicSDK = function() {\n    new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = \"https://js-cdn.music.apple.com/musickit/v1/musickit.js\";\n      script.async = true;\n      script.onload = () => { resolve(); };\n      document.body.appendChild(script);\n    })\n      .then(() => {\n        setAppleMusicSDKReady(true);\n      });\n  };\n\n  /*\n   * When a track is changing from one to another, this boolean logic\n   * determines whether or not the currently playing item needs to be paused.\n   */\n  const shouldPauseOnTrackChange = function(nextPlayingQueue, isPlanned) {\n    const nowPlaying = stream.nowPlaying,\n          playbackIntervals = nowPlaying?.playbackIntervals,\n          lastPlaybackInterval = (playbackIntervals ?\n            playbackIntervals[playbackIntervals.length - 1] :\n            undefined\n          );\n    return (\n      // There must be something now playing.\n      nowPlaying?.track &&\n      (\n        // Everytime a manual upload is currently playing.\n        nowPlaying.track.service === SERVICE_JUKEBOX_RADIO ||\n        // Currently playing Spotify, nothing is up next.\n        (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          !nextPlayingQueue?.track\n        ) ||\n        // Currently playing Spotify, Spotify is not up next.\n        (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          nextPlayingQueue.track.service !== SERVICE_SPOTIFY &&\n          (\n            !isPlanned ||\n            (\n              lastPlaybackInterval.endPosition !== nowPlaying.totalDurationMilliseconds &&\n              isPlanned\n            )\n          )\n        ) ||\n        // Currently playing Apple Music, nothing is up next.\n        (\n          nowPlaying.track.service === SERVICE_APPLE_MUSIC &&\n          !nextPlayingQueue?.track\n        ) ||\n        // Currently playing Apple Music, Apple Music is not up next.\n        (\n          nowPlaying.track.service === SERVICE_APPLE_MUSIC &&\n          nextPlayingQueue?.track.service !== SERVICE_APPLE_MUSIC &&\n          (\n            !isPlanned ||\n            (\n              lastPlaybackInterval.endPosition !== nowPlaying.totalDurationMilliseconds &&\n              isPlanned\n            )\n          )\n        ) ||\n        // Currently playing YouTube, nothing is up next.\n        (\n          nowPlaying.track.service === SERVICE_YOUTUBE &&\n          !nextPlayingQueue?.track\n        ) ||\n        // Currently playing YouTube, YouTube is not up next.\n        (\n          nowPlaying.track.service === SERVICE_YOUTUBE &&\n          nextPlayingQueue.track.service !== SERVICE_YOUTUBE &&\n          (\n            !isPlanned ||\n            (\n              lastPlaybackInterval.endPosition !== nowPlaying.totalDurationMilliseconds &&\n              isPlanned\n            )\n          )\n        )\n      )\n    )\n  }\n\n  /*\n   * This starts the now playing track.\n   * NOTE: You may think of this as \"playing\" the track. However, \"play\" in\n   *       code references different behavior. \"Play\" is used for toggling the\n   *       current track from a \"paused\" state to \"play.\" \"Start\" explicitly\n   *       plays the track.\n   */\n  const start = function() {\n    if(!stream.nowPlaying?.track) {\n      return;\n    }\n    props.dispatch({ type: 'playback/started' });\n    playbackControlStart(playback, stream);\n  }\n\n  /*\n   * This adds the nextUp item in the queue to play next (add to queue). This\n   * happens ~5 seconds before the next item should play.\n   */\n  const addToQueue = async function() {\n\n    // disable the player UI (until plannedNextTrack happens)\n    await props.dispatch({ type: 'playback/disable' });\n\n    // update the back-end\n    const responseJsonNextTrack = await fetchNextTrack(\n      stream.nowPlaying?.totalDurationMilliseconds, true\n    );\n\n    // update the front-end later\n    setNextTrackJson(responseJsonNextTrack);\n\n    // add to queue\n    await props.dispatch({ type: 'playback/addToQueue' });\n\n    playbackControlQueue(playback, stream, nextUp);\n\n    // schedule \"next track\"\n    setMessageScheduleNextTrack(true);\n  }\n\n  /*\n   *  Triggered by a scheduled task, this plays the next track.\n   */\n  const plannedNextTrack = async function() {\n    if(shouldPauseOnTrackChange(nextUp, true)) {\n      playbackControlPause(playback, stream);\n    }\n    const queuedUp = playback.queuedUp;\n    if(queuedUp) {\n      playbackControlSkipToNext(playback, stream);\n    }\n    await props.dispatch({\n      type: 'playback/plannedNextTrack',\n      payload: { payload: nextTrackJson.redux },  // yes\n    });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed(nextUp?.track?.uuid);\n  }\n\n  /*\n   * Triggered by human interaction, this plays the previous track.\n   */\n  const prevTrack = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    if(shouldPauseOnTrackChange(lastUp, false)) {\n      playbackControlPause(playback, stream);\n    }\n    if(lastUp.track?.service === SERVICE_JUKEBOX_RADIO) {\n      const responseJson = await fetchTrackGetFiles(lastUp.track.uuid);\n      await props.dispatch(responseJson.redux);\n    }\n    const responseJsonPrevTrack = await fetchPrevTrack(stream.nowPlaying?.totalDurationMilliseconds);\n    await props.dispatch(responseJsonPrevTrack.redux);\n    await props.dispatch({ type: 'playback/start' });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed(lastUp?.track?.uuid);\n  }\n\n  /*\n   * Triggered by human interaction, this plays the next track.\n   */\n  const nextTrack = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    if(shouldPauseOnTrackChange(nextUp, false)) {\n      playbackControlPause(playback, stream);\n    }\n    if(nextUp?.track.service === SERVICE_JUKEBOX_RADIO) {\n      const responseJson = await fetchTrackGetFiles(nextUp.track.uuid);\n      await props.dispatch(responseJson.redux);\n    }\n    const responseJsonNextTrack = await fetchNextTrack(\n      stream.nowPlaying?.totalDurationMilliseconds, false\n    );\n    await props.dispatch(responseJsonNextTrack.redux);\n    await props.dispatch({ type: 'playback/start' });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed(nextUp?.track?.uuid);\n  }\n\n  /*\n   * Seek to the expected position in the track. This may be called in 3 cases:\n   *   1: a user signals the track to scan forward 10 seconds.\n   *   2: a user signals the track to scan backward 10 seconds.\n   *   3: a seekTimeout event is triggered, meaning the now playing track must\n   *      seek to the new expected track progress (in the case of a muted\n   *      interval).\n   */\n  const seek = async function(direction = undefined) {\n    await props.dispatch({ type: 'playback/disable' });\n    let startedAt;\n\n    if(direction === 'forward') {\n      const response = await fetchScanForward(\n        stream.nowPlaying.totalDurationMilliseconds\n      );\n      // Seeking forward is not allowed because the track is almost over.\n      if(response.system.status === 400) {\n        await props.dispatch({ type: 'playback/enable' });\n        return;\n      }\n      startedAt = stream.startedAt - (10000);\n    } else if(direction === 'backward') {\n      await fetchScanBackward(stream.nowPlaying.totalDurationMilliseconds);\n      const date = new Date(),\n            epochNow = date.getTime(),\n            proposedStartedAt = stream.startedAt + 10000,\n            proposedProgress = epochNow - proposedStartedAt;\n      startedAt = proposedProgress > 0 ? proposedStartedAt : epochNow;\n    } else {\n      startedAt = stream.startedAt;\n    }\n\n    await props.dispatch({\n      type: 'stream/set',\n      payload: {stream: { ...stream, startedAt: startedAt }},\n    });\n\n    const arr = getPositionMilliseconds(stream, startedAt),\n          seekTimeoutDuration = arr[1];\n    playbackControlSeek(playback, stream, startedAt);\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n\n    // schedule seek\n    if(seekTimeoutDuration) {\n      const seekTimeoutId = setTimeout(() => {\n        seek();\n      }, seekTimeoutDuration);\n      // setNextSeekTimeoutId(seekTimeoutId);\n      props.dispatch({\n        type: 'playback/nextSeekScheduled',\n        payload: { nextSeekTimeoutId: seekTimeoutId },\n      });\n    }\n\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  /*\n   * Toggling the player from the \"playing\" to \"paused\" state.\n   */\n  const pause = async function() {\n    if(!stream.nowPlaying) {\n      return;\n    }\n    await props.dispatch({ type: 'playback/disable' });\n    const jsonResponse = await fetchPauseTrack(stream.nowPlaying.totalDurationMilliseconds);\n    await props.dispatch(jsonResponse.redux);\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n    playbackControlPause(playback, stream);\n    clearTimeout(plannedNextTrackTimeoutId);\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  /*\n   * Toggling the player from the \"paused\" to \"playing\" state.\n   */\n  const play = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    const jsonResponse = await fetchPlayTrack();\n    await props.dispatch(jsonResponse.redux);\n\n    // When page loads with the player in the \"paused\" state and then the user\n    // toggles to the \"playing\" state.\n    if(!playback.isPlaying) {\n      await props.dispatch({ type: 'playback/enable' });\n      return;\n    }\n\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n    playbackControlPlay(playback, stream);\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // LOAD SPOTIFY SDK\n  useEffect(() => {\n    appendSpotifySDK();\n    appendAppleMusicSDK();\n  }, []);\n\n  useEffect(() => {\n    if(!appleMusicSDKReady) {\n      return;\n    }\n\n    const player = window.MusicKit.configure({\n      developerToken: userSettings.appleMusic.token,\n      app: {\n        name: 'Jukebox Radio',\n        build: '0.0.1',\n      },\n    });\n\n    player.addEventListener('mediaPlaybackError', function(e) {\n      console.log(\"mediaPlaybackError\");\n      console.log(e)\n    });\n\n    player.addEventListener(\"playbackStateDidChange\", function(e) {\n      console.log(\"playbackStateDidChange\")\n      console.log(e)\n    })\n\n    props.dispatch({\n      type: 'playback/appleMusic',\n      payload: { appleMusicApi: player },\n    });\n  // eslint-disable-next-line\n  }, [appleMusicSDKReady])\n\n  //////////////////////////////////////////////////////////////////////////////\n  // SPOTIFY SDK LOADED\n  // Happens on page load\n  useEffect(() => {\n    if(!spotifySDKReady) {\n      return;\n    }\n\n    // 7: Get user settings.\n    const player = new window.Spotify.Player({\n      name: 'Jukebox Radio',\n      getOAuthToken: cb => {\n        fetchGetUserSettings()\n          .then(responseJson => {\n            cb(responseJson.data.spotify.accessToken);\n            props.dispatch({\n              type: 'user/get-settings',\n              userSettings: responseJson.data,\n            });\n\n            // Initialize the Spotify player (conditionally).\n            const spotifyAccessToken = responseJson.data.spotify.accessToken;\n            if(spotifyAccessToken) {\n              const spotifyApi = new SpotifyWebApi();\n              spotifyApi.setAccessToken(responseJson.data.spotify.accessToken);\n              props.dispatch({\n                type: 'playback/spotify',\n                payload: { spotifyApi: spotifyApi },\n              });\n            }\n\n            // Enable playback controls.\n            props.dispatch({ type: 'playback/enable' });\n\n            setSpotifySDKInit(true);\n          });\n      }\n    });\n    player.addListener('ready', ({ device_id }) => {\n      setSpotifySDKDeviceID(device_id);\n    });\n    player.addListener('player_state_changed', (state) => {\n      return;\n      // if(state.duration) {\n      //   if(state.paused) {\n      //     setSpotifyIsPaused(true);\n      //   } else {\n      //     setSpotifyIsPlaying(true);\n      //   }\n      // } else {\n      //   setSpotifyIsPaused(false);\n      //   setSpotifyIsPlaying(false);\n      // }\n      // console.log(state);\n    });\n    player.connect();\n\n  // eslint-disable-next-line\n  }, [spotifySDKReady]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  // Update player to SDK player\n  useEffect(() => {\n    if(!spotifySDKInit || !spotifySDKDeviceID) {\n      return;\n    }\n\n    updateSpotifyPlayer(playback, spotifySDKDeviceID);\n  // eslint-disable-next-line\n  }, [spotifySDKInit, spotifySDKDeviceID])\n\n  //////////////////////////////////////////////////////////////////////////////\n  // SCHEDULE ADD TO QUEUE\n  // Happens near the end of the currently playing track.\n  useEffect(() => {\n\n    // debouncer\n    const needsToScheduleAddToQueue = (\n      stream.isPlaying &&\n      playback.isPlaying &&\n      !playback.addToQueueTimeoutId\n    );\n    if(!needsToScheduleAddToQueue) {\n      return;\n    }\n\n    if(!stream?.nowPlaying) {\n      return;\n    }\n\n    // schedule add to queue\n    const progress = Date.now() - stream.startedAt,\n          timeLeft = (\n            stream.nowPlaying.totalDurationMilliseconds - progress\n          ),\n          timeoutDuration = timeLeft - 5000;\n    const timeoutId = setTimeout(() => {\n      addToQueue();\n    }, timeoutDuration);\n    props.dispatch({\n      type: 'playback/addToQueueScheduled',\n      payload: { addToQueueTimeoutId: timeoutId },\n    });\n\n    // schedule seek\n    const arr = getPositionMilliseconds(stream, stream.startedAt),\n          seekTimeoutDuration = arr[1];\n    if(seekTimeoutDuration) {\n      const seekTimeoutId = setTimeout(() => {\n        seek();\n      }, seekTimeoutDuration);\n      // setNextSeekTimeoutId(seekTimeoutId);\n      props.dispatch({\n        type: 'playback/nextSeekScheduled',\n        payload: { nextSeekTimeoutId: seekTimeoutId },\n      });\n    }\n\n  // eslint-disable-next-line\n  }, [playback]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  // SCHEDULE PLANNED NEXT TRACK\n  // Happens at the very end of the currently playing track.\n  useEffect(() => {\n\n    // debouncer\n    if(!messageScheduleNextTrack) {\n      return;\n    }\n    setMessageScheduleNextTrack(false);\n\n    // schedule next track\n    const progress = Date.now() - stream.startedAt,\n          timeoutDuration = (\n            stream.nowPlaying.totalDurationMilliseconds - progress\n          );\n    const timeoutId = setTimeout(() => {\n      plannedNextTrack();\n    }, timeoutDuration);\n    clearTimeout(plannedNextTrackTimeoutId);\n    setPlannedNextTrackTimeoutId(timeoutId);\n\n  // eslint-disable-next-line\n  }, [messageScheduleNextTrack]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  // Play the music.\n  useEffect(() => {\n    if(stream.isPlaying && !playback.isPlaying && playback.isReady) {\n      start();\n    }\n  // eslint-disable-next-line\n  }, [stream, playback]);\n\n\n  const playbackControls = { nextTrack, prevTrack, seek, pause, play };\n\n  const opts = {\n          height: '135',\n          width: '240',\n          playerVars: {\n            // https://developers.google.com/youtube/player_parameters\n            autoplay: 0,  // the initial video will automatically start to play\n            controls: 0,  // hide playback controls\n            disablekb: 1,  // disable keyboard controls\n            fs: 0,  // disable full screen\n            iv_load_policy: 3,\n            modestbranding: 1,\n            origin: 'jukeboxrad.io',\n            playsinline: 1,\n          },\n        },\n        videoId = stream?.nowPlaying?.track?.externalId;\n\n  const onYouTubeReady = function(e) {\n    const youTubeApi = e.target;\n    props.dispatch({\n      type: 'playback/youTube',\n      payload: { youTubeApi: youTubeApi },\n    });\n  }\n\n  const onYouTubePause = function() {\n    if(!stream.isPaused) {\n      pause();\n    }\n  }\n\n  const onYouTubePlay = function() {\n    if(!stream.isPlaying) {\n      play();\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <>\n      <div style={{ display: 'none' }}>\n        <YouTube videoId={videoId}\n                 opts={opts}\n                 onReady={onYouTubeReady}\n                 onPause={onYouTubePause}\n                 onPlay={onYouTubePlay} />\n      </div>\n      <MainApp playbackControls={playbackControls}/>\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    playback: state.playback,\n    lastUpQueues: state.lastUpQueues,\n    nextUpQueues: state.nextUpQueues,\n    userSettings: state.userSettings,\n});\n\nexport default connect(mapStateToProps)(PlaybackApp);\n","import './App.css';\nimport {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from './components/FeedApp/network';\nimport { fetchVerifyToken } from './components/Login/network';\nimport {\n  fetchStreamGet,\n  fetchPauseTrack,\n  fetchTrackGetFiles,\n} from './components/PlaybackApp/Player/network';\nimport { fetchGetUserSettings } from './components/UserSettings/network';\nimport { fetchQueueList } from './components/QueueApp/network'\nimport { playbackControlPause } from './components/PlaybackApp/controls';\nimport { store } from './utils/redux'\nimport Login from './components/Login/Login';\nimport PlaybackApp from './components/PlaybackApp/PlaybackApp';\nimport { useEffect, useState } from \"react\";\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { SERVICE_JUKEBOX_RADIO } from './config/services';\nimport TimeAgo from 'javascript-time-ago'\nimport en from 'javascript-time-ago/locale/en'\n\n\nfunction App() {\n\n  // Keeps track of the status of the webpage\n  //\n  //    - initial:          When the page is first loaded\n  //    - unauthenticated:  The client does NOT have a valid access token\n  //    - authenticated:    The client has a valid access token\n  //    - ready:            All API data has been loaded\n  const [status, setStatus] = useState('initial');\n\n  //////////////////////\n  // componentDidMount\n  useEffect(() => {\n    async function loadData() {\n      let responseJson;\n\n      // 1: Verify authentication.\n      const authResponse = await fetchVerifyToken();\n      if (!authResponse) {\n        setStatus('unauthenticated');\n        return;\n      }\n\n      // Update status.\n      setStatus('authenticated');\n\n      // 1B: Fetch user settings!\n      responseJson = await fetchGetUserSettings();\n      await store.dispatch({\n        type: 'user/get-settings',\n        userSettings: responseJson.data,\n      });\n\n      // 2: Load stream.\n      responseJson = await fetchStreamGet();\n      await store.dispatch(responseJson.redux);\n\n      // 3: Load the track now playing (conditionally).\n      const payload = responseJson.redux.payload,\n            nowPlayingTrack = payload.stream.nowPlaying?.track;\n      if(nowPlayingTrack?.service === SERVICE_JUKEBOX_RADIO) {\n        const trackUuid = nowPlayingTrack.uuid;\n        responseJson = await fetchTrackGetFiles(trackUuid);\n        await store.dispatch(responseJson.redux);\n        // NOTE: the above only works in production setups. This is because of\n        // how the file is served. the below setup can be adapted for a local\n        // setup.\n        //\n        // var request = new XMLHttpRequest();\n        // request.open(\"GET\", responseJson.redux.payload.track.audioUrl, true);\n        // request.responseType = \"blob\";\n        // request.onload = () => {\n        //   if(this.status !== 200) {\n        //     return;\n        //   }\n        //   const audio = new Audio(URL.createObjectURL(this.response));\n        //   responseJson.redux.payload.track.audio = audio;\n        //   store.dispatch(responseJson.redux);\n        // }\n        // request.send();\n      }\n\n      // 4: Load the queue.\n      responseJson = await fetchQueueList();\n      await store.dispatch(responseJson.redux);\n\n      // 5: Load relevant comments.\n      const textCommentsJsonResponse = await fetchTextCommentList(payload.stream.nowPlaying?.track?.uuid);\n      await store.dispatch(textCommentsJsonResponse.redux);\n\n      // 6: Load relevant voice recordings. This will also generate the feed.\n      const voiceRecordingsJsonResponse = await fetchVoiceRecordingList(payload.stream.nowPlaying?.track?.uuid);\n      await store.dispatch(voiceRecordingsJsonResponse.redux);\n\n      // Update status.\n      setStatus('ready');\n    }\n    TimeAgo.addDefaultLocale(en);\n    loadData();\n\n    // Define behavior for when the webpage is closed.\n    window.addEventListener(\"beforeunload\", (e) => {\n      e.preventDefault();\n      const state = store.getState();\n      if(!state.stream.isPlaying) {\n        return;\n      }\n      fetchPauseTrack();\n      playbackControlPause(state.playback, state.stream);\n    });\n  }, []);\n\n  // When the page is initially loaded, display nothing.\n  if(status === 'initial') {\n    return <></>;\n  }\n\n  // If the user is NOT authenticated, display the login portal.\n  if(status === 'unauthenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          <div className=\"app-main-container\">\n            <div className=\"app-main\">\n              <Login />\n            </div>\n          </div>\n        </Provider>\n      </Router>\n    )\n  }\n\n  // if the user is not authenticated, only display the login portal\n  if(status === 'authenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          Loading...\n        </Provider>\n      </Router>\n    )\n  }\n\n  // display the main UI now that everything is loaded up\n\n  /*\n   * \n   */\n  return (\n    <Router>\n      <Provider store={store}>\n        <div className=\"app-main-container\">\n          <PlaybackApp />\n        </div>\n      </Provider>\n    </Router>\n  );\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"Player_Player__Xx8fy\",\"Div\":\"Player_Div__1Mznx\",\"Button\":\"Player_Button__1lbWu\",\"Image\":\"Player_Image__1PWwp\",\"MoreNextUp\":\"Player_MoreNextUp__2_uZ-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueTrackHead\":\"QueueTrack_QueueTrackHead__1p7iu\",\"QueueTrackChild\":\"QueueTrack_QueueTrackChild__1kwMH\",\"AlbumArtContainer\":\"QueueTrack_AlbumArtContainer__31HWs\",\"TrackInfoContainer\":\"QueueTrack_TrackInfoContainer__17U9b\",\"TrackInfoName\":\"QueueTrack_TrackInfoName__3_H_N\",\"TrackInfoArtistName\":\"QueueTrack_TrackInfoArtistName__1cf-L\",\"ButtonContainer\":\"QueueTrack_ButtonContainer__1X5d4\",\"ButtonHead\":\"QueueTrack_ButtonHead__1L5IW\",\"ButtonChild\":\"QueueTrack_ButtonChild__1CWxx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideBar\":\"SideBar_SideBar__2JzAY\",\"Logo\":\"SideBar_Logo__3Rpb1\",\"SiteTitle\":\"SideBar_SiteTitle__27GIB\",\"Menu\":\"SideBar_Menu__2AXUO\",\"Search\":\"SideBar_Search__3Nyec\",\"Queue\":\"SideBar_Queue__17nHt\",\"Player\":\"SideBar_Player__1PY5E\",\"Feed\":\"SideBar_Feed__1PPpo\",\"Settings\":\"SideBar_Settings__2re0B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Upload\":\"Upload_Upload__tMDig\",\"FormBlock\":\"Upload_FormBlock__2ls6S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BottomBar\":\"BottomBar_BottomBar__3MLzc\",\"Playback\":\"BottomBar_Playback__3N-qW\",\"PlaybackButton\":\"BottomBar_PlaybackButton__1axWT\",\"Volume\":\"BottomBar_Volume__25kUh\",\"VolumeButton\":\"BottomBar_VolumeButton__26qBR\",\"ExtraControl\":\"BottomBar_ExtraControl__2zuEs\",\"ExtraControlButton\":\"BottomBar_ExtraControlButton__3Kvpp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProgressAll\":\"ChildProgressBar_ProgressAll__2IIt8\",\"ProgressSolo\":\"ChildProgressBar_ProgressSolo__2uX4J\",\"ProgressMuted\":\"ChildProgressBar_ProgressMuted__QW2lL\",\"ProgressHoverContainer\":\"ChildProgressBar_ProgressHoverContainer__1-0Cy\",\"ProgressHoverPointer\":\"ChildProgressBar_ProgressHoverPointer__3htLH\",\"ProgressHoverPurpose\":\"ChildProgressBar_ProgressHoverPurpose__1v52t\",\"ProgressHoverDelete\":\"ChildProgressBar_ProgressHoverDelete__2kn7E\",\"HoverContainer\":\"ChildProgressBar_HoverContainer__GlWxc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchApp\":\"SearchApp_SearchApp__Mfcqz\",\"SearchBar\":\"SearchApp_SearchBar__CS1zo\",\"FormBlock\":\"SearchApp_FormBlock__1myUf\",\"SearchResults\":\"SearchApp_SearchResults__p1J6y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__1ujut\",\"FormBlock\":\"Login_FormBlock__S_rix\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProgressBarMarker\":\"ProgressBarMarker_ProgressBarMarker__157Kt\",\"ProgressBarMarkerPointer\":\"ProgressBarMarker_ProgressBarMarkerPointer__1WtJ4\",\"ProgressBarMarkerName\":\"ProgressBarMarker_ProgressBarMarkerName__3XKgL\",\"ProgressBarMarkerDelete\":\"ProgressBarMarker_ProgressBarMarkerDelete__3Dii_\",\"HoverContainer\":\"ProgressBarMarker_HoverContainer__2DQHs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchResult\":\"SearchResult_SearchResult__djXCo\",\"Button\":\"SearchResult_Button__1Hbjl\",\"ggSpinner\":\"SearchResult_ggSpinner__iNeQG\",\"spinner\":\"SearchResult_spinner__u3axZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"WelcomeApp\":\"WelcomeApp_WelcomeApp__3mJcH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedApp\":\"FeedApp_FeedApp__2YJHa\",\"Feed\":\"FeedApp_Feed__3NWaq\",\"FeedWrapper\":\"FeedApp_FeedWrapper__5dQdY\",\"CreateTextComment\":\"FeedApp_CreateTextComment__1tCDm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProgressBar\":\"ParentProgressBar_ProgressBar__uCese\",\"ProgressPointer\":\"ParentProgressBar_ProgressPointer__2qz3g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueApp\":\"QueueApp_QueueApp__3OUXI\",\"PlaybackDuration\":\"QueueApp_PlaybackDuration__1DbyU\",\"AddToQueue\":\"QueueApp_AddToQueue__1Zpmd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniQueue\":\"MiniQueue_MiniQueue__2HfJP\",\"MiniQueueItem\":\"MiniQueue_MiniQueueItem__2-wsK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TrackDetailApp\":\"TrackDetailApp_TrackDetailApp__2pNUa\",\"CloseModal\":\"TrackDetailApp_CloseModal__2ssSn\",\"Preview\":\"TrackDetailApp_Preview__3QeWE\",\"PreviewImgContainer\":\"TrackDetailApp_PreviewImgContainer__1Vz4u\",\"PreviewImg\":\"TrackDetailApp_PreviewImg__1Lb5-\",\"PreviewControlContainer\":\"TrackDetailApp_PreviewControlContainer__CWL7L\",\"PreviewControl\":\"TrackDetailApp_PreviewControl__1Buba\",\"TabButtonContainer\":\"TrackDetailApp_TabButtonContainer__3N1LG\",\"TabButton\":\"TrackDetailApp_TabButton__1DxpH\",\"CreateMarkerForm\":\"TrackDetailApp_CreateMarkerForm__2T0-Q\",\"CreateMarkerFormLabel\":\"TrackDetailApp_CreateMarkerFormLabel__3d6K_\",\"CreateMarkerFormInput\":\"TrackDetailApp_CreateMarkerFormInput__aCuIr\",\"CreateMarkerFormSubmit\":\"TrackDetailApp_CreateMarkerFormSubmit__2Aeo7\",\"CreateIntervalForm\":\"TrackDetailApp_CreateIntervalForm__2W7IQ\",\"CreateIntervalFormLabel\":\"TrackDetailApp_CreateIntervalFormLabel__22xV_\",\"CreateIntervalFormSelect\":\"TrackDetailApp_CreateIntervalFormSelect__2E8S3\",\"CreateIntervalFormSubmit\":\"TrackDetailApp_CreateIntervalFormSubmit__14KZ4\",\"Modal\":\"TrackDetailApp_Modal__1mVpe\",\"ModalOverlay\":\"TrackDetailApp_ModalOverlay__1lvxm\",\"ModalContent\":\"TrackDetailApp_ModalContent__t34KR\",\"QueueName\":\"TrackDetailApp_QueueName__doJks\",\"ProgressBar\":\"TrackDetailApp_ProgressBar__3T_Ui\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotableText\":\"NotableText_NotableText__gYPiJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextComment\":\"TextComment_TextComment__92FmQ\",\"Notated\":\"TextComment_Notated__8XL21\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ABCNotationDisplay\":\"ABCNotationDisplay_ABCNotationDisplay__2WbrS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VoiceRecording\":\"VoiceRecording_VoiceRecording__29j03\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniFeed\":\"MiniFeed_MiniFeed__2GXUK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniPlayer\":\"MiniPlayer_MiniPlayer__w1Mms\",\"Image\":\"MiniPlayer_Image__1dVlH\"};"],"sourceRoot":""}