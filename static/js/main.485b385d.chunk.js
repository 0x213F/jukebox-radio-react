(this["webpackJsonpjukebox-radio"]=this["webpackJsonpjukebox-radio"]||[]).push([[0],{12:function(e,t,n){e.exports={Player:"Player_Player__RgpZ6",Div:"Player_Div__HhfjS",Button:"Player_Button__1m74t"}},16:function(e,t,n){e.exports={Upload:"Upload_Upload__tMDig",FormBlock:"Upload_FormBlock__2ls6S"}},18:function(e,t,n){e.exports={QueueCollection:"QueueCollection_QueueCollection__3PH8C",Item:"QueueCollection_Item__3Kg1p",Button:"QueueCollection_Button__1j08c",Children:"QueueCollection_Children__U1cJx"}},21:function(e,t,n){e.exports={Login:"Login_Login__1ujut",FormBlock:"Login_FormBlock__S_rix"}},22:function(e,t,n){e.exports={Search:"Search_Search__2SQmI",FormBlock:"Search_FormBlock__3ZZZJ"}},25:function(e,t,n){e.exports={QueueTrack:"QueueTrack_QueueTrack__14e2x",Button:"QueueTrack_Button__cfD-Y"}},33:function(e,t,n){e.exports={Chat:"Chat_Chat__3NjUX",ChatItem:"Chat_ChatItem__9P8wv",ChatBar:"Chat_ChatBar__1jd0C"}},40:function(e,t,n){e.exports={TextComment:"TextComment_TextComment__15QHu",Notated:"TextComment_Notated__24bZz"}},41:function(e,t,n){e.exports={VoiceRecording:"VoiceRecording_VoiceRecording__10J4X"}},42:function(e,t,n){e.exports={Queue:"Queue_Queue__YTCBa"}},49:function(e,t,n){},51:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n.n(a),u=n(26),s=n.n(u),i=(n(49),n(4)),o=n(1),l=n.n(o),d=n(3),p=n(5),j=(n(51),n(8)),b=n(17),f=n.n(b),x=n(39),h=n.n(x),v=n(33),m=n.n(v),O="https://prod.jukeboxrad.io",k="GET",y="POST";function g(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(){var t,n,r,a,c,u,s,i,o,d,j,b,f,x,h,v,m,k,y,g,w,U,C,S=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:"",n=S.length>1&&void 0!==S[1]?S[1]:"",r=S.length>2&&void 0!==S[2]?S[2]:{},n=O+n,"GET"===t){e.next=16;break}for(c=new FormData,u=0,s=Object.entries(r);u<s.length;u++)i=Object(p.a)(s[u],2),o=i[0],d=i[1],c.append(o,d);return j={headers:{}},(b=localStorage.getItem("accessToken"))&&(j.headers.Authorization="Bearer ".concat(b)),f=new Request(n,j),e.next=13,fetch(f,{method:t,mode:"cors",body:c});case 13:a=e.sent,e.next=26;break;case 16:for(x=new URLSearchParams,h=0,v=Object.entries(r);h<v.length;h++)m=Object(p.a)(v[h],2),k=m[0],y=m[1],x.set(k,y);return g=n+"/?"+x.toString(),w={headers:{"Content-Type":"application/json"}},(U=localStorage.getItem("accessToken"))&&(w.headers.Authorization="Bearer ".concat(U)),C=new Request(g,w),e.next=25,fetch(C,{method:t,mode:"cors"});case 25:a=e.sent;case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/comments/text-comment/create/",{text:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/comments/text-comment/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/comments/voice-recording/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/comments/text-comment/delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/comments/voice-recording/create/",{audioFile:t,transcriptData:n,transcriptFinal:r});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/comments/voice-recording/delete/",{voiceRecordingUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(40),Q=n.n(M);var B=function(e){return Object(r.jsxs)("div",{className:Q.a.TextComment,children:[Object(r.jsxs)("span",{children:[e.data.text," \xa0"]}),Object(r.jsx)("button",{type:"button",onClick:function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(e.data.uuid);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"})]})},T=n(41),q=n.n(T);var R=function(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=e.data.uuid,t.next=4,N(r);case 4:return t.next=6,e.destroy(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=e.data;return Object(r.jsxs)("div",{className:q.a.VoiceRecording,children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"null"===n.transcriptFinal?"<transcript not available>":n.transcriptFinal})}),Object(r.jsx)("form",{onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(r.jsx)("button",{type:"submit",children:"Delete"})})]})};var F=Object(j.b)((function(e){return{stream:e.stream,textComments:e.textComments,voiceRecordings:e.voiceRecordings,feed:e.feed}}))((function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)(!1),i=Object(p.a)(s,2),o=i[0],j=i[1],x=Object(a.useState)(new h.a({bitRate:320})),v=Object(p.a)(x,1)[0],O=Object(a.useState)([]),k=Object(p.a)(O,1)[0],y=function(){},g=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(n);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(n);case 2:return t.next=4,e.dispatch({type:"voiceRecording/delete",voiceRecordingUuid:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(d.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,U(c);case 3:return r=t.sent,t.next=6,e.dispatch({type:"textComment/create",textComment:r.data});case 6:u("");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){},M=Object(b.useSpeechRecognition)(),Q=M.transcript,T=M.resetTranscript,q=e.feed;return Object(r.jsxs)("div",{className:m.a.Chat,children:[Object(r.jsx)("div",{children:q.map((function(e,t){return"TextComment"===e.class?Object(r.jsx)(B,{data:e,destroy:g,destroyModifications:y,create:S},t):"VoiceRecording"===e.class?Object(r.jsx)(R,{data:e,destroy:w},t):Object(r.jsx)(r.Fragment,{})}))}),Object(r.jsxs)("form",{className:m.a.CreateTextComment,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(r.jsx)("button",{type:"button",onClick:function(){o?(f.a.browserSupportsSpeechRecognition()&&f.a.stopListening(),v.stop().getMp3().then((function(t){var n=Object(p.a)(t,2),r=n[0],a=n[1];Object(d.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new File(r,"voice.mp3",{type:a.type,lastModified:Date.now()}),t.next=3,P(n,JSON.stringify(k),Q);case 3:return c=t.sent,t.next=6,e.dispatch({type:"voiceRecording/create",voiceRecording:c.data});case 6:f.a.browserSupportsSpeechRecognition()&&T();case 7:case"end":return t.stop()}}),t)})))()})),j(!1)):(f.a.browserSupportsSpeechRecognition()&&f.a.startListening({continuous:!0}),v.start(),j(!0))},children:"Record"}),Object(r.jsx)("input",{type:"text",name:"text",placeholder:"text",value:c,onChange:function(e){u(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:"Send"})]}),Object(r.jsx)("div",{})]})})),D=n(11),A=n(21),I=n.n(A),L=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/auth/obtain-tokens/",{username:t,password:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/initialize/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("accessToken"),e.next=3,g(y,"/auth/verify-token/",{token:t});case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var J=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)(""),i=Object(p.a)(s,2),o=i[0],j=i[1],b=Object(a.useState)(!1),f=Object(p.a)(b,2),x=f[0],h=f[1],v=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,L(c,o);case 3:if((n=e.sent).access&&n.refresh){e.next=6;break}return e.abrupt("return");case 6:return localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),e.next=10,E();case 10:window.location.reload();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:I.a.Login,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(r.jsx)("h3",{children:"Sign in"}),Object(r.jsxs)("p",{children:["If you have not created an account yet, then please ",Object(r.jsx)(D.b,{to:"/signup",children:"Sign Up"})," first."]}),Object(r.jsxs)("label",{className:I.a.FormBlock,children:["Username",Object(r.jsx)("input",{type:"text",name:"username",placeholder:"username",value:c,onChange:function(e){u(e.target.value)}})]}),Object(r.jsxs)("label",{className:I.a.FormBlock,children:["Password",Object(r.jsx)("input",{type:"password",name:"password",placeholder:"password",value:o,onChange:function(e){j(e.target.value)}})]}),Object(r.jsxs)("label",{className:I.a.FormBlock,children:[Object(r.jsx)("input",{type:"checkbox",name:"remember-me",value:x,onChange:function(e){h(e.target.value)}}),"Remember Me"]}),Object(r.jsxs)("div",{className:I.a.FormBlock,children:[Object(r.jsx)("button",{type:"submit",children:"Sign In"}),Object(r.jsx)("span",{children:Object(r.jsx)(D.b,{to:"/forgotpassword",children:"Forgot Password?"})})]})]})},X=n(42),z=n.n(X),Y=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/streams/queue/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/queue/delete/",{queueUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=n(18),G=n.n(H),K=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/marker/create/",{trackUuid:t,timestampMilliseconds:n,queueUuid:r});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/marker/delete/",{markerUuid:t,queueUuid:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/streams/marker/list",{trackUuid:t,queueUuid:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r,a,c,u){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/queue-interval/create/",{queueUuid:t,lowerBoundMarkerUuid:n,upperBoundMarkerUuid:r,isMuted:a,repeatCount:c,parentQueueUuid:u});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,u){return e.apply(this,arguments)}}(),te=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/queue-interval/delete/",{queueIntervalUuid:t,queueUuid:n,parentQueueUuid:r});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var ne=Object(j.b)((function(e){return{}}))((function(e){var t=e.data,n=t.trackMarker,a=t.queueUuid,c=function(){var t=Object(d.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(n.uuid,a);case 2:return r=t.sent,t.next=5,e.dispatch(r.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:["@ ",n.timestampMilliseconds/1e3]}),Object(r.jsx)("button",{onClick:c,children:"Delete"})]})}));var re=Object(j.b)((function(e){return{}}))((function(e){var t=e.data,n=t.queueInterval,a=t.queueUuid,c=t.parentQueueUuid,u=function(){var t=Object(d.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(n.uuid,a,c);case 2:return r=t.sent,t.next=5,e.dispatch(r.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=n.lowerBound?n.lowerBound.timestampMilliseconds/1e3:"beginning",i=n.upperBound?n.upperBound.timestampMilliseconds/1e3:"end";return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[s," =>",i,"(",n.isMuted?"muted":"played",")"]}),Object(r.jsx)("button",{onClick:u,children:"Delete"})]})}));var ae=Object(j.b)((function(e){return{trackMarkerMap:e.trackMarkerMap,nextUpQueues:e.nextUpQueues}}))((function(e){var t=e.data,n=t.uuid,c=t.parentUuid,u=e.trackMarkerMap[n]||[],s=Object(a.useState)(""),i=Object(p.a)(s,2),o=i[0],j=i[1],b=Object(a.useState)("null"),f=Object(p.a)(b,2),x=f[0],h=f[1],v=Object(a.useState)("null"),m=Object(p.a)(v,2),O=m[0],k=m[1];Object(a.useEffect)((function(){function r(){return(r=Object(d.a)(l.a.mark((function r(){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$(t.track.uuid,n);case 2:return a=r.sent,r.next=5,e.dispatch(a.redux);case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[e,t,n]);var y=function(){var r=Object(d.a)(l.a.mark((function r(){var a;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,K(t.track.uuid,o,n);case 2:return a=r.sent,r.next=5,e.dispatch(a.redux);case 5:j("");case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),g=function(){var n=Object(d.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ee(t.uuid,x,O,!0,null,c);case 2:return r=n.sent,n.next=5,e.dispatch(r.redux);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Markers"}),u.map((function(e,t){return Object(r.jsx)(ne,{data:{trackMarker:e,queueUuid:n}},t)})),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"text",name:"timestampMilliseconds",placeholder:"timestamp",value:o,onChange:function(e){j(e.target.value)}}),Object(r.jsx)("button",{onClick:y,children:"Create Marker"})]}),Object(r.jsx)("p",{children:"Intervals"}),t.intervals.map((function(e,t){return Object(r.jsx)(re,{data:{queueInterval:e,queueUuid:n,parentQueueUuid:c}},t)})),Object(r.jsxs)("div",{children:[Object(r.jsxs)("select",{value:x,onChange:function(e){h(e.target.value)},children:[Object(r.jsx)("option",{value:"null",children:"Beginning"}),u.map((function(e,t){return Object(r.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)}))]}),Object(r.jsxs)("select",{value:O,onChange:function(e){k(e.target.value)},children:[Object(r.jsx)("option",{value:"null",children:"End"}),u.map((function(e,t){return Object(r.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)}))]}),Object(r.jsx)("button",{onClick:g,children:"Mute Interval"})]})]})})),ce=n(25),ue=n.n(ce);var se=Object(j.b)((function(e){return{stream:e.stream,lastUp:e.lastUp}}))((function(e){var t,n=e.data,c=e.stream,u=e.lastUp,s=Object(a.useState)(!1),i=Object(p.a)(s,2),o=i[0],j=i[1],b=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!0);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.index)||(null===u||void 0===u?void 0:u.index),h=!x||x<n.index,v=n.parentUuid&&h?"-":"";return Object(r.jsxs)("div",{className:ue.a.QueueTrack,children:[Object(r.jsxs)("span",{children:[v,n.track.name]}),h&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{className:ue.a.Button,type:"button",onClick:function(){var t=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"}),!o&&Object(r.jsx)("button",{className:ue.a.Button,type:"button",onClick:b,children:"Edit"}),o&&Object(r.jsx)("button",{className:ue.a.Button,type:"button",onClick:f,children:"Done"})]}),o&&Object(r.jsx)(ae,{data:n})]})}));var ie=Object(j.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n=e.data,c=e.stream,u=e.lastUpQueues,s=u[u.length-1],i=e.data.uuid,o=(null===c||void 0===c?void 0:c.isPlaying)&&(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.parentUuid)===i||!(null===c||void 0===c?void 0:c.isPlaying)&&(null===s||void 0===s?void 0:s.parentUuid)&&(null===s||void 0===s?void 0:s.parentUuid)===i,j=Object(a.useState)(o),b=Object(p.a)(j,2),f=b[0],x=b[1],h=function(e){x(!f)};return Object(r.jsxs)("div",{className:G.a.QueueCollection,children:[Object(r.jsxs)("div",{className:G.a.Item,children:[Object(r.jsx)("span",{children:n.collection.name}),!o&&Object(r.jsx)("button",{className:G.a.Button,type:"button",onClick:function(){var t=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"}),n.children.length>0&&!f&&Object(r.jsx)("button",{className:G.a.Button,type:"button",onClick:h,children:"More"}),n.children.length>0&&f&&Object(r.jsx)("button",{className:G.a.Button,type:"button",onClick:h,children:"Less"})]}),n.children.length>0&&f&&Object(r.jsx)("div",{className:G.a.Children,children:n.children.map((function(t,n){return Object(r.jsx)(se,{data:t,destroy:e.destroy},n)}))})]})}));var oe=Object(j.b)((function(e){return{stream:e.stream,nextUpQueues:e.nextUpQueues,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n,a=function(){var t=Object(d.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.uuid,t.next=3,Z(r);case 3:(a=n.parentUuid)?e.dispatch({type:"queue/deleteChildNode",parentUuid:a,queueUuid:r}):e.dispatch({type:"queue/deleteNode",queueUuid:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:z.a.Queue,children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Last up..."})}),Object(r.jsx)("div",{children:e.lastUpQueues.map((function(e,t){return e.track?Object(r.jsx)(se,{data:e,destroy:function(){}},t):Object(r.jsx)(r.Fragment,{})}))}),Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Now playing..."})}),Object(r.jsx)("p",{children:null===(t=e.stream)||void 0===t||null===(n=t.nowPlaying)||void 0===n?void 0:n.track.name})]}),Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Next up..."})}),Object(r.jsx)("div",{children:e.nextUpQueues.map((function(e,t){return e.collection?Object(r.jsx)(ie,{data:e,destroy:a},e.uuid):e.track?Object(r.jsx)(se,{data:e,destroy:a},e.uuid):Object(r.jsx)(r.Fragment,{})}))})]})})),le=n(22),de=n.n(le),pe=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r,a,c,u,s,i){var o,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/music/search",{query:t,providerSpotify:n,providerYouTube:r,providerJukeboxRadio:a,formatTrack:c,formatAlbum:u,formatPlaylist:s,formatVideo:i});case 2:return o=e.sent,e.next=5,o.json();case 5:return d=e.sent,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,u,s,i){return e.apply(this,arguments)}}(),je=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/queue/create/",{className:t,genericUuid:n});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var be=function(e){var t=e.data;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[t.provider," ",t.format," ",t.name]}),Object(r.jsx)("button",{type:"button",onClick:function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addToQueue(e.data.class,e.data.uuid);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Add"})]})};var fe=Object(j.b)((function(e){return{}}))((function(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)([]),i=Object(p.a)(s,2),o=i[0],j=i[1],b=Object(a.useState)(!0),f=Object(p.a)(b,2),x=f[0],h=f[1],v=Object(a.useState)(!0),m=Object(p.a)(v,2),O=m[0],k=m[1],y=Object(a.useState)(!0),g=Object(p.a)(y,2),w=g[0],U=g[1],C=Object(a.useState)(!0),S=Object(p.a)(C,2),_=S[0],P=S[1],N=Object(a.useState)(!0),M=Object(p.a)(N,2),Q=M[0],B=M[1],T=Object(a.useState)(!0),q=Object(p.a)(T,2),R=q[0],F=q[1],D=Object(a.useState)(!0),A=Object(p.a)(D,2),I=A[0],L=A[1],E=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,pe(o,x,O,w,_,Q,R,I);case 3:n=e.sent,u(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(l.a.mark((function t(n,r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(n,r);case 2:return u([]),t.next=5,Y();case 5:return a=t.sent,t.next=8,e.dispatch(a.redux);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsxs)("form",{className:de.a.Login,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(r.jsx)("h3",{children:"Search"}),Object(r.jsxs)("label",{className:de.a.FormBlock,children:["Query \xa0",Object(r.jsx)("input",{type:"text",name:"query",placeholder:"",value:o,onChange:function(e){j(e.target.value)}})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{className:de.a.FormBlock,children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",checked:x,onChange:function(e){h(e.target.checked)}}),"Spotify"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",name:"provider.youTube",checked:O,onChange:function(e){k(e.target.checked)}}),"YouTube"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",name:"provider.jukeboxRadio",checked:w,onChange:function(e){U(e.target.checked)}}),"Jukebox Radio"]})]}),Object(r.jsxs)("div",{className:de.a.FormBlock,children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",checked:_,onChange:function(e){P(e.target.checked)}}),"Track"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",checked:Q,onChange:function(e){B(e.target.checked)}}),"Album"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",checked:R,onChange:function(e){F(e.target.checked)}}),"Playlist"]}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"checkbox",checked:I,onChange:function(e){L(e.target.checked)}}),"Video"]})]}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:de.a.FormBlock,children:Object(r.jsx)("button",{type:"submit",children:"Search"})})]}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:c.map((function(e,t){return Object(r.jsx)(be,{data:e,addToQueue:V},t)}))})]})})),xe=n(16),he=n.n(xe),ve=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r,a,c){var u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/music/track/create/",{audioFile:t,imageFile:n,trackName:r,artistName:a,albumName:c});case 2:return u=e.sent,e.next=5,u.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}();var me=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)(""),i=Object(p.a)(s,2),o=i[0],j=i[1],b=Object(a.useState)(""),f=Object(p.a)(b,2),x=f[0],h=f[1],v=Object(a.useState)(""),m=Object(p.a)(v,2),O=m[0],k=m[1],y=Object(a.useState)(""),g=Object(p.a)(y,2),w=g[0],U=g[1],C=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ve(c,o,x,O,w);case 3:h(""),k(""),U("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("form",{className:he.a.Login,onSubmit:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(r.jsx)("h3",{children:"Upload"}),Object(r.jsxs)("label",{className:he.a.FormBlock,children:["Audio file",Object(r.jsx)("input",{type:"file",name:"audioFile",onChange:function(e){u(e.target.files[0])}})]}),Object(r.jsxs)("label",{className:he.a.FormBlock,children:["Image file",Object(r.jsx)("input",{type:"file",name:"imageFile",onChange:function(e){j(e.target.files[0])}})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("label",{className:he.a.FormBlock,children:["Track name",Object(r.jsx)("input",{type:"text",name:"trackName",placeholder:"Track name",value:x,onChange:function(e){h(e.target.value)}})]}),Object(r.jsxs)("label",{className:he.a.FormBlock,children:["Artist name",Object(r.jsx)("input",{type:"text",name:"artistName",placeholder:"Artist name",value:O,onChange:function(e){k(e.target.value)}})]}),Object(r.jsxs)("label",{className:he.a.FormBlock,children:["Album name",Object(r.jsx)("input",{type:"text",name:"albumName",placeholder:"Album name",value:w,onChange:function(e){U(e.target.value)}})]}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:he.a.FormBlock,children:Object(r.jsx)("button",{type:"submit",children:"Submit"})})]})},Oe=n(12),ke=n.n(Oe);var ye=Object(j.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues}}))((function(e){var t,n,c,u=e.stream,s=null===u||void 0===u||null===(t=u.nowPlaying)||void 0===t?void 0:t.track,i=e.lastUpQueues,o=i[i.length-1],j=e.nextUpQueues,b=j.length?j[0].children.length?j[0].children[0]:j[0]:void 0,f=Object(a.useState)(0),x=Object(p.a)(f,2),h=x[0],v=x[1],m=function(){var t=Object(d.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:return n=t.sent,t.next=5,S();case 5:return r=t.sent,t.next=8,e.dispatch(n.redux);case 8:return t.next=10,e.dispatch(r.redux);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prevTrack(),t.next=3,m();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.nextTrack(!0);case 2:return t.next=4,m();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.play();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pause();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.seek("backward");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.seek("forward");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return 1===(null===u||void 0===u||null===(n=u.nowPlaying)||void 0===n?void 0:n.index)||o||window.location.reload(),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:ke.a.Div,children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Last..."})}),Object(r.jsx)("p",{children:null===o||void 0===o||null===(c=o.track)||void 0===c?void 0:c.name})]}),Object(r.jsxs)("div",{className:ke.a.Div,children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Now playing..."})}),((null===u||void 0===u?void 0:u.isPlaying)||(null===u||void 0===u?void 0:u.isPaused))&&Object(r.jsx)("p",{children:null===s||void 0===s?void 0:s.name}),!(null===u||void 0===u?void 0:u.isPlaying)&&!(null===u||void 0===u?void 0:u.isPaused)&&Object(r.jsx)("p",{children:"Waiting..."})]}),Object(r.jsxs)("div",{className:ke.a.Div,children:[Object(r.jsx)("p",{children:Object(r.jsx)("i",{children:"Next..."})}),Object(r.jsx)("p",{children:null===b||void 0===b?void 0:b.track.name})]}),Object(r.jsx)("div",{className:ke.a.Div,children:(null===u||void 0===u?void 0:u.isPaused)?u.pausedAt-u.startedAt:(null===u||void 0===u?void 0:u.isPlaying)?Date.now()-u.startedAt:void 0}),Object(r.jsxs)("div",{className:ke.a.Div,children:[Object(r.jsx)("button",{className:ke.a.Button,onClick:O,children:"Prev"}),(null===u||void 0===u?void 0:u.isPaused)&&Object(r.jsx)("button",{className:ke.a.Button,onClick:y,children:"Play"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(r.jsx)("button",{className:ke.a.Button,onClick:g,children:"Pause"}),Object(r.jsx)("button",{className:ke.a.Button,onClick:k,children:"Next"})]}),Object(r.jsxs)("div",{className:ke.a.Div,children:[(null===u||void 0===u?void 0:u.isPlaying)&&Object(r.jsx)("button",{className:ke.a.Button,onClick:w,children:"Backward"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(r.jsx)("button",{className:ke.a.Button,onClick:U,children:"Forward"}),(null===u||void 0===u?void 0:u.isPlaying)&&Object(r.jsx)("button",{className:ke.a.Button,onClick:function(){v(h+1)},children:"Progress"})]})]})}));var ge=Object(j.b)((function(e){return{userSettings:e.userSettings}}))((function(e){return e.userSettings?Object(r.jsx)("a",{href:e.userSettings.spotify.authorizationUrl,children:"Connect Your Spotify Account"}):Object(r.jsx)(r.Fragment,{})})),we=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/streams/stream/get");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/next-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/pause-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/play-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/prev-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/scan-backward/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(y,"/streams/stream/scan-forward/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(k,"/users/user/get-settings");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=n(6),Be=n(28),Te=function(e,t){var n=Object(i.a)({},e.trackMarkerMap),r=t.queueUuid,a=t.marker,c=[].concat(Object(Qe.a)(n[r]),[a]).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return n[r]=c,Object(i.a)(Object(i.a)({},e),{},{trackMarkerMap:n})},qe=function(e,t){var n=Object(i.a)({},e.trackMarkerMap),r=t.queueUuid,a=t.marker,c=n[t.queueUuid].filter((function(e){return e.uuid!==a.uuid}));return n[r]=c,Object(i.a)(Object(i.a)({},e),{},{trackMarkerMap:n})},Re=function(e,t){var n=t.queueUuid,r=t.markers,a=Object(i.a)({},e.trackMarkerMap);return a[n]=r,Object(i.a)(Object(i.a)({},e),{},{trackMarkerMap:a})},Fe=function(e,t){return Object(i.a)(Object(i.a)({},e),{},{spotifyApi:t.spotifyApi})},De=n(43),Ae=function e(t){var n,r=Object(i.a)({},t);if(r.children.length){var a=r.children.map(e),c=a.reduce((function(e,t){return e+t.durationMilliseconds}),0);return r.children=a,r.totalDurationMilliseconds=c,r}var u=r.intervals,s=null===(n=r.track)||void 0===n?void 0:n.durationMilliseconds;if(!u.length)return r.totalDurationMilliseconds=s,r.playbackIntervals=[[0,s]],r;var o,l,d,p=[],j=Object(De.a)(u);try{for(j.s();!(d=j.n()).done;){var b=d.value;if(b.lowerBound){if(b.upperBound){o||(o=0),l=b.lowerBound.timestampMilliseconds,p.push([o,l]),o=b.upperBound.timestampMilliseconds,l=void 0;continue}o||(o=0),l=b.lowerBound.timestampMilliseconds,p.push([o,l]),o=void 0;break}o=b.upperBound.timestampMilliseconds}}catch(x){j.e(x)}finally{j.f()}o&&(l=s,p.push([o,l]));var f=p.reduce((function(e,t){return e+(t[1]-t[0])}),0);return r.totalDurationMilliseconds=f,r.playbackIntervals=p,r},Ie=function(e,t){var n=t.lastUpQueues.map(Ae),r=t.nextUpQueues.map(Ae),a=e._lastPlayed;a&&n.push(a);var c=e.stream;c.isPlaying||c.isPaused||!c.nowPlaying||(n.push(c.nowPlaying),c=Object(i.a)(Object(i.a)({},c),{},{nowPlaying:void 0}));var u=n.length?n[n.length-1]:void 0,s=r.length?r[0].children.length?r[0].children[0]:r[0]:void 0;return Object(i.a)(Object(i.a)({},e),{},{stream:c,lastUp:u,lastUpQueues:n,nextUp:s,nextUpQueues:r})},Le=function(e){return function(t){return t.uuid===e}},Ee=function(e,t){return t.upperBound?e.upperBound?e.upperBound.timestampMilliseconds-e.upperBound.timestampMilliseconds:1:-1},Ve=function(e,t){var n,r,a=t.queueInterval,c=t.queueUuid,u=t.parentQueueUuid,s=e.nextUpQueues;u&&(n=s.findIndex(Le(u)),s=s[n].children),r=s.findIndex(Le(c));var o=s[r],l=[].concat(Object(Qe.a)(o.intervals),[a]).sort(Ee),d=Object(Qe.a)(e.nextUpQueues);n?d[n].children[r].intervals=l:d[r].intervals=l;var p=d.map(Ae);return Object(i.a)(Object(i.a)({},e),{},{nextUpQueues:p})},Je=function(e,t){var n,r,a=t.queueInterval,c=t.queueUuid,u=t.parentQueueUuid,s=e.nextUpQueues;u&&(n=s.findIndex(Le(u)),s=s[n].children),r=s.findIndex(Le(c));var o,l=s[r],d=Object(Qe.a)(l.intervals).filter((o=a.uuid,function(e){return e.uuid!==o})),p=Object(Qe.a)(e.nextUpQueues);n?p[n].children[r].intervals=d:p[r].intervals=d;var j=p.map(Ae);return Object(i.a)(Object(i.a)({},e),{},{nextUpQueues:j})},Xe=function(e,t){var n=t.stream,r=n.nowPlaying,a=Object(i.a)({},e);return r&&(n.nowPlaying=Ae(r)),a.stream=n,n.isPlaying||n.isPaused||!n.nowPlaying||(a.lastUp=n.nowPlaying,a._lastPlayed=n.nowPlaying,a.stream.nowPlaying=void 0),a},ze=function(e,t){var n={stream:Object(i.a)(Object(i.a)({},e.stream),{},{isPlaying:!0,isPaused:!1,startedAt:t.startedAt})};return Xe(e,n)},Ye=function(e,t){var n={stream:Object(i.a)(Object(i.a)({},e.stream),{},{isPlaying:!1,isPaused:!0,pausedAt:t.pausedAt})};return Xe(e,n)},Ze=function(e,t){var n=Object(Qe.a)(e.lastUpQueues),r=Object(Qe.a)(e.nextUpQueues),a=e.stream.nowPlaying,c=r[0],u=n[n.length-1],s=(null===a||void 0===a?void 0:a.parentUuid)&&(null===c||void 0===c?void 0:c.uuid)&&(null===a||void 0===a?void 0:a.parentUuid)===(null===c||void 0===c?void 0:c.uuid);return a&&(s?c.children.unshift(a):r.unshift(a)),n.pop(),Object(i.a)(Object(i.a)({},e),{},{stream:Object(i.a)(Object(i.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:u,isPlaying:!0,isPaused:!1}),lastUpQueues:n,nextUpQueues:r,_lastPlayed:void 0})},He=function(e,t){var n=Object(Qe.a)(e.lastUpQueues),r=Object(Qe.a)(e.nextUpQueues),a=e.stream.nowPlaying,c=r[0],u=c?c.children.length?c.children[0]:c:void 0;return a&&n.push(a),c&&(c.children.length?(c.children.shift(),c.children.length||r.shift()):r.shift()),Object(i.a)(Object(i.a)({},e),{},{stream:Object(i.a)(Object(i.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:u,isPlaying:!0,isPaused:!1}),lastUpQueues:n,nextUpQueues:r,_lastPlayed:a})},Ge=function(e,t){var n=t.textComments,r=[].concat(Object(Qe.a)(n),Object(Qe.a)(e.voiceRecordings)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{textComments:t.textComments,feed:r})},Ke=function(e,t){var n=t.voiceRecordings,r=[].concat(Object(Qe.a)(e.textComments),Object(Qe.a)(n)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{voiceRecordings:t.voiceRecordings,feed:r})},We={nextUpQueues:[],lastUpQueues:[],_lastPlayed:void 0,textComments:[],voiceRecordings:[],feed:[],userSettings:void 0,trackMarkerMap:{}};function $e(e,t){var n=Object(i.a)({},e.stream),r=n.nowPlaying;return n.isPlaying=!1,n.isPaused=!1,n.nowPlaying=void 0,Object(i.a)(Object(i.a)({},e),{},{stream:n,_lastPlayed:r})}function et(e,t){var n=e.nextUpQueues.filter((function(e){return e.uuid!==t.queueUuid}));return Object(i.a)(Object(i.a)({},e),{},{nextUpQueues:n})}function tt(e,t){var n=Object(Qe.a)(e.nextUpQueues),r=n.findIndex((function(e){return e.uuid===t.parentUuid})),a=n[r].children.filter((function(e){return e.uuid!==t.queueUuid}));return n[r].children=a,a.length||(n=n.filter((function(e){return e.uuid!==t.parentUuid}))),Object(i.a)(Object(i.a)({},e),{},{nextUpQueues:n})}function nt(e,t){var n=[].concat(Object(Qe.a)(e.textComments),[t.textComment]),r=[].concat(Object(Qe.a)(n),Object(Qe.a)(e.voiceRecordings)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{textComments:n,feed:r})}function rt(e,t){var n=e.textComments.filter((function(e){return e.uuid!==t.textCommentUuid})),r=[].concat(Object(Qe.a)(n),Object(Qe.a)(e.voiceRecordings)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{textComments:n,feed:r})}function at(e,t){var n=[].concat(Object(Qe.a)(e.voiceRecordings),[t.voiceRecording]),r=[].concat(Object(Qe.a)(e.textComments),Object(Qe.a)(n)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{voiceRecordings:n,feed:r})}function ct(e,t){var n=e.voiceRecordings.filter((function(e){return e.uuid!==t.voiceRecordingUuid})),r=[].concat(Object(Qe.a)(e.textComments),Object(Qe.a)(n)).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return Object(i.a)(Object(i.a)({},e),{},{voiceRecordings:n,feed:r})}function ut(e,t){return Object(i.a)(Object(i.a)({},e),{},{userSettings:t.userSettings})}var st=Object(Be.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stream/set":return Xe(e,t.payload);case"stream/play":return ze(e,t.payload);case"stream/pause":return Ye(e,t.payload);case"stream/prevTrack":return Ze(e,t.payload);case"stream/nextTrack":return He(e,t.payload);case"stream/expire":return $e(e);case"queue/listSet":return Ie(e,t.payload);case"queue/deleteNode":return et(e,t);case"queue/deleteChildNode":return tt(e,t);case"textComment/listSet":return Ge(e,t.payload);case"textComment/create":return nt(e,t);case"textComment/delete":return rt(e,t);case"voiceRecording/create":return at(e,t);case"voiceRecording/listSet":return Ke(e,t.payload);case"voiceRecording/delete":return ct(e,t);case"user/get-settings":return ut(e,t);case"marker/create":return Te(e,t.payload);case"marker/delete":return qe(e,t.payload);case"marker/list":return Re(e,t.payload);case"queueInterval/create":return Ve(e,t.payload);case"queueInterval/delete":return Je(e,t.payload);case"player/spotify":return Fe(e,t.payload);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),it=n(9),ot=n(62);var lt=function(){var e=Object(a.useState)("initial"),t=Object(p.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),s=Object(p.a)(u,2),o=s[0],b=s[1],f=Object(a.useState)(!1),x=Object(p.a)(f,2),h=x[0],v=x[1],m=Object(a.useState)(!1),O=Object(p.a)(m,2),k=O[0],y=O[1],g=Object(a.useState)({}),w=Object(p.a)(g,2),U=w[0],_=w[1],P=Object(a.useState)(void 0),N=Object(p.a)(P,2),M=(N[0],N[1]),Q=Object(a.useState)(void 0),B=Object(p.a)(Q,2),T=(B[0],B[1]);Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,n,r,a,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:if(e.sent){e.next=6;break}return c("unauthenticated"),e.abrupt("return");case 6:return c("authenticated"),e.next=9,we();case 9:return t=e.sent,e.next=12,st.dispatch(t.redux);case 12:return e.next=14,Y();case 14:return t=e.sent,e.next=17,st.dispatch(t.redux);case 17:return e.next=19,C();case 19:return n=e.sent,e.next=22,st.dispatch(n.redux);case 22:return e.next=24,S();case 24:return r=e.sent,e.next=27,st.dispatch(r.redux);case 27:return e.next=29,Me();case 29:return a=e.sent,e.next=32,st.dispatch({type:"user/get-settings",userSettings:a.data});case 32:return(u=new ot).setAccessToken(a.data.spotify.accessToken),e.next=36,st.dispatch({type:"player/spotify",payload:{spotifyApi:u}});case 36:c("ready");case 37:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var q=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,r,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=st.getState(),e.next=4,Ue();case 4:if(r=e.sent,!t){e.next=13;break}return e.next=8,st.dispatch(r.redux);case 8:return e.next=10,_({});case 10:return e.next=12,b(!1);case 12:return e.abrupt("return");case 13:_(r.redux),y(!0),X(n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:return t=e.sent,e.next=5,st.dispatch(t.redux);case 5:return e.next=7,_({});case 7:return e.next=9,b(!1);case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a,c,u,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=st.getState(),a=n.stream,"forward"!==t){e.next=11;break}return e.next=5,Ne();case 5:if(400!==e.sent.system.status){e.next=8;break}return e.abrupt("return");case 8:r=a.startedAt-1e4,e.next=17;break;case 11:if("backward"!==t){e.next=17;break}return e.next=14,Pe();case 14:c=new Date,u=c.getTime(),s=a.startedAt+1e4,r=u-s>0?s:u;case 17:return e.next=19,st.dispatch({type:"stream/set",payload:{stream:Object(i.a)(Object(i.a)({},a),{},{startedAt:r})}});case 19:o=Date.now()-r,n.spotifyApi.seek(o),M((function(e){clearTimeout(e)})),T((function(e){clearTimeout(e)})),v(!0);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=st.getState(),e.next=3,Ce();case 3:n=e.sent,st.dispatch(n.redux),M((function(e){clearTimeout(e)})),T((function(e){clearTimeout(e)})),t.spotifyApi.pause();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=st.getState(),e.next=3,Se();case 3:return n=e.sent,e.next=6,st.dispatch(n.redux);case 6:if(o){e.next=8;break}return e.abrupt("return");case 8:t.spotifyApi.play(),v(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.dispatch(U);case 2:return e.next=4,_({});case 4:return e.next=6,v(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=st.getState(),t=e.nextUpQueues,n=t.length?t[0].children.length?t[0].children[0]:t[0]:void 0;e.spotifyApi.queue(n.track.externalId)};return Object(a.useEffect)((function(){var e=st.getState();if(h){v(!1);var t=e.stream.nowPlaying.totalDurationMilliseconds,n=Date.now()-e.stream.startedAt,r=setTimeout((function(){q()}),t-n-5e3);M(r)}}),[h]),Object(a.useEffect)((function(){var e=st.getState();if(k){y(!1);var t=e.stream.nowPlaying.totalDurationMilliseconds,n=Date.now()-e.stream.startedAt,r=setTimeout((function(){E()}),t-n);T(r)}}),[k]),"initial"===n?Object(r.jsx)(D.a,{children:Object(r.jsx)(j.a,{store:st,children:Object(r.jsx)(r.Fragment,{})})}):"unauthenticated"===n?Object(r.jsx)(D.a,{children:Object(r.jsx)(j.a,{store:st,children:Object(r.jsx)("div",{className:"app-main-container",children:Object(r.jsx)("div",{className:"app-main",children:Object(r.jsx)(J,{})})})})}):"authenticated"===n?Object(r.jsx)(D.a,{children:Object(r.jsx)(j.a,{store:st,children:"Loading..."})}):(st.getState().stream.isPlaying&&!o&&function(){var e=st.getState();b(!0);var t=Date.now()-e.stream.startedAt;e.spotifyApi.play({uris:[e.stream.nowPlaying.track.externalId],position_ms:t}),v(!0)}(),Object(r.jsx)(D.a,{children:Object(r.jsxs)(j.a,{store:st,children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/settings",children:"Settings"})}),Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/chat",children:"Chat"})}),Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/player",children:"Player"})}),Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/queue",children:"Queue"})}),Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/search",children:"Search"})}),Object(r.jsx)("li",{children:Object(r.jsx)(D.b,{to:"/upload",children:"Upload"})})]})}),Object(r.jsx)("div",{className:"app-main-container",children:Object(r.jsx)("div",{className:"app-main",children:Object(r.jsxs)(it.c,{children:[Object(r.jsx)(it.a,{path:"/settings",children:Object(r.jsx)(ge,{})}),Object(r.jsx)(it.a,{path:"/chat",children:Object(r.jsx)(F,{})}),Object(r.jsx)(it.a,{path:"/player",children:Object(r.jsx)(ye,{nextTrack:q,prevTrack:R,seek:A,pause:I,play:L})}),Object(r.jsx)(it.a,{path:"/queue",children:Object(r.jsx)(oe,{})}),Object(r.jsx)(it.a,{path:"/search",children:Object(r.jsx)(fe,{})}),Object(r.jsx)(it.a,{path:"/upload",children:Object(r.jsx)(me,{})})]})})})]})}))},dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(lt,{})}),document.getElementById("root")),dt()}},[[63,1,2]]]);
//# sourceMappingURL=main.485b385d.chunk.js.map