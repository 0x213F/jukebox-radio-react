(this["webpackJsonpjukebox-radio"]=this["webpackJsonpjukebox-radio"]||[]).push([[0],{17:function(e,t,n){e.exports={Session:"Session_Session__3G52u",Top:"Session_Top__3uCH7",Content:"Session_Content__3lPl4",PrimaryContent:"Session_PrimaryContent__3yGCf",SecondaryContent:"Session_SecondaryContent__1Uvc2"}},18:function(e,t,n){e.exports={Player:"Player_Player__Xx8fy",Div:"Player_Div__1Mznx",Button:"Player_Button__1lbWu",Image:"Player_Image__1PWwp",MoreNextUp:"Player_MoreNextUp__2_uZ-"}},19:function(e,t,n){e.exports={BottomBar:"BottomBar_BottomBar__3MLzc",Playback:"BottomBar_Playback__3N-qW",PlaybackButton:"BottomBar_PlaybackButton__1axWT",Volume:"BottomBar_Volume__25kUh",VolumeButton:"BottomBar_VolumeButton__26qBR",ExtraControl:"BottomBar_ExtraControl__2zuEs",ExtraControlButton:"BottomBar_ExtraControlButton__3Kvpp"}},193:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),i=n(24),s=n.n(i),u=(n(97),n(2)),o=n.n(u),l=n(4),d=n(6),p=(n(99),"https://prod.jukeboxrad.io"),b="GET",j="POST";function f(){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(o.a.mark((function e(){var t,n,a,r,c,i,s,u,l,b,j,f,x,h,v,O,m,y,k,g,w,C,_,P=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.length>0&&void 0!==P[0]?P[0]:"",n=P.length>1&&void 0!==P[1]?P[1]:"",a=P.length>2&&void 0!==P[2]?P[2]:{},n=p+n,"GET"===t){e.next=16;break}for(c=new FormData,i=0,s=Object.entries(a);i<s.length;i++)u=Object(d.a)(s[i],2),l=u[0],b=u[1],c.append(l,b);return j={headers:{}},(f=localStorage.getItem("accessToken"))&&(j.headers.Authorization="Bearer ".concat(f)),x=new Request(n,j),e.next=13,fetch(x,{method:t,mode:"cors",body:c});case 13:r=e.sent,e.next=26;break;case 16:for(h=new URLSearchParams,v=0,O=Object.entries(a);v<O.length;v++)m=Object(d.a)(O[v],2),y=m[0],k=m[1],h.set(y,k);return g=n+"/?"+h.toString(),w={headers:{"Content-Type":"application/json"}},(C=localStorage.getItem("accessToken"))&&(w.headers.Authorization="Bearer ".concat(C)),_=new Request(g,w),e.next=25,fetch(_,{method:t,mode:"cors"});case 25:r=e.sent;case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment/create/",{text:t,format:n,textCommentUuid:a,textCommentTimestamp:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/comments/text-comment/list",{trackUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/comments/voice-recording/list",{trackUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/auth/obtain-tokens/",{username:t,password:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/initialize/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("accessToken"),e.next=3,f(j,"/auth/verify-token/",{token:t});case 3:if(200===(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/stream/get");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/music/track/get-files",{trackUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/next-track/",{nowPlayingTotalDurationMilliseconds:t,isPlanned:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/pause-track/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/play-track/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/prev-track/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/scan-backward/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/stream/scan-forward/",{nowPlayingTotalDurationMilliseconds:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/queue/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue/delete/",{queueUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){if(!e.nowPlaying)return[void 0,void 0];for(var n,a=Date.now()-t,r=0,c=0;;){var i=e.nowPlaying.playbackIntervals[r],s=i[1]-i[0],u=a-c;if(u<s){a=i[0]+u,n=i[1]-a;break}r+=1,c+=s}return r===e.nowPlaying.playbackIntervals.length-1&&(n=void 0),[a,n]},B=function(e){return(null===e||void 0===e?void 0:e.isPaused)?e.pausedAt-e.startedAt:(null===e||void 0===e?void 0:e.isPlaying)?Date.now()-e.startedAt:void 0},A=function(e){return e>.6?.6:e>.3?.3:e>0?0:1},R="spotify",I="youtube",F="jukebox_radio",D=function(e,t){var n=t.nowPlaying.track.service;if(n===R)e.spotifyApi.pause();else if(n===I)e.youTubeApi.pauseVideo();else if(n===F){var a=t.nowPlaying.track.uuid;e.files[a].audio.pause()}},L=function(e,t){var n=t.nowPlaying.track.service;if(n===R)e.spotifyApi.play();else if(n===I)e.youTubeApi.playVideo();else if(n===F){var a=t.nowPlaying.track.uuid;e.files[a].audio.play()}},q=function(e,t,n){var a=Q(t,n)[0],r=t.nowPlaying.track.service;if(r===R)e.spotifyApi.seek(a);else if(r===I)e.youTubeApi.seekTo(a/1e3),e.youTubeApi.playVideo();else if(r===F){var c=t.nowPlaying.track.uuid,i=e.files[c].audio;i.currentTime=a/1e3,i.play()}},V=n(8),E=n(3),Z=n(43),H="hide",J=function(e){var t=e.stream,n=z(t),a=Object(d.a)(n,3),r=a[0],c=a[1],i=a[2];if(!r)return[];var s=Object(V.a)(e.textComments),u=Object(V.a)(e.voiceRecordings),o=[].concat(Object(V.a)(s),Object(V.a)(u));return o=(o=(o=o.map((function(e){var t=e.timestampMilliseconds>i&&e.timestampMilliseconds<=c,n=e.timestampMilliseconds>c&&e.timestampMilliseconds<=r;return e.renderStatus=t?"history":n?"display":H,Object(E.a)({},e)}))).filter((function(e){return e.renderStatus!==H}))).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}))},z=function(e){var t;if(!(null===e||void 0===e||null===(t=e.nowPlaying)||void 0===t?void 0:t.track))return[void 0,void 0,void 0];for(var n=e.startedAt,a=e.isPlaying?Date.now()-n:e.pausedAt-n,r=0,c=0,i=0,s=0;;){var u=e.nowPlaying.playbackIntervals[r],o=u[1]-u[0],l=void 0;if((l=a-3e4-s)>=0&&l<o&&(c=u[0]+l),(l=a-3e4-45e3-s)>=0&&l<o&&(i=u[0]+l),(l=a-s)<o){a=u[0]+l;break}r+=1,s+=o}return[a,c,i]},W=function(e){return Object(E.a)(Object(E.a)({},e),{},{feed:J(e)})},X=function(e,t){var n=Object(E.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=[].concat(Object(V.a)(n[a]),[r]).sort((function(e,t){return e.timestampMilliseconds-t.timestampMilliseconds}));return n[a]=c,Object(E.a)(Object(E.a)({},e),{},{trackMarkerMap:n})},Y=function(e,t){var n=Object(E.a)({},e.trackMarkerMap),a=t.queueUuid,r=t.marker,c=n[t.queueUuid].filter((function(e){return e.uuid!==r.uuid}));return n[a]=c,Object(E.a)(Object(E.a)({},e),{},{trackMarkerMap:n})},G=function(e,t){var n=t.queueUuid,a=t.markers,r=Object(E.a)({},e.trackMarkerMap);return r[n]=a,Object(E.a)(Object(E.a)({},e),{},{trackMarkerMap:r})},K=n(31),$=function(e){return e[e.length-1]},ee=function(e){return e.length?e[0].children.length?e[0].children[0]:e[0]:void 0},te=function(e,t){var n=function(e){var t=0;if(e.children.length){var n,a=Object(K.a)(e.children);try{for(a.s();!(n=a.n()).done;){t+=n.value.totalDurationMilliseconds}}catch(r){a.e(r)}finally{a.f()}}else t+=e.totalDurationMilliseconds;return t},a=B(t),r=0;return a&&(r=t.nowPlaying.totalDurationMilliseconds-a),e.length?1===e.length?r+n(e[0]):r+e.reduce((function(e,t){return"number"!==typeof e&&(e=n(e)),e+n(t)})):r+0},ne=function e(t){var n,a=Object(E.a)({},t);if(a.children.length){var r=a.children.map(e),c=r.reduce((function(e,t){return e+t.durationMilliseconds}),0);return a.children=r,a.totalDurationMilliseconds=c,a}var i=a.intervals,s=null===(n=a.track)||void 0===n?void 0:n.durationMilliseconds;if(!i.length)return a.totalDurationMilliseconds=s,a.playbackIntervals=[[0,s]],a;var u,o,l,d=[],p=Object(K.a)(i);try{for(p.s();!(l=p.n()).done;){var b=l.value;if(b.lowerBound){if(b.upperBound){u||(u=0),o=b.lowerBound.timestampMilliseconds,d.push([u,o]),u=b.upperBound.timestampMilliseconds,o=void 0;continue}u||(u=0),o=b.lowerBound.timestampMilliseconds,d.push([u,o]),u=void 0;break}u=b.upperBound.timestampMilliseconds}}catch(f){p.e(f)}finally{p.f()}u&&(o=s,d.push([u,o]));var j=d.reduce((function(e,t){return e+(t[1]-t[0])}),0);return a.totalDurationMilliseconds=j,a.playbackIntervals=d,a},ae=function(e,t){var n=t.lastUpQueues.map(ne),a=t.nextUpQueues.map(ne),r=e._lastPlayed;r&&n.push(r);var c=e.stream;c.isPlaying||c.isPaused||!c.nowPlaying||(n.push(c.nowPlaying),c=Object(E.a)(Object(E.a)({},c),{},{nowPlaying:void 0}));var i=n.length?n[n.length-1]:void 0,s=a.length?a[0].children.length?a[0].children[0]:a[0]:void 0;return Object(E.a)(Object(E.a)({},e),{},{stream:c,lastUp:i,lastUpQueues:n,nextUp:s,nextUpQueues:a})},re=function(e,t){var n=t.stream,a=n.nowPlaying,r=Object(E.a)({},e);if(a&&(n.nowPlaying=ne(a)),r.stream=n,n.isPlaying||n.isPaused||!n.nowPlaying){if(n.isPlaying){var c=Date.now()-n.startedAt;c&&c>=n.nowPlaying.totalDurationMilliseconds&&(r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1)}}else r.lastUp=n.nowPlaying,r._lastPlayed=n.nowPlaying,r.stream.nowPlaying=void 0,r.stream.isPlaying=!1,r.stream.isPaused=!1;return r},ce=function(e,t){var n={stream:Object(E.a)(Object(E.a)({},e.stream),{},{isPlaying:!0,isPaused:!1,startedAt:t.startedAt})};return re(e,n)},ie=function(e,t){var n={stream:Object(E.a)(Object(E.a)({},e.stream),{},{isPlaying:!1,isPaused:!0,pausedAt:t.pausedAt})};return re(e,n)},se=function(e,t){var n=Object(V.a)(e.lastUpQueues),a=Object(V.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],i=n[n.length-1],s=(null===r||void 0===r?void 0:r.parentUuid)&&(null===c||void 0===c?void 0:c.uuid)&&(null===r||void 0===r?void 0:r.parentUuid)===(null===c||void 0===c?void 0:c.uuid);return r&&(s?c.children.unshift(r):a.unshift(r)),n.pop(),Object(E.a)(Object(E.a)({},e),{},{stream:Object(E.a)(Object(E.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:i,isPlaying:!0,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:void 0})},ue=function(e,t){var n=Object(V.a)(e.lastUpQueues),a=Object(V.a)(e.nextUpQueues),r=e.stream.nowPlaying,c=a[0],i=c?c.children.length?c.children[0]:c:void 0;return r&&n.push(r),c&&(c.children.length?(c.children.shift(),c.children.length||a.shift()):a.shift()),Object(E.a)(Object(E.a)({},e),{},{stream:Object(E.a)(Object(E.a)({},e.stream),{},{startedAt:t.startedAt,nowPlaying:i,isPlaying:!!i,isPaused:!1}),lastUpQueues:n,nextUpQueues:a,_lastPlayed:r})},oe=function(e,t){return Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},e.playback),{},{spotifyApi:t.spotifyApi,isReady:!0})})},le=function(e,t){return Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},e.playback),{},{youTubeApi:t.youTubeApi})})},de=function(e){var t=ee(e.nextUpQueues);if(!t)return Object(E.a)({},e);var n=Object(E.a)({},e.playback),a=e.stream.nowPlaying,r=a.track.service===R&&t.track.service===R&&0===t.playbackIntervals[0][0],c=t.track.service===F;if(r){!function(e,t,n){t.nowPlaying.track.service===R&&e.spotifyApi.queue(n.track.externalId)}(e.playback,e.stream,t),n.queuedUp=!0;var i=a.playbackIntervals;i[i.length-1][1]===a.track.durationMilliseconds&&(n.noopNextTrack=!0)}else c&&w(t.track.uuid).then((function(e){qe.dispatch(e.redux)}));return Object(E.a)(Object(E.a)({},e),{},{playback:n})},pe=function(e){var t=ee(e.nextUpQueues),n=e.playback.queuedUp,a=e.playback.noopNextTrack,r=e.playback.addToQueueTimeoutId,c=e.playback.nextSeekTimeoutId,i=Object(E.a)(Object(E.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1});return!t||a?(i.addToQueueTimeoutId=void 0,Object(E.a)(Object(E.a)({},e),{},{playback:i})):n?(function(e,t){t.nowPlaying.track.service===R&&e.spotifyApi.skipToNext()}(e.playback,e.stream),i.addToQueueTimeoutId=void 0,Object(E.a)(Object(E.a)({},e),{},{playback:i})):(clearTimeout(r),clearTimeout(c),i.isPlaying=!1,i.addToQueueTimeoutId=void 0,i.nextSeekTimeoutId=void 0,Object(E.a)(Object(E.a)({},e),{},{playback:i}))},be=function(e,t){var n=e;n=pe(n);var a=t.payload,r=n.stream.nowPlaying;return a.startedAt=n.stream.startedAt+r.totalDurationMilliseconds,n=ue(n,a)},je=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(E.a)(Object(E.a)({},e.playback),{},{queuedUp:!1,noopNextTrack:!1,isPlaying:!1,addToQueueTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(E.a)(Object(E.a)({},e),{},{playback:a})},fe=function(e){var t=Object(E.a)(Object(E.a)({},e.playback),{},{isPlaying:!0});return Object(E.a)(Object(E.a)({},e),{},{playback:t})},xe=function(e){var t=e.playback.addToQueueTimeoutId,n=e.playback.nextSeekTimeoutId,a=Object(E.a)(Object(E.a)({},e.playback),{},{addToQueueTimeoutId:void 0,nextSeekTimeoutId:void 0});return clearTimeout(t),clearTimeout(n),Object(E.a)(Object(E.a)({},e),{},{playback:a})},he=function(e,t){var n=Object(E.a)(Object(E.a)({},e.playback),{},{addToQueueTimeoutId:t.addToQueueTimeoutId});return Object(E.a)(Object(E.a)({},e),{},{playback:n})},ve=function(e,t){var n=e.playback.nextSeekTimeoutId,a=Object(E.a)(Object(E.a)({},e.playback),{},{nextSeekTimeoutId:t.nextSeekTimeoutId});return clearTimeout(n),Object(E.a)(Object(E.a)({},e),{},{playback:a})},Oe=function(e){return Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},e.playback),{},{controlsEnabled:!1})})},me=function(e){return Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},e.playback),{},{controlsEnabled:!0})})},ye=function(e,t){var n=Object(E.a)({},e.playback),a=Object(E.a)({},e.playback.files),r=new Audio(t.track.audioUrl);return a[t.track.uuid]={audio:r},Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},n),{},{files:a})})},ke=function(e){var t=Object(E.a)({},e.playback.volumeLevel),n=t.audio;return t.audio=A(n),Object(E.a)(Object(E.a)({},e),{},{playback:Object(E.a)(Object(E.a)({},e.playback),{},{volumeLevel:t})})},ge=function(e){return function(t){return t.uuid===e}},we=function(e,t){return t.upperBound?e.upperBound?e.upperBound.timestampMilliseconds-e.upperBound.timestampMilliseconds:1:-1},Ce=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,i=e.nextUpQueues,s=-1;c&&(s=i.findIndex(ge(c)),i=i[s].children),n=i.findIndex(ge(r));var u=i[n],o=[].concat(Object(V.a)(u.intervals),[a]).sort(we),l=Object(V.a)(e.nextUpQueues);-1!==s?l[s].children[n].intervals=o:l[n].intervals=o;var d=l.map(ne);return Object(E.a)(Object(E.a)({},e),{},{nextUpQueues:d})},_e=function(e,t){var n,a=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,i=e.nextUpQueues,s=-1;c&&(s=i.findIndex(ge(c)),i=i[s].children),n=i.findIndex(ge(r));var u,o=i[n],l=Object(V.a)(o.intervals).filter((u=a.uuid,function(e){return e.uuid!==u})),d=Object(V.a)(e.nextUpQueues);-1!==s?d[s].children[n].intervals=l:d[n].intervals=l;var p=d.map(ne);return Object(E.a)(Object(E.a)({},e),{},{nextUpQueues:p})},Pe=function(e,t){var n=t.textComments,a=Object(E.a)(Object(E.a)({},e),{},{textComments:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Se=function(e,t){var n=[].concat(Object(V.a)(e.textComments),[t.textComment]),a=Object(E.a)(Object(E.a)({},e),{},{textComments:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Te=function(e,t){var n=e.textComments.filter((function(e){return e.uuid!==t.textCommentUuid})),a=Object(E.a)(Object(E.a)({},e),{},{textComments:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Me=function(e,t){var n=t.textCommentModification,a=t.textCommentUuid,r=Object(V.a)(e.textComments),c=r.findIndex((function(e){return e.uuid===a})),i=r[c],s=Object(V.a)(i.modifications);s.push(n);var u=s.sort((function(e,t){return e.startPtr-t.startPtr}));return r[c].modifications=u,Object(E.a)(Object(E.a)({},e),{},{textComments:r})},Ue=function(e,t){var n=t.voiceRecordings,a=Object(E.a)(Object(E.a)({},e),{},{voiceRecordings:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Ne=function(e,t){var n=[].concat(Object(V.a)(e.voiceRecordings),[t.voiceRecording]),a=Object(E.a)(Object(E.a)({},e),{},{voiceRecordings:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Qe=function(e,t){var n=e.voiceRecordings.filter((function(e){return e.uuid!==t.voiceRecordingUuid})),a=Object(E.a)(Object(E.a)({},e),{},{voiceRecordings:n});return Object(E.a)(Object(E.a)({},a),{},{feed:J(a)})},Be=function(e,t){return Object(E.a)(Object(E.a)({},e),{},{userSettings:Object(E.a)(Object(E.a)({},e.userSettings),t)})},Ae={nextUpQueues:[],lastUpQueues:[],_lastPlayed:void 0,textComments:[],voiceRecordings:[],feed:[],userSettings:void 0,trackMarkerMap:{},playback:{controlsEnabled:!1,spotifyApi:void 0,youTubeApi:void 0,isPlaying:!1,addToQueueTimeoutId:void 0,isReady:!1,files:{},volumeLevel:{audio:1,voice:1}}};function Re(e,t){var n=Object(E.a)({},e.stream),a=n.nowPlaying;return n.isPlaying=!1,n.isPaused=!1,n.nowPlaying=void 0,Object(E.a)(Object(E.a)({},e),{},{stream:n,_lastPlayed:a})}function Ie(e,t){var n=e.nextUpQueues.filter((function(e){return e.uuid!==t.queueUuid}));return Object(E.a)(Object(E.a)({},e),{},{nextUpQueues:n})}function Fe(e,t){var n=Object(V.a)(e.nextUpQueues),a=n.findIndex((function(e){return e.uuid===t.parentUuid})),r=n[a].children.filter((function(e){return e.uuid!==t.queueUuid}));return n[a].children=r,r.length||(n=n.filter((function(e){return e.uuid!==t.parentUuid}))),Object(E.a)(Object(E.a)({},e),{},{nextUpQueues:n})}function De(e,t){var n=e.textComments.findIndex((function(e){return e.uuid===t.textCommentUuid})),a=Object(V.a)(e.textComments);return a[n].modifications=[],Object(E.a)(Object(E.a)({},e),{},{textComments:a})}function Le(e,t){return Object(E.a)(Object(E.a)({},e),{},{userSettings:t.userSettings})}var qe=Object(Z.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stream/set":return re(e,t.payload);case"stream/play":return ce(e,t.payload);case"stream/pause":return ie(e,t.payload);case"stream/prevTrack":return se(e,t.payload);case"stream/nextTrack":return ue(e,t.payload);case"stream/expire":return Re(e);case"queue/listSet":return ae(e,t.payload);case"queue/deleteNode":return Ie(e,t);case"queue/deleteChildNode":return Fe(e,t);case"textComment/listSet":return Pe(e,t.payload);case"textComment/create":return Se(e,t);case"textComment/delete":return Te(e,t);case"textCommentModification/create":return Me(e,t.payload);case"textComment/clearModifications":return De(e,t);case"voiceRecording/create":return Ne(e,t);case"voiceRecording/listSet":return Ue(e,t.payload);case"voiceRecording/delete":return Qe(e,t);case"user/get-settings":return Le(e,t);case"marker/create":return X(e,t.payload);case"marker/delete":return Y(e,t.payload);case"marker/list":return G(e,t.payload);case"queueInterval/create":return Ce(e,t.payload);case"queueInterval/delete":return _e(e,t.payload);case"playback/disable":return Oe(e);case"playback/enable":return me(e);case"playback/spotify":return oe(e,t.payload);case"playback/youTube":return le(e,t.payload);case"playback/addToQueue":return de(e);case"playback/plannedNextTrack":return be(e,t.payload);case"playback/start":return je(e);case"playback/started":return fe(e);case"playback/addToQueueReschedule":return xe(e);case"playback/addToQueueScheduled":return he(e,t.payload);case"playback/nextSeekScheduled":return ve(e,t.payload);case"userSettings/update":return Be(e,t.payload);case"playback/loadFiles":return ye(e,t.payload);case"playback/cycleVolumeLevelAudio":return ke(e);case"feed/update":return W(e);default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0})),Ve=n(10),Ee=n(32),Ze=n.n(Ee);var He=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),p=u[0],b=u[1],j=Object(r.useState)(!1),f=Object(d.a)(j,2),x=f[0],h=f[1],v=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(c,p);case 3:if((n=e.sent).access&&n.refresh){e.next=6;break}return e.abrupt("return");case 6:return localStorage.setItem("accessToken",n.access),localStorage.setItem("refreshToken",n.refresh),e.next=10,y();case 10:window.location.href="/app/search";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("form",{className:Ze.a.Login,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("h3",{children:"Sign in"}),Object(a.jsx)("p",{children:"Contact a system administrator for login information."}),Object(a.jsx)("p",{children:"At this time, new registrations are on a case by case basis."}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:["Username\xa0\xa0",Object(a.jsx)("input",{type:"text",name:"username",placeholder:"username",value:c,onChange:function(e){i(e.target.value)}})]}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:["Password\xa0\xa0",Object(a.jsx)("input",{type:"password",name:"password",placeholder:"password",value:p,onChange:function(e){b(e.target.value)}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:Ze.a.FormBlock,children:[Object(a.jsx)("input",{type:"checkbox",name:"remember-me",value:x,onChange:function(e){h(e.target.value)}}),"Remember Me"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:Ze.a.FormBlock,children:[Object(a.jsx)("button",{type:"submit",children:"Sign In"}),Object(a.jsxs)("span",{children:["\xa0\xa0",Object(a.jsx)(Ve.b,{to:"/forgotpassword",children:"Forgot Password?"})]})]})]})},Je=n(7),ze=n(73),We=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/users/user/get-settings");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/users/user/update-settings/",{field:t,value:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=n(11),Ge=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/users/user/connect-spotify/",{code:t,error:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var Ke=function(e){return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.search,n=new URLSearchParams(t),a=n.get("code"),r=n.get("error"),e.next=3,Ge(a,r);case 3:window.location.href="../app/search";case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.jsx)("p",{children:"Redirecting..."})},$e=n(17),et=n.n($e),tt=n(25),nt=n.n(tt),at=n(76),rt=n.n(at),ct=n(38),it=n.n(ct),st=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/voice-recording/create/",{audioFile:t,transcriptData:n,transcriptFinal:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ut=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/voice-recording/delete/",{voiceRecordingUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=n(77),lt=n(82),dt=n.n(lt),pt="bold",bt="italicize",jt="strikethrough",ft=[pt,bt,jt],xt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r){var c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment-modification/create/",{textCommentUuid:t,style:n,anchorOffset:a,focusOffset:r});case 2:return c=e.sent,e.next=5,c.json();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var ht=Object(Je.b)((function(e){return{}}))((function(e){var t=e.textColor,n=Object(r.useRef)(null),c=Object(r.useState)(!0),i=Object(d.a)(c,2),s=i[0],u=i[1],p=Object(r.useState)(null),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)(null),h=Object(d.a)(x,2),v=h[0],O=h[1],m=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data.uuid,t.next=3,xt(a,n,j,v);case 3:r=t.sent,e.dispatch(r.redux),u(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=window.getSelection()).anchorNode===t.focusNode){e.next=6;break}return u(!1),f(null),O(null),e.abrupt("return");case 6:n=parseInt(t.anchorNode.parentNode.getAttribute("offset")),u(!0),f(n+t.anchorOffset),O(n+t.focusOffset);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),f(null),O(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:dt.a.NotableText,style:{color:t},children:[Object(a.jsx)("p",{ref:n,children:function(){for(var t=e.data,n=t.text,r=t.modifications,c=0,i=Object(a.jsx)(a.Fragment,{}),s=0;s<r.length;s++){var u=r[s],o=n.substring(c,u.startPtr),l=n.substring(u.startPtr,u.endPtr);i=Object(a.jsxs)(a.Fragment,{children:[i,Object(a.jsx)("span",{offset:c,children:o}),u.type===pt&&Object(a.jsx)("b",{children:Object(a.jsx)("span",{children:l})}),u.type===bt&&Object(a.jsx)("i",{children:Object(a.jsx)("span",{children:l})}),u.type===jt&&Object(a.jsx)("strike",{children:Object(a.jsx)("span",{children:l})})]}),c=u.endPtr}var d=n.substring(c,n.length);return i=Object(a.jsxs)(a.Fragment,{children:[i,Object(a.jsx)("span",{offset:c,children:d})]})}()}),Object(a.jsx)(ot.a,{selectionRef:n,onTextSelect:y,onTextUnselect:k,isOpen:s,children:ft.map((function(e,t){return Object(a.jsx)("button",{type:"button",onClick:Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)}))),children:e},t)}))})]})})),vt=n(83),Ot=n.n(vt),mt=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment/delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yt=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/comments/text-comment-modification/list-delete/",{textCommentUuid:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var kt=Object(Je.b)((function(e){return{}}))((function(e){var t,n=e.data,r=n.uuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt(r);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt(r);case 2:return t.next=4,e.dispatch({type:"textComment/clearModifications",textCommentUuid:r});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t="history"===n.renderStatus?"grey":"display"===n.renderStatus?"black":"red",Object(a.jsxs)("div",{className:Ot.a.TextComment,children:[Object(a.jsx)(ht,{data:n,textColor:t}),Object(a.jsx)("button",{type:"button",onClick:i,children:"Clear modifications"}),Object(a.jsx)("button",{type:"button",onClick:c,children:"Delete"})]})})),gt=n(84),wt=n(85),Ct=n.n(wt);var _t=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt(n);case 2:return t.next=4,e.dispatch({type:"textComment/delete",textCommentUuid:n});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:Ct.a.ABCNotation,children:[Object(a.jsx)(gt.Notation,{notation:t.text,engraverParams:{staffwidth:278}}),Object(a.jsx)("button",{type:"button",onClick:r,children:"Delete"})]})})),Pt=n(86),St=n.n(Pt);var Tt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.uuid,r=function(){var t=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(n);case 2:e.dispatch({type:"voiceRecording/delete",voiceRecordingUuid:n});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:St.a.VoiceRecording,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"null"===t.transcriptFinal?"<transcript not available>":t.transcriptFinal})}),Object(a.jsx)("button",{type:"submit",onClick:r,children:"Delete"})]})}));var Mt=Object(Je.b)((function(e){return{stream:e.stream,textComments:e.textComments,voiceRecordings:e.voiceRecordings,feed:e.feed}}))((function(e){var t=e.feed,n=e.stream,c=Object(r.useState)(""),i=Object(d.a)(c,2),s=i[0],u=i[1],p=Object(r.useState)(void 0),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)(void 0),v=Object(d.a)(x,2),O=v[0],m=v[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),g=k[0],w=k[1],C=Object(r.useState)(!1),_=Object(d.a)(C,2),P=_[0],S=_[1],T=Object(r.useState)(new rt.a({bitRate:320})),M=Object(d.a)(T,1)[0],U=Object(r.useState)([]),N=Object(d.a)(U,1)[0];Object(r.useEffect)((function(){var t=setInterval((function(){e.dispatch({type:"feed/update"})}),50);return function(){clearInterval(t)}}),[]);var Q=function(e){if(!j){var t=z(n)[0];m(t),f(n.nowPlaying.track.uuid)}u(e.target.value)},B=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=g?"abc_notation":"text",t.next=4,h(s,a,j,O);case 4:return r=t.sent,t.next=7,e.dispatch({type:"textComment/create",textComment:r.data});case 7:m(void 0),f(void 0),u("");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=Object(tt.useSpeechRecognition)(),R=A.transcript,I=A.resetTranscript;return Object(a.jsxs)("div",{className:it.a.FeedApp,children:[Object(a.jsx)("div",{className:it.a.Feed,children:Object(a.jsx)("div",{className:it.a.FeedWrapper,children:t.map((function(e,t){if("TextComment"===e.class){if("text"===e.format)return Object(a.jsx)(kt,{data:e},t);if("abc_notation"===e.format)return Object(a.jsx)(_t,{data:e},t)}else if("VoiceRecording"===e.class)return Object(a.jsx)(Tt,{data:e},t);return Object(a.jsx)(a.Fragment,{})}))})}),Object(a.jsxs)("form",{className:it.a.CreateTextComment,onSubmit:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(a.jsx)("input",{type:"checkbox",value:g,onChange:function(e){w(e.target.checked)}}),Object(a.jsx)("button",{type:"button",onClick:function(){P?(nt.a.browserSupportsSpeechRecognition()&&nt.a.stopListening(),M.stop().getMp3().then((function(t){var n=Object(d.a)(t,2),a=n[0],r=n[1];Object(l.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new File(a,"voice.mp3",{type:r.type,lastModified:Date.now()}),t.next=3,st(n,JSON.stringify(N),R);case 3:return c=t.sent,t.next=6,e.dispatch({type:"voiceRecording/create",voiceRecording:c.data});case 6:nt.a.browserSupportsSpeechRecognition()&&I();case 7:case"end":return t.stop()}}),t)})))()})),S(!1)):(nt.a.browserSupportsSpeechRecognition()&&nt.a.startListening({continuous:!0}),M.start(),S(!0))},disabled:!n.isPlaying,children:"Record"}),g?Object(a.jsx)("textarea",{type:"text",name:"text",placeholder:"text",value:s,onChange:Q,disabled:!n.isPlaying}):Object(a.jsx)("input",{type:"text",name:"text",placeholder:"text",value:s,onChange:Q,disabled:!n.isPlaying}),Object(a.jsx)("button",{type:"submit",disabled:!n.isPlaying,children:"Send"})]})]})})),Ut=n(87),Nt=n.n(Ut);var Qt=function(e){return Object(a.jsx)("div",{className:Nt.a.MiniFeed,children:Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Feed..."})})})},Bt=n(56),At=n.n(Bt),Rt=n(26),It=n.n(Rt),Ft=n(30),Dt=n.n(Ft),Lt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/marker/create/",{trackUuid:t,timestampMilliseconds:n,queueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),qt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/marker/delete/",{markerUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/streams/marker/list",{trackUuid:t,queueUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Et=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,i){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue-interval/create/",{queueUuid:t,lowerBoundMarkerUuid:n,upperBoundMarkerUuid:a,isMuted:r,repeatCount:c,parentQueueUuid:i});case 2:return s=e.sent,e.next=5,s.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,i){return e.apply(this,arguments)}}(),Zt=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue-interval/delete/",{queueIntervalUuid:t,queueUuid:n,parentQueueUuid:a});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();var Ht=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.queueInterval,r=t.queueUuid,c=t.parentQueueUuid,i=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt(n.uuid,r,c);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=n.lowerBound?n.lowerBound.timestampMilliseconds/1e3:"beginning",u=n.upperBound?n.upperBound.timestampMilliseconds/1e3:"end";return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s," =>",u,"(",n.isMuted?"muted":"played",")"]}),Object(a.jsx)("button",{onClick:i,children:"Delete"})]})}));var Jt=Object(Je.b)((function(e){return{}}))((function(e){var t=e.data,n=t.trackMarker,r=t.queueUuid,c=function(){var t=Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qt(n.uuid,r);case 2:return a=t.sent,t.next=5,e.dispatch(a.redux);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:["@ ",n.timestampMilliseconds/1e3]}),Object(a.jsx)("button",{onClick:c,children:"Delete"})]})}));var zt=Object(Je.b)((function(e){return{trackMarkerMap:e.trackMarkerMap}}))((function(e){var t=e.data,n=t.uuid,c=t.parentUuid,i=e.shouldOpenModal,s=e.setShouldOpenModal,u=e.isOpen,p=e.openModal,b=e.closeModal,j=e.trackMarkerMap[n]||[],f=Object(r.useState)(""),x=Object(d.a)(f,2),h=x[0],v=x[1],O=Object(r.useState)("null"),m=Object(d.a)(O,2),y=m[0],k=m[1],g=Object(r.useState)("null"),w=Object(d.a)(g,2),C=w[0],_=w[1],P=function(){var a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Lt(t.track.uuid,h,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:v("");case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),S=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Et(t.uuid,y,C,!0,null,c);case 2:return a=n.sent,n.next=5,e.dispatch(a.redux);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.useEffect)((function(){function a(){return(a=Object(l.a)(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Vt(t.track.uuid,n);case 2:return r=a.sent,a.next=5,e.dispatch(r.redux);case 5:p();case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}i&&(s(!1),function(){a.apply(this,arguments)}())}),[i]),Object(a.jsxs)(Dt.a,{isOpen:u,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:b,children:"Close"}),Object(a.jsx)("p",{children:"Markers"}),j.map((function(e,t){return Object(a.jsx)(Jt,{data:{trackMarker:e,queueUuid:n}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"text",name:"timestampMilliseconds",placeholder:"timestamp",value:h,onChange:function(e){v(e.target.value)}}),Object(a.jsx)("button",{onClick:P,children:"Create Marker"})]}),Object(a.jsx)("p",{children:"Intervals"}),t.intervals.map((function(e,t){return Object(a.jsx)(Ht,{data:{queueInterval:e,queueUuid:n,parentQueueUuid:c}},t)})),Object(a.jsxs)("div",{children:[Object(a.jsxs)("select",{value:y,onChange:function(e){k(e.target.value)},children:[Object(a.jsx)("option",{value:"null",children:"Beginning"}),j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)}))]}),Object(a.jsxs)("select",{value:C,onChange:function(e){_(e.target.value)},children:[j.map((function(e,t){return Object(a.jsxs)("option",{value:e.uuid,children:["@ ",e.timestampMilliseconds]},t)})),Object(a.jsx)("option",{value:"null",children:"End"})]}),Object(a.jsx)("button",{onClick:S,children:"Mute Interval"})]})]})})),Wt=n(44),Xt=n.n(Wt);var Yt=Object(Je.b)((function(e){return{stream:e.stream,lastUp:e.lastUp}}))((function(e){var t,n=e.data,c=e.stream,i=e.lastUp,s=Object(r.useState)(!1),u=Object(d.a)(s,2),p=u[0],b=u[1],j=Object(r.useState)(!1),f=Object(d.a)(j,2),x=f[0],h=f[1],v=(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.index)||(null===i||void 0===i?void 0:i.index),O=!v||v<n.index,m=n.parentUuid&&O?"-":"";return Object(a.jsxs)("div",{className:Xt.a.QueueTrack,children:[Object(a.jsxs)("span",{children:[m,n.track.name]}),O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:Xt.a.Button,type:"button",onClick:function(){h(!0)},children:"Edit"}),Object(a.jsx)("button",{className:Xt.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"})]}),Object(a.jsx)(zt,{data:n,isOpen:p,shouldOpenModal:x,setShouldOpenModal:h,openModal:function(){b(!0)},closeModal:function(){b(!1)}})]})}));var Gt=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n=e.data,c=e.stream,i=e.lastUpQueues,s=i[i.length-1],u=n.uuid,p=(null===c||void 0===c?void 0:c.nowPlaying)&&(null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t?void 0:t.parentUuid)===u||!(null===c||void 0===c?void 0:c.nowPlaying)&&(null===s||void 0===s?void 0:s.parentUuid)&&(null===s||void 0===s?void 0:s.parentUuid)===u,b=Object(r.useState)(p),j=Object(d.a)(b,2),f=j[0],x=j[1],h=function(e){x(!f)};return Object(a.jsxs)("div",{className:It.a.QueueCollection,children:[Object(a.jsxs)("div",{className:It.a.Item,children:[Object(a.jsx)("span",{children:Object(a.jsx)("i",{children:n.collection.name})}),"\xa0\xa0",n.children.length>0&&!f&&Object(a.jsx)("button",{className:It.a.Button,type:"button",onClick:h,children:"More"}),"\xa0\xa0",n.children.length>0&&f&&Object(a.jsx)("button",{className:It.a.Button,type:"button",onClick:h,children:"Less"}),"\xa0\xa0",!p&&Object(a.jsx)("button",{className:It.a.Button,type:"button",onClick:function(){var t=Object(l.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.destroy(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Delete"})]}),n.children.length>0&&f&&Object(a.jsx)("div",{className:It.a.Children,children:n.children.map((function(t,n){return Object(a.jsx)(Yt,{data:t,destroy:e.destroy},n)}))})]})})),Kt=n(198);var $t=Object(Je.b)((function(e){return{stream:e.stream,nextUpQueues:e.nextUpQueues,lastUpQueues:e.lastUpQueues}}))((function(e){var t,n,r=e.nextUpQueues,c=e.stream,i=null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.name,s=te(r,c),u=new Date(Date.now()+s),d=function(){var t=Object(l.a)(o.a.mark((function t(n){var a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.uuid,t.next=3,N(a);case 3:(r=n.parentUuid)?e.dispatch({type:"queue/deleteChildNode",parentUuid:r,queueUuid:a}):e.dispatch({type:"queue/deleteNode",queueUuid:a});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:At.a.QueueApp,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Last up..."})}),Object(a.jsx)("div",{children:e.lastUpQueues.map((function(e,t){return e.track?Object(a.jsx)(Yt,{data:e,destroy:function(){}},t):Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Now playing..."})}),i?Object(a.jsx)("p",{children:i}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Nothing is playing..."})})]}),Object(a.jsx)("h2",{children:Object(a.jsx)("i",{children:"Next up..."})}),Object(a.jsxs)("div",{children:[r.map((function(e,t){return e.collection?Object(a.jsx)(Gt,{data:e,destroy:d},e.uuid):e.track?Object(a.jsx)(Yt,{data:e,destroy:d},e.uuid):Object(a.jsx)(a.Fragment,{})})),s?Object(a.jsx)("p",{children:Object(a.jsxs)("i",{children:["Playback will end\xa0",Object(a.jsx)(Kt.a,{future:!0,date:u,locale:"en-US"})]})}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"There is nothing in the queue."})}),Object(a.jsx)(Ve.b,{to:"/app/search",children:Object(a.jsx)("button",{className:At.a.AddToQueue,children:"Add to Queue"})})]})]})})),en=n(58),tn=n.n(en);var nn=Object(Je.b)((function(e){return{nextUpQueues:e.nextUpQueues,stream:e.stream}}))((function(e){var t,n,r=e.nextUpQueues,c=e.stream;r.length?(t=function(e){if(e.length){var t,n=[],a=Object(K.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.children.length){var c,i=Object(K.a)(r.children);try{for(i.s();!(c=i.n()).done;){var s=c.value;n.push(s)}}catch(u){i.e(u)}finally{i.f()}}else n.push(r)}}catch(u){a.e(u)}finally{a.f()}return n}}([r[0]]),n=[].concat(Object(V.a)(t),Object(V.a)(r.slice(1)))):n=[];var i=te(r,c),s=new Date(Date.now()+i);return Object(a.jsxs)("div",{className:tn.a.MiniQueue,children:[Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Next up..."})}),i?Object(a.jsx)("p",{children:Object(a.jsxs)("i",{children:["Playback will end\xa0",Object(a.jsx)(Kt.a,{future:!0,date:s,locale:"en-US"})]})}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"There is nothing in the queue."})}),Object(a.jsx)("div",{children:n.map((function(e,t){var n,r;return Object(a.jsx)("div",{className:tn.a.MiniQueueItem,children:(null===(n=e.track)||void 0===n?void 0:n.name)||(null===(r=e.collection)||void 0===r?void 0:r.name)})}))})]})})),an=n(27),rn=n.n(an),cn=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c,i,s,u){var l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,"/music/search",{query:t,providerSpotify:n,providerYouTube:a,providerJukeboxRadio:r,formatTrack:c,formatAlbum:i,formatPlaylist:s,formatVideo:u});case 2:return l=e.sent,e.next=5,l.json();case 5:return d=e.sent,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,i,s,u){return e.apply(this,arguments)}}(),sn=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/streams/queue/create/",{className:t,genericUuid:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),un=n(34),on=n.n(un),ln=Object(a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z",fill:"currentColor"})});var dn=function(e){var t=e.data,n=e.addToQueue,c=Object(r.useState)(!1),i=Object(d.a)(c,2),s=i[0],u=i[1],p=Object(r.useState)(!1),b=Object(d.a)(p,2),j=b[0],f=b[1],x=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n(t.class,t.uuid);case 3:f(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:on.a.SearchResult,children:[Object(a.jsxs)("span",{children:[t.provider," ",t.format," ",t.name,"\xa0\xa0\xa0\xa0\xa0"]}),!s&&!j&&Object(a.jsx)("button",{type:"button",className:on.a.Button,onClick:x,disabled:!1,children:"Add"}),s&&!j&&Object(a.jsx)("button",{type:"button",className:on.a.Button,disabled:!0,children:Object(a.jsx)("i",{className:on.a.ggSpinner})}),j&&Object(a.jsx)("button",{type:"button",className:on.a.Button,disabled:!0,children:ln})]})},pn=n(21),bn=n.n(pn),jn=function(){var e=Object(l.a)(o.a.mark((function e(t,n,a,r,c){var i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(j,"/music/track/create/",{audioFile:t,imageFile:n,trackName:a,artistName:r,albumName:c});case 2:return i=e.sent,e.next=5,i.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}();var fn=function(e){var t=Object(r.useState)(0),n=Object(d.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(!1),u=Object(d.a)(s,2),p=u[0],b=u[1],j=Object(r.useState)(""),f=Object(d.a)(j,2),x=f[0],h=f[1],v=Object(r.useState)(""),O=Object(d.a)(v,2),m=O[0],y=O[1],k=Object(r.useState)(""),g=Object(d.a)(k,2),w=g[0],C=g[1],_=Object(r.useState)(""),P=Object(d.a)(_,2),S=P[0],T=P[1],M=Object(r.useState)(""),U=Object(d.a)(M,2),N=U[0],Q=U[1],B=e.isOpen,A=e.closeModal,R=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,jn(x,m,w,S,N);case 3:b(!1),i((function(e){return e+2})),C(""),T(""),Q(""),A();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(Dt.a,{isOpen:B,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:A,disabled:p,children:"Close"}),Object(a.jsxs)("div",{className:bn.a.Login,children:[Object(a.jsx)("h3",{children:"Upload"}),Object(a.jsxs)("label",{className:bn.a.FormBlock,children:["Audio file",Object(a.jsx)("input",{type:"file",name:"audioFile",onChange:function(e){h(e.target.files[0])},disabled:p},c)]}),Object(a.jsxs)("label",{className:bn.a.FormBlock,children:["Image file",Object(a.jsx)("input",{type:"file",name:"imageFile",onChange:function(e){y(e.target.files[0])},disabled:p},c+1)]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:bn.a.FormBlock,children:["Track name",Object(a.jsx)("input",{type:"text",name:"trackName",placeholder:"Track name",value:w,onChange:function(e){C(e.target.value)},disabled:p})]}),Object(a.jsxs)("label",{className:bn.a.FormBlock,children:["Artist name",Object(a.jsx)("input",{type:"text",name:"artistName",placeholder:"Artist name",value:S,onChange:function(e){T(e.target.value)},disabled:p})]}),Object(a.jsxs)("label",{className:bn.a.FormBlock,children:["Album name",Object(a.jsx)("input",{type:"text",name:"albumName",placeholder:"Album name",value:N,onChange:function(e){Q(e.target.value)},disabled:p})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:bn.a.FormBlock,children:Object(a.jsx)("button",{type:"submit",onClick:R,disabled:p,children:"Submit"})})]})]})};var xn=Object(Je.b)((function(e){return{}}))((function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),p=u[0],b=u[1],j=Object(r.useState)(!0),f=Object(d.a)(j,2),x=f[0],h=f[1],v=Object(r.useState)(!0),O=Object(d.a)(v,2),m=O[0],y=O[1],k=Object(r.useState)(!0),g=Object(d.a)(k,2),w=g[0],C=g[1],_=Object(r.useState)(!0),P=Object(d.a)(_,2),S=P[0],T=P[1],M=Object(r.useState)(!0),N=Object(d.a)(M,2),Q=N[0],B=N[1],A=Object(r.useState)(!0),R=Object(d.a)(A,2),I=R[0],F=R[1],D=Object(r.useState)(!0),L=Object(d.a)(D,2),q=L[0],V=L[1],E=Object(r.useState)(!1),Z=Object(d.a)(E,2),H=Z[0],J=Z[1],z=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cn(p,x,m,w,S,Q,I,q);case 4:t=e.sent,i(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var t=Object(l.a)(o.a.mark((function t(n,a){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sn(n,a);case 2:return t.next=4,U();case 4:r=t.sent,e.dispatch(r.redux);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:rn.a.SearchApp,children:[Object(a.jsx)("h3",{children:"Search"}),Object(a.jsx)("button",{onClick:function(){J(!0)},children:"Upload"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{className:rn.a.FormBlock,children:["Query \xa0",Object(a.jsx)("input",{type:"text",name:"query",placeholder:"",value:p,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&z()}})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:rn.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:x,onChange:function(e){h(e.target.checked)}}),"Spotify"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.youTube",checked:m,onChange:function(e){y(e.target.checked)}}),"YouTube"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",name:"provider.jukeboxRadio",checked:w,onChange:function(e){C(e.target.checked)}}),"Jukebox Radio"]})]}),Object(a.jsxs)("div",{className:rn.a.FormBlock,children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:S,onChange:function(e){T(e.target.checked)}}),"Track"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:Q,onChange:function(e){B(e.target.checked)}}),"Album"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:I,onChange:function(e){F(e.target.checked)}}),"Playlist"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:q,onChange:function(e){V(e.target.checked)}}),"Video"]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:rn.a.FormBlock,onClick:z,children:Object(a.jsx)("button",{type:"submit",children:"Search"})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:rn.a.SearchResults,children:c.map((function(e,t){return Object(a.jsx)(dn,{data:e,addToQueue:W},t)}))}),Object(a.jsx)(fn,{isOpen:H,closeModal:function(){J(!1)}})]})})),hn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M6 17L14 12L6 7V17Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M18 7H15V12V17H18V7Z",fill:"currentColor"})]}),vn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M18 17L10 12L18 7V17Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M6 7H9V17H6V7Z",fill:"currentColor"})]}),On=n(18),mn=n.n(On);var yn=Object(Je.b)((function(e){return{stream:e.stream,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues,playback:e.playback}}))((function(e){var t,n,c,i,s,u,o=e.stream,l=e.playback,p=null===(t=o.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.imageUrl,b=null===o||void 0===o||null===(c=o.nowPlaying)||void 0===c?void 0:c.track,j=$(e.lastUpQueues),f=ee(e.nextUpQueues),x=Object(r.useState)(0),h=Object(d.a)(x,2),v=(h[0],h[1]);return 1===(null===o||void 0===o||null===(i=o.nowPlaying)||void 0===i?void 0:i.index)||j||window.location.reload(),Object(r.useEffect)((function(){var e=setInterval((function(){v((function(e){return e+1}))}),100);return function(){clearInterval(e)}}),[]),Object(a.jsxs)("div",{className:mn.a.Player,children:[Object(a.jsxs)("div",{className:mn.a.Div,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Last..."})}),Object(a.jsx)("p",{children:null===j||void 0===j||null===(s=j.track)||void 0===s?void 0:s.name})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:mn.a.Div,children:[Object(a.jsx)("h2",{children:Object(a.jsx)("i",{children:"Now playing..."})}),p&&Object(a.jsx)("img",{alt:"",src:p,className:mn.a.Image}),((null===o||void 0===o?void 0:o.isPlaying)||(null===o||void 0===o?void 0:o.isPaused))&&Object(a.jsx)("h3",{children:null===b||void 0===b?void 0:b.name}),!(null===o||void 0===o?void 0:o.isPlaying)&&!(null===o||void 0===o?void 0:o.isPaused)&&Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Waiting..."})})]}),Object(a.jsx)("div",{className:mn.a.Div,children:Object(a.jsx)("progress",{value:B(o),max:null===o||void 0===o||null===(u=o.nowPlaying)||void 0===u?void 0:u.totalDurationMilliseconds})}),Object(a.jsxs)("div",{className:mn.a.Div,children:[Object(a.jsx)("button",{className:mn.a.Button,onClick:e.prevTrack,disabled:!l.controlsEnabled,children:vn}),Object(a.jsx)("button",{className:mn.a.Button,onClick:e.nextTrack,disabled:!l.controlsEnabled,children:hn})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:mn.a.Div,children:[Object(a.jsx)("h4",{children:Object(a.jsx)("i",{children:"Next..."})}),Object(a.jsx)("p",{children:null===f||void 0===f?void 0:f.track.name})]}),Object(a.jsx)(Ve.b,{to:"/app/queue",children:Object(a.jsx)("button",{className:mn.a.MoreNextUp,children:"More"})})]})})),kn=n(88),gn=n.n(kn);var wn=Object(Je.b)((function(e){return{stream:e.stream}}))((function(e){var t,n,r,c,i=e.stream,s=null===(t=i.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.imageUrl,u=null===i||void 0===i||null===(r=i.nowPlaying)||void 0===r||null===(c=r.track)||void 0===c?void 0:c.name;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:Object(a.jsx)("i",{children:"Now playing..."})}),s&&Object(a.jsx)("img",{alt:"",src:s,className:gn.a.Image}),u?Object(a.jsx)("p",{children:u}):Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"Nothing is playing..."})})]})})),Cn=n(59),_n=(n(191),n(19)),Pn=n.n(_n),Sn=Object(a.jsx)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M13.6378 15.529L15.052 16.9432L20.0018 11.9934L15.052 7.0437L13.6378 8.45791L16.1363 10.9564H7.99823C5.78909 10.9564 3.99823 12.7472 3.99823 14.9564V16.9564H5.99823V14.9564C5.99823 13.8518 6.89366 12.9564 7.99823 12.9564H16.2104L13.6378 15.529Z",fill:"currentColor"})}),Tn=Object(a.jsx)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{d:"M10.3623 15.529L8.94804 16.9432L3.99829 11.9934L8.94804 7.0437L10.3623 8.45791L7.86379 10.9564H16.0018C18.2109 10.9564 20.0018 12.7472 20.0018 14.9564V16.9564H18.0018V14.9564C18.0018 13.8518 17.1063 12.9564 16.0018 12.9564H7.78965L10.3623 15.529Z",fill:"currentColor"})}),Mn=Object(a.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M16 12L10 16.3301V7.66987L16 12Z",fill:"currentColor"})]}),Un=Object(a.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{d:"M9 9H11V15H9V9Z",fill:"currentColor"}),Object(a.jsx)("path",{d:"M15 15H13V9H15V15Z",fill:"currentColor"}),Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",fill:"currentColor"})]}),Nn=Object(a.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z",fill:"currentColor"})});var Qn=Object(Je.b)((function(e){return{stream:e.stream,playback:e.playback,nextUpQueues:e.nextUpQueues}}))((function(e){var t=e.playbackControls,n=e.stream,r=e.playback,c=r.volumeLevel.audio,i=e.nextUpQueues,s=!n.nowPlaying||n.isPaused||!r.controlsEnabled,u=!n.nowPlaying||!r.controlsEnabled,o=!n.nowPlaying&&!!i.length,l=!n.nowPlaying&&!i.length,d=function(e){s||t.seek(e)};return Object(a.jsxs)("div",{className:Pn.a.BottomBar,children:[Object(a.jsxs)("div",{className:Pn.a.ExtraControl,children:[o&&Object(a.jsx)("button",{className:Pn.a.ExtraControlButton,onClick:function(){t.nextTrack()},children:"Start Playback"}),l&&Object(a.jsx)(Ve.b,{to:"/app/search",children:Object(a.jsx)("button",{className:Pn.a.ExtraControlButton,children:"Add to Queue"})})]}),Object(a.jsx)("div",{className:Pn.a.Volume,children:Object(a.jsx)("button",{className:Pn.a.VolumeButton,onClick:function(){var t=A(c);!function(e,t,n){var a,r,c;e.spotifyApi.setVolume(100*n),e.youTubeApi.setVolume(100*n);var i=null===(a=t.nowPlaying)||void 0===a||null===(r=a.track)||void 0===r?void 0:r.uuid,s=null===(c=e.files[i])||void 0===c?void 0:c.audio;s&&(s.volume=n)}(r,n,t),e.dispatch({type:"playback/cycleVolumeLevelAudio"})},children:Object(a.jsx)(Cn.a,{value:100*c,circleRatio:.75,styles:Object(Cn.b)({rotation:.625,strokeLinecap:"butt",trailColor:"#eee"}),children:Nn})})}),Object(a.jsxs)("div",{className:Pn.a.Playback,children:[Object(a.jsx)("button",{className:Pn.a.PlaybackButton,onClick:function(){d("backward")},disabled:s,children:Tn}),Object(a.jsx)("button",{className:Pn.a.PlaybackButton,onClick:function(){u||(n.isPlaying&&t.pause(),n.isPaused&&t.play())},disabled:u,children:n.nowPlaying&&n.isPlaying?Un:Mn}),Object(a.jsx)("button",{className:Pn.a.PlaybackButton,onClick:function(){d("forward")},disabled:s,children:Sn})]})]})}));var Bn=Object(Je.b)((function(e){return{userSettings:e.userSettings}}))((function(e){var t=e.isOpen,n=e.closeModal,c=Object(r.useState)(!0),i=Object(d.a)(c,2),s=i[0];return i[1],e.userSettings?Object(a.jsxs)(Dt.a,{isOpen:t,ariaHideApp:!1,children:[Object(a.jsx)("button",{onClick:n,children:"Close"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:e.userSettings.spotify.authorizationUrl,children:"Connect Your Spotify Account"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.idleQueue,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{idleQueue:t.target.checked}}),Xe("idle_after_now_playing",t.target.checked)},disabled:!s}),"Idle After Queue"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.speakVoice,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{speakVoice:t.target.checked}}),Xe("mute_voice_recordings",t.target.checked)},disabled:!s}),"Speak Voice Recordings"]}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:e.userSettings.focusMode,onChange:function(t){e.dispatch({type:"userSettings/update",payload:{focusMode:t.target.checked}}),Xe("focus_mode",t.target.checked)},disabled:!s}),"Focus Mode"]}),Object(a.jsx)("br",{})]})]})]}):Object(a.jsx)(a.Fragment,{})})),An=n(45),Rn=n.n(An),In=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"}),Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"})]}),Fn=Object(a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 15C6.65685 15 8 13.6569 8 12C8 10.3431 6.65685 9 5 9C3.34315 9 2 10.3431 2 12C2 13.6569 3.34315 15 5 15ZM5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z",fill:"currentColor"}),Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15ZM12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",fill:"currentColor"}),Object(a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 13.6569 20.6569 15 19 15C17.3431 15 16 13.6569 16 12C16 10.3431 17.3431 9 19 9C20.6569 9 22 10.3431 22 12ZM20 12C20 12.5523 19.5523 13 19 13C18.4477 13 18 12.5523 18 12C18 11.4477 18.4477 11 19 11C19.5523 11 20 11.4477 20 12Z",fill:"currentColor"})]});var Dn=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)("div",{className:Rn.a.SideBar,children:[Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:Rn.a.Center,children:In}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(Ve.b,{to:"/app/feed",children:"Feed"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ve.b,{to:"/app/player",children:"Player"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ve.b,{to:"/app/queue",children:"Queue"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Ve.b,{to:"/app/search",children:"Search"})})]}),Object(a.jsx)("div",{className:Rn.a.Center,children:Object(a.jsx)("button",{onClick:function(){i(!0)},children:Fn})}),Object(a.jsx)(Bn,{isOpen:c,closeModal:function(){i(!1)}})]})};var Ln=function(e){return Object(a.jsxs)("div",{className:et.a.Session,children:[Object(a.jsxs)("div",{className:et.a.Top,children:[Object(a.jsx)(Dn,{}),Object(a.jsx)("div",{className:et.a.Content,children:Object(a.jsxs)(Ye.c,{children:[Object(a.jsx)(Ye.a,{path:"/app/feed",children:Object(a.jsx)("div",{className:et.a.PrimaryContent,children:Object(a.jsx)(Mt,{})})}),Object(a.jsxs)(Ye.a,{path:"/app/player",children:[Object(a.jsx)("div",{className:et.a.PrimaryContent,children:Object(a.jsx)(yn,{nextTrack:e.playbackControls.nextTrack,prevTrack:e.playbackControls.prevTrack,seek:e.playbackControls.seek,pause:e.playbackControls.pause,play:e.playbackControls.play})}),Object(a.jsx)("div",{className:et.a.SecondaryContent,children:Object(a.jsx)(Ve.b,{to:"/app/feed",children:Object(a.jsx)(Qt,{})})})]}),Object(a.jsxs)(Ye.a,{path:"/app/queue",children:[Object(a.jsx)("div",{className:et.a.PrimaryContent,children:Object(a.jsx)($t,{})}),Object(a.jsx)("div",{className:et.a.SecondaryContent,children:Object(a.jsx)(Ve.b,{to:"/app/player",children:Object(a.jsx)(wn,{})})})]}),Object(a.jsxs)(Ye.a,{path:"/app/search",children:[Object(a.jsx)("div",{className:et.a.PrimaryContent,children:Object(a.jsx)(xn,{})}),Object(a.jsx)("div",{className:et.a.SecondaryContent,children:Object(a.jsx)(Ve.b,{to:"/app/queue",children:Object(a.jsx)(nn,{})})})]})]})})]}),Object(a.jsx)(Qn,{playbackControls:e.playbackControls})]})};var qn=function(e){return Object(a.jsxs)(Ye.c,{children:[Object(a.jsx)(Ye.a,{path:"/app/:content",children:Object(a.jsx)(Ln,{playbackControls:e.playbackControls})}),Object(a.jsx)(Ye.a,{path:"/u/:username",children:Object(a.jsx)("span",{children:"PROFILE"})}),Object(a.jsx)(Ye.a,{path:"/spotify",children:Object(a.jsx)(Ke,{})})]})},Vn=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return n=e.sent,e.next=5,O(t);case 5:a=e.sent,qe.dispatch(n.redux),qe.dispatch(a.redux);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),En=n(192);var Zn=Object(Je.b)((function(e){return{stream:e.stream,playback:e.playback,lastUpQueues:e.lastUpQueues,nextUpQueues:e.nextUpQueues}}))((function(e){var t,n,c=e.stream,i=e.playback,s=$(e.lastUpQueues),u=ee(e.nextUpQueues),p=Object(r.useState)(!1),b=Object(d.a)(p,2),j=b[0],f=b[1],x=Object(r.useState)(void 0),h=Object(d.a)(x,2),v=h[0],O=h[1],m=Object(r.useState)(!1),y=Object(d.a)(m,2),k=y[0],g=y[1],U=Object(r.useState)(!1),N=Object(d.a)(U,2),B=N[0],A=N[1],V=Object(r.useState)({}),Z=Object(d.a)(V,2),H=Z[0],J=Z[1],z=Object(r.useState)({}),W=Object(d.a)(z,2),X=W[0],Y=W[1],G=function(e,t){var n=c.nowPlaying,a=null===n||void 0===n?void 0:n.playbackIntervals,r=a?a[a.length-1]:void 0;return(null===n||void 0===n?void 0:n.track)&&(n.track.service===F||n.track.service===R&&!(null===e||void 0===e?void 0:e.track)||n.track.service===R&&e.track.service!==R&&(!t||r[1]!==n.totalDurationMilliseconds&&t))},K=function(){var t;(null===(t=c.nowPlaying)||void 0===t?void 0:t.track)&&(e.dispatch({type:"playback/started"}),function(e,t){var n=Q(t,t.startedAt)[0],a=t.nowPlaying.track.service;if(a===R)e.spotifyApi.play({uris:[t.nowPlaying.track.externalId],position_ms:n});else if(a===I)e.youTubeApi.seekTo(n/1e3),e.youTubeApi.playVideo();else if(a===F){var r=t.nowPlaying.track.uuid,c=e.files[r].audio;n>0&&(c.currentTime=n/1e3),c.play()}}(i,c))},te=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,C(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!0);case 4:return a=t.sent,Y(a),t.next=8,e.dispatch({type:"playback/addToQueue"});case 8:A(!0);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ne=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G(u,!0)&&D(i,c),t.next=3,e.dispatch({type:"playback/plannedNextTrack",payload:{payload:X.redux}});case 3:return t.next=5,e.dispatch({type:"playback/enable"});case 5:return t.next=7,Vn(null===u||void 0===u||null===(n=u.track)||void 0===n?void 0:n.uuid);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r,u,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(G(s,!1)&&D(i,c),(null===(n=s.track)||void 0===n?void 0:n.service)!==F){t.next=9;break}return t.next=6,w(s.track.uuid);case 6:return u=t.sent,t.next=9,e.dispatch(u.redux);case 9:return t.next=11,S(null===(a=c.nowPlaying)||void 0===a?void 0:a.totalDurationMilliseconds);case 11:return l=t.sent,t.next=14,e.dispatch(l.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,Vn(null===s||void 0===s||null===(r=s.track)||void 0===r?void 0:r.uuid);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:if(G(u,!1)&&D(i,c),(null===u||void 0===u?void 0:u.track.service)!==F){t.next=9;break}return t.next=6,w(u.track.uuid);case 6:return r=t.sent,t.next=9,e.dispatch(r.redux);case 9:return t.next=11,C(null===(n=c.nowPlaying)||void 0===n?void 0:n.totalDurationMilliseconds,!1);case 11:return s=t.sent,t.next=14,e.dispatch(s.redux);case 14:return t.next=16,e.dispatch({type:"playback/start"});case 16:return t.next=18,e.dispatch({type:"playback/enable"});case 18:return t.next=20,Vn(null===u||void 0===u||null===(a=u.track)||void 0===a?void 0:a.uuid);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ce=function(){var t=Object(l.a)(o.a.mark((function t(){var n,a,r,s,u,l,d,p,b=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.length>0&&void 0!==b[0]?b[0]:void 0,t.next=3,e.dispatch({type:"playback/disable"});case 3:if("forward"!==n){t.next=14;break}return t.next=6,M(c.nowPlaying.totalDurationMilliseconds);case 6:if(400!==t.sent.system.status){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:a=c.startedAt-1e4,t.next=22;break;case 14:if("backward"!==n){t.next=21;break}return t.next=17,T(c.nowPlaying.totalDurationMilliseconds);case 17:r=new Date,s=r.getTime(),u=c.startedAt+1e4,a=s-u>0?u:s,t.next=22;break;case 21:a=c.startedAt;case 22:return t.next=24,e.dispatch({type:"stream/set",payload:{stream:Object(E.a)(Object(E.a)({},c),{},{startedAt:a})}});case 24:return l=Q(c,a),d=l[1],q(i,c,a),t.next=28,e.dispatch({type:"playback/addToQueueReschedule"});case 28:return d&&(p=setTimeout((function(){ce()}),d),e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:p}})),t.next=31,e.dispatch({type:"playback/enable"});case 31:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ie=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,_(c.nowPlaying.totalDurationMilliseconds);case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:return t.next=9,e.dispatch({type:"playback/addToQueueReschedule"});case 9:return D(i,c),clearTimeout(H),t.next=13,e.dispatch({type:"playback/enable"});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),se=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dispatch({type:"playback/disable"});case 2:return t.next=4,P();case 4:return n=t.sent,t.next=7,e.dispatch(n.redux);case 7:if(i.isPlaying){t.next=11;break}return t.next=10,e.dispatch({type:"playback/enable"});case 10:return t.abrupt("return");case 11:return t.next=13,e.dispatch({type:"playback/addToQueueReschedule"});case 13:return L(i,c),t.next=16,e.dispatch({type:"playback/enable"});case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){!function(){var e=document.createElement("script");e.src="https://sdk.scdn.co/spotify-player.js",e.async=!0,new Promise((function(e){window.Spotify?e():window.onSpotifyWebPlaybackSDKReady=e})).then((function(){f(!0)})),document.body.appendChild(e)}()}),[]),Object(r.useEffect)((function(){if(j){var t=new window.Spotify.Player({name:"Jukebox Radio",getOAuthToken:function(t){We().then((function(n){if(t(n.data.spotify.accessToken),e.dispatch({type:"user/get-settings",userSettings:n.data}),n.data.spotify.accessToken){var a=new En;a.setAccessToken(n.data.spotify.accessToken),e.dispatch({type:"playback/spotify",payload:{spotifyApi:a}})}e.dispatch({type:"playback/enable"}),g(!0)}))}});t.addListener("ready",(function(e){var t=e.device_id;O(t)})),t.connect()}}),[j]),Object(r.useEffect)((function(){k&&v&&function(e,t){e.spotifyApi.transferMyPlayback([t])}(i,v)}),[k,v]),Object(r.useEffect)((function(){if(c.isPlaying&&i.isPlaying&&!i.addToQueueTimeoutId&&(null===c||void 0===c?void 0:c.nowPlaying)){var t=Date.now()-c.startedAt,n=c.nowPlaying.totalDurationMilliseconds-t,a=setTimeout((function(){te()}),n-5e3);e.dispatch({type:"playback/addToQueueScheduled",payload:{addToQueueTimeoutId:a}});var r=Q(c,c.startedAt)[1];if(r){var s=setTimeout((function(){ce()}),r);e.dispatch({type:"playback/nextSeekScheduled",payload:{nextSeekTimeoutId:s}})}}}),[i]),Object(r.useEffect)((function(){if(B){A(!1);var e=Date.now()-c.startedAt,t=c.nowPlaying.totalDurationMilliseconds-e,n=setTimeout((function(){ne()}),t);clearTimeout(H),J(n)}}),[B]),Object(r.useEffect)((function(){c.isPlaying&&!i.isPlaying&&i.isReady&&K()}),[c,i]);var ue={nextTrack:re,prevTrack:ae,seek:ce,pause:ie,play:se},oe=null===c||void 0===c||null===(t=c.nowPlaying)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.externalId;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{display:"none"},children:Object(a.jsx)(ze.a,{videoId:oe,opts:{height:"135",width:"240",playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,iv_load_policy:3,modestbranding:1,origin:"jukeboxrad.io",playsinline:1}},onReady:function(t){var n=t.target;e.dispatch({type:"playback/youTube",payload:{youTubeApi:n}})}})}),Object(a.jsx)(qn,{playbackControls:ue})]})})),Hn=n(197),Jn=n(89);var zn=function(){var e=Object(r.useState)("initial"),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(){var t,n,a,r,i,s,u,l,d,p,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:if(e.sent){e.next=6;break}return c("unauthenticated"),e.abrupt("return");case 6:return c("authenticated"),e.next=9,g();case 9:return s=e.sent,e.next=12,qe.dispatch(s.redux);case 12:if(u=s.redux.payload,(null===(l=null===(t=u.stream.nowPlaying)||void 0===t?void 0:t.track)||void 0===l?void 0:l.service)!==F){e.next=20;break}return d=l.uuid,e.next=17,w(d);case 17:return s=e.sent,e.next=20,qe.dispatch(s.redux);case 20:return e.next=22,U();case 22:return s=e.sent,e.next=25,qe.dispatch(s.redux);case 25:return e.next=27,v(null===(n=u.stream.nowPlaying)||void 0===n||null===(a=n.track)||void 0===a?void 0:a.uuid);case 27:return p=e.sent,e.next=30,qe.dispatch(p.redux);case 30:return e.next=32,O(null===(r=u.stream.nowPlaying)||void 0===r||null===(i=r.track)||void 0===i?void 0:i.uuid);case 32:return b=e.sent,e.next=35,qe.dispatch(b.redux);case 35:c("ready");case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Hn.a.addDefaultLocale(Jn),function(){e.apply(this,arguments)}(),window.addEventListener("beforeunload",(function(e){e.preventDefault();var t=qe.getState();t.stream.isPlaying&&(_(),D(t.playback,t.stream))}))}),[]),"initial"===n?Object(a.jsx)(a.Fragment,{}):"unauthenticated"===n?Object(a.jsx)(Ve.a,{children:Object(a.jsx)(Je.a,{store:qe,children:Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)("div",{className:"app-main",children:Object(a.jsx)(He,{})})})})}):"authenticated"===n?Object(a.jsx)(Ve.a,{children:Object(a.jsx)(Je.a,{store:qe,children:"Loading..."})}):Object(a.jsx)(Ve.a,{children:Object(a.jsx)(Je.a,{store:qe,children:Object(a.jsx)("div",{className:"app-main-container",children:Object(a.jsx)(Zn,{})})})})},Wn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,199)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(zn,{})}),document.getElementById("root")),Wn()},21:function(e,t,n){e.exports={Upload:"Upload_Upload__tMDig",FormBlock:"Upload_FormBlock__2ls6S"}},26:function(e,t,n){e.exports={QueueCollection:"QueueCollection_QueueCollection__2uTSJ",Item:"QueueCollection_Item__2k6HI",Button:"QueueCollection_Button__KLnuj",Children:"QueueCollection_Children__1Q1i5"}},27:function(e,t,n){e.exports={SearchApp:"SearchApp_SearchApp__Mfcqz",FormBlock:"SearchApp_FormBlock__1myUf",SearchResults:"SearchApp_SearchResults__p1J6y"}},32:function(e,t,n){e.exports={Login:"Login_Login__1ujut",FormBlock:"Login_FormBlock__S_rix"}},34:function(e,t,n){e.exports={SearchResult:"SearchResult_SearchResult__djXCo",Button:"SearchResult_Button__1Hbjl",ggSpinner:"SearchResult_ggSpinner__iNeQG",spinner:"SearchResult_spinner__u3axZ"}},38:function(e,t,n){e.exports={FeedApp:"FeedApp_FeedApp__2YJHa",Feed:"FeedApp_Feed__3NWaq",FeedWrapper:"FeedApp_FeedWrapper__5dQdY",CreateTextComment:"FeedApp_CreateTextComment__1tCDm"}},44:function(e,t,n){e.exports={QueueTrack:"QueueTrack_QueueTrack__cD3iI",Button:"QueueTrack_Button__3peLA"}},45:function(e,t,n){e.exports={SideBar:"SideBar_SideBar__2JzAY",Center:"SideBar_Center__SYGR6"}},56:function(e,t,n){e.exports={QueueApp:"QueueApp_QueueApp__3OUXI",AddToQueue:"QueueApp_AddToQueue__1Zpmd"}},58:function(e,t,n){e.exports={MiniQueue:"MiniQueue_MiniQueue__2HfJP",MiniQueueItem:"MiniQueue_MiniQueueItem__2-wsK"}},82:function(e,t,n){e.exports={NotableText:"NotableText_NotableText__gYPiJ"}},83:function(e,t,n){e.exports={TextComment:"TextComment_TextComment__92FmQ",Notated:"TextComment_Notated__8XL21"}},85:function(e,t,n){e.exports={ABCNotation:"ABCNotation_ABCNotation__rkME2"}},86:function(e,t,n){e.exports={VoiceRecording:"VoiceRecording_VoiceRecording__29j03"}},87:function(e,t,n){e.exports={MiniFeed:"MiniFeed_MiniFeed__2GXUK"}},88:function(e,t,n){e.exports={MiniPlayer:"MiniPlayer_MiniPlayer__w1Mms",Image:"MiniPlayer_Image__1dVlH"}},97:function(e,t,n){},99:function(e,t,n){}},[[193,1,2]]]);
//# sourceMappingURL=main.d7f94799.chunk.js.map