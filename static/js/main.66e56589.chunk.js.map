{"version":3,"sources":["components/MainApp/Session/Session.module.css","components/PlaybackApp/Player/Player.module.css","config/global.js","utils/network.js","components/FeedApp/network.js","config/api.js","components/Login/network.js","components/PlaybackApp/Player/network.js","components/QueueApp/network.js","components/UserSettings/network.js","components/PlaybackApp/utils.js","config/services.js","components/PlaybackApp/controls.js","utils/reducers/feed.js","utils/reducers/marker.js","components/QueueApp/utils.js","utils/reducers/queue.js","utils/reducers/stream.js","utils/reducers/playback.js","utils/reducers/queueInterval.js","utils/reducers/textComment.js","utils/reducers/textCommentModification.js","utils/reducers/voiceRecording.js","utils/reducers/userSettings.js","utils/redux.js","components/Login/Login.js","components/SpotifySync/network.js","components/SpotifySync/SpotifySync.js","components/FeedApp/VoiceRecording/network.js","components/FeedApp/NotableText/constants.js","components/FeedApp/NotableText/network.js","components/FeedApp/NotableText/NotableText.js","components/FeedApp/TextComment/network.js","components/FeedApp/TextComment/TextComment.js","components/FeedApp/ABCNotation/ABCNotation.js","components/FeedApp/VoiceRecording/VoiceRecording.js","components/FeedApp/FeedApp.js","config/model.js","components/FeedApp/MiniFeed/MiniFeed.js","components/TrackDetailApp/Marker/network.js","components/TrackDetailApp/Interval/network.js","components/TrackDetailApp/Interval/Interval.js","components/TrackDetailApp/Marker/Marker.js","components/TrackDetailApp/TrackDetailApp.js","components/QueueApp/QueueTrack/QueueTrack.js","components/QueueApp/QueueCollection/QueueCollection.js","components/QueueApp/QueueApp.js","components/QueueApp/MiniQueue/MiniQueue.js","components/SearchApp/network.js","components/SearchApp/SearchResult/icons.js","components/SearchApp/SearchResult/SearchResult.js","components/Upload/network.js","components/Upload/Upload.js","components/SearchApp/SearchApp.js","components/PlaybackApp/icons.js","components/PlaybackApp/Player/Player.js","components/PlaybackApp/MiniPlayer/MiniPlayer.js","components/MainApp/BottomBar/icons.js","components/MainApp/BottomBar/BottomBar.js","components/UserSettings/UserSettings.js","components/MainApp/SideBar/icons.js","components/MainApp/SideBar/SideBar.js","components/MainApp/Session/Session.js","components/MainApp/MainApp.js","components/FeedApp/utils.js","components/PlaybackApp/PlaybackApp.js","App.js","reportWebVitals.js","index.js","components/MainApp/BottomBar/BottomBar.module.css","components/Upload/Upload.module.css","components/QueueApp/QueueCollection/QueueCollection.module.css","components/SearchApp/SearchApp.module.css","components/Login/Login.module.css","components/SearchApp/SearchResult/SearchResult.module.css","components/FeedApp/FeedApp.module.css","components/QueueApp/QueueTrack/QueueTrack.module.css","components/MainApp/SideBar/SideBar.module.css","components/QueueApp/QueueApp.module.css","components/QueueApp/MiniQueue/MiniQueue.module.css","components/FeedApp/NotableText/NotableText.module.css","components/FeedApp/TextComment/TextComment.module.css","components/FeedApp/ABCNotation/ABCNotation.module.css","components/FeedApp/VoiceRecording/VoiceRecording.module.css","components/FeedApp/MiniFeed/MiniFeed.module.css","components/PlaybackApp/MiniPlayer/MiniPlayer.module.css"],"names":["module","exports","BACKEND_DOMAIN","process","TYPE_GET","TYPE_POST","fetchBackend","a","method","url","data","formData","FormData","Object","entries","key","value","append","requestOptions","headers","token","localStorage","getItem","Authorization","request","Request","fetch","mode","body","response","searchParams","URLSearchParams","set","getUrl","toString","fetchTextCommentCreate","text","format","textCommentUuid","textCommentTimestamp","json","responseJson","fetchTextCommentList","fetchVoiceRecordingList","fetchAuthToken","username","password","fetchInitializeStream","fetchVerifyToken","status","undefined","fetchStreamGet","fetchTrackGetFiles","trackUuid","fetchNextTrack","nowPlayingTotalDurationMilliseconds","isPlanned","fetchPauseTrack","fetchPlayTrack","fetchPrevTrack","fetchScanBackward","fetchScanForward","fetchQueueList","fetchDeleteQueue","queueUuid","fetchGetUserSettings","fetchUpdateUserSettings","field","getPositionMilliseconds","stream","startedAt","nowPlaying","seekTimeout","progress","Date","now","playbackIntervalIdx","cumulativeProgress","playbackInterval","playbackIntervals","playbackIntervalDuration","remainingProgress","length","getProgress","isPaused","pausedAt","isPlaying","SERVICE_SPOTIFY","SERVICE_YOUTUBE","SERVICE_JUKEBOX_RADIO","playbackControlPause","playback","playbackService","track","service","spotifyApi","pause","youTubeApi","pauseVideo","uuid","files","audio","playbackControlPlay","play","playVideo","playbackControlSeek","positionMilliseconds","seek","seekTo","currentTime","RENDER_STATUS_HIDE","feedGenerate","state","displayThreshold","historyThreshold","textComments","voiceRecordings","aggregateFeed","map","el","shouldTagHistory","timestampMilliseconds","shouldTagDisplay","renderStatus","filter","i","sort","b","feedUpdate","feed","markerCreate","action","trackMarkerMap","marker","sortedMarkers","markerDelete","filteredMarkers","m","markerList","markers","getLastUpQueue","lastUpQueues","getNextUpQueue","nextUpQueues","children","getQueueDuration","queues","getDuration","queue","total","totalDurationMilliseconds","reduce","curr","finalizeQueue","copy","editedChildren","q","durationMilliseconds","intervals","trackDurationMilliseconds","lowerBound","upperBound","interval","push","queueListSet","payload","_lastPlayed","lastUp","nextUp","streamSet","obj","streamPlay","updatedPayload","streamPause","streamPrevTrack","lastNowPlaying","nextUpQueue","nextNowPlaying","isTrackInCollection","parentUuid","unshift","pop","streamNextTrack","shift","playbackSpotify","isReady","playbackYouTube","playbackAddToQueue","spotifyShouldAddToQueue","jukeboxRadioShouldAddToQueue","externalId","playbackControlQueue","queuedUp","noopNextTrack","then","store","dispatch","redux","playbackPlannedNextTrackHelper","addToQueueTimeoutId","nextSeekTimeoutId","skipToNext","playbackControlSkipToNext","clearTimeout","playbackPlannedNextTrack","updatedState","childPayload","updatedNowPlaying","playbackStart","playbackStarted","playbackAddToQueueReschedule","playbackAddToQueueScheduled","playbackNextSeekScheduled","playbackDisable","controlsEnabled","playbackEnable","playbackLoadFiles","Audio","audioUrl","findByUuid","o","sortQueueIntervals","queueIntervalCreate","index","queueInterval","parentQueueUuid","parentIndex","findIndex","trackQueue","sortedQueueIntervals","finalizedNextUpQueues","queueIntervalDelete","filteredQueueIntervals","textCommentListSet","textCommentCreate","textComment","textCommentDelete","textCommentModificationCreate","textCommentModification","textCommentIndex","t","modifications","sortedModifications","startPtr","voiceRecordingListSet","voiceRecordingCreate","voiceRecording","voiceRecordingDelete","voiceRecordingUuid","userSettingsUpdate","userSettings","initialState","streamExpire","queueDeleteNode","filteredQueues","queueDeleteChildNode","filteredChildren","textCommentClearModifications","userGetSettings","createStore","type","window","__REDUX_DEVTOOLS_EXTENSION__","trace","Login","props","useState","setUsername","setPassword","rememberMe","setRememberMe","handleSubmit","e","preventDefault","access","refresh","setItem","location","href","className","styles","onSubmit","FormBlock","name","placeholder","onChange","target","to","fetchUserConnectSpotify","code","error","SpotifySync","useEffect","queryString","search","urlParams","get","postData","fetchCreateVoiceRecording","audioFile","transcriptData","transcriptFinal","fetchDeleteVoiceRecording","STYLE_BOLD","STYLE_ITALICIZE","STYLE_STRIKETHROUGH","STYLE_CHOICES","fetchCreateTextCommentModification","style","anchorOffset","focusOffset","connect","textColor","selectableRef","useRef","selectableIsShowable","setSelectableIsShowable","setAnchorOffset","setFocusOffset","handleNotation","onTextSelect","selection","getSelection","anchorNode","focusNode","offset","parseInt","parentNode","getAttribute","onTextUnselect","NotableText","color","ref","textCommentText","startOffset","textCommentHtml","modification","regSubString","substring","styledSubString","endPtr","renderTextComment","selectionRef","isOpen","onClick","fetchDeleteTextComment","fetchListDeleteTextCommentModifications","deleteTextComment","clearModifications","TextComment","abcNotation","abcNotationUuid","deleteAbcNotation","ABCNotation","notation","engraverParams","staffwidth","handleDelete","VoiceRecording","setText","setTextCommentUuid","setTextCommentTimestamp","isAbc","setIsAbc","isRecording","setIsRecording","MicRecorder","bitRate","recorder","periodicTask","setInterval","clearInterval","handleTextChange","position","createTextComment","useSpeechRecognition","transcript","resetTranscript","FeedApp","Feed","FeedWrapper","class","CreateTextComment","checked","SpeechRecognition","browserSupportsSpeechRecognition","stopListening","stop","getMp3","buffer","blob","file","File","lastModified","JSON","stringify","startListening","continuous","start","disabled","MiniFeed","fetchStreamMarkerCreate","fetchStreamMarkerDelete","markerUuid","fetchStreamMarkerList","fetchStreamQueueIntervalCreate","lowerBoundMarkerUuid","upperBoundMarkerUuid","isMuted","repeatCount","fetchStreamQueueIntervalDelete","queueIntervalUuid","deleteQueueInterval","trackMarker","deleteTrackMarker","shouldOpenModal","setShouldOpenModal","openModal","closeModal","formMarkerTimestamp","setFormMarkerTimestamp","setLowerBoundMarkerUuid","setUpperBoundMarkerUuid","createTrackMarker","createQueueInterval","loadData","ariaHideApp","showModal","setShowModal","currentIndex","isNextUp","indent","QueueTrack","Button","destroy","console","log","isCurrentlyPlayingCollection","reveal","setReveal","toggleReveal","QueueCollection","Item","collection","Children","nowPlayingTrackName","queueDuration","endsAt","destroyQueueItem","QueueApp","ReactTimeAgo","future","date","locale","AddToQueue","flattenedQueue","flattenedQueues","child","flattenQueues","expandedQueues","slice","MiniQueue","MiniQueueItem","fetchSearchMusicLibrary","query","providerSpotify","providerYouTube","providerJukeboxRadio","formatTrack","formatAlbum","formatPlaylist","formatVideo","fetchCreateQueue","genericUuid","iconCheck","width","height","viewBox","fill","xmlns","d","SearchResult","searchResult","addToQueue","isSubmitting","setIsSubmitting","isSubmitted","setIsSubmitted","handleAddToQueue","provider","ggSpinner","fetchCreateTrack","imageFile","trackName","artistName","albumName","Upload","inputKey","setInputKey","isDisabled","setIsDisabled","setAudioFile","setImageFile","setTrackName","setArtistName","setAlbumName","prev","searchResults","setSearchResults","setQuery","serviceSpotify","setServiceSpotify","serviceYouTube","setServiceYouTube","serviceJukeboxRadio","setServiceJukeboxRadio","setFormatTrack","setFormatAlbum","setFormatPlaylist","setFormatVideo","responseJsonQueueList","SearchApp","onKeyDown","event","SearchResults","iconNextTrack","iconPrevTrack","imageUrl","setCounter","reload","Player","Div","alt","src","Image","max","prevTrack","nextTrack","MoreNextUp","iconScanForward","iconScanBackward","iconPlayCircle","fill-rule","clip-rule","iconPauseCircle","playbackControls","scanDisabled","playPauseDisabled","displayStartPlayback","displayAddToQueue","handleSeek","direction","BottomBar","ExtraControl","ExtraControlButton","Playback","PlaybackButton","spotify","authorizationUrl","idleQueue","speakVoice","focusMode","iconProfile","iconMore","SideBar","Center","Session","Top","Content","path","PrimaryContent","SecondaryContent","MainApp","updateFeed","responseJsonTextCommentList","responseJsonVoiceRecordingList","messageScheduleNextTrack","setMessageScheduleNextTrack","plannedNextTrackTimeoutId","setPlannedNextTrackTimeoutId","nextTrackJson","setNextTrackJson","shouldPauseOnTrackChange","nextPlayingQueue","lastPlaybackInterval","responseJsonNextTrack","plannedNextTrack","responseJsonPrevTrack","system","epochNow","getTime","proposedStartedAt","arr","seekTimeoutDuration","seekTimeoutId","setTimeout","jsonResponse","timeLeft","timeoutId","timeoutDuration","uris","position_ms","playbackControlStart","videoId","display","opts","playerVars","autoplay","controls","disablekb","fs","iv_load_policy","modestbranding","origin","playsinline","onReady","SpotifyWebApi","require","App","setStatus","nowPlayingTrack","textCommentsJsonResponse","voiceRecordingsJsonResponse","userSettingsJsonResponse","accessToken","setAccessToken","TimeAgo","addDefaultLocale","en","addEventListener","getState","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wGACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,IAAM,qBAAqB,QAAU,yBAAyB,eAAiB,gCAAgC,iBAAmB,oC,mBCAvLD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,IAAM,oBAAoB,OAAS,uBAAuB,MAAQ,sBAAsB,WAAa,6B,0HCDjJC,G,MAAiBC,8BACjBC,EAAW,MACXC,EAAY,O,SCCHC,I,2EAAf,oFAAAC,EAAA,yDAA4BC,EAA5B,+BAAqC,GAAIC,EAAzC,+BAA+C,GAAIC,EAAnD,+BAA0D,GAGxDD,EAAMP,EAAiBO,EAET,QAAXD,EALL,iBASI,IADMG,EAAW,IAAIC,SACrB,MAA2BC,OAAOC,QAAQJ,GAA1C,eAAkD,EAAD,oBAArCK,EAAqC,KAAhCC,EAAgC,KAC/CL,EAASM,OAAOF,EAAKC,GAV3B,OAiBQE,EAAiB,CAACC,QAAS,KACzBC,EAAQC,aAAaC,QAAQ,kBAEjCJ,EAAeC,QAAQI,cAAvB,iBAAiDH,IAE7CI,EAAU,IAAIC,QAAQhB,EAAKS,GAtBrC,UAyBqBQ,MAAMF,EAAS,CAC9BhB,OAAQA,EACRmB,KAAM,OACNC,KAAMjB,IA5BZ,QAyBIkB,EAzBJ,+BAkCI,IADIC,EAAe,IAAIC,gBACvB,MAA2BlB,OAAOC,QAAQJ,GAA1C,eAAkD,EAAD,oBAArCK,EAAqC,KAAhCC,EAAgC,KAC/Cc,EAAaE,IAAIjB,EAAKC,GAnC5B,OAqCUiB,EAASxB,EAAM,KAAOqB,EAAaI,WAGrChB,EAAiB,CAACC,QAAS,CAAC,eAAgB,sBAC1CC,EAAQC,aAAaC,QAAQ,kBAEjCJ,EAAeC,QAAQI,cAAvB,iBAAiDH,IAE7CI,EAAU,IAAIC,QAAQQ,EAAQf,GA7CxC,UAgDqBQ,MAAMF,EAAS,CAC9BhB,OAAQA,EACRmB,KAAM,SAlDZ,QAgDIE,EAhDJ,wCAsDSA,GAtDT,6C,sBCSO,IAAMM,EAAsB,uCAAG,WAAOC,EAAMC,EAAQC,EAAiBC,GAAtC,iBAAAhC,EAAA,sEACbD,EACrBD,ECCwC,iCDCxC,CAAE+B,OAAMC,SAAQC,kBAAiBC,yBAJC,cAC9BV,EAD8B,gBAMTA,EAASW,OANA,cAM9BC,EAN8B,yBAO7BA,GAP6B,2CAAH,4DAatBC,EAAoB,uCAAG,8BAAAnC,EAAA,sEACXD,EACrBF,ECVsC,+BDQN,cAC5ByB,EAD4B,gBAKPA,EAASW,OALF,cAK5BC,EAL4B,yBAM3BA,GAN2B,2CAAH,qDAYpBE,EAAuB,uCAAG,8BAAApC,EAAA,sEACdD,EACrBF,ECbyC,kCDWN,cAC/ByB,EAD+B,gBAKVA,EAASW,OALC,cAK/BC,EAL+B,yBAM9BA,GAN8B,2CAAH,qDE1BvBG,EAAc,uCAAG,WAAOC,EAAUC,GAAjB,iBAAAvC,EAAA,sEACLD,EACrBD,EDRkC,uBCUlC,CAAEwC,SAAUA,EAAUC,SAAUA,IAJN,cACtBjB,EADsB,gBAMDA,EAASW,OANR,cAMtBC,EANsB,yBAOrBA,GAPqB,2CAAH,wDAcdM,EAAqB,uCAAG,8BAAAxC,EAAA,sEACZD,EACrBD,EDesC,+BCjBL,cAC7BwB,EAD6B,gBAKRA,EAASW,OALD,cAK7BC,EAL6B,yBAM5BA,GAN4B,2CAAH,qDAarBO,EAAgB,uCAAG,gCAAAzC,EAAA,6DACxBa,EAAQC,aAAaC,QAAQ,eADL,SAEPhB,EACrBD,EDlCiC,sBCoCjC,CAAEe,MAAOA,IALmB,UAOP,OALjBS,EAFwB,QAOlBoB,OAPkB,8CASrBC,GATqB,uBAWHrB,EAASW,OAXN,cAWxBC,EAXwB,yBAYvBA,GAZuB,4CAAH,qDCrBvBU,EAAc,uCAAG,4BAAA5C,EAAA,sEACED,EACrBF,EFsB+B,uBExBZ,cACfyB,EADe,gBAKRA,EAASW,OALD,mFAAH,qDASdY,EAAkB,uCAAG,WAAMC,GAAN,eAAA9C,EAAA,sEACFD,EACrBF,EFEoC,yBEApC,CAAEiD,cAJqB,cACnBxB,EADmB,gBAMZA,EAASW,OANG,mFAAH,sDAalBc,EAAc,uCAAG,WAAOC,EAAqCC,GAA5C,iBAAAjD,EAAA,sEACED,EACrBD,EFEsC,8BEAtC,CAAEkD,sCAAqCC,cAJpB,cACf3B,EADe,gBAMMA,EAASW,OANf,cAMfC,EANe,yBAOdA,GAPc,2CAAH,wDAadgB,EAAe,uCAAG,8BAAAlD,EAAA,sEACCD,EACrBD,EFVuC,gCEQnB,cAChBwB,EADgB,gBAKKA,EAASW,OALd,cAKhBC,EALgB,yBAMfA,GANe,2CAAH,qDAYfiB,EAAc,uCAAG,8BAAAnD,EAAA,sEACED,EACrBD,EFrBsC,+BEmBnB,cACfwB,EADe,gBAKMA,EAASW,OALf,cAKfC,EALe,yBAMdA,GANc,2CAAH,qDAYdkB,EAAc,uCAAG,8BAAApD,EAAA,sEACED,EACrBD,EFhCsC,+BE8BnB,cACfwB,EADe,gBAKMA,EAASW,OALf,cAKfC,EALe,yBAMdA,GANc,2CAAH,qDAYdmB,EAAiB,uCAAG,8BAAArD,EAAA,sEACDD,EACrBD,EF3CyC,kCEyCnB,cAClBwB,EADkB,gBAKGA,EAASW,OALZ,cAKlBC,EALkB,yBAMjBA,GANiB,2CAAH,qDAYjBoB,EAAgB,uCAAG,WAAON,GAAP,iBAAAhD,EAAA,sEACAD,EACrBD,EFtDwC,gCEwDxC,CAAEkD,wCAJmB,cACjB1B,EADiB,gBAMIA,EAASW,OANb,cAMjBC,EANiB,yBAOhBA,GAPgB,2CAAH,sDC7FTqB,EAAc,uCAAG,8BAAAvD,EAAA,sEACLD,EACrBF,EH6B+B,uBG/BL,cACtByB,EADsB,gBAKDA,EAASW,OALR,cAKtBC,EALsB,yBAMrBA,GANqB,2CAAH,qDAYdsB,EAAgB,uCAAG,WAAOC,GAAP,iBAAAzD,EAAA,sEACPD,EACrBD,EHgBiC,yBGdjC,CAAE2D,UAAWA,IAJe,cACxBnC,EADwB,gBAMHA,EAASW,OANN,cAMxBC,EANwB,yBAOvBA,GAPuB,2CAAH,sDCThBwB,EAAoB,uCAAG,8BAAA1D,EAAA,sEACXD,EACrBF,EJFsC,4BIAN,cAC5ByB,EAD4B,gBAKPA,EAASW,OALF,cAK5BC,EAL4B,yBAM3BA,GAN2B,2CAAH,qDAapByB,EAAuB,uCAAG,WAAOC,EAAOnD,GAAd,iBAAAT,EAAA,sEACdD,EACrBD,EJdyC,+BIgBzC,CAAE8D,QAAOnD,UAJ0B,cAC/Ba,EAD+B,gBAMVA,EAASW,OANC,cAM/BC,EAN+B,yBAO9BA,GAP8B,2CAAH,wDCfvB2B,EAA0B,SAASC,EAAQC,GACtD,IAAID,EAAOE,WACT,MAAO,MAACrB,OAAWA,GAQrB,IALA,IACIsB,EADAC,EAAWC,KAAKC,MAAQL,EAExBM,EAAsB,EACtBC,EAAqB,IAEb,CACV,IAAMC,EAAmBT,EAAOE,WAAWQ,kBAAkBH,GACvDI,EAA2BF,EAAiB,GAAKA,EAAiB,GAClEG,EAAoBR,EAAWI,EACrC,GAAGI,EAAoBD,EAA0B,CAC/CP,EAAWK,EAAiB,GAAKG,EACjCT,EAAcM,EAAiB,GAAKL,EACpC,MAEFG,GAAuB,EACvBC,GAAsBG,EAOxB,OAJGJ,IAAwBP,EAAOE,WAAWQ,kBAAkBG,OAAS,IACtEV,OAActB,GAGT,CAACuB,EAAUD,IAOPW,EAAc,SAASd,GAClC,cAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAQe,UACFf,EAAOgB,SAAWhB,EAAOC,WAC3B,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQiB,WACTZ,KAAKC,MAAQN,EAAOC,eAE3B,GChDSiB,EAAkB,UAClBC,EAAkB,UAClBC,EAAwB,gBC0CxBC,EAAuB,SAASC,EAAUtB,GACrD,IAAMuB,EAAkBvB,EAAOE,WAAWsB,MAAMC,QAEhD,GAAGF,IAAoBL,EACrBI,EAASI,WAAWC,aACf,GAAGJ,IAAoBJ,EAC5BG,EAASM,WAAWC,kBACf,GAAGN,IAAoBH,EAAuB,CACnD,IAAMpC,EAAYgB,EAAOE,WAAWsB,MAAMM,KAC5BR,EAASS,MAAM/C,GAAWgD,MAClCL,UAUGM,EAAsB,SAASX,EAAUtB,GACpD,IAAMuB,EAAkBvB,EAAOE,WAAWsB,MAAMC,QAEhD,GAAGF,IAAoBL,EACrBI,EAASI,WAAWQ,YACf,GAAGX,IAAoBJ,EAC5BG,EAASM,WAAWO,iBACf,GAAGZ,IAAoBH,EAAuB,CACnD,IAAMpC,EAAYgB,EAAOE,WAAWsB,MAAMM,KAC5BR,EAASS,MAAM/C,GAAWgD,MAClCE,SAUGE,EAAsB,SAASd,EAAUtB,EAAQC,GAC5D,IACMoC,EADMtC,EAAwBC,EAAQC,GACX,GAC3BsB,EAAkBvB,EAAOE,WAAWsB,MAAMC,QAEhD,GAAGF,IAAoBL,EACrBI,EAASI,WAAWY,KAAKD,QACpB,GAAGd,IAAoBJ,EAC5BG,EAASM,WAAWW,OAAOF,EAAuB,KAClDf,EAASM,WAAWO,iBACf,GAAGZ,IAAoBH,EAAuB,CACnD,IAAMpC,EAAYgB,EAAOE,WAAWsB,MAAMM,KACpCE,EAAQV,EAASS,MAAM/C,GAAWgD,MACxCA,EAAMQ,YAAcH,EAAuB,IAC3CL,EAAME,S,sBCxFJO,EAAqB,OAOdC,EAAe,SAASC,GAE7B,IAAA3C,EAAS2C,EAAM3C,OAAf,EACiDD,EAAwBC,GADzE,mBACCI,EADD,KACWwC,EADX,KAC6BC,EAD7B,KAGN,IAAIzC,EACF,MAAO,GAGT,IAAM0C,EAAY,YAAOH,EAAMG,cACzBC,EAAe,YAAOJ,EAAMI,iBAC9BC,EAAa,sBAAOF,GAAP,YAAwBC,IA4BzC,OAHAC,GAHAA,GApBAA,EAAgBA,EAAcC,KAAI,SAAAC,GAChC,IAAMC,EACED,EAAGE,sBAAwBP,GAC3BK,EAAGE,uBAAyBR,EAE9BS,EACEH,EAAGE,sBAAwBR,GAC3BM,EAAGE,uBAAyBhD,EAWpC,OAPE8C,EAAGI,aADFH,EAhCuB,UAkChBE,EAjCgB,UAoCNZ,EAGb,eAAKS,OAEgBK,QAAO,SAAAC,GAAC,OACpCA,EAAEF,eAAiBb,MAESgB,MAAK,SAACvH,EAAGwH,GACrC,OAAOxH,EAAEkH,sBAAwBM,EAAEN,0BAM1BrD,EAA0B,SAASC,GAAS,IAAD,EAEtD,KAAG,OAACA,QAAD,IAACA,GAAD,UAACA,EAAQE,kBAAT,aAAC,EAAoBsB,OACtB,MAAO,MAAC3C,OAAWA,OAAWA,GAahC,IAVA,IAAMoB,EAAYD,EAAOC,UAErBG,EACEJ,EAAOiB,UAAYZ,KAAKC,MAAQL,EAAYD,EAAOgB,SAAWf,EAEhEM,EAAsB,EACtBqC,EAAmB,EACnBC,EAAmB,EACnBrC,EAAqB,IAEb,CACV,IAAMC,EAAmBT,EAAOE,WAAWQ,kBAAkBH,GACvDI,EAA2BF,EAAiB,GAAKA,EAAiB,GACpEG,OAAiB,EAkBrB,IAdAA,EADyBR,EAvEJ,IAwEiBI,IACd,GAAKI,EAAoBD,IAC/CiC,EAAmBnC,EAAiB,GAAKG,IAK3CA,EADyBR,EA9EJ,IACA,KA8EiBI,IACd,GAAKI,EAAoBD,IAC/CkC,EAAmBpC,EAAiB,GAAKG,IAI3CA,EAAoBR,EAAWI,GACRG,EAA0B,CAC/CP,EAAWK,EAAiB,GAAKG,EACjC,MAGFL,GAAuB,EACvBC,GAAsBG,EAGxB,MAAO,CAACP,EAAUwC,EAAkBC,IAOzBc,EAAa,SAAShB,GACjC,OAAO,2BACFA,GADL,IAEEiB,KAAMlB,EAAaC,MCjHVkB,EAAe,SAASlB,EAAOmB,GAC1C,IAAMC,EAAc,eAAQpB,EAAMoB,gBAC5BpE,EAAYmE,EAAOnE,UACnBqE,EAASF,EAAOE,OAEhBC,EADO,sBAAOF,EAAepE,IAAtB,CAAkCqE,IACjBP,MAAK,SAACvH,EAAGwH,GAC/B,OAAOxH,EAAEkH,sBAAwBM,EAAEN,yBAG3C,OADAW,EAAepE,GAAasE,EACrB,2BACFtB,GADL,IAEEoB,eAAgBA,KAOPG,EAAe,SAASvB,EAAOmB,GAC1C,IAAMC,EAAc,eAAQpB,EAAMoB,gBAC5BpE,EAAYmE,EAAOnE,UACnBqE,EAASF,EAAOE,OAEhBG,EADUJ,EAAeD,EAAOnE,WACN4D,QAAO,SAAAa,GAAC,OAAIA,EAAEtC,OAASkC,EAAOlC,QAE9D,OADAiC,EAAepE,GAAawE,EACrB,2BACFxB,GADL,IAEEoB,eAAgBA,KAOPM,EAAa,SAAS1B,EAAOmB,GACxC,IAAMnE,EAAYmE,EAAOnE,UACnB2E,EAAUR,EAAOQ,QACjBP,EAAc,eAAQpB,EAAMoB,gBAElC,OADAA,EAAepE,GAAa2E,EACrB,2BACF3B,GADL,IAEEoB,eAAgBA,K,QCtCPQ,GAAiB,SAASC,GACrC,OAAOA,EAAaA,EAAa3D,OAAS,IAO/B4D,GAAiB,SAASC,GACrC,OACEA,EAAa7D,OACV6D,EAAa,GAAGC,SAAS9D,OACxB6D,EAAa,GAAGC,SAAS,GACzBD,EAAa,QACf7F,GA+BO+F,GAAmB,SAASC,EAAQ7E,GAG/C,IAAM8E,EAAc,SAASC,GAC3B,IAAIC,EAAQ,EACZ,GAAGD,EAAMJ,SAAS9D,OAAQ,CAAC,IAAD,gBACPkE,EAAMJ,UADC,IACxB,IAAI,EAAJ,qBAAiC,CAC/BK,GAD+B,QAChBC,2BAFO,oCAKxBD,GAASD,EAAME,0BAEjB,OAAOD,GAcH5E,EAAWU,EAAYd,GACzBY,EAAoB,EASxB,OARGR,IACDQ,EAAoBZ,EAAOE,WAAW+E,0BAA4B7E,GAOhEyE,EAAOhE,OAEkB,IAAlBgE,EAAOhE,OACTD,EAAoBkE,EAAYD,EAAO,IAEvCjE,EAAoBiE,EAAOK,QAzBpB,SAASF,EAAOG,GAK9B,MAJqB,kBAAXH,IACRA,EAAQF,EAAYE,IAEtBA,EAASF,EAAYK,MAiBdvE,EAAoB,GClFlBwE,GAAgB,SAAhBA,EAAyBL,GAAQ,IAAD,EACrCM,EAAI,eAAQN,GAGlB,GAAGM,EAAKV,SAAS9D,OAAQ,CACvB,IAAMyE,EAAiBD,EAAKV,SAAS1B,IAAImC,GACnCH,EAA4BK,EAAeJ,QAAO,SAACF,EAAOO,GAAR,OAChDP,EAAQO,EAAEC,uBACT,GAGT,OAFAH,EAAKV,SAAWW,EAChBD,EAAKJ,0BAA4BA,EAC1BI,EAGT,IAAMI,EAAYJ,EAAKI,UACjBC,EAAyB,UAAGL,EAAK7D,aAAR,aAAG,EAAYgE,qBAC9C,IAAIC,EAAU5E,OAGZ,OAFAwE,EAAKJ,0BAA4BS,EACjCL,EAAK3E,kBAAoB,CAAC,CAAC,EAAGgF,IACvBL,EAGT,IACIM,EACAC,EAxBuC,EAsBrClF,EAAoB,GAtBiB,cA0BrB+E,GA1BqB,IA0B3C,IAAI,EAAJ,qBAAiC,CAAC,IAAxBI,EAAuB,QAC/B,GAAIA,EAASF,WAGN,IAAIE,EAASD,WAYb,CACDD,IACFA,EAAa,GAEfC,EAAaC,EAASF,WAAWvC,sBACjC1C,EAAkBoF,KAAK,CAACH,EAAYC,IACpCD,EAAaE,EAASD,WAAWxC,sBACjCwC,OAAa/G,EACb,SAnBI8G,IACFA,EAAa,GAEfC,EAAaC,EAASF,WAAWvC,sBACjC1C,EAAkBoF,KAAK,CAACH,EAAYC,IAGpCD,OAAa9G,EAGb,MAbA8G,EAAaE,EAASD,WAAWxC,uBA5BM,8BAsDxCuC,IACDC,EAAaF,EACbhF,EAAkBoF,KAAK,CAACH,EAAYC,KAGtC,IAAMX,EAA4BvE,EAAkBwE,QAAO,SAACF,EAAOxB,GAAR,OACzDwB,GAASxB,EAAE,GAAKA,EAAE,MACjB,GAKH,OAHA6B,EAAKJ,0BAA4BA,EACjCI,EAAK3E,kBAAoBA,EAElB2E,GAUIU,GAAe,SAASpD,EAAOqD,GAC1C,IAAMxB,EAAewB,EAAQxB,aAAavB,IAAImC,IACxCV,EAAesB,EAAQtB,aAAazB,IAAImC,IACxCa,EAActD,EAAMsD,YAEvBA,GACDzB,EAAasB,KAAKG,GAGpB,IAAIjG,EAAS2C,EAAM3C,OACfA,EAAOiB,WAAcjB,EAAOe,WAAYf,EAAOE,aACjDsE,EAAasB,KAAK9F,EAAOE,YACzBF,EAAM,2BAAQA,GAAR,IAAgBE,gBAAYrB,KAGpC,IAAMqH,EACG1B,EAAa3D,OAEZ2D,EAAaA,EAAa3D,OAAS,QADnChC,EAGJsH,EACGzB,EAAa7D,OACX6D,EAAa,GAAGC,SAAS9D,OAExB6D,EAAa,GAAGC,SAAS,GADzBD,EAAa,QAFM7F,EAO/B,OAAO,2BACF8D,GADL,IAEE3C,OAAQA,EACRkG,OAAQA,EACR1B,aAAcA,EACd2B,OAAQA,EACRzB,aAAcA,KC9GL0B,GAAY,SAASzD,EAAOqD,GACvC,IAAMhG,EAASgG,EAAQhG,OACjBE,EAAaF,EAAOE,WACpBmG,EAAG,eAAQ1D,GAQjB,GANGzC,IACDF,EAAOE,WAAakF,GAAclF,IAGpCmG,EAAIrG,OAASA,EAETA,EAAOiB,WAAcjB,EAAOe,WAAYf,EAAOE,YAM5C,GAAGF,EAAOiB,UAAW,CAC1B,IAAMb,EAAWC,KAAKC,MAAQN,EAAOC,UAClCG,GAAYA,GAAYJ,EAAOE,WAAW+E,4BAC3CoB,EAAIH,OAASlG,EAAOE,WACpBmG,EAAIJ,YAAcjG,EAAOE,WACzBmG,EAAIrG,OAAOE,gBAAarB,EACxBwH,EAAIrG,OAAOiB,WAAY,EACvBoF,EAAIrG,OAAOe,UAAW,SAZxBsF,EAAIH,OAASlG,EAAOE,WACpBmG,EAAIJ,YAAcjG,EAAOE,WACzBmG,EAAIrG,OAAOE,gBAAarB,EACxBwH,EAAIrG,OAAOiB,WAAY,EACvBoF,EAAIrG,OAAOe,UAAW,EAYxB,OAAOsF,GAOIC,GAAa,SAAS3D,EAAOqD,GACxC,IAAMO,EAAiB,CACrBvG,OAAO,2BACF2C,EAAM3C,QADL,IAEJiB,WAAW,EACXF,UAAU,EACVd,UAAW+F,EAAQ/F,aAGvB,OAAOmG,GAAUzD,EAAO4D,IAObC,GAAc,SAAS7D,EAAOqD,GACzC,IAAMO,EAAiB,CACrBvG,OAAO,2BACF2C,EAAM3C,QADL,IAEJiB,WAAW,EACXF,UAAU,EACVC,SAAUgF,EAAQhF,YAGtB,OAAOoF,GAAUzD,EAAO4D,IAObE,GAAkB,SAAS9D,EAAOqD,GAC7C,IAAMxB,EAAY,YAAO7B,EAAM6B,cACzBE,EAAY,YAAO/B,EAAM+B,cACzBgC,EAAiB/D,EAAM3C,OAAOE,WAC9ByG,EAAcjC,EAAa,GAC3BkC,EAAiBpC,EAAaA,EAAa3D,OAAS,GAEpDgG,GACU,OAAdH,QAAc,IAAdA,OAAA,EAAAA,EAAgBI,cAAhB,OACAH,QADA,IACAA,OADA,EACAA,EAAa7E,QACC,OAAd4E,QAAc,IAAdA,OAAA,EAAAA,EAAgBI,eAAhB,OAA+BH,QAA/B,IAA+BA,OAA/B,EAA+BA,EAAa7E,MAY9C,OAVG4E,IACEG,EACDF,EAAYhC,SAASoC,QAAQL,GAE7BhC,EAAaqC,QAAQL,IAIzBlC,EAAawC,MAEN,2BACArE,GADP,IAEI3C,OAAO,2BACF2C,EAAM3C,QADL,IAEJC,UAAW+F,EAAQ/F,UACnBC,WAAY0G,EACZ3F,WAAW,EACXF,UAAU,IAEZyD,aAAcA,EACdE,aAAcA,EACduB,iBAAapH,KAQNoI,GAAkB,SAAStE,EAAOqD,GAC7C,IAAMxB,EAAY,YAAO7B,EAAM6B,cACzBE,EAAY,YAAO/B,EAAM+B,cACzBgC,EAAiB/D,EAAM3C,OAAOE,WAC9ByG,EAAcjC,EAAa,GAC3BkC,EACED,EACGA,EAAYhC,SAAS9D,OACpB8F,EAAYhC,SAAS,GACrBgC,OACF9H,EAkBV,OAfG6H,GACDlC,EAAasB,KAAKY,GAGjBC,IACEA,EAAYhC,SAAS9D,QACtB8F,EAAYhC,SAASuC,QACjBP,EAAYhC,SAAS9D,QACvB6D,EAAawC,SAGfxC,EAAawC,SAIV,2BACAvE,GADP,IAEI3C,OAAO,2BACF2C,EAAM3C,QADL,IAEJC,UAAW+F,EAAQ/F,UACnBC,WAAY0G,EACZ3F,YAAa2F,EACb7F,UAAU,IAEZyD,aAAcA,EACdE,aAAcA,EACduB,YAAaS,KCzINS,GAAkB,SAASxE,EAAOqD,GAC7C,OAAO,2BACFrD,GADL,IAEErB,SAAS,2BACJqB,EAAMrB,UADH,IAENI,WAAYsE,EAAQtE,WACpB0F,SAAS,OAMFC,GAAkB,SAAS1E,EAAOqD,GAC7C,OAAO,2BACFrD,GADL,IAEErB,SAAS,2BACJqB,EAAMrB,UADH,IAENM,WAAYoE,EAAQpE,gBAYb0F,GAAqB,SAAS3E,GACzC,IAAMwD,EAAS1B,GAAe9B,EAAM+B,cACpC,IAAIyB,EACF,OAAO,eAAKxD,GAGd,IAAMrB,EAAQ,eAAQqB,EAAMrB,UACtBpB,EAAayC,EAAM3C,OAAOE,WAC1BqH,EACErH,EAAWsB,MAAMC,UAAYP,GAC7BiF,EAAO3E,MAAMC,UAAYP,GACU,IAAnCiF,EAAOzF,kBAAkB,GAAG,GAE9B8G,EACErB,EAAO3E,MAAMC,UAAYL,EAGjC,GAAGmG,EAAyB,EN8DM,SAASjG,EAAUtB,EAAQmG,GACrCnG,EAAOE,WAAWsB,MAAMC,UAEzBP,GACrBI,EAASI,WAAWqD,MAAMoB,EAAO3E,MAAMiG,YMjEvCC,CAAqB/E,EAAMrB,SAAUqB,EAAM3C,OAAQmG,GAEnD7E,EAASqG,UAAW,EAEpB,IAAMjH,EAAoBR,EAAWQ,kBAE7BA,EAAkBA,EAAkBG,OAAS,GAErC,KAAOX,EAAWsB,MAAMgE,uBACtClE,EAASsG,eAAgB,QAEnBJ,GACRzI,EAAmBoH,EAAO3E,MAAMM,MAC7B+F,MAAK,SAACzJ,GACL0J,GAAMC,SAAS3J,EAAa4J,UAMlC,OAAO,2BACFrF,GADL,IAEErB,SAAUA,KAQR2G,GAAiC,SAAStF,GAC9C,IAAMwD,EAAS1B,GAAe9B,EAAM+B,cAC9BiD,EAAWhF,EAAMrB,SAASqG,SAC1BC,EAAgBjF,EAAMrB,SAASsG,cAC/BM,EAAsBvF,EAAMrB,SAAS4G,oBACrCC,EAAoBxF,EAAMrB,SAAS6G,kBACnC7G,EAAQ,2BACHqB,EAAMrB,UADH,IAENqG,UAAU,EACVC,eAAe,IAEvB,OAAIzB,GAAUyB,GACZtG,EAAS4G,yBAAsBrJ,EACxB,2BACF8D,GADL,IAEErB,SAAUA,KAIXqG,GNNoC,SAASrG,EAAUtB,GAClCA,EAAOE,WAAWsB,MAAMC,UAEzBP,GACrBI,EAASI,WAAW0G,aMGpBC,CAA0B1F,EAAMrB,SAAUqB,EAAM3C,QAChDsB,EAAS4G,yBAAsBrJ,EACxB,2BACF8D,GADL,IAEErB,SAAUA,MAIdgH,aAAaJ,GACbI,aAAaH,GACb7G,EAASL,WAAY,EACrBK,EAAS4G,yBAAsBrJ,EAC/ByC,EAAS6G,uBAAoBtJ,EACtB,2BACF8D,GADL,IAEErB,SAAUA,MAQDiH,GAA2B,SAAS5F,EAAOqD,GACtD,IAAIwC,EAAe7F,EACnB6F,EAAeP,GAA+BO,GAC9C,IAAMC,EAAezC,EAAQA,QACvB0C,EAAoBF,EAAaxI,OAAOE,WAK9C,OAJAuI,EAAaxI,UACXuI,EAAaxI,OAAOC,UAAYyI,EAAkBzD,0BAEpDuD,EAAevB,GAAgBuB,EAAcC,IAQlCE,GAAgB,SAAShG,GACpC,IAAMuF,EAAsBvF,EAAMrB,SAAS4G,oBACrCC,EAAoBxF,EAAMrB,SAAS6G,kBACnC7G,EAAQ,2BACHqB,EAAMrB,UADH,IAENqG,UAAU,EACVC,eAAe,EACf3G,WAAW,EACXiH,yBAAqBrJ,IAM7B,OAHAyJ,aAAaJ,GACbI,aAAaH,GAEN,2BACFxF,GADL,IAEErB,SAAUA,KAQDsH,GAAkB,SAASjG,GACtC,IAAMrB,EAAQ,2BACHqB,EAAMrB,UADH,IAENL,WAAW,IAEnB,OAAO,2BACF0B,GADL,IAEErB,SAAUA,KAKDuH,GAA+B,SAASlG,GACnD,IAAMuF,EAAsBvF,EAAMrB,SAAS4G,oBACrCC,EAAoBxF,EAAMrB,SAAS6G,kBACnC7G,EAAQ,2BACHqB,EAAMrB,UADH,IAEN4G,yBAAqBrJ,EACrBsJ,uBAAmBtJ,IAM3B,OAHAyJ,aAAaJ,GACbI,aAAaH,GAEN,2BACFxF,GADL,IAEErB,SAAUA,KAKDwH,GAA8B,SAASnG,EAAOqD,GACzD,IAAM1E,EAAQ,2BACHqB,EAAMrB,UADH,IAEN4G,oBAAqBlC,EAAQkC,sBAErC,OAAO,2BACFvF,GADL,IAEErB,SAAUA,KAKDyH,GAA4B,SAASpG,EAAOqD,GACvD,IAAMmC,EAAoBxF,EAAMrB,SAAS6G,kBACnC7G,EAAQ,2BACHqB,EAAMrB,UADH,IAEN6G,kBAAmBnC,EAAQmC,oBAKnC,OAFAG,aAAaH,GAEN,2BACFxF,GADL,IAEErB,SAAUA,KAKD0H,GAAkB,SAASrG,GACtC,OAAO,2BACFA,GADL,IAEErB,SAAS,2BACJqB,EAAMrB,UADH,IAEN2H,iBAAiB,OAMVC,GAAiB,SAASvG,GACrC,OAAO,2BACFA,GADL,IAEErB,SAAS,2BACJqB,EAAMrB,UADH,IAEN2H,iBAAiB,OAMVE,GAAoB,SAASxG,EAAOqD,GAC/C,IAAM1E,EAAQ,eAAQqB,EAAMrB,UACtBS,EAAK,eAAQY,EAAMrB,SAASS,OAE5BC,EAAQ,IAAIoH,MAAMpD,EAAQxE,MAAM6H,UAKtC,OAHAtH,EAAMiE,EAAQxE,MAAMM,MAAQ,CAC1BE,MAAOA,GAEF,2BACFW,GADL,IAEErB,SAAS,2BACJA,GADG,IAENS,MAAOA,OCxQPuH,GAAa,SAASxH,GAC1B,OAAQ,SAAAyH,GAAC,OAAIA,EAAEzH,OAASA,IAepB0H,GAAqB,SAAStN,EAAGwH,GACrC,OAAIA,EAAEkC,WAEK1J,EAAE0J,WAIT1J,EAAE0J,WAAWxC,sBACblH,EAAE0J,WAAWxC,sBAJR,GAFC,GAeCqG,GAAsB,SAAS9G,EAAOmB,GACjD,IAMsB4F,EANhBC,EAAgB7F,EAAO6F,cACvBhK,EAAYmE,EAAOnE,UACnBiK,EAAkB9F,EAAO8F,gBAG3B/E,EAASlC,EAAM+B,aACfmF,GAAe,EAChBD,IACDC,EAAchF,EAAOiF,UAAUR,GAAWM,IAC1C/E,EAASA,EAAOgF,GAAalF,UAE/B+E,EAAQ7E,EAAOiF,UAAUR,GAAW3J,IACpC,IAAMoK,EAAalF,EAAO6E,GAIpBM,EADc,sBAAOD,EAAWtE,WAAlB,CAA6BkE,IACLlG,KAAK+F,IAG3C9E,EAAY,YAAO/B,EAAM+B,eACX,IAAjBmF,EACDnF,EAAamF,GAAalF,SAAS+E,GAAOjE,UAAYuE,EAEtDtF,EAAagF,GAAOjE,UAAYuE,EAIlC,IAAMC,EAAwBvF,EAAazB,IAAImC,IAE/C,OAAO,2BACFzC,GADL,IAEE+B,aAAcuF,KAQLC,GAAsB,SAASvH,EAAOmB,GACjD,IAMsB4F,EANhBC,EAAgB7F,EAAO6F,cACvBhK,EAAYmE,EAAOnE,UACnBiK,EAAkB9F,EAAO8F,gBAG3B/E,EAASlC,EAAM+B,aACfmF,GAAe,EAChBD,IACDC,EAAchF,EAAOiF,UAAUR,GAAWM,IAC1C/E,EAASA,EAAOgF,GAAalF,UAE/B+E,EAAQ7E,EAAOiF,UAAUR,GAAW3J,IACpC,IA9E4BmC,EA8EtBiI,EAAalF,EAAO6E,GAIpBS,EADc,YAAOJ,EAAWtE,WACQlC,QAlFlBzB,EAkFsC6H,EAAc7H,KAjFxE,SAAAyH,GAAC,OAAIA,EAAEzH,OAASA,KAoFlB4C,EAAY,YAAO/B,EAAM+B,eACX,IAAjBmF,EACDnF,EAAamF,GAAalF,SAAS+E,GAAOjE,UAAY0E,EAEtDzF,EAAagF,GAAOjE,UAAY0E,EAIlC,IAAMF,EAAwBvF,EAAazB,IAAImC,IAE/C,OAAO,2BACHzC,GADJ,IAEC+B,aAAcuF,KCzGJG,GAAqB,SAASzH,EAAOqD,GAChD,IAAMlD,EAAekD,EAAQlD,aACvB0F,EAAY,2BACP7F,GADO,IAEVG,aAAcA,IAGtB,OAAO,2BACF0F,GADL,IAEE5E,KAAMlB,EAAa8F,MAQV6B,GAAoB,SAAS1H,EAAOmB,GAC/C,IAAMhB,EAAY,sBAAOH,EAAMG,cAAb,CAA2BgB,EAAOwG,cAC9C9B,EAAY,2BACP7F,GADO,IAEVG,aAAcA,IAGtB,OAAO,2BACF0F,GADL,IAEE5E,KAAMlB,EAAa8F,MAQV+B,GAAoB,SAAS5H,EAAOmB,GAC/C,IACMhB,EAAeH,EAAMG,aAAaS,QADnB,SAAAC,GAAC,OAAIA,EAAE1B,OAASgC,EAAO7F,mBAEtCuK,EAAY,2BACP7F,GADO,IAEVG,aAAcA,IAGtB,OAAO,2BACF0F,GADL,IAEE5E,KAAMlB,EAAa8F,MC/CVgC,GAAgC,SAAS7H,EAAOqD,GAC3D,IAAMyE,EAA0BzE,EAAQyE,wBAClCxM,EAAkB+H,EAAQ/H,gBAC1B6E,EAAY,YAAOH,EAAMG,cACzB4H,EAAmB5H,EAAagH,WAAU,SAAAa,GAAC,OACzCA,EAAE7I,OAAS7D,KAEbqM,EAAcxH,EAAa4H,GAC3BE,EAAa,YAAON,EAAYM,eAEtCA,EAAc9E,KAAK2E,GACnB,IAAMI,EAAsBD,EAAcnH,MAAK,SAACvH,EAAGwH,GACjD,OAAOxH,EAAE4O,SAAWpH,EAAEoH,YAIxB,OAFAhI,EAAa4H,GAAkBE,cAAgBC,EAExC,2BACFlI,GADL,IAEEG,aAAcA,KCfLiI,GAAwB,SAASpI,EAAOqD,GACnD,IAAMjD,EAAkBiD,EAAQjD,gBAC1ByF,EAAY,2BACP7F,GADO,IAEVI,gBAAiBA,IAGzB,OAAO,2BACFyF,GADL,IAEE5E,KAAMlB,EAAa8F,MAQVwC,GAAuB,SAASrI,EAAOmB,GAClD,IAAMf,EAAe,sBAAOJ,EAAMI,iBAAb,CAA8Be,EAAOmH,iBACpDzC,EAAY,2BACP7F,GADO,IAEVI,gBAAiBA,IAGzB,OAAO,2BACFyF,GADL,IAEE5E,KAAMlB,EAAa8F,MAQV0C,GAAuB,SAASvI,EAAOmB,GAClD,IACMf,EAAkBJ,EAAMI,gBAAgBQ,QADzB,SAAAC,GAAC,OAAIA,EAAE1B,OAASgC,EAAOqH,sBAEtC3C,EAAY,2BACP7F,GADO,IAEVI,gBAAiBA,IAGzB,OAAO,2BACFyF,GADL,IAEE5E,KAAMlB,EAAa8F,MClDV4C,GAAqB,SAASzI,EAAOqD,GAChD,OAAO,2BACFrD,GADL,IAEE0I,aAAa,2BACN1I,EAAM0I,cACNrF,MC8CLsF,GAAe,CACnB5G,aAAc,GACdF,aAAc,GACdyB,iBAAapH,EACbiE,aAAc,GACdC,gBAAiB,GACjBa,KAAM,GACNyH,kBAAcxM,EACdkF,eAAgB,GAChBzC,SAAU,CACR2H,iBAAiB,EACjBvH,gBAAY7C,EACZoC,WAAW,EACX0G,UAAU,EACVC,eAAe,EACfM,yBAAqBrJ,EACrBuI,SAAS,EACTrF,MAAO,KAKX,SAASwJ,GAAa5I,EAAOmB,GAC3B,IAAM9D,EAAM,eAAQ2C,EAAM3C,QACpBiG,EAAcjG,EAAOE,WAM3B,OAJAF,EAAOiB,WAAY,EACnBjB,EAAOe,UAAW,EAClBf,EAAOE,gBAAarB,EAEb,2BAAK8D,GAAZ,IAAmB3C,OAAQA,EAAQiG,YAAaA,IAIlD,SAASuF,GAAgB7I,EAAOmB,GAC9B,IACM2H,EADS9I,EAAM+B,aACSnB,QAAO,SAAAC,GAAC,OAAIA,EAAE1B,OAASgC,EAAOnE,aAE5D,OAAO,2BACFgD,GADL,IAEE+B,aAAc+G,IAKlB,SAASC,GAAqB/I,EAAOmB,GACnC,IAAIe,EAAM,YAAOlC,EAAM+B,cACjBmF,EAAchF,EAAOiF,WAAU,SAAAtG,GAAC,OAAIA,EAAE1B,OAASgC,EAAOgD,cAEtD6E,EADW9G,EAAOgF,GAAalF,SACHpB,QAAO,SAAAC,GAAC,OAAIA,EAAE1B,OAASgC,EAAOnE,aAQhE,OANAkF,EAAOgF,GAAalF,SAAWgH,EAE3BA,EAAiB9K,SACnBgE,EAASA,EAAOtB,QAAO,SAAAC,GAAC,OAAIA,EAAE1B,OAASgC,EAAOgD,eAGzC,2BACFnE,GADL,IAEE+B,aAAcG,IAKlB,SAAS+G,GAA8BjJ,EAAOmB,GAC5C,IAAM4G,EAAmB/H,EAAMG,aAAagH,WAAU,SAAAa,GAAC,OAAIA,EAAE7I,OAASgC,EAAO7F,mBACvE6E,EAAY,YAAOH,EAAMG,cAI/B,OAFAA,EAAa4H,GAAkBE,cAAgB,GAExC,2BACFjI,GADL,IAEEG,aAAcA,IAKlB,SAAS+I,GAAgBlJ,EAAOmB,GAC9B,OAAO,2BACFnB,GADL,IAEE0I,aAAcvH,EAAOuH,eAKzB,IAkFavD,GAAQgE,aAlFL,WAAmC,IAAlCnJ,EAAiC,uDAAzB2I,GAAcxH,EAAW,uCAChD,OAAQA,EAAOiI,MACb,IAAK,aACH,OAAO3F,GAAUzD,EAAOmB,EAAOkC,SACjC,IAAK,cACH,OAAOM,GAAW3D,EAAOmB,EAAOkC,SAClC,IAAK,eACH,OAAOQ,GAAY7D,EAAOmB,EAAOkC,SACnC,IAAK,mBACH,OAAOS,GAAgB9D,EAAOmB,EAAOkC,SACvC,IAAK,mBACH,OAAOiB,GAAgBtE,EAAOmB,EAAOkC,SACvC,IAAK,gBACH,OAAOuF,GAAa5I,GACtB,IAAK,gBACH,OAAOoD,GAAapD,EAAOmB,EAAOkC,SACpC,IAAK,mBACH,OAAOwF,GAAgB7I,EAAOmB,GAChC,IAAK,wBACH,OAAO4H,GAAqB/I,EAAOmB,GACrC,IAAK,sBACH,OAAOsG,GAAmBzH,EAAOmB,EAAOkC,SAC1C,IAAK,qBACH,OAAOqE,GAAkB1H,EAAOmB,GAClC,IAAK,qBACH,OAAOyG,GAAkB5H,EAAOmB,GAClC,IAAK,iCACH,OAAO0G,GAA8B7H,EAAOmB,EAAOkC,SACrD,IAAK,iCACH,OAAO4F,GAA8BjJ,EAAOmB,GAC9C,IAAK,wBACH,OAAOkH,GAAqBrI,EAAOmB,GACrC,IAAK,yBACH,OAAOiH,GAAsBpI,EAAOmB,EAAOkC,SAC7C,IAAK,wBACH,OAAOkF,GAAqBvI,EAAOmB,GACrC,IAAK,oBACH,OAAO+H,GAAgBlJ,EAAOmB,GAChC,IAAK,gBACH,OAAOD,EAAalB,EAAOmB,EAAOkC,SACpC,IAAK,gBACH,OAAO9B,EAAavB,EAAOmB,EAAOkC,SACpC,IAAK,cACH,OAAO3B,EAAW1B,EAAOmB,EAAOkC,SAClC,IAAK,uBACH,OAAOyD,GAAoB9G,EAAOmB,EAAOkC,SAC3C,IAAK,uBACH,OAAOkE,GAAoBvH,EAAOmB,EAAOkC,SAC3C,IAAK,mBACH,OAAOgD,GAAgBrG,GACzB,IAAK,kBACH,OAAOuG,GAAevG,GACxB,IAAK,mBACH,OAAOwE,GAAgBxE,EAAOmB,EAAOkC,SACvC,IAAK,mBACH,OAAOqB,GAAgB1E,EAAOmB,EAAOkC,SACvC,IAAK,sBACH,OAAOsB,GAAmB3E,GAC5B,IAAK,4BACH,OAAO4F,GAAyB5F,EAAOmB,EAAOkC,SAChD,IAAK,iBACH,OAAO2C,GAAchG,GACvB,IAAK,mBACH,OAAOiG,GAAgBjG,GACzB,IAAK,gCACH,OAAOkG,GAA6BlG,GACtC,IAAK,+BACH,OAAOmG,GAA4BnG,EAAOmB,EAAOkC,SACnD,IAAK,6BACH,OAAO+C,GAA0BpG,EAAOmB,EAAOkC,SACjD,IAAK,sBACH,OAAOoF,GAAmBzI,EAAOmB,EAAOkC,SAC1C,IAAK,qBACH,OAAOmD,GAAkBxG,EAAOmB,EAAOkC,SACzC,IAAK,cACH,OAAOrC,EAAWhB,GACpB,QACE,OAAOA,KAK6BqJ,OAAOC,8BAAgCD,OAAOC,6BAA6B,CAAEC,OAAO,K,6BCvI/GC,OA5Ef,SAAeC,GAAO,MAKYC,mBAAS,IALrB,mBAKb7N,EALa,KAKH8N,EALG,OAMYD,mBAAS,IANrB,mBAMb5N,EANa,KAMH8N,EANG,OAOgBF,oBAAS,GAPzB,mBAObG,EAPa,KAODC,EAPC,KAYdC,EAAY,uCAAG,WAAeC,GAAf,eAAAzQ,EAAA,6DACnByQ,EAAEC,iBADiB,SAGQrO,EAAeC,EAAUC,GAHjC,WAGbL,EAHa,QAIFyO,QAAWzO,EAAa0O,QAJtB,wDAQnB9P,aAAa+P,QAAQ,cAAe3O,EAAayO,QACjD7P,aAAa+P,QAAQ,eAAgB3O,EAAa0O,SAT/B,UAWbpO,IAXa,QAanBsN,OAAOgB,SAASC,KAAO,cAbJ,4CAAH,sDAgBlB,OACE,uBAAMC,UAAWC,KAAOhB,MAAOiB,SAAQ,uCAAE,WAAOT,GAAP,SAAAzQ,EAAA,sEAAqBwQ,EAAaC,GAAlC,2CAAF,sDAAvC,UACE,yCACA,sFACA,6FAEA,uBAEA,wBAAOO,UAAWC,KAAOE,UAAzB,6BAEE,uBAAOtB,KAAK,OACLuB,KAAK,WACLC,YAAY,WACZ5Q,MAAO6B,EACPgP,SAAU,SAACb,GAAOL,EAAYK,EAAEc,OAAO9Q,aAGhD,wBAAOuQ,UAAWC,KAAOE,UAAzB,6BAEE,uBAAOtB,KAAK,WACLuB,KAAK,WACLC,YAAY,WACZ5Q,MAAO8B,EACP+O,SAAU,SAACb,GAAOJ,EAAYI,EAAEc,OAAO9Q,aAGhD,uBAEA,wBAAOuQ,UAAWC,KAAOE,UAAzB,UACE,uBAAOtB,KAAK,WACLuB,KAAK,cACL3Q,MAAO6P,EACPgB,SAAU,SAACb,GAAOF,EAAcE,EAAEc,OAAO9Q,UAJlD,iBAQA,uBAEA,sBAAKuQ,UAAWC,KAAOE,UAAvB,UACE,wBAAQtB,KAAK,SAAb,qBAGA,4CAAkB,cAAC,KAAD,CAAM2B,GAAG,kBAAT,wC,0BCtEbC,GAAuB,uCAAG,WAAOC,EAAMC,GAAb,iBAAA3R,EAAA,sEACdD,EACrBD,ErBGyC,+BqBDzC,CAAE4R,OAAMC,UAJ2B,cAC/BrQ,EAD+B,gBAMVA,EAASW,OANC,cAM/BC,EAN+B,yBAO9BA,GAP8B,2CAAH,wDCoBrB0P,OArBf,SAAqB1B,GAgBnB,OAdA2B,qBAAU,WAAM,4CACd,kCAAA7R,EAAA,6DACQ8R,EAAchC,OAAOgB,SAASiB,OAC9BC,EAAY,IAAIxQ,gBAAgBsQ,GAChCJ,EAAOM,EAAUC,IAAI,QACrBN,EAAQK,EAAUC,IAAI,SAJ9B,SAMQR,GAAwBC,EAAMC,GANtC,OAQE7B,OAAOgB,SAASC,KAAO,gBARzB,4CADc,uBAAC,WAAD,wBAWdmB,KACC,IAGD,gD,gFCZSC,GAAyB,uCAAG,WACvCC,EAAWC,EAAgBC,GADY,iBAAAtS,EAAA,sEAGhBD,EACrBD,EvBS2C,oCuBP3C,CAAEsS,YAAWC,iBAAgBC,oBANQ,cAGjChR,EAHiC,gBAQZA,EAASW,OARG,cAQjCC,EARiC,yBAShCA,GATgC,2CAAH,0DAgBzBqQ,GAAyB,uCAAG,WAAOtD,GAAP,iBAAAjP,EAAA,sEAChBD,EACrBD,EvBJ2C,oCuBM3C,CAAEmP,uBAJmC,cACjC3N,EADiC,gBAMZA,EAASW,OANG,cAMjCC,EANiC,yBAOhCA,GAPgC,2CAAH,sD,6BC3BzBsQ,GAAa,OACbC,GAAkB,YAClBC,GAAsB,gBAGtBC,GAAgB,CAC3BH,GACAC,GACAC,ICEWE,GAAkC,uCAAG,WAChD7Q,EAAiB8Q,EAAOC,EAAcC,GADU,iBAAA/S,EAAA,sEAGzBD,EACrBD,EzBMqD,8CyBJrD,CAAEiC,kBAAiB8Q,QAAOC,eAAcC,gBANM,cAG1CzR,EAH0C,gBAQrBA,EAASW,OARY,cAQ1CC,EAR0C,yBASzCA,GATyC,2CAAH,4DCqJ/C,IAGe8Q,iBAHS,SAACvM,GAAD,MAAY,KAGrBuM,EArJf,SAAqB9C,GAKnB,IAAM+C,EAAY/C,EAAM+C,UAElBC,EAAgBC,iBAAO,MAPH,EAS8BhD,oBAAS,GATvC,mBASnBiD,EATmB,KASGC,EATH,OAUclD,mBAAS,MAVvB,mBAUnB2C,EAVmB,KAULQ,EAVK,OAWYnD,mBAAS,MAXrB,mBAWnB4C,EAXmB,KAWNQ,EAXM,KAgBpBC,EAAc,uCAAG,WAAeX,GAAf,iBAAA7S,EAAA,6DACf+B,EAAkBmO,EAAM/P,KAAKyF,KADd,SAEMgN,GACzB7Q,EACA8Q,EACAC,EACAC,GANmB,OAEf7Q,EAFe,OAQrBgO,EAAMrE,SAAS3J,EAAa4J,OAC5BuH,GAAwB,GATH,2CAAH,sDAedI,EAAY,uCAAG,8BAAAzT,EAAA,0DACb0T,EAAY5D,OAAO6D,gBAGZC,aAAeF,EAAUG,UAJnB,uBAKjBR,GAAwB,GACxBC,EAAgB,MAChBC,EAAe,MAPE,0BAabO,EAASC,SAASL,EAAUE,WAAWI,WAAWC,aAAa,WACrEZ,GAAwB,GACxBC,EAAgBQ,EAASJ,EAAUZ,cACnCS,EAAeO,EAASJ,EAAUX,aAhBf,4CAAH,qDAsBZmB,EAAc,uCAAG,sBAAAlU,EAAA,sDACrBqT,GAAwB,GACxBC,EAAgB,MAChBC,EAAe,MAHM,2CAAH,qDAqEpB,OACE,sBAAKvC,UAAWC,KAAOkD,YAAatB,MAAO,CAACuB,MAAOnB,GAAnD,UAEE,mBAAGoB,IAAKnB,EAAR,SA5DsB,WAOxB,IANA,IAAM9E,EAAc8B,EAAM/P,KACpBmU,EAAkBlG,EAAYvM,KAC9B6M,EAAgBN,EAAYM,cAE9B6F,EAAc,EACdC,EAAkB,6BACdlN,EAAI,EAAGA,EAAIoH,EAAc/J,OAAQ2C,IAAK,CAC1C,IAAImN,EAAe/F,EAAcpH,GAE3BoN,EAAeJ,EAAgBK,UACnCJ,EACAE,EAAa7F,UAETgG,EAAkBN,EAAgBK,UACtCF,EAAa7F,SACb6F,EAAaI,QAIfL,EACE,qCACGA,EACD,sBAAMV,OAAQS,EAAd,SAA4BG,IAC3BD,EAAa5E,OAAS2C,IACrB,4BAAG,+BAAOoC,MAEXH,EAAa5E,OAAS4C,IACrB,4BAAG,+BAAOmC,MAEXH,EAAa5E,OAAS6C,IACrB,iCAAQ,+BAAOkC,SAKrBL,EAAcE,EAAaI,OAG/B,IAAMH,EAAeJ,EAAgBK,UACnCJ,EACAD,EAAgB3P,QAUlB,OAPA6P,EACE,qCACGA,EACD,sBAAMV,OAAQS,EAAd,SAA4BG,OAc3BI,KAGH,cAAC,KAAD,CAASC,aAAc7B,EAAeO,aAAcA,EAAcS,eAAgBA,EAAgBc,OAAQ5B,EAA1G,SACGT,GAAc5L,KAAI,SAAC8L,EAAOrF,GACzB,OACE,wBACQqC,KAAK,SACLoF,QAAO,sBAAE,sBAAAjV,EAAA,sEAAoBwT,EAAeX,GAAnC,2CAFjB,SAGGA,GAHUrF,c,oBCtIZ0H,GAAsB,uCAAG,WAAOnT,GAAP,iBAAA/B,EAAA,sEACbD,EACrBD,E3BGwC,iC2BDxC,CAAEiC,gBAAiBA,IAJe,cAC9BT,EAD8B,gBAMTA,EAASW,OANA,cAM9BC,EAN8B,yBAO7BA,GAP6B,2CAAH,sDActBiT,GAAuC,uCAAG,WACrDpT,GADqD,iBAAA/B,EAAA,sEAG9BD,EACrBD,E3BR0D,mD2BU1D,CAAEiC,gBAAiBA,IANgC,cAG/CT,EAH+C,gBAQ1BA,EAASW,OARiB,cAQ/CC,EAR+C,yBAS9CA,GAT8C,2CAAH,sDC2CpD,IAGe8Q,iBAHS,SAACvM,GAAD,MAAY,KAGrBuM,EA7Df,SAAqB9C,GAKnB,IAyBI+C,EAzBE7E,EAAc8B,EAAM/P,KACpB4B,EAAkBqM,EAAYxI,KAK9BwP,EAAiB,uCAAG,sBAAApV,EAAA,sEAClBkV,GAAuBnT,GADL,uBAElBmO,EAAMrE,SAAS,CACnBgE,KAAM,qBACN9N,gBAAiBA,IAJK,2CAAH,qDAWjBsT,EAAkB,uCAAG,sBAAArV,EAAA,sEACnBmV,GAAwCpT,GADrB,uBAEnBmO,EAAMrE,SAAS,CACnBgE,KAAM,iCACN9N,gBAAiBA,IAJM,2CAAH,qDAoBxB,OAVEkR,EAD8B,YAA7B7E,EAAYhH,aACD,OACyB,YAA7BgH,EAAYhH,aACR,QAEA,MAOZ,sBAAK4J,UAAWC,KAAOqE,YAAvB,UACE,cAAC,GAAD,CAAanV,KAAMiO,EAAa6E,UAAWA,IAE3C,wBAAQpD,KAAK,SAASoF,QAASI,EAA/B,iCAIA,wBAAQxF,KAAK,SAASoF,QAASG,EAA/B,0B,6BCdN,IAGepC,iBAHS,SAACvM,GAAD,MAAY,KAGrBuM,EA1Cf,SAAqB9C,GAKnB,IAAMqF,EAAcrF,EAAM/P,KACpBqV,EAAkBD,EAAY3P,KAQ9B6P,EAAiB,uCAAG,sBAAAzV,EAAA,sEAClBkV,GAAuBM,GADL,uBAElBtF,EAAMrE,SAAS,CACnBgE,KAAM,qBACN9N,gBAAiByT,IAJK,2CAAH,qDAWvB,OACE,sBAAKxE,UAAWC,KAAOyE,YAAvB,UAEE,cAAC,YAAD,CAAUC,SAAUJ,EAAY1T,KACtB+T,eAAgB,CAAEC,WAAY,OAExC,wBAAQhG,KAAK,SAASoF,QAASQ,EAA/B,0B,oBCSN,IAGezC,iBAHS,SAACvM,GAAD,MAAY,KAGrBuM,EA5Cf,SAAwB9C,GAKtB,IAAMnB,EAAiBmB,EAAM/P,KACvB8O,EAAqBF,EAAenJ,KAKpCkQ,EAAY,uCAAG,sBAAA9V,EAAA,sEACbuS,GAA0BtD,GADb,OAEnBiB,EAAMrE,SAAS,CACbgE,KAAM,wBACNZ,mBAAoBA,IAJH,2CAAH,qDAWlB,OACE,sBAAK+B,UAAWC,KAAO8E,eAAvB,UACE,4BACE,4BAEuC,SAAnChH,EAAeuD,gBACb,6BACAvD,EAAeuD,oBAIvB,wBAAQzC,KAAK,SAASoF,QAASa,EAA/B,0BCkJN,IAQe9C,iBARS,SAACvM,GAAD,MAAY,CAChC3C,OAAQ2C,EAAM3C,OACd8C,aAAcH,EAAMG,aACpBC,gBAAiBJ,EAAMI,gBACvBa,KAAMjB,EAAMiB,QAIDsL,EAnLf,SAAiB9C,GAKf,IAAMxI,EAAOwI,EAAMxI,KACb5D,EAASoM,EAAMpM,OANC,EAQEqM,mBAAS,IARX,mBAQftO,EARe,KAQTmU,EARS,OASwB7F,wBAASxN,GATjC,mBASfZ,EATe,KASEkU,EATF,OAUkC9F,wBAASxN,GAV3C,mBAUfX,EAVe,KAUOkU,EAVP,OAWI/F,mBAAS,IAXb,mBAWfgG,EAXe,KAWRC,EAXQ,OAYgBjG,oBAAS,GAZzB,mBAYfkG,EAZe,KAYFC,EAZE,OAaHnG,mBAAS,IAAIoG,KAAY,CAAEC,QAAS,OAAhDC,EAbe,sBAcGtG,mBAAS,IAA3BkC,EAde,oBAkBtBR,qBAAU,WAER,IAAM6E,EAAeC,aAAY,WAC/BzG,EAAMrE,SAAS,CAAEgE,KAAM,kBACtB,IAEH,OAAO,WACL+G,cAAcF,MAIf,IAEH,IAAMG,EAAmB,SAASpG,GAChC,IAAI1O,EAAiB,CACnB,IACM+U,EADMjT,EAAwBC,GACf,GACrBoS,EAAwBY,GACxBb,EAAmBnS,EAAOE,WAAWsB,MAAMM,MAE7CoQ,EAAQvF,EAAEc,OAAO9Q,QAMbsW,EAAiB,uCAAG,WAAetG,GAAf,iBAAAzQ,EAAA,6DACxByQ,EAAEC,iBACI5O,EAASqU,EAAQ,eAAiB,OAFhB,SAGGvU,EACzBC,EAAMC,EAAQC,EAAiBC,GAJT,cAGlBE,EAHkB,gBAOlBgO,EAAMrE,SAAS,CACnBgE,KAAM,qBACNzB,YAAalM,EAAa/B,OATJ,OAYxB+V,OAAwBvT,GACxBsT,OAAmBtT,GACnBqT,EAAQ,IAdgB,4CAAH,sDA5CD,EA6DkBgB,kCAAhCC,EA7Dc,EA6DdA,WAAYC,EA7DE,EA6DFA,gBAyDpB,OACE,sBAAKlG,UAAWC,KAAOkG,QAAvB,UACE,qBAAKnG,UAAWC,KAAOmG,KAAvB,SACE,qBAAKpG,UAAWC,KAAOoG,YAAvB,SACG3P,EAAKX,KAAI,SAACtG,EAAO+M,GAChB,GCzIe,gBDyIZ/M,EAAM6W,MAA8B,CACrC,GAAoB,SAAjB7W,EAAMqB,OACP,OAAO,cAAC,GAAD,CAAyB3B,KAAMM,GAAb+M,GACpB,GAAoB,iBAAjB/M,EAAMqB,OACd,OAAO,cAAC,GAAD,CAAyB3B,KAAMM,GAAb+M,QAEtB,GC9IW,mBD8IR/M,EAAM6W,MACd,OAAO,cAAC,GAAD,CAA4BnX,KAAMM,GAAb+M,GAE9B,OAAO,oCAKb,uBAAMwD,UAAWC,KAAOsG,kBAAmBrG,SAAQ,uCAAE,WAAOT,GAAP,SAAAzQ,EAAA,sEAAqB+W,EAAkBtG,GAAvC,2CAAF,sDAAnD,UACE,uBAAOZ,KAAK,WACLpP,MAAO0V,EACP7E,SAAU,SAACb,GAAQ2F,EAAS3F,EAAEc,OAAOiG,YAC5C,wBAAQ3H,KAAK,SACLoF,QA5EO,WACfoB,GAmBEoB,KAAkBC,oCACpBD,KAAkBE,gBAGpBlB,EAASmB,OACNC,SAASlM,MAAK,YAAqB,IAAD,mBAAlBmM,EAAkB,KAAVC,EAAU,KACjC,sBAAC,8BAAA/X,EAAA,6DACOgY,EAAO,IAAIC,KAAKH,EAAQ,YAAa,CACzCjI,KAAMkI,EAAKlI,KACXqI,aAAc/T,KAAKC,QAHtB,SAM4B+N,GAA0B6F,EAAMG,KAAKC,UAAU/F,GAAiB4E,GAN5F,cAMO/U,EANP,gBAQOgO,EAAMrE,SAAS,CACnBgE,KAAM,wBACNd,eAAgB7M,EAAa/B,OAVhC,OAaKsX,KAAkBC,oCACpBR,IAdH,0CAAD,MAmBJZ,GAAe,KA3CXmB,KAAkBC,oCACpBD,KAAkBY,eAAe,CAAEC,YAAY,IAcjD7B,EAAS8B,QACTjC,GAAe,KA2DLkC,UAAW1U,EAAOiB,UAF1B,oBAKCoR,EACC,0BAAUtG,KAAK,OACLuB,KAAK,OACLC,YAAY,OACZ5Q,MAAOoB,EACPyP,SAAUuF,EACV2B,UAAW1U,EAAOiB,YAE5B,uBAAO8K,KAAK,OACLuB,KAAK,OACLC,YAAY,OACZ5Q,MAAOoB,EACPyP,SAAUuF,EACV2B,UAAW1U,EAAOiB,YAE3B,wBAAQ8K,KAAK,SACL2I,UAAW1U,EAAOiB,UAD1B,2B,oBEjKO0T,OAVf,SAAkBvI,GAEhB,OACE,qBAAKc,UAAWC,KAAOwH,SAAvB,SACE,6BAAI,6C,4DCKGC,GAAuB,uCAAG,WAAO5V,EAAWoE,EAAuBzD,GAAzC,eAAAzD,EAAA,sEACdD,EACrBD,ElCoCkC,0BkClClC,CAAEgD,YAAWoE,wBAAuBzD,cAJD,cAC/BnC,EAD+B,gBAMxBA,EAASW,OANe,mFAAH,0DAcvB0W,GAAuB,uCAAG,WAAOC,EAAYnV,GAAnB,eAAAzD,EAAA,sEACdD,EACrBD,ElCuBkC,0BkCrBlC,CAAE8Y,aAAYnV,cAJqB,cAC/BnC,EAD+B,gBAMxBA,EAASW,OANe,mFAAH,wDAavB4W,GAAqB,uCAAG,WAAO/V,EAAWW,GAAlB,eAAAzD,EAAA,sEACZD,EACrBF,ElCWgC,uBkCThC,CAAEiD,YAAWW,cAJoB,cAC7BnC,EAD6B,gBAMtBA,EAASW,OANa,mFAAH,wDC9BrB6W,GAA8B,uCAAG,WAAOrV,EAAWsV,EAAsBC,EAAsBC,EAASC,EAAaxL,GAApF,eAAA1N,EAAA,sEACrBD,EACrBD,EnC4C0C,kCmC1C1C,CAAE2D,YAAWsV,uBAAsBC,uBAAsBC,UAASC,cAAaxL,oBAJrC,cACtCpM,EADsC,gBAM/BA,EAASW,OANsB,mFAAH,gEAa9BkX,GAA8B,uCAAG,WAAOC,EAAmB3V,EAAWiK,GAArC,eAAA1N,EAAA,sEACrBD,EACrBD,EnCgC0C,kCmC9B1C,CAAEsZ,oBAAmB3V,YAAWiK,oBAJU,cACtCpM,EADsC,gBAM/BA,EAASW,OANsB,mFAAH,0DCU3C,IAEe+Q,iBAFS,SAACvM,GAAD,MAAY,KAErBuM,EA9Bf,SAAkB9C,GAAQ,IAAD,EAE+BA,EAAM/P,KAApDsN,EAFe,EAEfA,cAAehK,EAFA,EAEAA,UAAWiK,EAFX,EAEWA,gBAE5B2L,EAAmB,uCAAG,4BAAArZ,EAAA,sEACCmZ,GACzB1L,EAAc7H,KAAMnC,EAAWiK,GAFP,cACpBxL,EADoB,gBAIpBgO,EAAMrE,SAAS3J,EAAa4J,OAJR,2CAAH,qDAOnBrC,EAAagE,EAAchE,WAC/BgE,EAAchE,WAAWvC,sBAAwB,IAAO,YACpDwC,EAAa+D,EAAc/D,WAC/B+D,EAAc/D,WAAWxC,sBAAwB,IAAO,MAE1D,OACE,gCACE,iCACGuC,EADH,MAEGC,EAFH,IAGI+D,EAAcwL,QAAU,QAAU,SAHtC,OAKA,wBAAQhE,QAASoE,EAAjB,0BCFN,IAEerG,iBAFS,SAACvM,GAAD,MAAY,KAErBuM,EAvBf,SAAgB9C,GAAQ,IAAD,EAEcA,EAAM/P,KAAjCmZ,EAFa,EAEbA,YAAa7V,EAFA,EAEAA,UAEf8V,EAAiB,uCAAG,4BAAAvZ,EAAA,sEACG2Y,GACzBW,EAAY1T,KAAMnC,GAFI,cAClBvB,EADkB,gBAIlBgO,EAAMrE,SAAS3J,EAAa4J,OAJV,2CAAH,qDAOvB,OACE,gCACE,sCACKwN,EAAYpS,sBAAwB,OAEzC,wBAAQ+N,QAASsE,EAAjB,0BC8GN,IAIevG,iBAJS,SAACvM,GAAD,MAAY,CAClCoB,eAAgBpB,EAAMoB,kBAGTmL,EAzHf,SAAwB9C,GAKtB,IAAMrH,EAAQqH,EAAM/P,KACdsD,EAAYoF,EAAMjD,KAClB8H,EAAkB7E,EAAM+B,WAExB4O,EAAkBtJ,EAAMsJ,gBACxBC,EAAqBvJ,EAAMuJ,mBAC3BzE,EAAS9E,EAAM8E,OACf0E,EAAYxJ,EAAMwJ,UAClBC,EAAazJ,EAAMyJ,WAGnBvR,EADiB8H,EAAMrI,eACEpE,IAAc,GAhBhB,EAkByB0M,mBAAS,IAlBlC,mBAkBtByJ,EAlBsB,KAkBDC,EAlBC,OAmB2B1J,mBAAS,QAnBpC,mBAmBtB4I,EAnBsB,KAmBAe,EAnBA,OAoB2B3J,mBAAS,QApBpC,mBAoBtB6I,EApBsB,KAoBAe,EApBA,KAyBvBC,EAAiB,uCAAG,4BAAAha,EAAA,sEACG0Y,GACzB7P,EAAMvD,MAAMM,KAAMgU,EAAqBnW,GAFjB,cAClBvB,EADkB,gBAIlBgO,EAAMrE,SAAS3J,EAAa4J,OAJV,OAKxB+N,EAAuB,IALC,2CAAH,qDAWjBI,EAAmB,uCAAG,4BAAAja,EAAA,sEACC8Y,GACzBjQ,EAAMjD,KACNmT,EACAC,GACA,EACA,KACAtL,GAPwB,cACpBxL,EADoB,gBASpBgO,EAAMrE,SAAS3J,EAAa4J,OATR,2CAAH,qDAiCzB,OAnBA+F,qBAAU,WAAM,4CACd,4BAAA7R,EAAA,sEAC6B6Y,GACzBhQ,EAAMvD,MAAMM,KAAMnC,GAFtB,cACQvB,EADR,gBAIQgO,EAAMrE,SAAS3J,EAAa4J,OAJpC,OAKE4N,IALF,4CADc,sBAQVF,IAGJC,GAAmB,GAXJ,WAAD,wBAYdS,MAEC,CAACV,IAMF,eAAC,KAAD,CAAOxE,OAAQA,EACRmF,aAAa,EADpB,UAEE,wBAAQlF,QAAS0E,EAAjB,mBACA,wCACCvR,EAAQrB,KAAI,SAACtG,EAAO+M,GAAR,OACX,cAAC,GAAD,CACarN,KAAM,CACJmZ,YAAa7Y,EACbgD,UAAWA,IAHb+J,MAMf,gCACE,uBAAOqC,KAAK,OACLuB,KAAK,wBACLC,YAAY,YACZ5Q,MAAOmZ,EACPtI,SAAU,SAACb,GAAOoJ,EAAuBpJ,EAAEc,OAAO9Q,UACzD,wBAAQwU,QAAS+E,EAAjB,8BAEF,0CACCnR,EAAMU,UAAUxC,KAAI,SAACtG,EAAO+M,GAAR,OACnB,cAAC,GAAD,CACerN,KAAM,CACJsN,cAAehN,EACfgD,UAAWA,EACXiK,gBAAiBA,IAJnBF,MAOjB,gCACE,yBAAQ/M,MAAOsY,EAAsBzH,SAAU,SAACb,GAAOqJ,EAAwBrJ,EAAEc,OAAO9Q,QAAxF,UACE,wBAAQA,MAAO,OAAf,uBACC2H,EAAQrB,KAAI,SAACtG,EAAO+M,GAAR,OACX,yBAAoB/M,MAAOA,EAAMmF,KAAjC,eAA0CnF,EAAMyG,wBAAnCsG,SAGjB,yBAAQ/M,MAAOuY,EAAsB1H,SAAU,SAACb,GAAOsJ,EAAwBtJ,EAAEc,OAAO9Q,QAAxF,UACG2H,EAAQrB,KAAI,SAACtG,EAAO+M,GAAR,OACX,yBAAoB/M,MAAOA,EAAMmF,KAAjC,eAA0CnF,EAAMyG,wBAAnCsG,MAEf,wBAAQ/M,MAAO,OAAf,oBAEF,wBAAQwU,QAASgF,EAAjB,oC,oBC/DR,IAKejH,iBALS,SAACvM,GAAD,MAAY,CAClC3C,OAAQ2C,EAAM3C,OACdkG,OAAQvD,EAAMuD,UAGDgJ,EA7Df,SAAoB9C,GAAQ,IAAD,EAKnBrH,EAAQqH,EAAM/P,KACd2D,EAASoM,EAAMpM,OACfkG,EAASkG,EAAMlG,OAPI,EASSmG,oBAAS,GATlB,mBASlBiK,EATkB,KASPC,EATO,OAUqBlK,oBAAS,GAV9B,mBAUlBqJ,EAVkB,KAUDC,EAVC,KA2BnBa,GAAqB,OAANxW,QAAM,IAANA,GAAA,UAAAA,EAAQE,kBAAR,eAAoBwJ,SAApB,OAA6BxD,QAA7B,IAA6BA,OAA7B,EAA6BA,EAAQwD,OACpD+M,GAAYD,GAAgBA,EAAezR,EAAM2E,MACjDgN,EAAS3R,EAAM+B,YAAc2P,EAAW,IAAM,GACpD,OACE,sBAAKvJ,UAAWC,KAAOwJ,WAAvB,UACE,iCACGD,EACA3R,EAAMvD,MAAM8L,QAEdmJ,GACC,qCACE,wBAAQvJ,UAAWC,KAAOyJ,OAAQ7K,KAAK,SAASoF,QA1BhC,WACtBwE,GAAmB,IAyBb,kBAGA,wBAAQzI,UAAWC,KAAOyJ,OAAQ7K,KAAK,SAASoF,QAAO,uCAAE,WAAOxE,GAAP,SAAAzQ,EAAA,sEAAqBkQ,EAAMyK,QAAQ9R,GAAnC,2CAAF,sDAAvD,uBAKJ,cAAC,GAAD,CAAgB1I,KAAM0I,EACXmM,OAAQoF,EACRZ,gBAAiBA,EACjBC,mBAAoBA,EACpBC,UAlCG,WAChBW,GAAa,IAkCAV,WA/BI,WACjBU,GAAa,YCoDjB,IAKerH,iBALS,SAACvM,GAAD,MAAY,CAClC3C,OAAQ2C,EAAM3C,OACdwE,aAAc7B,EAAM6B,gBAGP0K,EA9Ef,SAAyB9C,GAAQ,IAAD,IAKxBrH,EAAQqH,EAAM/P,KACd2D,EAASoM,EAAMpM,OACfwE,EAAe4H,EAAM5H,aACrB0B,EAAS1B,EAAaA,EAAa3D,OAAS,GAC5ClB,EAAYoF,EAAMjD,KAExBgV,QAAQC,KAAU,OAAN/W,QAAM,IAANA,OAAA,EAAAA,EAAQiB,aAAmB,OAANjB,QAAM,IAANA,GAAA,UAAAA,EAAQE,kBAAR,eAAoB4G,cAAenH,GAEpE,IAAMqX,GAEG,OAANhX,QAAM,IAANA,OAAA,EAAAA,EAAQE,cAAoB,OAANF,QAAM,IAANA,GAAA,UAAAA,EAAQE,kBAAR,eAAoB4G,cAAenH,KAEzD,OAACK,QAAD,IAACA,OAAD,EAACA,EAAQE,cAAT,OAAuBgG,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAQY,cAAoB,OAANZ,QAAM,IAANA,OAAA,EAAAA,EAAQY,cAAenH,EAjBzC,EAqBF0M,mBAAS2K,GArBP,mBAqBvBC,EArBuB,KAqBfC,EArBe,KA0BxBC,EAAe,SAASxK,GAC5BuK,GAAWD,IAMb,OACE,sBAAK/J,UAAWC,KAAOiK,gBAAvB,UACE,sBAAKlK,UAAWC,KAAOkK,KAAvB,UACE,+BACE,4BACGtS,EAAMuS,WAAWhK,SAHxB,WAOGvI,EAAMJ,SAAS9D,OAAS,IAAMoW,GAC7B,wBAAQ/J,UAAWC,KAAOyJ,OAAQ7K,KAAK,SAASoF,QAASgG,EAAzD,kBARJ,WAYGpS,EAAMJ,SAAS9D,OAAS,GAAKoW,GAC5B,wBAAQ/J,UAAWC,KAAOyJ,OAAQ7K,KAAK,SAASoF,QAASgG,EAAzD,kBAbJ,YAiBIH,GACA,wBAAQ9J,UAAWC,KAAOyJ,OAAQ7K,KAAK,SAASoF,QAAO,uCAAE,WAAOxE,GAAP,SAAAzQ,EAAA,sEAAqBkQ,EAAMyK,QAAQ9R,GAAnC,2CAAF,sDAAvD,uBAKHA,EAAMJ,SAAS9D,OAAS,GAAKoW,GAC5B,qBAAK/J,UAAWC,KAAOoK,SAAvB,SACGxS,EAAMJ,SAAS1B,KAAI,SAACtG,EAAO+M,GAAR,OAClB,cAAC,GAAD,CACYrN,KAAMM,EACNka,QAASzK,EAAMyK,SAFVnN,c,UCmD7B,IAOewF,iBAPS,SAACvM,GAAD,MAAY,CAClC3C,OAAQ2C,EAAM3C,OACd0E,aAAc/B,EAAM+B,aACpBF,aAAc7B,EAAM6B,gBAIP0K,EAnHf,SAAkB9C,GAAQ,IAAD,IAEjB1H,EAAe0H,EAAM1H,aACrB1E,EAASoM,EAAMpM,OACfwX,EAAmB,OAAGxX,QAAH,IAAGA,GAAH,UAAGA,EAAQE,kBAAX,iBAAG,EAAoBsB,aAAvB,aAAG,EAA2B8L,KAEjDmK,EAAgB7S,GAAiBF,EAAc1E,GAC/C0X,EAAS,IAAIrX,KAAKA,KAAKC,MAAQmX,GAO/BE,EAAgB,uCAAG,WAAe5S,GAAf,iBAAA7I,EAAA,6DACjByD,EAAYoF,EAAMjD,KADD,SAGjBpC,EAAiBC,GAHA,QAKjBmH,EAAa/B,EAAM+B,YAEvBsF,EAAMrE,SAAS,CACbgE,KAAM,wBACNjF,WAAYA,EACZnH,UAAWA,IAGbyM,EAAMrE,SAAS,CACbgE,KAAM,mBACNpM,UAAWA,IAfQ,2CAAH,sDAuBtB,OACE,sBAAKuN,UAAWC,KAAOyK,SAAvB,UACE,6BAAI,6CACJ,8BACGxL,EAAM5H,aAAavB,KAAI,SAACtG,EAAO+M,GAC9B,OAAG/M,EAAM6E,MAEL,cAAC,GAAD,CACYnF,KAAMM,EACNka,QAAS,cAFJnN,GAMZ,kCAIb,gCACE,6BAAI,iDACH8N,EAEG,4BAAIA,IAEJ,4BAAG,2DAIT,6BAAI,6CACJ,gCACG9S,EAAazB,KAAI,SAACtG,EAAO+M,GACxB,OAAG/M,EAAM2a,WAEL,cAAC,GAAD,CACiBjb,KAAMM,EACNka,QAASc,GAFJhb,EAAMmF,MAKtBnF,EAAM6E,MAEZ,cAAC,GAAD,CACYnF,KAAMM,EACNka,QAASc,GAFJhb,EAAMmF,MAMlB,gCAGV2V,EAEG,4BAAG,sDAED,cAACI,GAAA,EAAD,CAAcC,QAAM,EAACC,KAAML,EAAQM,OAAO,eAG5C,4BAAG,iEAKP,cAAC,KAAD,CAAMtK,GAAG,cAAT,SACE,wBAAQR,UAAWC,KAAO8K,WAA1B,qC,oBCzDV,IAMe/I,iBANS,SAACvM,GAAD,MAAY,CAClC+B,aAAc/B,EAAM+B,aACpB1E,OAAQ2C,EAAM3C,UAIDkP,EAnDf,SAAmB9C,GAEjB,IAAM1H,EAAe0H,EAAM1H,aACrBwT,EhCmBqB,SAASrT,GACpC,GAAIA,EAAOhE,OAAX,CAIA,IAL4C,EAKtCsX,EAAkB,GALoB,cAM3BtT,GAN2B,IAM5C,IAAI,EAAJ,qBAAyB,CAAC,IAAlBE,EAAiB,QACvB,GAAGA,EAAMJ,SAAS9D,OAAQ,CAAC,IAAD,gBACPkE,EAAMJ,UADC,IACxB,IAAI,EAAJ,qBAAiC,CAAC,IAA1ByT,EAAyB,QAC/BD,EAAgBrS,KAAKsS,IAFC,oCAKxBD,EAAgBrS,KAAKf,IAZmB,8BAgB5C,OAAOoT,GgCnCgBE,CAAc,CAAC3T,EAAa,KAC7C4T,EAAc,sBAAOJ,GAAP,YAA0BxT,EAAa6T,MAAM,KAC3DvY,EAASoM,EAAMpM,OAErB8W,QAAQC,IAAIuB,GAGZ,IAAMb,EAAgB7S,GAAiBF,EAAc1E,GAC/C0X,EAAS,IAAIrX,KAAKA,KAAKC,MAAQmX,GAKrC,OACE,sBAAKvK,UAAWC,KAAOqL,UAAvB,UACE,6BAAI,6CACHf,EAEG,4BAAG,sDAED,cAACI,GAAA,EAAD,CAAcC,QAAM,EAACC,KAAML,EAAQM,OAAO,eAG5C,4BAAG,iEAKP,8BACGM,EAAerV,KAAI,SAAC8B,EAAO2E,GAAW,IAAD,IACpC,OACE,qBAAKwD,UAAWC,KAAOsL,cAAvB,UACG,UAAA1T,EAAMvD,aAAN,eAAa8L,QAAb,UAAqBvI,EAAMuS,kBAA3B,aAAqB,EAAkBhK,mB,oBClCzCoL,GAAuB,uCAAG,WAAOC,EAAOC,EAAiBC,EAAiBC,EAAsBC,EAAaC,EAAaC,EAAgBC,GAAhH,iBAAAhd,EAAA,sEACdD,EACrBF,E3CwBiC,gB2CtBjC,CACE4c,QACAC,kBACAC,kBACAC,uBACAC,cACAC,cACAC,iBACAC,gBAZiC,cAC/B1b,EAD+B,gBAeVA,EAASW,OAfC,cAe/BC,EAf+B,yBAgB9BA,GAhB8B,2CAAH,oEAuBvB+a,GAAgB,uCAAG,WAAOjM,EAAWkM,GAAlB,iBAAAld,EAAA,sEACPD,EACrBD,E3CIiC,yB2CFjC,CAAEkR,YAAWkM,gBAJe,cACxB5b,EADwB,gBAMHA,EAASW,OANN,cAMxBC,EANwB,yBAOvBA,GAPuB,2CAAH,wD,oBC9BhBib,GACX,qBACEC,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,SAOE,sBACEC,EAAE,8GACFF,KAAK,mBC8CIG,OAnDf,SAAsBxN,GACpB,IAAMyN,EAAezN,EAAM/P,KACrByd,EAAa1N,EAAM0N,WAFE,EAIazN,oBAAS,GAJtB,mBAIpB0N,EAJoB,KAINC,EAJM,OAKW3N,oBAAS,GALpB,mBAKpB4N,EALoB,KAKPC,EALO,KAOrBC,EAAgB,uCAAG,sBAAAje,EAAA,6DACvB8d,GAAgB,GADO,SAEjBF,EAAWD,EAAarG,MAAOqG,EAAa/X,MAF3B,OAGvBoY,GAAe,GAHQ,2CAAH,qDAMtB,OACE,sBAAKhN,UAAWC,KAAOyM,aAAvB,UACE,iCACGC,EAAaO,SADhB,IAC2BP,EAAa7b,OADxC,IACiD6b,EAAavM,KAD9D,2BAMCyM,IAAiBE,GAChB,wBAAQlO,KAAK,SACLmB,UAAWC,KAAOyJ,OAClBzF,QAASgJ,EACTzF,UAAU,EAHlB,iBASFqF,IAAiBE,GACf,wBAAQlO,KAAK,SACLmB,UAAWC,KAAOyJ,OAClBlC,UAAU,EAFlB,SAGE,mBAAGxH,UAAWC,KAAOkN,cAKzBJ,GACE,wBAAQlO,KAAK,SACLmB,UAAWC,KAAOyJ,OAClBlC,UAAU,EAFlB,SAGG2E,S,oBC1CEiB,GAAgB,uCAAG,WAAOhM,EAAWiM,EAAWC,EAAWC,EAAYC,GAApD,iBAAAxe,EAAA,sEACPD,EACrBD,E9CoBiC,uB8ClBjC,CACEsS,UAAWA,EACXiM,UAAWA,EACXC,UAAWA,EACXC,WAAYA,EACZC,UAAWA,IATe,cACxBld,EADwB,gBAYHA,EAASW,OAZN,cAYxBC,EAZwB,yBAavBA,GAbuB,2CAAH,8DCoHduc,OApHf,SAAgBvO,GAAO,MAKWC,mBAAS,GALpB,mBAKduO,EALc,KAKJC,EALI,OAOexO,oBAAS,GAPxB,mBAOdyO,EAPc,KAOFC,EAPE,OAQa1O,mBAAS,IARtB,mBAQdiC,EARc,KAQH0M,EARG,OASa3O,mBAAS,IATtB,mBASdkO,EATc,KASHU,EATG,OAUa5O,mBAAS,IAVtB,mBAUdmO,EAVc,KAUHU,EAVG,OAWe7O,mBAAS,IAXxB,mBAWdoO,EAXc,KAWFU,EAXE,OAYa9O,mBAAS,IAZtB,mBAYdqO,EAZc,KAYHU,EAZG,KAcflK,EAAS9E,EAAM8E,OACf2E,EAAazJ,EAAMyJ,WAKnBnJ,EAAY,uCAAG,sBAAAxQ,EAAA,6DAGnB6e,GAAc,GAHK,SAIbT,GACJhM,EACAiM,EACAC,EACAC,EACAC,GATiB,OAanBK,GAAc,GACdF,GAAY,SAAAQ,GAAI,OAAIA,EAAO,KAC3BH,EAAa,IACbC,EAAc,IACdC,EAAa,IAGbvF,IApBmB,2CAAH,qDAuBlB,OACE,eAAC,KAAD,CAAO3E,OAAQA,EACRmF,aAAa,EADpB,UAEE,wBAAQlF,QAAS0E,EACTnB,SAAUoG,EADlB,mBAGA,sBAAK5N,UAAWC,KAAOhB,MAAvB,UACE,wCAEA,wBAAOe,UAAWC,KAAOE,UAAzB,uBAEE,uBAAOtB,KAAK,OACLuB,KAAK,YACLE,SAAU,SAACb,GAAOqO,EAAarO,EAAEc,OAAO1L,MAAM,KAC9C2S,SAAUoG,GACLF,MAGd,wBAAO1N,UAAWC,KAAOE,UAAzB,uBAEE,uBAAOtB,KAAK,OACLuB,KAAK,YACLE,SAAU,SAACb,GAAOsO,EAAatO,EAAEc,OAAO1L,MAAM,KAC9C2S,SAAUoG,GACLF,EAAW,MAGzB,uBAEA,wBAAO1N,UAAWC,KAAOE,UAAzB,uBAEE,uBAAOtB,KAAK,OACLuB,KAAK,YACLC,YAAY,aACZ5Q,MAAO6d,EACPhN,SAAU,SAACb,GAAOuO,EAAavO,EAAEc,OAAO9Q,QACxC+X,SAAUoG,OAGnB,wBAAO5N,UAAWC,KAAOE,UAAzB,wBAEE,uBAAOtB,KAAK,OACLuB,KAAK,aACLC,YAAY,cACZ5Q,MAAO8d,EACPjN,SAAU,SAACb,GAAOwO,EAAcxO,EAAEc,OAAO9Q,QACzC+X,SAAUoG,OAGnB,wBAAO5N,UAAWC,KAAOE,UAAzB,uBAEE,uBAAOtB,KAAK,OACLuB,KAAK,YACLC,YAAY,aACZ5Q,MAAO+d,EACPlN,SAAU,SAACb,GAAOyO,EAAazO,EAAEc,OAAO9Q,QACxC+X,SAAUoG,OAGnB,uBAEA,qBAAK5N,UAAWC,KAAOE,UAAvB,SACE,wBAAQtB,KAAK,SACLoF,QAASzE,EACTgI,SAAUoG,EAFlB,6BCuEV,IAGe5L,iBAHS,SAACvM,GAAD,MAAY,KAGrBuM,EAhLf,SAAmB9C,GAAO,MAMkBC,mBAAS,IAN3B,mBAMjBiP,EANiB,KAMFC,EANE,OAQElP,mBAAS,IARX,mBAQjBsM,EARiB,KAQV6C,EARU,OAWoBnP,oBAAS,GAX7B,mBAWjBoP,EAXiB,KAWDC,EAXC,OAYoBrP,oBAAS,GAZ7B,mBAYjBsP,EAZiB,KAYDC,EAZC,OAa8BvP,oBAAS,GAbvC,mBAajBwP,EAbiB,KAaIC,EAbJ,OAeczP,oBAAS,GAfvB,mBAejB0M,EAfiB,KAeJgD,EAfI,OAgBc1P,oBAAS,GAhBvB,mBAgBjB2M,EAhBiB,KAgBJgD,EAhBI,OAiBoB3P,oBAAS,GAjB7B,mBAiBjB4M,EAjBiB,KAiBDgD,EAjBC,OAkBc5P,oBAAS,GAlBvB,mBAkBjB6M,EAlBiB,KAkBJgD,EAlBI,OAoBU7P,oBAAS,GApBnB,mBAoBjBiK,EApBiB,KAoBNC,EApBM,KAiClB7J,EAAY,uCAAG,4BAAAxQ,EAAA,yDACfyc,EADe,iEAIQD,GACzBC,EACA8C,EACAE,EACAE,EACA9C,EACAC,EACAC,EACAC,GAZiB,OAIb9a,EAJa,OAcnBmd,EAAiBnd,EAAa/B,MAdX,2CAAH,qDAoBZyd,EAAU,uCAAG,WAAe5M,EAAWkM,GAA1B,eAAAld,EAAA,sEACXid,GACJjM,EACAkM,GAHe,uBAMmB3Z,IANnB,OAMX0c,EANW,OAOjB/P,EAAMrE,SAASoU,EAAsBnU,OAPpB,2CAAH,wDAmBhB,OACE,gCACE,sBAAKkF,UAAWC,KAAOiP,UAAvB,UACE,wCAEA,wBAAQjL,QAvDI,WAChBoF,GAAa,IAsDT,oBAEA,uBAAS,uBAET,wBAAOrJ,UAAWC,KAAOE,UAAzB,uBAEE,uBAAOtB,KAAK,OACLuB,KAAK,QACLC,YAAY,GACZ5Q,MAAOgc,EACPnL,SAAU,SAACb,GAAO6O,EAAS7O,EAAEc,OAAO9Q,QACpC0f,UAtBO,SAACC,GACJ,UAAdA,EAAM5f,KACRgQ,UAuBG,uBAEA,sBAAKQ,UAAWC,KAAOE,UAAvB,UACE,kCACE,uBAAOtB,KAAK,WACL2H,QAAS+H,EACTjO,SAAU,SAACb,GAAO+O,EAAkB/O,EAAEc,OAAOiG,YAHtD,aAOA,kCACE,uBAAO3H,KAAK,WACLuB,KAAK,mBACLoG,QAASiI,EACTnO,SAAU,SAACb,GAAOiP,EAAkBjP,EAAEc,OAAOiG,YAJtD,aAQA,kCACE,uBAAO3H,KAAK,WACLuB,KAAK,wBACLoG,QAASmI,EACTrO,SAAU,SAACb,GAAOmP,EAAuBnP,EAAEc,OAAOiG,YAJ3D,sBASF,sBAAKxG,UAAWC,KAAOE,UAAvB,UACE,kCACE,uBAAOtB,KAAK,WACL2H,QAASqF,EACTvL,SAAU,SAACb,GAAOoP,EAAepP,EAAEc,OAAOiG,YAHnD,WAOA,kCACE,uBAAO3H,KAAK,WACL2H,QAASsF,EACTxL,SAAU,SAACb,GAAOqP,EAAerP,EAAEc,OAAOiG,YAHnD,WAOA,kCACE,uBAAO3H,KAAK,WACL2H,QAASuF,EACTzL,SAAU,SAACb,GAAOsP,EAAkBtP,EAAEc,OAAOiG,YAHtD,cAOA,kCACE,uBAAO3H,KAAK,WACL2H,QAASwF,EACT1L,SAAU,SAACb,GAAOuP,EAAevP,EAAEc,OAAOiG,YAHnD,cAQF,uBAEA,qBAAKxG,UAAWC,KAAOE,UAClB8D,QAASzE,EADd,SAEE,wBAAQX,KAAK,SAAb,yBAMJ,uBAEA,qBAAKmB,UAAWC,KAAOoP,cAAvB,SACGjB,EAAcrY,KAAI,SAACtG,EAAO+M,GAAR,OACjB,cAAC,GAAD,CAA0BrN,KAAMM,EAAOmd,WAAYA,GAAhCpQ,QAIvB,cAAC,GAAD,CAAQwH,OAAQoF,EACRT,WA7IO,WACjBU,GAAa,YCrCJiG,GACX,sBACElD,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBAAMC,EAAE,sBAAsBF,KAAK,iBACnC,sBAAME,EAAE,uBAAuBF,KAAK,oBAK3BgD,GACX,sBACEnD,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBAAMC,EAAE,wBAAwBF,KAAK,iBACrC,sBAAME,EAAE,iBAAiBF,KAAK,oB,oBCyFlC,IAQevK,iBARS,SAACvM,GAAD,MAAY,CAChC3C,OAAQ2C,EAAM3C,OACdwE,aAAc7B,EAAM6B,aACpBE,aAAc/B,EAAM+B,aACpBpD,SAAUqB,EAAMrB,YAIL4N,EA5Gf,SAAgB9C,GAAQ,IAAD,YAKfpM,EAASoM,EAAMpM,OACfsB,EAAW8K,EAAM9K,SACjBob,EAAQ,UAAG1c,EAAOE,kBAAV,iBAAG,EAAmBsB,aAAtB,aAAG,EAA0Bkb,SACrClb,EAAK,OAAGxB,QAAH,IAAGA,GAAH,UAAGA,EAAQE,kBAAX,aAAG,EAAoBsB,MAC5B0E,EAAS3B,GAAe6H,EAAM5H,cAC9B2B,EAAS1B,GAAe2H,EAAM1H,cAVf,EAeS2H,mBAAS,GAflB,mBAeLsQ,GAfK,WAwCrB,OAjBiC,KAAxB,OAAN3c,QAAM,IAANA,GAAA,UAAAA,EAAQE,kBAAR,eAAoBwJ,QAAgBxD,GACrC8F,OAAOgB,SAAS4P,SAKlB7O,qBAAU,WACR,IAAM6E,EAAeC,aAAY,WAZjC8J,GAAW,SAAAtB,GAAI,OAAIA,EAAO,OAcvB,KAEH,OAAO,WACLvI,cAAcF,MAGf,IAGD,sBAAK1F,UAAWC,KAAO0P,OAAvB,UACE,sBAAK3P,UAAWC,KAAO2P,IAAvB,UACE,6BAAI,0CACJ,mCAAI5W,QAAJ,IAAIA,GAAJ,UAAIA,EAAQ1E,aAAZ,aAAI,EAAe8L,UAGrB,uBAEA,sBAAKJ,UAAWC,KAAO2P,IAAvB,UACE,6BAAI,iDACHJ,GACC,qBAAKK,IAAI,GACJC,IAAKN,EACLxP,UAAWC,KAAO8P,UAEjB,OAANjd,QAAM,IAANA,OAAA,EAAAA,EAAQiB,aAAR,OAAqBjB,QAArB,IAAqBA,OAArB,EAAqBA,EAAQe,YAC7B,oCAAKS,QAAL,IAAKA,OAAL,EAAKA,EAAO8L,SAEZ,OAACtN,QAAD,IAACA,OAAD,EAACA,EAAQiB,cAAa,OAACjB,QAAD,IAACA,OAAD,EAACA,EAAQe,WAC/B,6BAAI,gDAIR,qBAAKmM,UAAWC,KAAO2P,IAAvB,SACE,0BAAUngB,MAAOmE,EAAYd,GACnBkd,IAAG,OAAEld,QAAF,IAAEA,GAAF,UAAEA,EAAQE,kBAAV,aAAE,EAAoB+E,8BAIrC,sBAAKiI,UAAWC,KAAO2P,IAAvB,UACE,wBAAQ5P,UAAWC,KAAOyJ,OAClBzF,QAAS/E,EAAM+Q,UACfzI,UAAWpT,EAAS2H,gBAF5B,SAGGwT,KAEH,wBAAQvP,UAAWC,KAAOyJ,OAClBzF,QAAS/E,EAAMgR,UACf1I,UAAWpT,EAAS2H,gBAF5B,SAGGuT,QAIL,uBAEA,sBAAKtP,UAAWC,KAAO2P,IAAvB,UACE,6BAAI,0CACJ,mCAAI3W,QAAJ,IAAIA,OAAJ,EAAIA,EAAQ3E,MAAM8L,UAGpB,cAAC,KAAD,CAAMI,GAAG,aAAT,SACE,wBAAQR,UAAWC,KAAOkQ,WAA1B,0B,oBCxER,IAKenO,iBALS,SAACvM,GAAD,MAAY,CAChC3C,OAAQ2C,EAAM3C,UAIHkP,EA/Bf,SAAoB9C,GAAQ,IAAD,QAEnBpM,EAASoM,EAAMpM,OACf0c,EAAQ,UAAG1c,EAAOE,kBAAV,iBAAG,EAAmBsB,aAAtB,aAAG,EAA0Bkb,SACrClF,EAAmB,OAAGxX,QAAH,IAAGA,GAAH,UAAGA,EAAQE,kBAAX,iBAAG,EAAoBsB,aAAvB,aAAG,EAA2B8L,KAEvD,OACE,gCACE,6BAAI,iDACHoP,GACC,qBAAKK,IAAI,GACJC,IAAKN,EACLxP,UAAWC,KAAO8P,QAExBzF,EAEG,4BAAIA,IAEJ,4BAAG,8D,oBCvBA8F,GACX,qBACEhE,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,SAOE,sBACEC,EAAE,uPACFF,KAAK,mBAME8D,GACX,qBACEjE,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,SAOE,sBACEC,EAAE,yPACFF,KAAK,mBAME+D,GACX,sBACElE,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBACE+D,YAAU,UACVC,YAAU,UACV/D,EAAE,qOACFF,KAAK,iBAEP,sBAAME,EAAE,mCAAmCF,KAAK,oBAKvCkE,GACX,sBACErE,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBAAMC,EAAE,kBAAkBF,KAAK,iBAC/B,sBAAME,EAAE,qBAAqBF,KAAK,iBAClC,sBACEgE,YAAU,UACVC,YAAU,UACV/D,EAAE,qOACFF,KAAK,oBCmFX,IAOevK,iBAPS,SAACvM,GAAD,MAAY,CAChC3C,OAAQ2C,EAAM3C,OACdsB,SAAUqB,EAAMrB,SAChBoD,aAAc/B,EAAM+B,gBAITwK,EA3If,SAAmB9C,GAKjB,IAAMwR,EAAmBxR,EAAMwR,iBACzB5d,EAASoM,EAAMpM,OACfsB,EAAW8K,EAAM9K,SACjBoD,EAAe0H,EAAM1H,aAErBmZ,GACG7d,EAAOE,YACRF,EAAOe,WACNO,EAAS2H,gBAEZ6U,GACG9d,EAAOE,aACPoB,EAAS2H,gBAGZ8U,GAAwB/d,EAAOE,cAAgBwE,EAAa7D,OAC5Dmd,GAAqBhe,EAAOE,aAAewE,EAAa7D,OAYxDod,EAAa,SAASC,GACvBL,GAGHD,EAAiBtb,KAAK4b,IAqBxB,OACE,sBAAKhR,UAAWC,KAAOgR,UAAvB,UAEE,sBAAKjR,UAAWC,KAAOiR,aAAvB,UACGL,GACC,wBAAQ7Q,UAAWC,KAAOkR,mBAClBlN,QAAS,WArCvByM,EAAiBR,aAoCX,4BAKDY,GACC,cAAC,KAAD,CAAMtQ,GAAG,cAAT,SACE,wBAAQR,UAAWC,KAAOkR,mBAA1B,+BAqCN,sBAAKnR,UAAWC,KAAOmR,SAAvB,UACE,wBAAQpR,UAAWC,KAAOoR,eAClBpN,QAAS,WAAQ8M,EAAW,aAC5BvJ,SAAUmJ,EAFlB,SAGGN,KAEH,wBAAQrQ,UAAWC,KAAOoR,eAClBpN,QAAS,WAtElB2M,IAGA9d,EAAOiB,WACR2c,EAAiBjc,QAEhB3B,EAAOe,UACR6c,EAAiB1b,SAgEPwS,SAAUoJ,EAFlB,SAGG9d,EAAOE,YAAcF,EAAOiB,UAC3B0c,GAAkBH,KAGtB,wBAAQtQ,UAAWC,KAAOoR,eAClBpN,QAAS,WAAQ8M,EAAW,YAC5BvJ,SAAUmJ,EAFlB,SAGGP,cCjEX,IAIepO,iBAJS,SAACvM,GAAD,MAAY,CAClC0I,aAAc1I,EAAM0I,gBAGP6D,EAxEf,SAAsB9C,GAKpB,IAAM8E,EAAS9E,EAAM8E,OACf2E,EAAazJ,EAAMyJ,WANE,EAUmBxJ,oBAAS,GAV5B,mBAUpBpD,EAVoB,KAY3B,OAZ2B,KAYtBmD,EAAMf,aA0BT,eAAC,KAAD,CAAO6F,OAAQA,EACRmF,aAAa,EADpB,UAEE,wBAAQlF,QAAS0E,EAAjB,mBAEA,uBAAS,uBAET,gCACE,mBAAG5I,KAAMb,EAAMf,aAAamT,QAAQC,iBAApC,0CAEA,uBAAS,uBAET,gCACE,kCACE,uBAAO1S,KAAK,WAAW2H,QAAStH,EAAMf,aAAaqT,UAAWlR,SAnCxE,SAAyB8O,GACvBlQ,EAAMrE,SAAS,CAACgE,KAAM,sBAAuB/F,QAAQ,CACnD0Y,UAAWpC,EAAM7O,OAAOiG,WAE1B7T,EAAwB,yBAA0Byc,EAAM7O,OAAOiG,UA+BkCgB,UAAWzL,IADtG,sBAGQ,uBACR,kCACE,uBAAO8C,KAAK,WAAW2H,QAAStH,EAAMf,aAAasT,WAAYnR,SAhCzE,SAA0B8O,GACxBlQ,EAAMrE,SAAS,CAACgE,KAAM,sBAAuB/F,QAAQ,CACnD2Y,WAAYrC,EAAM7O,OAAOiG,WAE3B7T,EAAwB,wBAAyByc,EAAM7O,OAAOiG,UA4BqCgB,UAAWzL,IADxG,4BAGQ,uBACR,kCACE,uBAAO8C,KAAK,WAAW2H,QAAStH,EAAMf,aAAauT,UAAWpR,SA7BxE,SAAyB8O,GACvBlQ,EAAMrE,SAAS,CAACgE,KAAM,sBAAuB/F,QAAQ,CACnD4Y,UAAWtC,EAAM7O,OAAOiG,WAE1B7T,EAAwB,aAAcyc,EAAM7O,OAAOiG,UAyB8CgB,UAAWzL,IADtG,gBAGQ,gCAhDP,gC,oBCnBE4V,GACX,sBACEvF,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBACE+D,YAAU,UACVC,YAAU,UACV/D,EAAE,kOACFF,KAAK,iBAEP,sBACEgE,YAAU,UACVC,YAAU,UACV/D,EAAE,0eACFF,KAAK,oBAMEqF,GACX,sBACExF,MAAM,KACNC,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,6BALR,UAOE,sBACE+D,YAAU,UACVC,YAAU,UACV/D,EAAE,4NACFF,KAAK,iBAEP,sBACEgE,YAAU,UACVC,YAAU,UACV/D,EAAE,2OACFF,KAAK,iBAEP,sBACEgE,YAAU,UACVC,YAAU,UACV/D,EAAE,8OACFF,KAAK,oBCcIsF,OAvDf,SAAiB3S,GAAO,MAKYC,oBAAS,GALrB,mBAKfiK,EALe,KAKJC,EALI,KAkBtB,OACE,sBAAKrJ,UAAWC,KAAO4R,QAAvB,UAEE,uBAEA,qBAAK7R,UAAWC,KAAO6R,OAAvB,SACGH,KAGH,+BACE,6BACE,cAAC,KAAD,CAAMnR,GAAG,YAAT,oBAEF,6BACE,cAAC,KAAD,CAAMA,GAAG,cAAT,sBAEF,6BACE,cAAC,KAAD,CAAMA,GAAG,aAAT,qBAEF,6BACE,cAAC,KAAD,CAAMA,GAAG,cAAT,yBAIJ,qBAAKR,UAAWC,KAAO6R,OAAvB,SACE,wBAAQ7N,QApCI,WAChBoF,GAAa,IAmCT,SACGuI,OAIL,cAAC,GAAD,CAAc5N,OAAQoF,EACRT,WAtCC,WACjBU,GAAa,UCoEF0I,OAvEf,SAAiB7S,GASf,OACE,sBAAKc,UAAWC,KAAO8R,QAAvB,UAEE,sBAAK/R,UAAWC,KAAO+R,IAAvB,UACE,cAAC,GAAD,IAEA,qBAAKhS,UAAWC,KAAOgS,QAAvB,SAEA,eAAC,KAAD,WAEE,cAAC,KAAD,CAAOC,KAAK,YAAZ,SACE,qBAAKlS,UAAWC,KAAOkS,eAAvB,SACE,cAAC,GAAD,QAIJ,eAAC,KAAD,CAAOD,KAAK,cAAZ,UACE,qBAAKlS,UAAWC,KAAOkS,eAAvB,SACE,cAAC,GAAD,CAAQjC,UAAWhR,EAAMwR,iBAAiBR,UAClCD,UAAW/Q,EAAMwR,iBAAiBT,UAClC7a,KAAM8J,EAAMwR,iBAAiBtb,KAC7BX,MAAOyK,EAAMwR,iBAAiBjc,MAC9BO,KAAMkK,EAAMwR,iBAAiB1b,SAEvC,qBAAKgL,UAAWC,KAAOmS,iBAAvB,SACE,cAAC,KAAD,CAAM5R,GAAG,YAAT,SACE,cAAC,GAAD,WAKN,eAAC,KAAD,CAAO0R,KAAK,aAAZ,UACE,qBAAKlS,UAAWC,KAAOkS,eAAvB,SACE,cAAC,GAAD,MAEF,qBAAKnS,UAAWC,KAAOmS,iBAAvB,SACE,cAAC,KAAD,CAAM5R,GAAG,cAAT,SACE,cAAC,GAAD,WAKN,eAAC,KAAD,CAAO0R,KAAK,cAAZ,UACE,qBAAKlS,UAAWC,KAAOkS,eAAvB,SACE,cAAC,GAAD,MAEF,qBAAKnS,UAAWC,KAAOmS,iBAAvB,SACA,cAAC,KAAD,CAAM5R,GAAG,aAAT,SACE,cAAC,GAAD,mBAQR,cAAC,GAAD,CAAWkQ,iBAAkBxR,EAAMwR,uBCc1B2B,OAvFf,SAAiBnT,GAKf,OAEE,eAAC,KAAD,WACE,cAAC,KAAD,CAAOgT,KAAK,gBAAZ,SACE,cAAC,GAAD,CAASxB,iBAAkBxR,EAAMwR,qBAEnC,cAAC,KAAD,CAAOwB,KAAK,eAAZ,SACE,6CAEF,cAAC,KAAD,CAAOA,KAAK,WAAZ,SACE,cAAC,GAAD,UCZKI,GAAU,uCAAG,8BAAAtjB,EAAA,sEACkBmC,IADlB,cAClBohB,EADkB,gBAEqBnhB,IAFrB,OAElBohB,EAFkB,OAGxB5X,GAAMC,SAAS0X,EAA4BzX,OAC3CF,GAAMC,SAAS2X,EAA+B1X,OAJtB,2CAAH,qDCwXvB,IAOekH,iBAPS,SAACvM,GAAD,MAAY,CAChC3C,OAAQ2C,EAAM3C,OACdsB,SAAUqB,EAAMrB,SAChBkD,aAAc7B,EAAM6B,aACpBE,aAAc/B,EAAM+B,gBAGTwK,EA9Wf,SAAqB9C,GAAQ,IAAD,IAKpBpM,EAASoM,EAAMpM,OACfsB,EAAW8K,EAAM9K,SACjB4E,EAAS3B,GAAe6H,EAAM5H,cAC9B2B,EAAS1B,GAAe2H,EAAM1H,cARV,EAUsC2H,oBAAS,GAV/C,mBAUnBsT,EAVmB,KAUOC,EAVP,OAWwCvT,mBAAS,IAXjD,mBAWnBwT,EAXmB,KAWQC,EAXR,OAYgBzT,mBAAS,IAZzB,mBAYnB0T,EAZmB,KAYJC,EAZI,KAkBpBC,EAA2B,SAASC,EAAkB/gB,GAC1D,IAAMe,EAAaF,EAAOE,WACpBQ,EAAiB,OAAGR,QAAH,IAAGA,OAAH,EAAGA,EAAYQ,kBAChCyf,EAAwBzf,EACtBA,EAAkBA,EAAkBG,OAAS,QAC7ChC,EAER,OAEY,OAAVqB,QAAU,IAAVA,OAAA,EAAAA,EAAYsB,SAGVtB,EAAWsB,MAAMC,UAAYL,GAG3BlB,EAAWsB,MAAMC,UAAYP,KAC7B,OAACgf,QAAD,IAACA,OAAD,EAACA,EAAkB1e,QAInBtB,EAAWsB,MAAMC,UAAYP,GAC7Bgf,EAAiB1e,MAAMC,UAAYP,KAEhC/B,GAECghB,EAAqB,KAAOjgB,EAAW+E,2BACvC9F,KA2BN2a,EAAU,uCAAG,8BAAA5d,EAAA,sEAGXkQ,EAAMrE,SAAS,CAAEgE,KAAM,qBAHZ,uBAMmB9M,EAAc,UAChDe,EAAOE,kBADyC,aAChD,EAAmB+E,2BAA2B,GAP/B,cAMXmb,EANW,OAWjBJ,EAAiBI,GAXA,SAcXhU,EAAMrE,SAAS,CAAEgE,KAAM,wBAdZ,OAiBjB6T,GAA4B,GAjBX,2CAAH,qDAuBVS,EAAgB,uCAAG,sBAAAnkB,EAAA,6DACpB+jB,EAAyB9Z,GAAQ,IAClC9E,EAAqBC,EAAUtB,GAFV,SAIjBoM,EAAMrE,SAAS,CACnBgE,KAAM,4BACN/F,QAAS,CAAEA,QAAS+Z,EAAc/X,SANb,uBAQjBoE,EAAMrE,SAAS,CAAEgE,KAAM,oBARN,uBASjByT,KATiB,2CAAH,qDAehBrC,EAAS,uCAAG,gCAAAjhB,EAAA,sEACVkQ,EAAMrE,SAAS,CAAEgE,KAAM,qBADb,UAEbkU,EAAyB/Z,GAAQ,IAClC7E,EAAqBC,EAAUtB,IAE9B,UAAAkG,EAAO1E,aAAP,eAAcC,WAAYL,EALb,gCAMarC,EAAmBmH,EAAO1E,MAAMM,MAN7C,cAMR1D,EANQ,gBAORgO,EAAMrE,SAAS3J,EAAa4J,OAPpB,wBASoB1I,IATpB,eASVghB,EATU,iBAUVlU,EAAMrE,SAASuY,EAAsBtY,OAV3B,yBAWVoE,EAAMrE,SAAS,CAAEgE,KAAM,mBAXb,yBAYVK,EAAMrE,SAAS,CAAEgE,KAAM,oBAZb,yBAaVyT,KAbU,4CAAH,qDAmBTpC,EAAS,uCAAG,gCAAAlhB,EAAA,sEACVkQ,EAAMrE,SAAS,CAAEgE,KAAM,qBADb,UAEbkU,EAAyB9Z,GAAQ,IAClC9E,EAAqBC,EAAUtB,IAExB,OAANmG,QAAM,IAANA,OAAA,EAAAA,EAAQ3E,MAAMC,WAAYL,EALb,gCAMarC,EAAmBoH,EAAO3E,MAAMM,MAN7C,cAMR1D,EANQ,gBAORgO,EAAMrE,SAAS3J,EAAa4J,OAPpB,wBASoB/I,EAAc,UAChDe,EAAOE,kBADyC,aAChD,EAAmB+E,2BAA2B,GAVhC,eASVmb,EATU,iBAYVhU,EAAMrE,SAASqY,EAAsBpY,OAZ3B,yBAaVoE,EAAMrE,SAAS,CAAEgE,KAAM,mBAbb,yBAcVK,EAAMrE,SAAS,CAAEgE,KAAM,oBAdb,yBAeVyT,KAfU,4CAAH,qDA0BTld,EAAI,uCAAG,sDAAApG,EAAA,6DAAegiB,EAAf,oCAA2Brf,EAA3B,SACLuN,EAAMrE,SAAS,CAAEgE,KAAM,qBADlB,UAIM,YAAdmS,EAJQ,iCAKc1e,EACrBQ,EAAOE,WAAW+E,2BANX,UASqB,MATrB,OASGsb,OAAO3hB,OATV,kCAUDwN,EAAMrE,SAAS,CAAEgE,KAAM,oBAVtB,0CAaT9L,EAAYD,EAAOC,UAAa,IAbvB,2BAca,aAAdie,EAdC,kCAeH3e,IAfG,QAgBHwY,EAAO,IAAI1X,KACXmgB,EAAWzI,EAAK0I,UAChBC,EAAoB1gB,EAAOC,UAAY,IAE7CA,EADyBugB,EAAWE,EACL,EAAIA,EAAoBF,EApB9C,wBAsBTvgB,EAAYD,EAAOC,UAtBV,yBAyBLmM,EAAMrE,SAAS,CACnBgE,KAAM,aACN/F,QAAS,CAAChG,OAAO,2BAAMA,GAAP,IAAeC,UAAWA,OA3BjC,eA8BL0gB,EAAM5gB,EAAwBC,EAAQC,GACtC2gB,EAAsBD,EAAI,GAChCve,EAAoBd,EAAUtB,EAAQC,GAhC3B,UAiCLmM,EAAMrE,SAAS,CAAEgE,KAAM,kCAjClB,eAoCR6U,IACKC,EAAgBC,YAAW,WAC/Bxe,MACCse,GAEHxU,EAAMrE,SAAS,CACbgE,KAAM,6BACN/F,QAAS,CAAEmC,kBAAmB0Y,MA3CvB,UA+CLzU,EAAMrE,SAAS,CAAEgE,KAAM,oBA/ClB,4CAAH,qDAqDJpK,EAAK,uCAAG,4BAAAzF,EAAA,sEACNkQ,EAAMrE,SAAS,CAAEgE,KAAM,qBADjB,uBAEe3M,IAFf,cAEN2hB,EAFM,gBAGN3U,EAAMrE,SAASgZ,EAAa/Y,OAHtB,uBAINoE,EAAMrE,SAAS,CAAEgE,KAAM,kCAJjB,cAKZ1K,EAAqBC,EAAUtB,GAC/BsI,aAAauX,GAND,UAONzT,EAAMrE,SAAS,CAAEgE,KAAM,oBAPjB,4CAAH,qDAaL7J,EAAI,uCAAG,4BAAAhG,EAAA,sEACLkQ,EAAMrE,SAAS,CAAEgE,KAAM,qBADlB,uBAEgB1M,IAFhB,cAEL0hB,EAFK,gBAGL3U,EAAMrE,SAASgZ,EAAa/Y,OAHvB,UAOP1G,EAASL,UAPF,kCAQHmL,EAAMrE,SAAS,CAAEgE,KAAM,oBARpB,2DAYLK,EAAMrE,SAAS,CAAEgE,KAAM,kCAZlB,eAaX9J,EAAoBX,EAAUtB,GAbnB,UAcLoM,EAAMrE,SAAS,CAAEgE,KAAM,oBAdlB,4CAAH,qDAoBVgC,qBAAU,WAQR,GAJE/N,EAAOiB,WACPK,EAASL,YACRK,EAAS4G,sBAMT,OAAClI,QAAD,IAACA,OAAD,EAACA,EAAQE,YAAZ,CAKA,IAAME,EAAWC,KAAKC,MAAQN,EAAOC,UAC/B+gB,EACEhhB,EAAOE,WAAW+E,0BAA4B7E,EAGhD6gB,EAAYH,YAAW,WAC3BhH,MAFsBkH,EAAW,KAInC5U,EAAMrE,SAAS,CACbgE,KAAM,+BACN/F,QAAS,CAAEkC,oBAAqB+Y,KAIlC,IACML,EADM7gB,EAAwBC,EAAQA,EAAOC,WACnB,GAChC,GAAG2gB,EAAqB,CACtB,IAAMC,EAAgBC,YAAW,WAC/Bxe,MACCse,GAEHxU,EAAMrE,SAAS,CACbgE,KAAM,6BACN/F,QAAS,CAAEmC,kBAAmB0Y,SAKjC,CAACvf,IAKJyM,qBAAU,WAGR,GAAI4R,EAAJ,CAGAC,GAA4B,GAG5B,IAAMxf,EAAWC,KAAKC,MAAQN,EAAOC,UAC/BihB,EACElhB,EAAOE,WAAW+E,0BAA4B7E,EAEhD6gB,EAAYH,YAAW,WAC3BT,MACCa,GACH5Y,aAAauX,GACbC,EAA6BmB,MAG5B,CAACtB,IAGD3f,EAAOiB,YAAcK,EAASL,WAAaK,EAAS8F,SA9PzC,WAAY,IAAD,GACpB,UAACpH,EAAOE,kBAAR,aAAC,EAAmBsB,SAGvB4K,EAAMrE,SAAS,CAAEgE,KAAM,qBrD5ES,SAASzK,EAAUtB,GACrD,IACMqC,EADMtC,EAAwBC,EAAQA,EAAOC,WAClB,GAC3BsB,EAAkBvB,EAAOE,WAAWsB,MAAMC,QAEhD,GAAGF,IAAoBL,EACrBI,EAASI,WAAWQ,KAAK,CACvBif,KAAM,CAACnhB,EAAOE,WAAWsB,MAAMiG,YAC/B2Z,YAAa/e,SAEV,GAAGd,IAAoBJ,EAC5BG,EAASM,WAAWW,OAAOF,EAAuB,KAClDf,EAASM,WAAWO,iBACf,GAAGZ,IAAoBH,EAAuB,CACnD,IAAMpC,EAAYgB,EAAOE,WAAWsB,MAAMM,KACpCE,EAAQV,EAASS,MAAM/C,GAAWgD,MACrCK,EAAuB,IACxBL,EAAMQ,YAAcH,EAAuB,KAE7CL,EAAME,QqD0DNmf,CAAqB/f,EAAUtB,IA0P/ByU,GAGF,IAAMmJ,EAAmB,CAAER,YAAWD,YAAW7a,OAAMX,QAAOO,QAiBxDof,EAAO,UAAGthB,EAAOE,kBAAV,iBAAG,EAAmBsB,aAAtB,aAAG,EAA0BiG,WAa1C,OACE,qCACE,qBAAKsH,MAAO,CAAEwS,QAAS,QAAvB,SACE,cAAC,KAAD,CAASD,QAASA,EACTE,KAhCF,CACLjI,OAAQ,MACRD,MAAO,MACPmI,WAAY,CAEVC,SAAU,EACVC,SAAU,EACVC,UAAW,EACXC,GAAI,EACJC,eAAgB,EAChBC,eAAgB,EAChBC,OAAQ,gBACRC,YAAa,IAqBRC,QAhBQ,SAASvV,GAC9B,IAAM/K,EAAa+K,EAAEc,OACrBrB,EAAMrE,SAAS,CACbgE,KAAM,mBACN/F,QAAS,CAAEpE,WAAYA,UAcvB,cAAC,GAAD,CAASgc,iBAAkBA,U,mBCtW3BuE,GAAgBC,EAAQ,KA6JfC,OA1Jf,WAAe,MAQehW,mBAAS,WARxB,mBAQNzN,EARM,KAQE0jB,EARF,KA2Gb,OA/FAvU,qBAAU,WAAM,4CACd,4CAAA7R,EAAA,sEAI6ByC,IAJ7B,wCAMI2jB,EAAU,mBANd,iCAWEA,EAAU,iBAXZ,SAcuBxjB,IAdvB,cAcEV,EAdF,iBAeQ0J,GAAMC,SAAS3J,EAAa4J,OAfpC,WAkBQhC,EAAU5H,EAAa4J,MAAMhC,SAEjB,QADZuc,EAnBR,UAmB0Bvc,EAAQhG,OAAOE,kBAnBzC,aAmB0B,EAA2BsB,aACjC,IAAf+gB,OAAA,EAAAA,EAAiB9gB,WAAYL,EApBlC,wBAqBUpC,EAAYujB,EAAgBzgB,KArBtC,UAsByB/C,EAAmBC,GAtB5C,eAsBIZ,EAtBJ,iBAuBU0J,GAAMC,SAAS3J,EAAa4J,OAvBtC,yBA2CuBvI,IA3CvB,eA2CErB,EA3CF,iBA4CQ0J,GAAMC,SAAS3J,EAAa4J,OA5CpC,yBA+CyC3J,IA/CzC,eA+CQmkB,EA/CR,iBAgDQ1a,GAAMC,SAASya,EAAyBxa,OAhDhD,yBAmD4C1J,IAnD5C,eAmDQmkB,EAnDR,iBAoDQ3a,GAAMC,SAAS0a,EAA4Bza,OApDnD,yBAuDyCpI,IAvDzC,eAuDQ8iB,EAvDR,iBAwDQ5a,GAAMC,SAAS,CACnBgE,KAAM,oBACNV,aAAcqX,EAAyBrmB,OA1D3C,YA8D6BqmB,EAAyBrmB,KAAKmiB,QAAQmE,YA9DnE,wBAgEUjhB,EAAa,IAAIygB,IACZS,eAAeF,EAAyBrmB,KAAKmiB,QAAQmE,aAjEpE,UAkEU7a,GAAMC,SAAS,CACnBgE,KAAM,mBACN/F,QAAS,CAAEtE,WAAYA,KApE7B,QAyEEoG,GAAMC,SAAS,CAAEgE,KAAM,oBAGvBuW,EAAU,SA5EZ,6CADc,sBA+EdO,KAAQC,iBAAiBC,IA/EV,WAAD,wBAgFd3M,GAGApK,OAAOgX,iBAAiB,gBAAgB,SAACrW,GACvCA,EAAEC,iBACF,IAAMjK,EAAQmF,GAAMmb,WAChBtgB,EAAM3C,OAAOiB,YAGjB7B,IACAiC,EAAqBsB,EAAMrB,SAAUqB,EAAM3C,cAE5C,IAGW,YAAXpB,EACM,6BAIK,oBAAXA,EAEC,cAAC,KAAD,UACE,cAAC,KAAD,CAAUkJ,MAAOA,GAAjB,SACE,qBAAKoF,UAAU,qBAAf,SACE,qBAAKA,UAAU,WAAf,SACE,cAAC,GAAD,YASE,kBAAXtO,EAEC,cAAC,KAAD,UACE,cAAC,KAAD,CAAUkJ,MAAOA,GAAjB,0BAaJ,cAAC,KAAD,UACE,cAAC,KAAD,CAAUA,MAAOA,GAAjB,SACE,qBAAKoF,UAAU,qBAAf,SACI,cAAC,GAAD,WCjKGgW,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvb,MAAK,YAAkD,IAA/Cwb,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,M,mBCfAvnB,EAAOC,QAAU,CAAC,UAAY,6BAA6B,SAAW,4BAA4B,eAAiB,kCAAkC,OAAS,0BAA0B,aAAe,gCAAgC,aAAe,gCAAgC,mBAAqB,wC,mBCA3SD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,UAAY,4B,mBCA9DD,EAAOC,QAAU,CAAC,gBAAkB,yCAAyC,KAAO,8BAA8B,OAAS,gCAAgC,SAAW,oC,mBCAtKD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,UAAY,6BAA6B,cAAgB,mC,mBCApHD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,UAAY,2B,mBCA3DD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,OAAS,6BAA6B,UAAY,gCAAgC,QAAU,gC,mBCAhKD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,sBAAsB,YAAc,6BAA6B,kBAAoB,qC,mBCAjJD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,OAAS,6B,mBCAvED,EAAOC,QAAU,CAAC,QAAU,yBAAyB,OAAS,0B,mBCA9DD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,WAAa,+B,mBCArED,EAAOC,QAAU,CAAC,UAAY,6BAA6B,cAAgB,mC,mBCA3ED,EAAOC,QAAU,CAAC,YAAc,mC,mBCAhCD,EAAOC,QAAU,CAAC,YAAc,iCAAiC,QAAU,+B,mBCA3ED,EAAOC,QAAU,CAAC,YAAc,mC,mBCAhCD,EAAOC,QAAU,CAAC,eAAiB,yC,mBCAnCD,EAAOC,QAAU,CAAC,SAAW,6B,mBCA7BD,EAAOC,QAAU,CAAC,WAAa,+BAA+B,MAAQ,4B","file":"static/js/main.66e56589.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Session\":\"Session_Session__3G52u\",\"Top\":\"Session_Top__3uCH7\",\"Content\":\"Session_Content__3lPl4\",\"PrimaryContent\":\"Session_PrimaryContent__3yGCf\",\"SecondaryContent\":\"Session_SecondaryContent__1Uvc2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Player\":\"Player_Player__Xx8fy\",\"Div\":\"Player_Div__1Mznx\",\"Button\":\"Player_Button__1lbWu\",\"Image\":\"Player_Image__1PWwp\",\"MoreNextUp\":\"Player_MoreNextUp__2_uZ-\"};","const BACKEND_DOMAIN = process.env.REACT_APP_BACKEND_DOMAIN;\nconst TYPE_GET = 'GET';\nconst TYPE_POST = 'POST';\n\nexport { BACKEND_DOMAIN, TYPE_GET, TYPE_POST }\n","import { BACKEND_DOMAIN } from '../config/global'\n\n\nasync function fetchBackend(method = '', url = '', data = {}) {\n  let response;\n\n  url = BACKEND_DOMAIN + url;\n\n  if(method !== 'GET') {\n\n    // aggregate form data in one place\n    const formData = new FormData();\n    for (const [key, value] of Object.entries(data)) {\n      formData.append(key, value);\n    }\n    // for (const [key, value] of Object.entries(files)) {\n    //   formData.append(key, value);\n    // }\n\n    // authenticate request if possible\n    let requestOptions = {headers: {}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(url, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n      body: formData,\n    });\n  } else {\n\n    // translate form data for GET\n    let searchParams = new URLSearchParams();\n    for (const [key, value] of Object.entries(data)) {\n      searchParams.set(key, value);\n    }\n    const getUrl = url + '/?' + searchParams.toString();\n\n    // authenticate request if possible\n    let requestOptions = {headers: {'Content-Type': 'application/json'}}\n    const token = localStorage.getItem('accessToken');\n    if(token) {\n      requestOptions.headers.Authorization = `Bearer ${token}`;\n    }\n    const request = new Request(getUrl, requestOptions);\n\n    // make the request\n    response = await fetch(request, {\n      method: method,\n      mode: 'cors',\n    });\n  }\n\n  return response;\n}\n\nexport { fetchBackend }\n","import {\n  ENDPOINT_TEXT_COMMENT_CREATE,\n  ENDPOINT_TEXT_COMMENT_LIST,\n  ENDPOINT_VOICE_RECORDING_LIST\n} from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n\n/*\n * Fetches...\n */\nexport const fetchTextCommentCreate = async (text, format, textCommentUuid, textCommentTimestamp) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_CREATE,\n    { text, format, textCommentUuid, textCommentTimestamp },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchTextCommentList = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TEXT_COMMENT_LIST\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchVoiceRecordingList = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_VOICE_RECORDING_LIST\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","// NOTE: If the API endpoint is a GET, then there is no ending slash.\n//       Else, the endpoint is probably a POST and there should be a slash.\n\n\n// AUTHENTICATION\nexport const ENDPOINT_OBTAIN_TOKENS = '/auth/obtain-tokens/'\nexport const ENDPOINT_REFRESH_TOKEN = '/auth/refresh-token/'\nexport const ENDPOINT_VERIFY_TOKEN = '/auth/verify-token/'\n\n// USER\nexport const ENDPOINT_USER_GET_SETTINGS = '/users/user/get-settings'\nexport const ENDPOINT_USER_UPDATE_SETTINGS = '/users/user/update-settings/'\nexport const ENDPOINT_USER_CONNECT_SPOTIFY = '/users/user/connect-spotify/'\n\n// TEXT COMMENT\nexport const ENDPOINT_TEXT_COMMENT_CREATE = '/comments/text-comment/create/'\nexport const ENDPOINT_TEXT_COMMENT_DELETE = '/comments/text-comment/delete/'\nexport const ENDPOINT_TEXT_COMMENT_LIST = '/comments/text-comment/list'\n\n// TEXT COMMENT MODIFICATION\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE = '/comments/text-comment-modification/create/'\nexport const ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE = '/comments/text-comment-modification/list-delete/'\n\n// VOICE RECORDING\nexport const ENDPOINT_VOICE_RECORDING_CREATE = '/comments/voice-recording/create/'\nexport const ENDPOINT_VOICE_RECORDING_DELETE = '/comments/voice-recording/delete/'\nexport const ENDPOINT_VOICE_RECORDING_LIST = '/comments/voice-recording/list'\n\n// TRACK\nexport const ENDPOINT_TRACK_CREATE = '/music/track/create/'\nexport const ENDPOINT_TRACK_GET_FILES = '/music/track/get-files'\n\n// MUSIC\nexport const ENDPOINT_MUSIC_SEARCH = '/music/search'\n\n// QUEUE\nexport const ENDPOINT_QUEUE_CREATE = '/streams/queue/create/'\nexport const ENDPOINT_QUEUE_DELETE = '/streams/queue/delete/'\nexport const ENDPOINT_QUEUE_LIST = '/streams/queue/list'\n\n// STREAM\nexport const ENDPOINT_STREAM_GET = '/streams/stream/get'\nexport const ENDPOINT_STREAM_INITIALIZE = '/streams/stream/initialize/'\nexport const ENDPOINT_STREAM_NEXT_TRACK = '/streams/stream/next-track/'\nexport const ENDPOINT_STREAM_PAUSE_TRACK = '/streams/stream/pause-track/'\nexport const ENDPOINT_STREAM_PLAY_TRACK = '/streams/stream/play-track/'\nexport const ENDPOINT_STREAM_PREV_TRACK = '/streams/stream/prev-track/'\nexport const ENDPOINT_STREAM_SCAN_BACKWARD = '/streams/stream/scan-backward/'\nexport const ENDPOINT_STREAM_SCAN_FORWARD = '/streams/stream/scan-forward/'\n\n// MARKER\nexport const ENDPOINT_MARKER_CREATE = '/streams/marker/create/'\nexport const ENDPOINT_MARKER_DELETE = '/streams/marker/delete/'\nexport const ENDPOINT_MARKER_LIST = '/streams/marker/list'\n\n// QUEUE INTERVAL\nexport const ENDPOINT_QUEUE_INTERVAL_CREATE = '/streams/queue-interval/create/'\nexport const ENDPOINT_QUEUE_INTERVAL_DELETE = '/streams/queue-interval/delete/'\n","import {\n  ENDPOINT_OBTAIN_TOKENS,\n  ENDPOINT_STREAM_INITIALIZE,\n  ENDPOINT_VERIFY_TOKEN,\n} from '../../config/api'\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchAuthToken = async (username, password) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_OBTAIN_TOKENS,\n    { username: username, password: password },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchInitializeStream = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_INITIALIZE,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchVerifyToken = async () => {\n  const token = localStorage.getItem('accessToken');\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VERIFY_TOKEN,\n    { token: token }\n  );\n  if(response.status !== 200) {\n    //throw new Error(\"Not logged in!\");\n    return undefined;\n  }\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import {\n  ENDPOINT_STREAM_GET,\n  ENDPOINT_TRACK_GET_FILES,\n  ENDPOINT_STREAM_NEXT_TRACK,\n  ENDPOINT_STREAM_PAUSE_TRACK,\n  ENDPOINT_STREAM_PLAY_TRACK,\n  ENDPOINT_STREAM_PREV_TRACK,\n  ENDPOINT_STREAM_SCAN_BACKWARD,\n  ENDPOINT_STREAM_SCAN_FORWARD,\n} from '../../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../../config/global'\nimport { fetchBackend } from '../../../utils/network'\n\n\n/*\n * Fetches...\n */\nconst fetchStreamGet = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_STREAM_GET,\n  );\n  return await response.json();\n};\n\n\nconst fetchTrackGetFiles = async(trackUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_TRACK_GET_FILES,\n    { trackUuid },\n  );\n  return await response.json();\n}\n\n\n/*\n * Fetches...\n */\nconst fetchNextTrack = async (nowPlayingTotalDurationMilliseconds, isPlanned) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_NEXT_TRACK,\n    { nowPlayingTotalDurationMilliseconds, isPlanned }\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPauseTrack = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PAUSE_TRACK,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPlayTrack = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PLAY_TRACK,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchPrevTrack = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_PREV_TRACK,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchScanBackward = async () => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_SCAN_BACKWARD,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nconst fetchScanForward = async (nowPlayingTotalDurationMilliseconds) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_STREAM_SCAN_FORWARD,\n    { nowPlayingTotalDurationMilliseconds }\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\nexport {\n  fetchStreamGet,\n  fetchNextTrack,\n  fetchPauseTrack,\n  fetchPlayTrack,\n  fetchPrevTrack,\n  fetchScanBackward,\n  fetchScanForward,\n  fetchTrackGetFiles,\n}\n","import { ENDPOINT_QUEUE_LIST, ENDPOINT_QUEUE_DELETE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchQueueList = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_QUEUE_LIST,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n/*\n * Fetches...\n */\nexport const fetchDeleteQueue = async (queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_DELETE,\n    { queueUuid: queueUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import {\n  ENDPOINT_USER_GET_SETTINGS,\n  ENDPOINT_USER_UPDATE_SETTINGS,\n} from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an user settings from the server.\n */\nexport const fetchGetUserSettings = async () => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_USER_GET_SETTINGS,\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Set user settings on the server.\n */\nexport const fetchUpdateUserSettings = async (field, value) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_UPDATE_SETTINGS,\n    { field, value },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","/*\n * This gets the position that the track should be at.\n *\n * @return [\n *   progress: Time in milliseconds,\n *   seekTimeout: Time in milliseconds until the next seek should happen,\n * ]\n */\nexport const getPositionMilliseconds = function(stream, startedAt) {\n  if(!stream.nowPlaying) {\n    return [undefined, undefined];\n  }\n\n  let progress = Date.now() - startedAt,\n      seekTimeout,\n      playbackIntervalIdx = 0,\n      cumulativeProgress = 0;\n\n  while(true) {\n    const playbackInterval = stream.nowPlaying.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval[1] - playbackInterval[0],\n          remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval[0] + remainingProgress;\n      seekTimeout = playbackInterval[1] - progress;\n      break;\n    }\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  if(playbackIntervalIdx === stream.nowPlaying.playbackIntervals.length - 1) {\n    seekTimeout = undefined;\n  }\n\n  return [progress, seekTimeout];\n}\n\n\n/*\n * Get the progress of a stream.\n */\nexport const getProgress = function(stream) {\n  if(stream?.isPaused) {\n    return stream.pausedAt - stream.startedAt;\n  } else if(stream?.isPlaying) {\n    return Date.now() - stream.startedAt;\n  } else {\n    return undefined;\n  }\n};\n","export const SERVICE_SPOTIFY = 'spotify';\nexport const SERVICE_YOUTUBE = 'youtube';\nexport const SERVICE_JUKEBOX_RADIO = 'jukebox_radio';\n","import { getPositionMilliseconds } from './utils';\n\nimport {\n  SERVICE_SPOTIFY,\n  SERVICE_YOUTUBE,\n  SERVICE_JUKEBOX_RADIO,\n} from '../../config/services';\n// import { store } from '../../utils/redux';\n\n\n/*\n * Executes the \"start\" of playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlStart = function(playback, stream) {\n  const arr = getPositionMilliseconds(stream, stream.startedAt),\n        positionMilliseconds = arr[0],\n        playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play({\n      uris: [stream.nowPlaying.track.externalId],\n      position_ms: positionMilliseconds,\n    });\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.seekTo(positionMilliseconds / 1000);\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid].audio;\n    if(positionMilliseconds > 0) {\n      audio.currentTime = positionMilliseconds / 1000;\n    }\n    audio.play();\n  }\n};\n\n\n/*\n * \"Pauses\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlPause = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.pause();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.pauseVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid].audio;\n    audio.pause();\n  }\n}\n\n\n/*\n * \"Plays\" the current playback given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlPlay = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.play();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid].audio;\n    audio.play();\n  }\n}\n\n\n/*\n * \"Seeks\" the current playback given to the expected position given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlSeek = function(playback, stream, startedAt) {\n  const arr = getPositionMilliseconds(stream, startedAt),\n        positionMilliseconds = arr[0],\n        playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.seek(positionMilliseconds);\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    playback.youTubeApi.seekTo(positionMilliseconds / 1000);\n    playback.youTubeApi.playVideo();\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    const trackUuid = stream.nowPlaying.track.uuid,\n          audio = playback.files[trackUuid].audio;\n    audio.currentTime = positionMilliseconds / 1000;\n    audio.play();\n  }\n}\n\n\n/*\n *\n */\nexport const playbackControlSkipToNext = function(playback, stream) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.skipToNext();\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    // TODO - seems to work out of the box :)\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    // TODO - refactor stuff to go inside of here instead\n  }\n}\n\n\n/*\n * \"Queues\" the (track) queue item up next given:\n *     - playback (singleton instance in the React application)\n *     - stream\n */\nexport const playbackControlQueue = function(playback, stream, nextUp) {\n  const playbackService = stream.nowPlaying.track.service;\n\n  if(playbackService === SERVICE_SPOTIFY) {\n    playback.spotifyApi.queue(nextUp.track.externalId);\n  } else if(playbackService === SERVICE_YOUTUBE) {\n    // TODO - there is optimization that could happen here\n  } else if(playbackService === SERVICE_JUKEBOX_RADIO) {\n    // TODO - refactor stuff to go inside of here instead\n  }\n}\n","/*\n * - history: A tag given to a feed item which signifies that it is no longer\n *            relevant. This is because it has been lingering on for a\n *            significant amount of time since its original context.\n * - display: A tag given to a feed item which signifies that it is still\n *            \"fresh.\" It is within a reasonable amount of time since its\n *            original context.\n */\nconst RENDER_STATUS_HISTORY = 'history',\n      RENDER_STATUS_DISPLAY = 'display',\n      RENDER_STATUS_HIDE = 'hide',\n      DISPLAY_DURATION = 30000,\n      HISTORY_DURATION = 45000;\n\n/*\n * ...\n */\nexport const feedGenerate = function(state) {\n\n  const stream = state.stream,\n        [progress, displayThreshold, historyThreshold] = getPositionMilliseconds(stream);\n\n  if(!progress) {\n    return [];\n  }\n\n  const textComments = [...state.textComments],\n        voiceRecordings = [...state.voiceRecordings];\n  let aggregateFeed = [...textComments, ...voiceRecordings];\n\n  aggregateFeed = aggregateFeed.map(el => {\n    const shouldTagHistory = (\n            el.timestampMilliseconds > historyThreshold &&\n            el.timestampMilliseconds <= displayThreshold\n          ),\n          shouldTagDisplay = (\n            el.timestampMilliseconds > displayThreshold &&\n            el.timestampMilliseconds <= progress\n          );\n\n    if(shouldTagHistory) {\n      el.renderStatus = RENDER_STATUS_HISTORY;\n    } else if(shouldTagDisplay) {\n      el.renderStatus = RENDER_STATUS_DISPLAY;\n    } else {\n      el.renderStatus = RENDER_STATUS_HIDE;\n    }\n\n    return { ...el };\n  });\n  aggregateFeed = aggregateFeed.filter(i => (\n    i.renderStatus !== RENDER_STATUS_HIDE\n  ));\n  aggregateFeed = aggregateFeed.sort((a, b) => {\n    return a.timestampMilliseconds - b.timestampMilliseconds;\n  });\n  return aggregateFeed;\n}\n\n\nexport const getPositionMilliseconds = function(stream) {\n\n  if(!stream?.nowPlaying?.track) {\n    return [undefined, undefined, undefined];\n  }\n\n  const startedAt = stream.startedAt;\n\n  let progress = (\n        stream.isPlaying ? Date.now() - startedAt : stream.pausedAt - startedAt\n      ),\n      playbackIntervalIdx = 0,\n      displayThreshold = 0,\n      historyThreshold = 0,\n      cumulativeProgress = 0;\n\n  while(true) {\n    const playbackInterval = stream.nowPlaying.playbackIntervals[playbackIntervalIdx],\n          playbackIntervalDuration = playbackInterval[1] - playbackInterval[0];\n    let remainingProgress;\n\n    // if display threshold progress definition has been reached\n    const displayProgress = (progress - DISPLAY_DURATION);\n    remainingProgress = displayProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      displayThreshold = playbackInterval[0] + remainingProgress;\n    }\n\n    // if history threshold progress definition has been reached\n    const historyProgress = (progress - DISPLAY_DURATION - HISTORY_DURATION);\n    remainingProgress = historyProgress - cumulativeProgress;\n    if(remainingProgress >= 0 && remainingProgress < playbackIntervalDuration) {\n      historyThreshold = playbackInterval[0] + remainingProgress;\n    }\n\n    // if the progress definition has been reached\n    remainingProgress = progress - cumulativeProgress;\n    if(remainingProgress < playbackIntervalDuration) {\n      progress = playbackInterval[0] + remainingProgress;\n      break;\n    }\n\n    playbackIntervalIdx += 1;\n    cumulativeProgress += playbackIntervalDuration;\n  }\n\n  return [progress, displayThreshold, historyThreshold];\n}\n\n\n/*\n * ...\n */\nexport const feedUpdate = function(state) {\n  return {\n    ...state,\n    feed: feedGenerate(state),\n  }\n}\n","/*\n * Create a marker relevant to a queue item (track).\n */\nexport const markerCreate = function(state, action) {\n  const trackMarkerMap = { ...state.trackMarkerMap },\n        queueUuid = action.queueUuid,\n        marker = action.marker,\n        markers = [...trackMarkerMap[queueUuid], marker],\n        sortedMarkers = markers.sort((a, b) => {\n          return a.timestampMilliseconds - b.timestampMilliseconds;\n        });\n  trackMarkerMap[queueUuid] = sortedMarkers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap,\n  };\n}\n\n/*\n * Delete a marker relevant to a queue item (track).\n */\nexport const markerDelete = function(state, action) {\n  const trackMarkerMap = { ...state.trackMarkerMap },\n        queueUuid = action.queueUuid,\n        marker = action.marker,\n        markers = trackMarkerMap[action.queueUuid],\n        filteredMarkers = markers.filter(m => m.uuid !== marker.uuid);\n  trackMarkerMap[queueUuid] = filteredMarkers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap,\n  };\n}\n\n/*\n * Set the markers on a queue item (track).\n */\nexport const markerList = function(state, action) {\n  const queueUuid = action.queueUuid,\n        markers = action.markers,\n        trackMarkerMap = { ...state.trackMarkerMap };\n  trackMarkerMap[queueUuid] = markers;\n  return {\n    ...state,\n    trackMarkerMap: trackMarkerMap\n  };\n}\n","import { getProgress } from '../PlaybackApp/utils';\n\n\n/*\n * Returns the (track) queue item that was last played.\n */\nexport const getLastUpQueue = function(lastUpQueues) {\n  return lastUpQueues[lastUpQueues.length - 1];\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getNextUpQueue = function(nextUpQueues) {\n  return (\n    nextUpQueues.length ?\n      (nextUpQueues[0].children.length ?\n        nextUpQueues[0].children[0] :\n        nextUpQueues[0]) :\n      undefined\n  );\n}\n\n\n/*\n *\n */\nexport const flattenQueues = function(queues) {\n  if(!queues.length) {\n    return undefined;\n  }\n\n  const flattenedQueues = [];\n  for(let queue of queues) {\n    if(queue.children.length) {\n      for(let child of queue.children) {\n        flattenedQueues.push(child);\n      }\n    } else {\n      flattenedQueues.push(queue);\n    }\n  }\n\n  return flattenedQueues;\n}\n\n\n/*\n * Returns the (track) queue item that will be played next.\n */\nexport const getQueueDuration = function(queues, stream) {\n\n  // Determines the duration of a queue object.\n  const getDuration = function(queue) {\n    let total = 0;\n    if(queue.children.length) {\n      for(let child of queue.children) {\n        total += child.totalDurationMilliseconds;\n      }\n    } else {\n      total += queue.totalDurationMilliseconds;\n    }\n    return total;\n  }\n\n  // Reducer function which reduces an array of queues into total duration.\n  const reducer = function(total, curr) {\n    if(typeof(total) !== 'number') {\n      total = getDuration(total);\n    }\n    total += getDuration(curr);\n    return total;\n  };\n\n  // In addition to whatever is queued up, we must add the remaining progress\n  // of whatever is now playing in the stream.\n  const progress = getProgress(stream);\n  let remainingProgress = 0;\n  if(progress) {\n    remainingProgress = stream.nowPlaying.totalDurationMilliseconds - progress;\n  }\n\n  // Now add determine the total length of all queue objects.\n  // NOTE: Reduce works differently in JavaScript than in Python! Someone\n  //       explain this madness to me!! 0x213F\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\n  if(!queues.length) {\n    return remainingProgress + 0;\n  } else if (queues.length === 1) {\n    return remainingProgress + getDuration(queues[0]);\n  } else {\n    return remainingProgress + queues.reduce(reducer);\n  }\n}\n","/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const finalizeQueue = function(queue) {\n  const copy = { ...queue };\n\n  // Recursive case: parent node (queue item of format collection)\n  if(copy.children.length) {\n    const editedChildren = copy.children.map(finalizeQueue),\n          totalDurationMilliseconds = editedChildren.reduce((total, q) => (\n            total + q.durationMilliseconds\n          ), 0);\n    copy.children = editedChildren;\n    copy.totalDurationMilliseconds = totalDurationMilliseconds;\n    return copy;\n  }\n\n  const intervals = copy.intervals,\n        trackDurationMilliseconds = copy.track?.durationMilliseconds;\n  if(!intervals.length) {\n    copy.totalDurationMilliseconds = trackDurationMilliseconds;\n    copy.playbackIntervals = [[0, trackDurationMilliseconds]];\n    return copy;\n  }\n\n  const playbackIntervals = [];\n  let lowerBound,\n      upperBound;\n  // NOTE: here it is assumed that all intervals are muted.\n  for(const interval of intervals) {\n    if(!interval.lowerBound) {\n      lowerBound = interval.upperBound.timestampMilliseconds;\n      continue;\n    } else if(!interval.upperBound) {\n      if(!lowerBound) {\n        lowerBound = 0;\n      }\n      upperBound = interval.lowerBound.timestampMilliseconds;\n      playbackIntervals.push([lowerBound, upperBound]);\n      // Setting this value signifies that the playbackIntervals array is\n      // finished.\n      lowerBound = undefined;\n      // This is the end of the interval array anyways. Explicitly break here\n      // just for clarity.\n      break;\n    } else {\n      if(!lowerBound) {\n        lowerBound = 0;\n      }\n      upperBound = interval.lowerBound.timestampMilliseconds;\n      playbackIntervals.push([lowerBound, upperBound]);\n      lowerBound = interval.upperBound.timestampMilliseconds;\n      upperBound = undefined;\n      continue;\n    }\n  }\n\n  if(lowerBound) {\n    upperBound = trackDurationMilliseconds;\n    playbackIntervals.push([lowerBound, upperBound]);\n  }\n\n  const totalDurationMilliseconds = playbackIntervals.reduce((total, i) => (\n    total + (i[1] - i[0])\n  ), 0);\n\n  copy.totalDurationMilliseconds = totalDurationMilliseconds;\n  copy.playbackIntervals = playbackIntervals;\n\n  return copy;\n}\n\n\n/*\n * A queue object is returned from the server with an assortment of\n * intervals. These intervals must be interpreted on the front-end\n * to put together the full picture - how long is the queue item\n * expected to play for?\n */\nexport const queueListSet = function(state, payload) {\n  const lastUpQueues = payload.lastUpQueues.map(finalizeQueue),\n        nextUpQueues = payload.nextUpQueues.map(finalizeQueue),\n        _lastPlayed = state._lastPlayed;\n\n  if(_lastPlayed) {\n    lastUpQueues.push(_lastPlayed);\n  }\n\n  let stream = state.stream;\n  if(!stream.isPlaying && !stream.isPaused && stream.nowPlaying) {\n    lastUpQueues.push(stream.nowPlaying);\n    stream = { ...stream, nowPlaying: undefined }\n  }\n\n  const lastUp = (\n          !lastUpQueues.length ?\n            undefined :\n            lastUpQueues[lastUpQueues.length - 1]\n        ),\n        nextUp = (\n          !nextUpQueues.length ? undefined : (\n            !nextUpQueues[0].children.length ?\n              nextUpQueues[0] :\n              nextUpQueues[0].children[0]\n          )\n        );\n\n  return {\n    ...state,\n    stream: stream,\n    lastUp: lastUp,\n    lastUpQueues: lastUpQueues,\n    nextUp: nextUp,\n    nextUpQueues: nextUpQueues,\n  }\n}\n"," import { finalizeQueue } from './queue';\n\n\n/*\n * ...\n */\nexport const streamSet = function(state, payload) {\n  const stream = payload.stream,\n        nowPlaying = stream.nowPlaying,\n        obj = { ...state };\n\n  if(nowPlaying) {\n    stream.nowPlaying = finalizeQueue(nowPlaying);\n  }\n\n  obj.stream = stream;\n\n  if(!stream.isPlaying && !stream.isPaused && stream.nowPlaying) {\n    obj.lastUp = stream.nowPlaying;\n    obj._lastPlayed = stream.nowPlaying;\n    obj.stream.nowPlaying = undefined;\n    obj.stream.isPlaying = false;\n    obj.stream.isPaused = false;\n  } else if(stream.isPlaying) {\n    const progress = Date.now() - stream.startedAt;\n    if(progress && progress >= stream.nowPlaying.totalDurationMilliseconds) {\n      obj.lastUp = stream.nowPlaying;\n      obj._lastPlayed = stream.nowPlaying;\n      obj.stream.nowPlaying = undefined;\n      obj.stream.isPlaying = false;\n      obj.stream.isPaused = false;\n    }\n  }\n\n  return obj;\n}\n\n\n/*\n * ...\n */\nexport const streamPlay = function(state, payload) {\n  const updatedPayload = {\n    stream: {\n      ...state.stream,\n      isPlaying: true,\n      isPaused: false,\n      startedAt: payload.startedAt,\n    }\n  };\n  return streamSet(state, updatedPayload);\n}\n\n\n/*\n * ...\n */\nexport const streamPause = function(state, payload) {\n  const updatedPayload = {\n    stream: {\n      ...state.stream,\n      isPlaying: false,\n      isPaused: true,\n      pausedAt: payload.pausedAt,\n    }\n  };\n  return streamSet(state, updatedPayload);\n}\n\n\n/*\n * Set the stream context.\n */\nexport const streamPrevTrack = function(state, payload) {\n  const lastUpQueues = [...state.lastUpQueues],\n        nextUpQueues = [...state.nextUpQueues],\n        lastNowPlaying = state.stream.nowPlaying,\n        nextUpQueue = nextUpQueues[0],\n        nextNowPlaying = lastUpQueues[lastUpQueues.length - 1];\n\n  const isTrackInCollection = (\n    lastNowPlaying?.parentUuid &&\n    nextUpQueue?.uuid &&\n    lastNowPlaying?.parentUuid === nextUpQueue?.uuid\n  );\n  if(lastNowPlaying) {\n    if(isTrackInCollection) {\n      nextUpQueue.children.unshift(lastNowPlaying);\n    } else {\n      nextUpQueues.unshift(lastNowPlaying);\n    }\n  }\n\n  lastUpQueues.pop();\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        startedAt: payload.startedAt,\n        nowPlaying: nextNowPlaying,\n        isPlaying: true,\n        isPaused: false,\n      },\n      lastUpQueues: lastUpQueues,\n      nextUpQueues: nextUpQueues,\n      _lastPlayed: undefined,\n  };\n}\n\n\n/*\n * ...\n */\nexport const streamNextTrack = function(state, payload) {\n  const lastUpQueues = [...state.lastUpQueues],\n        nextUpQueues = [...state.nextUpQueues],\n        lastNowPlaying = state.stream.nowPlaying,\n        nextUpQueue = nextUpQueues[0],\n        nextNowPlaying = (\n          nextUpQueue ?\n            (nextUpQueue.children.length ?\n              nextUpQueue.children[0] :\n              nextUpQueue) :\n            undefined\n        );\n\n  if(lastNowPlaying) {\n    lastUpQueues.push(lastNowPlaying);\n  }\n\n  if(nextUpQueue) {\n    if(nextUpQueue.children.length) {\n      nextUpQueue.children.shift();\n      if(!nextUpQueue.children.length) {\n        nextUpQueues.shift();\n      }\n    } else {\n      nextUpQueues.shift();\n    }\n  }\n\n  return {\n      ...state,\n      stream: {\n        ...state.stream,\n        startedAt: payload.startedAt,\n        nowPlaying: nextNowPlaying,\n        isPlaying: !!nextNowPlaying,\n        isPaused: false,\n      },\n      lastUpQueues: lastUpQueues,\n      nextUpQueues: nextUpQueues,\n      _lastPlayed: lastNowPlaying,\n  };\n}\n","import { SERVICE_SPOTIFY, SERVICE_JUKEBOX_RADIO } from '../../config/services';\nimport { getNextUpQueue } from '../../components/QueueApp/utils';\nimport {\n  playbackControlQueue,\n  playbackControlSkipToNext,\n} from '../../components/PlaybackApp/controls';\nimport {\n  fetchTrackGetFiles,\n} from '../../components/PlaybackApp/Player/network';\nimport { streamNextTrack } from './stream';\nimport { store } from '../redux'\n\n\n/*\n *\n */\nexport const playbackSpotify = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      spotifyApi: payload.spotifyApi,\n      isReady: true,\n    }\n  }\n}\n\n\nexport const playbackYouTube = function(state, payload) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      youTubeApi: payload.youTubeApi,\n      // TODO refactor ready flags\n    }\n  }\n}\n\n\n/*\n * Assumptions:\n *   - There is currently something playing in the stream.\n *   - We are not certain that something is up next.\n */\nexport const playbackAddToQueue = function(state) {\n  const nextUp = getNextUpQueue(state.nextUpQueues);\n  if(!nextUp) {\n    return { ...state };\n  }\n\n  const playback = { ...state.playback },\n        nowPlaying = state.stream.nowPlaying,\n        spotifyShouldAddToQueue = (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          nextUp.track.service === SERVICE_SPOTIFY &&\n          nextUp.playbackIntervals[0][0] === 0\n        ),\n        jukeboxRadioShouldAddToQueue = (\n          nextUp.track.service === SERVICE_JUKEBOX_RADIO\n        );\n\n  if(spotifyShouldAddToQueue) {\n    playbackControlQueue(state.playback, state.stream, nextUp);\n\n    playback.queuedUp = true;\n\n    const playbackIntervals = nowPlaying.playbackIntervals,\n          lastInterval = (\n            playbackIntervals[playbackIntervals.length - 1]\n          );\n    if(lastInterval[1] === nowPlaying.track.durationMilliseconds) {\n      playback.noopNextTrack = true;\n    }\n  } else if(jukeboxRadioShouldAddToQueue) {\n    fetchTrackGetFiles(nextUp.track.uuid)\n      .then((responseJson) => {\n        store.dispatch(responseJson.redux);\n      });\n  } else {\n    // noop\n  }\n\n  return {\n    ...state,\n    playback: playback,\n  }\n}\n\n\n/*\n *\n */\nconst playbackPlannedNextTrackHelper = function(state) {\n  const nextUp = getNextUpQueue(state.nextUpQueues),\n        queuedUp = state.playback.queuedUp,\n        noopNextTrack = state.playback.noopNextTrack,\n        addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          queuedUp: false,\n          noopNextTrack: false,\n        };\n  if(!nextUp || noopNextTrack) {\n    playback.addToQueueTimeoutId = undefined;\n    return {\n      ...state,\n      playback: playback,\n    };\n  }\n\n  if(queuedUp) {\n    playbackControlSkipToNext(state.playback, state.stream);\n    playback.addToQueueTimeoutId = undefined;\n    return {\n      ...state,\n      playback: playback,\n    };\n  }\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n  playback.isPlaying = false;\n  playback.addToQueueTimeoutId = undefined;\n  playback.nextSeekTimeoutId = undefined;\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\n/*\n *\n */\nexport const playbackPlannedNextTrack = function(state, payload) {\n  let updatedState = state;\n  updatedState = playbackPlannedNextTrackHelper(updatedState);\n  const childPayload = payload.payload,  // yes\n        updatedNowPlaying = updatedState.stream.nowPlaying;\n  childPayload.startedAt = (\n    updatedState.stream.startedAt + updatedNowPlaying.totalDurationMilliseconds\n  );\n  updatedState = streamNextTrack(updatedState, childPayload);\n  return updatedState;\n}\n\n\n/*\n *\n */\nexport const playbackStart = function(state) {\n  const addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          queuedUp: false,\n          noopNextTrack: false,\n          isPlaying: false,\n          addToQueueTimeoutId: undefined,\n        };\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\n/*\n *\n */\nexport const playbackStarted = function(state) {\n  const playback = {\n          ...state.playback,\n          isPlaying: true,\n        };\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackAddToQueueReschedule = function(state) {\n  const addToQueueTimeoutId = state.playback.addToQueueTimeoutId,\n        nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          addToQueueTimeoutId: undefined,\n          nextSeekTimeoutId: undefined,\n        };\n\n  clearTimeout(addToQueueTimeoutId);\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackAddToQueueScheduled = function(state, payload) {\n  const playback = {\n          ...state.playback,\n          addToQueueTimeoutId: payload.addToQueueTimeoutId,\n        };\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackNextSeekScheduled = function(state, payload) {\n  const nextSeekTimeoutId = state.playback.nextSeekTimeoutId,\n        playback = {\n          ...state.playback,\n          nextSeekTimeoutId: payload.nextSeekTimeoutId,\n        };\n\n  clearTimeout(nextSeekTimeoutId);\n\n  return {\n    ...state,\n    playback: playback,\n  };\n}\n\n\nexport const playbackDisable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: false,\n    }\n  }\n}\n\n\nexport const playbackEnable = function(state) {\n  return {\n    ...state,\n    playback: {\n      ...state.playback,\n      controlsEnabled: true,\n    }\n  }\n}\n\n\nexport const playbackLoadFiles = function(state, payload) {\n  const playback = { ...state.playback },\n        files = { ...state.playback.files };\n\n  const audio = new Audio(payload.track.audioUrl);\n\n  files[payload.track.uuid] = {\n    audio: audio,\n  }\n  return {\n    ...state,\n    playback: {\n      ...playback,\n      files: files,\n    }\n  };\n}\n"," import { finalizeQueue } from './queue';\n\n\n/*\n * Used to \"findIndex\" by uuid in an array.\n */\nconst findByUuid = function(uuid) {\n  return (o => o.uuid === uuid);\n}\n\n\n/*\n * Used to \"filter\" out by uuid in an array.\n */\nconst filterByUuid = function(uuid) {\n  return (o => o.uuid !== uuid);\n}\n\n\n/*\n * Used to \"sort\" and array containing queue intervals.\n */\nconst sortQueueIntervals = function(a, b) {\n  if(!b.upperBound) {\n    return -1;\n  } else if(!a.upperBound) {\n    return 1;\n  } else {\n    return (\n      a.upperBound.timestampMilliseconds -\n      a.upperBound.timestampMilliseconds\n    );\n  }\n}\n\n\n/*\n * Create a queue interval relevant to a queue item (track).\n */\nexport const queueIntervalCreate = function(state, action) {\n  const queueInterval = action.queueInterval,\n        queueUuid = action.queueUuid,\n        parentQueueUuid = action.parentQueueUuid;\n\n  // get the queue that the queue interval belongs too.\n  let queues = state.nextUpQueues;\n  let parentIndex = -1, index;\n  if(parentQueueUuid) {\n    parentIndex = queues.findIndex(findByUuid(parentQueueUuid));\n    queues = queues[parentIndex].children;\n  }\n  index = queues.findIndex(findByUuid(queueUuid));\n  const trackQueue = queues[index];\n\n  // add queue interval to that queue (and sort).\n  const queueIntervals = [...trackQueue.intervals, queueInterval],\n        sortedQueueIntervals = queueIntervals.sort(sortQueueIntervals);\n\n  // save the state\n  const nextUpQueues = [...state.nextUpQueues];\n  if(parentIndex !== -1) {\n    nextUpQueues[parentIndex].children[index].intervals = sortedQueueIntervals;\n  } else {\n    nextUpQueues[index].intervals = sortedQueueIntervals;\n  }\n\n  // update playback intervals\n  const finalizedNextUpQueues = nextUpQueues.map(finalizeQueue);\n\n  return {\n    ...state,\n    nextUpQueues: finalizedNextUpQueues,\n  };\n}\n\n\n/*\n * Delete a queue interval relevant to a queue item (track).\n */\nexport const queueIntervalDelete = function(state, action) {\n  const queueInterval = action.queueInterval,\n        queueUuid = action.queueUuid,\n        parentQueueUuid = action.parentQueueUuid;\n\n  // get the queue that the queue interval belongs too.\n  let queues = state.nextUpQueues;\n  let parentIndex = -1, index;\n  if(parentQueueUuid) {\n    parentIndex = queues.findIndex(findByUuid(parentQueueUuid));\n    queues = queues[parentIndex].children;\n  }\n  index = queues.findIndex(findByUuid(queueUuid));\n  const trackQueue = queues[index];\n\n  // delete queue interval from that queue.\n  const queueIntervals = [...trackQueue.intervals],\n        filteredQueueIntervals = queueIntervals.filter(filterByUuid(queueInterval.uuid));\n\n  // save the state\n  const nextUpQueues = [...state.nextUpQueues];\n  if(parentIndex !== -1) {\n    nextUpQueues[parentIndex].children[index].intervals = filteredQueueIntervals;\n  } else {\n    nextUpQueues[index].intervals = filteredQueueIntervals;\n  }\n\n  // update playback intervals\n  const finalizedNextUpQueues = nextUpQueues.map(finalizeQueue);\n\n  return {\n   ...state,\n   nextUpQueues: finalizedNextUpQueues,\n  };\n}\n","import { feedGenerate } from './feed';\n\n\n/*\n * ...\n */\nexport const textCommentListSet = function(state, payload) {\n  const textComments = payload.textComments,\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n *\n */\nexport const textCommentCreate = function(state, action) {\n  const textComments = [...state.textComments, action.textComment],\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n *\n */\nexport const textCommentDelete = function(state, action) {\n  const deleteByUuid = i => i.uuid !== action.textCommentUuid,\n        textComments = state.textComments.filter(deleteByUuid),\n        updatedState = {\n          ...state,\n          textComments: textComments,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n","/*\n * ...\n */\nexport const textCommentModificationCreate = function(state, payload) {\n  const textCommentModification = payload.textCommentModification,\n        textCommentUuid = payload.textCommentUuid,\n        textComments = [...state.textComments],\n        textCommentIndex = textComments.findIndex(t => (\n          t.uuid === textCommentUuid\n        )),\n        textComment = textComments[textCommentIndex],\n        modifications = [...textComment.modifications];\n\n  modifications.push(textCommentModification);\n  const sortedModifications = modifications.sort((a, b) => {\n    return a.startPtr - b.startPtr;\n  });\n  textComments[textCommentIndex].modifications = sortedModifications;\n\n  return {\n    ...state,\n    textComments: textComments,\n  }\n}\n","import { feedGenerate } from './feed';\n\n\n/*\n * ...\n */\nexport const voiceRecordingListSet = function(state, payload) {\n  const voiceRecordings = payload.voiceRecordings,\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingCreate = function(state, action) {\n  const voiceRecordings = [...state.voiceRecordings, action.voiceRecording],\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n\n\n/*\n * ...\n */\nexport const voiceRecordingDelete = function(state, action) {\n  const deleteByUuid = i => i.uuid !== action.voiceRecordingUuid,\n        voiceRecordings = state.voiceRecordings.filter(deleteByUuid),\n        updatedState = {\n          ...state,\n          voiceRecordings: voiceRecordings,\n        };\n\n  return {\n    ...updatedState,\n    feed: feedGenerate(updatedState),\n  };\n}\n","export const userSettingsUpdate = function(state, payload) {\n  return {\n    ...state,\n    userSettings: {\n        ...state.userSettings,\n        ...payload,\n    }\n  }\n}","import { createStore } from 'redux';\nimport { feedUpdate } from './reducers/feed';\nimport {\n  markerCreate,\n  markerDelete,\n  markerList,\n} from './reducers/marker';\nimport {\n  playbackSpotify,\n  playbackYouTube,\n  playbackAddToQueue,\n  playbackPlannedNextTrack,\n  playbackStart,\n  playbackStarted,\n  playbackAddToQueueReschedule,\n  playbackAddToQueueScheduled,\n  playbackNextSeekScheduled,\n  playbackDisable,\n  playbackEnable,\n  playbackLoadFiles,\n} from  './reducers/playback';\nimport { queueListSet } from './reducers/queue';\nimport {\n  queueIntervalCreate,\n  queueIntervalDelete,\n} from './reducers/queueInterval';\nimport {\n  streamSet,\n  streamPlay,\n  streamPause,\n  streamPrevTrack,\n  streamNextTrack,\n} from './reducers/stream';\nimport {\n  textCommentListSet,\n  textCommentCreate,\n  textCommentDelete,\n} from './reducers/textComment';\nimport {\n  textCommentModificationCreate,\n} from './reducers/textCommentModification';\nimport {\n  voiceRecordingListSet,\n  voiceRecordingCreate,\n  voiceRecordingDelete,\n} from './reducers/voiceRecording';\nimport {\n  userSettingsUpdate,\n} from './reducers/userSettings';\n\n\nconst initialState = {\n  nextUpQueues: [],\n  lastUpQueues: [],\n  _lastPlayed: undefined,\n  textComments: [],\n  voiceRecordings: [],\n  feed: [],\n  userSettings: undefined,\n  trackMarkerMap: {},\n  playback: {\n    controlsEnabled: false,\n    spotifyApi: undefined,\n    isPlaying: false,\n    queuedUp: false,\n    noopNextTrack: false,\n    addToQueueTimeoutId: undefined,\n    isReady: false,\n    files: {},\n  },\n}\n\n\nfunction streamExpire(state, action) {\n  const stream = { ...state.stream },\n        _lastPlayed = stream.nowPlaying;\n\n  stream.isPlaying = false;\n  stream.isPaused = false;\n  stream.nowPlaying = undefined;\n\n  return { ...state, stream: stream, _lastPlayed: _lastPlayed };\n}\n\n\nfunction queueDeleteNode(state, action) {\n  const queues = state.nextUpQueues,\n        filteredQueues = queues.filter(i => i.uuid !== action.queueUuid);\n\n  return {\n    ...state,\n    nextUpQueues: filteredQueues,\n  }\n}\n\n\nfunction queueDeleteChildNode(state, action) {\n  let queues = [...state.nextUpQueues];\n  const parentIndex = queues.findIndex(i => i.uuid === action.parentUuid),\n        children = queues[parentIndex].children,\n        filteredChildren = children.filter(i => i.uuid !== action.queueUuid);\n\n  queues[parentIndex].children = filteredChildren;\n\n  if(!filteredChildren.length) {\n    queues = queues.filter(i => i.uuid !== action.parentUuid);\n  }\n\n  return {\n    ...state,\n    nextUpQueues: queues,\n  }\n}\n\n\nfunction textCommentClearModifications(state, action) {\n  const textCommentIndex = state.textComments.findIndex(t => t.uuid === action.textCommentUuid),\n        textComments = [...state.textComments];\n\n  textComments[textCommentIndex].modifications = [];\n\n  return {\n    ...state,\n    textComments: textComments,\n  }\n}\n\n\nfunction userGetSettings(state, action) {\n  return {\n    ...state,\n    userSettings: action.userSettings,\n  }\n}\n\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"stream/set\":\n      return streamSet(state, action.payload);\n    case \"stream/play\":\n      return streamPlay(state, action.payload);\n    case \"stream/pause\":\n      return streamPause(state, action.payload);\n    case \"stream/prevTrack\":\n      return streamPrevTrack(state, action.payload);\n    case \"stream/nextTrack\":\n      return streamNextTrack(state, action.payload);\n    case \"stream/expire\":\n      return streamExpire(state, action);\n    case \"queue/listSet\":\n      return queueListSet(state, action.payload);\n    case \"queue/deleteNode\":\n      return queueDeleteNode(state, action);\n    case \"queue/deleteChildNode\":\n      return queueDeleteChildNode(state, action);\n    case \"textComment/listSet\":\n      return textCommentListSet(state, action.payload);\n    case \"textComment/create\":\n      return textCommentCreate(state, action);\n    case \"textComment/delete\":\n      return textCommentDelete(state, action);\n    case \"textCommentModification/create\":\n      return textCommentModificationCreate(state, action.payload);\n    case \"textComment/clearModifications\":\n      return textCommentClearModifications(state, action);\n    case \"voiceRecording/create\":\n      return voiceRecordingCreate(state, action);\n    case \"voiceRecording/listSet\":\n      return voiceRecordingListSet(state, action.payload);\n    case \"voiceRecording/delete\":\n      return voiceRecordingDelete(state, action);\n    case \"user/get-settings\":\n      return userGetSettings(state, action);\n    case \"marker/create\":\n      return markerCreate(state, action.payload);\n    case \"marker/delete\":\n      return markerDelete(state, action.payload);\n    case \"marker/list\":\n      return markerList(state, action.payload);\n    case \"queueInterval/create\":\n      return queueIntervalCreate(state, action.payload);\n    case \"queueInterval/delete\":\n      return queueIntervalDelete(state, action.payload);\n    case \"playback/disable\":\n      return playbackDisable(state);\n    case \"playback/enable\":\n      return playbackEnable(state);\n    case \"playback/spotify\":\n      return playbackSpotify(state, action.payload);\n    case \"playback/youTube\":\n      return playbackYouTube(state, action.payload);\n    case \"playback/addToQueue\":\n      return playbackAddToQueue(state);\n    case \"playback/plannedNextTrack\":\n      return playbackPlannedNextTrack(state, action.payload);\n    case \"playback/start\":\n      return playbackStart(state);\n    case \"playback/started\":\n      return playbackStarted(state);\n    case \"playback/addToQueueReschedule\":\n      return playbackAddToQueueReschedule(state);\n    case \"playback/addToQueueScheduled\":\n      return playbackAddToQueueScheduled(state, action.payload);\n    case \"playback/nextSeekScheduled\":\n      return playbackNextSeekScheduled(state, action.payload);\n    case \"userSettings/update\":\n      return userSettingsUpdate(state, action.payload);\n    case \"playback/loadFiles\":\n      return playbackLoadFiles(state, action.payload);\n    case \"feed/update\":\n      return feedUpdate(state);\n    default:\n      return state;\n  }\n}\n\n\nexport const store = createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({ trace: true }));\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from './Login.module.css';\n\nimport { fetchAuthToken, fetchInitializeStream } from './network';\n\n\nfunction Login(props) {\n\n  /*\n   * \n   */\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [rememberMe, setRememberMe] = useState(false);\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function(e) {\n    e.preventDefault();\n\n    const responseJson = await fetchAuthToken(username, password);\n    if(!responseJson.access || !responseJson.refresh) {\n      return;\n    }\n\n    localStorage.setItem('accessToken', responseJson.access);\n    localStorage.setItem('refreshToken', responseJson.refresh);\n\n    await fetchInitializeStream();\n\n    window.location.href = '/app/search';\n  }\n\n  return (\n    <form className={styles.Login} onSubmit={async (e) => { await handleSubmit(e); }}>\n      <h3>Sign in</h3>\n      <p>Contact a system administrator for login information.</p>\n      <p>At this time, new registrations are on a case by case basis.</p>\n\n      <br></br>\n\n      <label className={styles.FormBlock}>\n        Username&nbsp;&nbsp;\n        <input type=\"text\"\n               name=\"username\"\n               placeholder=\"username\"\n               value={username}\n               onChange={(e) => {setUsername(e.target.value)}} />\n      </label>\n\n      <label className={styles.FormBlock}>\n        Password&nbsp;&nbsp;\n        <input type=\"password\"\n               name=\"password\"\n               placeholder=\"password\"\n               value={password}\n               onChange={(e) => {setPassword(e.target.value)}} />\n      </label>\n\n      <br></br>\n\n      <label className={styles.FormBlock}>\n        <input type=\"checkbox\"\n               name=\"remember-me\"\n               value={rememberMe}\n               onChange={(e) => {setRememberMe(e.target.value)}} />\n        Remember Me\n      </label>\n\n      <br></br>\n\n      <div className={styles.FormBlock}>\n        <button type=\"submit\">\n          Sign In\n        </button>\n        <span>&nbsp;&nbsp;<Link to=\"/forgotpassword\">Forgot Password?</Link></span>\n      </div>\n    </form>\n  );\n}\n\nexport default Login;\n","import { ENDPOINT_USER_CONNECT_SPOTIFY } from '../../config/api';\nimport { TYPE_POST } from '../../config/global';\nimport { fetchBackend } from '../../utils/network';\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchUserConnectSpotify = async (code, error) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_USER_CONNECT_SPOTIFY,\n    { code, error },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useEffect } from \"react\";\n// import styles from './SpotifySync.module.css';\n\nimport { fetchUserConnectSpotify } from './network';\n\n\nfunction SpotifySync(props) {\n\n  useEffect(() => {\n    async function postData() {\n      const queryString = window.location.search,\n            urlParams = new URLSearchParams(queryString),\n            code = urlParams.get('code'),\n            error = urlParams.get('error');\n\n      await fetchUserConnectSpotify(code, error);\n\n      window.location.href = '../app/search'\n    }\n    postData();\n  }, []);\n\n  return (\n    <p>Redirecting...</p>\n  );\n}\n\nexport default SpotifySync;\n","import {\n  ENDPOINT_VOICE_RECORDING_CREATE,\n  ENDPOINT_VOICE_RECORDING_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * POST creates a voice recording.\n */\nexport const fetchCreateVoiceRecording = async (\n  audioFile, transcriptData, transcriptFinal\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_CREATE,\n    { audioFile, transcriptData, transcriptFinal },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * POST deletes a voice recording.\n */\nexport const fetchDeleteVoiceRecording = async (voiceRecordingUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_VOICE_RECORDING_DELETE,\n    { voiceRecordingUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","export const STYLE_BOLD = 'bold';\nexport const STYLE_ITALICIZE = 'italicize';\nexport const STYLE_STRIKETHROUGH = 'strikethrough';\n\n\nexport const STYLE_CHOICES = [\n  STYLE_BOLD,\n  STYLE_ITALICIZE,\n  STYLE_STRIKETHROUGH,\n];\n","import {\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * POST creates a style modification for a text comment.\n */\nexport const fetchCreateTextCommentModification = async (\n  textCommentUuid, style, anchorOffset, focusOffset\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_CREATE,\n    { textCommentUuid, style, anchorOffset, focusOffset },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useRef, useState } from \"react\";\nimport { connect } from 'react-redux';\nimport Popover from 'react-text-selection-popover';\nimport styles from './NotableText.module.css';\nimport {\n  STYLE_BOLD,\n  STYLE_ITALICIZE,\n  STYLE_STRIKETHROUGH,\n  STYLE_CHOICES,\n} from './constants';\nimport { fetchCreateTextCommentModification } from './network';\n\n\nfunction NotableText(props) {\n\n  /*\n   * \n   */\n  const textColor = props.textColor;\n\n  const selectableRef = useRef(null);\n\n  const [selectableIsShowable, setSelectableIsShowable] = useState(true);\n  const [anchorOffset, setAnchorOffset] = useState(null);\n  const [focusOffset, setFocusOffset] = useState(null);\n\n  /*\n   * When the user highlights part of the comment.\n   */\n  const handleNotation = async function(style) {\n    const textCommentUuid = props.data.uuid;\n    const responseJson = await fetchCreateTextCommentModification(\n      textCommentUuid,\n      style,\n      anchorOffset,\n      focusOffset,\n    );\n    props.dispatch(responseJson.redux)\n    setSelectableIsShowable(false);\n  }\n\n  /*\n   * ...\n   */\n  const onTextSelect = async function() {\n    const selection = window.getSelection();\n\n    // Invalid text selection\n    if(selection.anchorNode !== selection.focusNode) {\n      setSelectableIsShowable(false);\n      setAnchorOffset(null);\n      setFocusOffset(null);\n      return;\n    }\n\n    // NOTE: anchor is where the user starts selecting text, focus is the end\n    //       of the selection.\n    const offset = parseInt(selection.anchorNode.parentNode.getAttribute('offset'));\n    setSelectableIsShowable(true);\n    setAnchorOffset(offset + selection.anchorOffset);\n    setFocusOffset(offset + selection.focusOffset);\n  }\n\n  /*\n   * ...\n   */\n  const onTextUnselect = async function() {\n    setSelectableIsShowable(false);\n    setAnchorOffset(null);\n    setFocusOffset(null);\n  }\n\n  /*\n   * When rendering a text comment, the text has to be displayed along with all\n   * of its annotations. Here the comment string is spliced into many\n   * substrings. If a substring has an accompanying modification, then Rough\n   * Notation is used to display the underline, strike-through, or highlight.\n   */\n  const renderTextComment = function() {\n    const textComment = props.data;\n    const textCommentText = textComment.text;\n    const modifications = textComment.modifications;\n\n    let startOffset = 0,\n        textCommentHtml = <></>;\n    for(let i = 0; i < modifications.length; i++) {\n        let modification = modifications[i];\n\n        const regSubString = textCommentText.substring(\n          startOffset,\n          modification.startPtr\n        )\n        const styledSubString = textCommentText.substring(\n          modification.startPtr,\n          modification.endPtr\n        )\n\n        // BUG: https://github.com/linkstrifer/react-rough-notation/issues/17\n        textCommentHtml = (\n          <>\n            {textCommentHtml}\n            <span offset={startOffset}>{regSubString}</span>\n            {modification.type === STYLE_BOLD &&\n              <b><span>{styledSubString}</span></b>\n            }\n            {modification.type === STYLE_ITALICIZE &&\n              <i><span>{styledSubString}</span></i>\n            }\n            {modification.type === STYLE_STRIKETHROUGH &&\n              <strike><span>{styledSubString}</span></strike>\n            }\n          </>\n        )\n\n        startOffset = modification.endPtr;\n    }\n\n    const regSubString = textCommentText.substring(\n      startOffset,\n      textCommentText.length\n    )\n\n    textCommentHtml = (\n      <>\n        {textCommentHtml}\n        <span offset={startOffset}>{regSubString}</span>\n      </>\n    )\n\n    return textCommentHtml;\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.NotableText} style={{color: textColor}}>\n\n      <p ref={selectableRef}>\n        {renderTextComment()}\n      </p>\n\n      <Popover selectionRef={selectableRef} onTextSelect={onTextSelect} onTextUnselect={onTextUnselect} isOpen={selectableIsShowable}>\n        {STYLE_CHOICES.map((style, index) => {\n          return (\n            <button key={index}\n                    type=\"button\"\n                    onClick={async () => { await handleNotation(style); }}>\n              {style}\n            </button>\n          );\n        })}\n      </Popover>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(NotableText);\n","import {\n  ENDPOINT_TEXT_COMMENT_DELETE,\n  ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n} from '../../../config/api'\nimport { TYPE_POST } from '../../../config/global'\nimport { fetchBackend } from '../../../utils/network'\n\n\n/*\n * POST delete a text comment.\n */\nexport const fetchDeleteTextComment = async (textCommentUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * POST deletes all modifcations that belong to a text comment.\n */\nexport const fetchListDeleteTextCommentModifications = async (\n  textCommentUuid\n) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TEXT_COMMENT_MODIFICATION_LIST_DELETE,\n    { textCommentUuid: textCommentUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport NotableText from '../NotableText/NotableText';\nimport styles from './TextComment.module.css';\nimport {\n  fetchDeleteTextComment,\n  fetchListDeleteTextCommentModifications,\n} from './network';\n\n\nfunction TextComment(props) {\n\n  /*\n   * \n   */\n  const textComment = props.data,\n        textCommentUuid = textComment.uuid;\n\n  /*\n   * Deletes a text comment.\n   */\n  const deleteTextComment = async function() {\n    await fetchDeleteTextComment(textCommentUuid);\n    await props.dispatch({\n      type: 'textComment/delete',\n      textCommentUuid: textCommentUuid,\n    });\n  }\n\n  /*\n   * Clears all styled modifications on this text comment.\n   */\n  const clearModifications = async function() {\n    await fetchListDeleteTextCommentModifications(textCommentUuid);\n    await props.dispatch({\n      type: 'textComment/clearModifications',\n      textCommentUuid: textCommentUuid,\n    });\n  }\n\n  let textColor;\n  if(textComment.renderStatus === 'history') {\n    textColor = 'grey';\n  } else if(textComment.renderStatus === 'display') {\n    textColor = 'black';\n  } else {\n    textColor = 'red';\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.TextComment}>\n      <NotableText data={textComment} textColor={textColor}></NotableText>\n\n      <button type=\"button\" onClick={clearModifications}>\n        Clear modifications\n      </button>\n\n      <button type=\"button\" onClick={deleteTextComment}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(TextComment);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { Notation } from 'react-abc';\nimport styles from './ABCNotation.module.css';\nimport { fetchDeleteTextComment } from '../TextComment/network';\n\n\nfunction ABCNotation(props) {\n\n  /*\n   * \n   */\n  const abcNotation = props.data,\n        abcNotationUuid = abcNotation.uuid;\n\n  /*\n   * Deletes a music notation graphic.\n   *\n   * NOTE: ABCNotation is a proxy model of TextComment. Everything underneath\n   * the hood runs inside TextComment.\n   */\n  const deleteAbcNotation = async function() {\n    await fetchDeleteTextComment(abcNotationUuid);\n    await props.dispatch({\n      type: 'textComment/delete',\n      textCommentUuid: abcNotationUuid,\n    });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.ABCNotation}>\n\n      <Notation notation={abcNotation.text}\n                engraverParams={{ staffwidth: 278 }}/>\n\n      <button type=\"button\" onClick={deleteAbcNotation}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(ABCNotation);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './VoiceRecording.module.css';\nimport { fetchDeleteVoiceRecording } from './network';\n\n\nfunction VoiceRecording(props) {\n\n  /*\n   * \n   */\n  const voiceRecording = props.data,\n        voiceRecordingUuid = voiceRecording.uuid;\n\n  /*\n   * Delete a voice recording.\n   */\n  const handleDelete = async function() {\n    await fetchDeleteVoiceRecording(voiceRecordingUuid);\n    props.dispatch({\n      type: 'voiceRecording/delete',\n      voiceRecordingUuid: voiceRecordingUuid,\n    });\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.VoiceRecording}>\n      <p>\n        <i>\n          {\n            voiceRecording.transcriptFinal === 'null' ?\n              '<transcript not available>' :\n              voiceRecording.transcriptFinal\n          }\n        </i>\n      </p>\n      <button type=\"submit\" onClick={handleDelete}>\n        Delete\n      </button>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(VoiceRecording);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport SpeechRecognition, { useSpeechRecognition } from 'react-speech-recognition';\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport styles from './FeedApp.module.css';\nimport { fetchTextCommentCreate } from './network';\nimport { fetchCreateVoiceRecording } from './VoiceRecording/network';\nimport TextComment from './TextComment/TextComment';\nimport ABCNotation from './ABCNotation/ABCNotation';\nimport VoiceRecording from './VoiceRecording/VoiceRecording';\nimport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING } from '../../config/model';\nimport { getPositionMilliseconds } from '../../utils/reducers/feed';\n\n\nfunction FeedApp(props) {\n\n  /*\n   * \n   */\n  const feed = props.feed,\n        stream = props.stream;\n\n  const [text, setText] = useState('');\n  const [textCommentUuid, setTextCommentUuid] = useState(undefined);\n  const [textCommentTimestamp, setTextCommentTimestamp] = useState(undefined);\n  const [isAbc, setIsAbc] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [recorder] = useState(new MicRecorder({ bitRate: 320 }));\n  const [transcriptData] = useState([]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  // REGENERATE THE FEED\n  useEffect(() => {\n\n    const periodicTask = setInterval(() => {\n      props.dispatch({ type: \"feed/update\" });\n    }, 50);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n\n  // eslint-disable-next-line\n  }, []);\n\n  const handleTextChange = function(e) {\n    if(!textCommentUuid) {\n      const arr = getPositionMilliseconds(stream),\n            position = arr[0];\n      setTextCommentTimestamp(position);\n      setTextCommentUuid(stream.nowPlaying.track.uuid);\n    }\n    setText(e.target.value);\n  }\n\n  /*\n   * When a user submits a new comment.\n   */\n  const createTextComment = async function(e) {\n    e.preventDefault();\n    const format = isAbc ? 'abc_notation' : 'text';\n    const responseJson = await fetchTextCommentCreate(\n      text, format, textCommentUuid, textCommentTimestamp\n    );\n\n    await props.dispatch({\n      type: 'textComment/create',\n      textComment: responseJson.data,\n    });\n\n    setTextCommentTimestamp(undefined);\n    setTextCommentUuid(undefined);\n    setText('');\n  }\n\n  const { transcript, resetTranscript } = useSpeechRecognition();\n\n  /*\n   * ...\n   */\n  const handleRecord = function() {\n    if(!isRecording) {\n      if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n        SpeechRecognition.startListening({ continuous: true });\n        // BUG: https://github.com/JamesBrill/react-speech-recognition/issues/81\n        //\n        // const recognition = SpeechRecognition.getRecognition();\n        // recognition.onresult = (e) => {\n        //   recognition.onresult(e);\n        //   const timeStamp = e.timeStamp,\n        //         transcript = e.results[0][0].transcript,\n        //         confidence = e.results[0][0].confidence,\n        //         isFinal = e.results[0].isFinal;\n        //   transcriptData.push({ timeStamp, transcript, confidence, isFinal });\n        //   setTranscriptData([...transcriptData]);\n        // }\n      }\n      recorder.start();\n      setIsRecording(true);\n    } else {\n      if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n        SpeechRecognition.stopListening();\n      }\n\n      recorder.stop()\n        .getMp3().then(([buffer, blob]) => {\n          (async function () {\n            const file = new File(buffer, 'voice.mp3', {\n              type: blob.type,\n              lastModified: Date.now(),\n            });\n\n            const responseJson = await fetchCreateVoiceRecording(file, JSON.stringify(transcriptData), transcript);\n\n            await props.dispatch({\n              type: 'voiceRecording/create',\n              voiceRecording: responseJson.data,\n            });\n\n            if (SpeechRecognition.browserSupportsSpeechRecognition()) {\n              resetTranscript();\n            }\n          })()\n        });\n\n      setIsRecording(false);\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.FeedApp}>\n      <div className={styles.Feed}>\n        <div className={styles.FeedWrapper}>\n          {feed.map((value, index) => {\n            if(value.class === CLASS_TEXT_COMMENT) {\n              if(value.format === 'text') {\n                return <TextComment key={index} data={value} />;\n              } else if(value.format === 'abc_notation') {\n                return <ABCNotation key={index} data={value} />;\n              }\n            } else if(value.class === CLASS_VOICE_RECORDING) {\n              return <VoiceRecording key={index} data={value} />\n            }\n            return <></>;\n          })}\n        </div>\n      </div>\n\n      <form className={styles.CreateTextComment} onSubmit={async (e) => { await createTextComment(e); }}>\n        <input type=\"checkbox\"\n               value={isAbc}\n               onChange={(e) => { setIsAbc(e.target.checked); }} />\n        <button type=\"button\"\n                onClick={handleRecord}\n                disabled={!stream.isPlaying} >\n          Record\n        </button>\n        {isAbc ? (\n          <textarea type=\"text\"\n                    name=\"text\"\n                    placeholder=\"text\"\n                    value={text}\n                    onChange={handleTextChange}\n                    disabled={!stream.isPlaying} />\n        ) : (\n          <input type=\"text\"\n                 name=\"text\"\n                 placeholder=\"text\"\n                 value={text}\n                 onChange={handleTextChange}\n                 disabled={!stream.isPlaying} />\n        )}\n        <button type=\"submit\"\n                disabled={!stream.isPlaying} >\n          Send\n        </button>\n      </form>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    textComments: state.textComments,\n    voiceRecordings: state.voiceRecordings,\n    feed: state.feed,\n});\n\n\nexport default connect(mapStateToProps)(FeedApp);\n","const CLASS_TEXT_COMMENT = 'TextComment'\nconst CLASS_VOICE_RECORDING = 'VoiceRecording'\n\nexport { CLASS_TEXT_COMMENT, CLASS_VOICE_RECORDING }\n","import React from \"react\";\nimport styles from './MiniFeed.module.css';\n\n\nfunction MiniFeed(props) {\n\n  return (\n    <div className={styles.MiniFeed}>\n      <h3><i>Feed...</i></h3>\n    </div>\n  );\n}\n\n\nexport default MiniFeed;\n","import {\n  ENDPOINT_MARKER_CREATE,\n  ENDPOINT_MARKER_DELETE,\n  ENDPOINT_MARKER_LIST,\n} from '../../../config/api';\nimport { TYPE_GET, TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n\n/*\n * Creates a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerCreate = async (trackUuid, timestampMilliseconds, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_CREATE,\n    { trackUuid, timestampMilliseconds, queueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Deletes a marker. The queue context is passed so the Redux state may be\n * updated.\n */\nexport const fetchStreamMarkerDelete = async (markerUuid, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_MARKER_DELETE,\n    { markerUuid, queueUuid }\n  );\n  return await response.json();\n};\n\n/*\n * Fetches a list of markers for a given track. The queue context is passed so\n * the Redux state may be updated.\n */\nexport const fetchStreamMarkerList = async (trackUuid, queueUuid) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_MARKER_LIST,\n    { trackUuid, queueUuid }\n  );\n  return await response.json();\n};\n","import {\n  ENDPOINT_QUEUE_INTERVAL_CREATE,\n  ENDPOINT_QUEUE_INTERVAL_DELETE,\n} from '../../../config/api';\nimport { TYPE_POST } from '../../../config/global';\nimport { fetchBackend } from '../../../utils/network';\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalCreate = async (queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, isMuted, repeatCount, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_CREATE,\n    { queueUuid, lowerBoundMarkerUuid, upperBoundMarkerUuid, isMuted, repeatCount, parentQueueUuid }\n  );\n  return await response.json();\n};\n\n\n/*\n * Fetches...\n */\nexport const fetchStreamQueueIntervalDelete = async (queueIntervalUuid, queueUuid, parentQueueUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_INTERVAL_DELETE,\n    { queueIntervalUuid, queueUuid, parentQueueUuid }\n  );\n  return await response.json();\n};\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { fetchStreamQueueIntervalDelete } from './network';\n\n\nfunction Interval(props) {\n\n  const { queueInterval, queueUuid, parentQueueUuid } = props.data;\n\n  const deleteQueueInterval = async function() {\n    const responseJson = await fetchStreamQueueIntervalDelete(\n      queueInterval.uuid, queueUuid, parentQueueUuid\n    );\n    await props.dispatch(responseJson.redux);\n  }\n\n  const lowerBound = queueInterval.lowerBound ?\n    queueInterval.lowerBound.timestampMilliseconds / 1000 : 'beginning';\n  const upperBound = queueInterval.upperBound ?\n    queueInterval.upperBound.timestampMilliseconds / 1000 : 'end';\n\n  return (\n    <div>\n      <span>\n        {lowerBound} =>\n        {upperBound}\n        ({queueInterval.isMuted ? 'muted' : 'played'})\n      </span>\n      <button onClick={deleteQueueInterval}>Delete</button>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({});\n\nexport default connect(mapStateToProps)(Interval);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport { fetchStreamMarkerDelete } from './network';\n\n\nfunction Marker(props) {\n\n  const { trackMarker, queueUuid } = props.data;\n\n  const deleteTrackMarker = async function() {\n    const responseJson = await fetchStreamMarkerDelete(\n      trackMarker.uuid, queueUuid\n    );\n    await props.dispatch(responseJson.redux);\n  }\n\n  return (\n    <div>\n      <span>\n        @ {trackMarker.timestampMilliseconds / 1000}\n      </span>\n      <button onClick={deleteTrackMarker}>Delete</button>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({});\n\nexport default connect(mapStateToProps)(Marker);\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from 'react-redux';\nimport Modal from 'react-modal';\nimport {\n  fetchStreamMarkerCreate,\n  fetchStreamMarkerList,\n} from './Marker/network';\nimport Interval from './Interval/Interval';\nimport {\n  fetchStreamQueueIntervalCreate,\n} from './Interval/network';\nimport Marker from './Marker/Marker'\n\n\nfunction TrackDetailApp(props) {\n\n  /*\n   * \n   */\n  const queue = props.data,\n        queueUuid = queue.uuid,\n        parentQueueUuid = queue.parentUuid,\n        // modal\n        shouldOpenModal = props.shouldOpenModal,\n        setShouldOpenModal = props.setShouldOpenModal,\n        isOpen = props.isOpen,\n        openModal = props.openModal,\n        closeModal = props.closeModal,\n        // Redux\n        trackMarkerMap = props.trackMarkerMap,\n        markers = trackMarkerMap[queueUuid] || [];\n\n  const [formMarkerTimestamp, setFormMarkerTimestamp] = useState('');\n  const [lowerBoundMarkerUuid, setLowerBoundMarkerUuid] = useState('null');\n  const [upperBoundMarkerUuid, setUpperBoundMarkerUuid] = useState('null');\n\n  /*\n   * Create a marker.\n   */\n  const createTrackMarker = async function() {\n    const responseJson = await fetchStreamMarkerCreate(\n      queue.track.uuid, formMarkerTimestamp, queueUuid\n    );\n    await props.dispatch(responseJson.redux);\n    setFormMarkerTimestamp('');\n  }\n\n  /*\n   * Create an interval. Right now, the only interval is \"muted.\"\n   */\n  const createQueueInterval = async function() {\n    const responseJson = await fetchStreamQueueIntervalCreate(\n      queue.uuid,\n      lowerBoundMarkerUuid,\n      upperBoundMarkerUuid,\n      true,\n      null,\n      parentQueueUuid,\n    );\n    await props.dispatch(responseJson.redux);\n  }\n\n  ////////////////////////////////////////////////////////\n  // load markers that need to be displayed in the modal\n  useEffect(() => {\n    async function loadData() {\n      const responseJson = await fetchStreamMarkerList(\n        queue.track.uuid, queueUuid\n      );\n      await props.dispatch(responseJson.redux);\n      openModal();\n    }\n    if(!shouldOpenModal) {\n      return;\n    }\n    setShouldOpenModal(false);\n    loadData();\n  // eslint-disable-next-line\n  }, [shouldOpenModal])\n\n  /*\n   * \n   */\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}>Close</button>\n      <p>Markers</p>\n      {markers.map((value, index) => (\n        <Marker key={index}\n                     data={{\n                       trackMarker: value,\n                       queueUuid: queueUuid,\n                     }} />\n      ))}\n      <div>\n        <input type=\"text\"\n               name=\"timestampMilliseconds\"\n               placeholder=\"timestamp\"\n               value={formMarkerTimestamp}\n               onChange={(e) => {setFormMarkerTimestamp(e.target.value)}} />\n        <button onClick={createTrackMarker}>Create Marker</button>\n      </div>\n      <p>Intervals</p>\n      {queue.intervals.map((value, index) => (\n        <Interval key={index}\n                       data={{\n                         queueInterval: value,\n                         queueUuid: queueUuid,\n                         parentQueueUuid: parentQueueUuid,\n                       }} />\n      ))}\n      <div>\n        <select value={lowerBoundMarkerUuid} onChange={(e) => {setLowerBoundMarkerUuid(e.target.value)}}>\n          <option value={'null'}>Beginning</option>\n          {markers.map((value, index) => (\n            <option key={index} value={value.uuid}>@ {value.timestampMilliseconds}</option>\n          ))}\n        </select>\n        <select value={upperBoundMarkerUuid} onChange={(e) => {setUpperBoundMarkerUuid(e.target.value)}}>\n          {markers.map((value, index) => (\n            <option key={index} value={value.uuid}>@ {value.timestampMilliseconds}</option>\n          ))}\n          <option value={'null'}>End</option>\n        </select>\n        <button onClick={createQueueInterval}>Mute Interval</button>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  trackMarkerMap: state.trackMarkerMap,\n});\n\nexport default connect(mapStateToProps)(TrackDetailApp);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport TrackDetailApp from '../../TrackDetailApp/TrackDetailApp'\nimport styles from './QueueTrack.module.css';\n\n\nfunction QueueTrack(props) {\n\n  /*\n   * \n   */\n  const queue = props.data,\n        stream = props.stream,\n        lastUp = props.lastUp;\n\n  const [showModal, setShowModal] = useState(false);\n  const [shouldOpenModal, setShouldOpenModal] = useState(false);\n\n  const initializeModal = function() {\n    setShouldOpenModal(true);\n  }\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  /*\n   * \n   */\n  const currentIndex = stream?.nowPlaying?.index || lastUp?.index,\n        isNextUp = !currentIndex || currentIndex < queue.index,\n        indent = queue.parentUuid && isNextUp ? '-' : '';\n  return (\n    <div className={styles.QueueTrack}>\n      <span>\n        {indent}\n        {queue.track.name}\n      </span>\n      {isNextUp &&\n        <>\n          <button className={styles.Button} type=\"button\" onClick={initializeModal}>\n            Edit\n          </button>\n          <button className={styles.Button} type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n            Delete\n          </button>\n        </>\n      }\n      <TrackDetailApp data={queue}\n                 isOpen={showModal}\n                 shouldOpenModal={shouldOpenModal}\n                 setShouldOpenModal={setShouldOpenModal}\n                 openModal={openModal}\n                 closeModal={closeModal} />\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  lastUp: state.lastUp,\n});\n\nexport default connect(mapStateToProps)(QueueTrack);\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux'\nimport styles from './QueueCollection.module.css';\nimport QueueTrack from '../QueueTrack/QueueTrack'\n\n\nfunction QueueCollection(props) {\n\n  /*\n   * \n   */\n  const queue = props.data,\n        stream = props.stream,\n        lastUpQueues = props.lastUpQueues,\n        lastUp = lastUpQueues[lastUpQueues.length - 1],\n        queueUuid = queue.uuid;\n\n  console.log(stream?.isPlaying && stream?.nowPlaying?.parentUuid === queueUuid)\n\n  const isCurrentlyPlayingCollection = (\n    // Stream is NOW playing - \"now playing\" belongs to same parent UUID\n    (stream?.nowPlaying && stream?.nowPlaying?.parentUuid === queueUuid) ||\n    // Stream is NOT playing - \"last up\" belongs to same parent UUID\n    (!stream?.nowPlaying && lastUp?.parentUuid && lastUp?.parentUuid === queueUuid)\n  );\n\n\n  const [reveal, setReveal] = useState(isCurrentlyPlayingCollection);\n\n  /*\n   * When...\n   */\n  const toggleReveal = function(e) {\n    setReveal(!reveal);\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueCollection}>\n      <div className={styles.Item}>\n        <span>\n          <i>\n            {queue.collection.name}\n          </i>\n        </span>\n        &nbsp;&nbsp;\n        {queue.children.length > 0 && !reveal &&\n          <button className={styles.Button} type=\"button\" onClick={toggleReveal}>\n            More\n          </button>\n        }&nbsp;&nbsp;\n        {queue.children.length > 0 && reveal &&\n          <button className={styles.Button} type=\"button\" onClick={toggleReveal}>\n            Less\n          </button>\n        }&nbsp;&nbsp;\n        {!isCurrentlyPlayingCollection &&\n          <button className={styles.Button} type=\"button\" onClick={async (e) => { await props.destroy(queue); }}>\n            Delete\n          </button>\n        }\n      </div>\n      {queue.children.length > 0 && reveal &&\n        <div className={styles.Children}>\n          {queue.children.map((value, index) => (\n            <QueueTrack key={index}\n                        data={value}\n                        destroy={props.destroy}>\n            </QueueTrack>\n          ))}\n        </div>\n      }\n    </div>\n  );\n\n}\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  lastUpQueues: state.lastUpQueues,\n});\n\nexport default connect(mapStateToProps)(QueueCollection);\n","import { connect } from 'react-redux'\nimport { Link } from \"react-router-dom\";\nimport styles from './QueueApp.module.css';\nimport { fetchDeleteQueue } from './network'\nimport QueueCollection from './QueueCollection/QueueCollection'\nimport QueueTrack from './QueueTrack/QueueTrack'\nimport { getQueueDuration } from './utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction QueueApp(props) {\n\n  const nextUpQueues = props.nextUpQueues,\n        stream = props.stream,\n        nowPlayingTrackName = stream?.nowPlaying?.track?.name;\n\n  const queueDuration = getQueueDuration(nextUpQueues, stream);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * Called inside a child component, this first deletes the queue from the\n   * backend, then, on success, it deletes it from the front-end model and\n   * view.\n   */\n  const destroyQueueItem = async function(queue) {\n    const queueUuid = queue.uuid;\n\n    await fetchDeleteQueue(queueUuid);\n\n    const parentUuid = queue.parentUuid;\n    if(parentUuid) {\n      props.dispatch({\n        type: 'queue/deleteChildNode',\n        parentUuid: parentUuid,\n        queueUuid: queueUuid,\n      });\n    } else {\n      props.dispatch({\n        type: 'queue/deleteNode',\n        queueUuid: queueUuid,\n      });\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.QueueApp}>\n      <h4><i>Last up...</i></h4>\n      <div>\n        {props.lastUpQueues.map((value, index) => {\n          if(value.track) {\n            return (\n              <QueueTrack key={index}\n                          data={value}\n                          destroy={() => {}}>\n              </QueueTrack>\n            );\n          } else {\n            return <></>;\n          }\n        })}\n      </div>\n      <div>\n        <h4><i>Now playing...</i></h4>\n        {nowPlayingTrackName ?\n          (\n            <p>{nowPlayingTrackName}</p>\n          ) : (\n            <p><i>Nothing is playing...</i></p>\n          )\n        }\n      </div>\n      <h2><i>Next up...</i></h2>\n      <div>\n        {nextUpQueues.map((value, index) => {\n          if(value.collection) {\n            return (\n              <QueueCollection key={value.uuid}\n                               data={value}\n                               destroy={destroyQueueItem}>\n              </QueueCollection>\n            );\n          } else if(value.track) {\n            return (\n              <QueueTrack key={value.uuid}\n                          data={value}\n                          destroy={destroyQueueItem}>\n              </QueueTrack>\n            );\n          } else {\n            return <></>;\n          }\n        })}\n        {queueDuration ?\n          (\n            <p><i>\n              Playback will end&nbsp;\n              <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n            </i></p>\n          ) : (\n            <p><i>\n              There is nothing in the queue.\n            </i></p>\n          )\n        }\n        <Link to=\"/app/search\">\n          <button className={styles.AddToQueue}>\n            Add to Queue\n          </button>\n        </Link>\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  stream: state.stream,\n  nextUpQueues: state.nextUpQueues,\n  lastUpQueues: state.lastUpQueues,\n});\n\n\nexport default connect(mapStateToProps)(QueueApp);\n","import { connect } from 'react-redux'\nimport styles from './MiniQueue.module.css';\nimport { getQueueDuration, flattenQueues } from '../utils';\nimport ReactTimeAgo from 'react-time-ago';\n\n\nfunction MiniQueue(props) {\n\n  const nextUpQueues = props.nextUpQueues,\n        flattenedQueue = flattenQueues([nextUpQueues[0]]),\n        expandedQueues = [...flattenedQueue, ...nextUpQueues.slice(1)],\n        stream = props.stream;\n\n  console.log(expandedQueues)\n\n  // TODO needs to add however much is left inside now playing.\n  const queueDuration = getQueueDuration(nextUpQueues, stream);\n  const endsAt = new Date(Date.now() + queueDuration);\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.MiniQueue}>\n      <h3><i>Next up...</i></h3>\n      {queueDuration ?\n        (\n          <p><i>\n            Playback will end&nbsp;\n            <ReactTimeAgo future date={endsAt} locale=\"en-US\" />\n          </i></p>\n        ) : (\n          <p><i>\n            There is nothing in the queue.\n          </i></p>\n        )\n      }\n      <div>\n        {expandedQueues.map((queue, index) => {\n          return (\n            <div className={styles.MiniQueueItem}>\n              {queue.track?.name || queue.collection?.name}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n  nextUpQueues: state.nextUpQueues,\n  stream: state.stream,\n});\n\n\nexport default connect(mapStateToProps)(MiniQueue);\n","import { ENDPOINT_MUSIC_SEARCH, ENDPOINT_QUEUE_CREATE } from '../../config/api'\nimport { TYPE_GET, TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchSearchMusicLibrary = async (query, providerSpotify, providerYouTube, providerJukeboxRadio, formatTrack, formatAlbum, formatPlaylist, formatVideo) => {\n  const response = await fetchBackend(\n    TYPE_GET,\n    ENDPOINT_MUSIC_SEARCH,\n    {\n      query,\n      providerSpotify,\n      providerYouTube,\n      providerJukeboxRadio,\n      formatTrack,\n      formatAlbum,\n      formatPlaylist,\n      formatVideo,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n\n\n/*\n * Fetches an auth token from the server.\n */\nexport const fetchCreateQueue = async (className, genericUuid) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_QUEUE_CREATE,\n    { className, genericUuid },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","export const iconCheck = (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.5858 13.4142L7.75735 10.5858L6.34314 12L10.5858 16.2427L17.6568 9.1716L16.2426 7.75739L10.5858 13.4142Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React, { useState } from 'react';\nimport styles from './SearchResult.module.css';\nimport { iconCheck } from './icons';\n\n\nfunction SearchResult(props) {\n  const searchResult = props.data,\n        addToQueue = props.addToQueue;\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSubmitted, setIsSubmitted] = useState(false);\n\n  const handleAddToQueue = async function() {\n    setIsSubmitting(true);\n    await addToQueue(searchResult.class, searchResult.uuid);\n    setIsSubmitted(true);\n  }\n\n  return (\n    <div className={styles.SearchResult}>\n      <span>\n        {searchResult.provider} {searchResult.format} {searchResult.name}\n        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n      </span>\n\n      { /* Initial state: button has not been clicked. */\n      !isSubmitting && !isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                onClick={handleAddToQueue}\n                disabled={false}>\n          Add\n        </button>\n      }\n\n      { /* Immediately after being clicked, disable and display spinner. */\n      isSubmitting && !isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                disabled={true}>\n          <i className={styles.ggSpinner}></i>\n        </button>\n      }\n\n      { /* Once loaded, stay disabled but display a check */\n      isSubmitted &&\n        <button type=\"button\"\n                className={styles.Button}\n                disabled={true}>\n          {iconCheck}\n        </button>\n      }\n    </div>\n  );\n}\n\nexport default SearchResult;\n","import { ENDPOINT_TRACK_CREATE } from '../../config/api'\nimport { TYPE_POST } from '../../config/global'\nimport { fetchBackend } from '../../utils/network'\n\n/*\n * Fetches...\n */\nexport const fetchCreateTrack = async (audioFile, imageFile, trackName, artistName, albumName) => {\n  const response = await fetchBackend(\n    TYPE_POST,\n    ENDPOINT_TRACK_CREATE,\n    {\n      audioFile: audioFile,\n      imageFile: imageFile,\n      trackName: trackName,\n      artistName: artistName,\n      albumName: albumName,\n    },\n  );\n  const responseJson = await response.json();\n  return responseJson;\n};\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport styles from './Upload.module.css';\n\nimport { fetchCreateTrack } from './network';\n\n\nfunction Upload(props) {\n\n  /*\n   * \n   */\n  const [inputKey, setInputKey] = useState(0);\n\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [audioFile, setAudioFile] = useState('');\n  const [imageFile, setImageFile] = useState('');\n  const [trackName, setTrackName] = useState('');\n  const [artistName, setArtistName] = useState('');\n  const [albumName, setAlbumName] = useState('');\n\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function() {\n\n    // Hit the server.\n    setIsDisabled(true);\n    await fetchCreateTrack(\n      audioFile,\n      imageFile,\n      trackName,\n      artistName,\n      albumName,\n    );\n\n    // Reset the form.\n    setIsDisabled(false);\n    setInputKey(prev => prev + 2);\n    setTrackName('');\n    setArtistName('');\n    setAlbumName('');\n\n    // Close the modal.\n    closeModal();\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}\n              disabled={isDisabled}>Close</button>\n\n      <div className={styles.Login}>\n        <h3>Upload</h3>\n\n        <label className={styles.FormBlock}>\n          Audio file\n          <input type=\"file\"\n                 name=\"audioFile\"\n                 onChange={(e) => {setAudioFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Image file\n          <input type=\"file\"\n                 name=\"imageFile\"\n                 onChange={(e) => {setImageFile(e.target.files[0])}}\n                 disabled={isDisabled}\n                 key={inputKey + 1} />\n        </label>\n\n        <br></br>\n\n        <label className={styles.FormBlock}>\n          Track name\n          <input type=\"text\"\n                 name=\"trackName\"\n                 placeholder=\"Track name\"\n                 value={trackName}\n                 onChange={(e) => {setTrackName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Artist name\n          <input type=\"text\"\n                 name=\"artistName\"\n                 placeholder=\"Artist name\"\n                 value={artistName}\n                 onChange={(e) => {setArtistName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <label className={styles.FormBlock}>\n          Album name\n          <input type=\"text\"\n                 name=\"albumName\"\n                 placeholder=\"Album name\"\n                 value={albumName}\n                 onChange={(e) => {setAlbumName(e.target.value)}}\n                 disabled={isDisabled} />\n        </label>\n\n        <br></br>\n\n        <div className={styles.FormBlock}>\n          <button type=\"submit\"\n                  onClick={handleSubmit}\n                  disabled={isDisabled}>\n            Submit\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default Upload;\n","import React, { useState } from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './SearchApp.module.css';\n\nimport { fetchSearchMusicLibrary, fetchCreateQueue } from './network';\nimport SearchResult from './SearchResult/SearchResult';\nimport Upload from '../Upload/Upload';\nimport { fetchQueueList } from '../QueueApp/network';\n\n\nfunction SearchApp(props) {\n\n  /*\n   * \n   */\n\n  const [searchResults, setSearchResults] = useState([]);\n\n  const [query, setQuery] = useState('');\n\n  // NOTE: These could be condensed, but I prefer explicitly writing them out.\n  const [serviceSpotify, setServiceSpotify] = useState(true);\n  const [serviceYouTube, setServiceYouTube] = useState(true);\n  const [serviceJukeboxRadio, setServiceJukeboxRadio] = useState(true);\n\n  const [formatTrack, setFormatTrack] = useState(true);\n  const [formatAlbum, setFormatAlbum] = useState(true);\n  const [formatPlaylist, setFormatPlaylist] = useState(true);\n  const [formatVideo, setFormatVideo] = useState(true);\n\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n  /*\n   * When the user initializes a login attempt.\n   */\n  const handleSubmit = async function() {\n    if(!query) {\n      return;\n    }\n    const responseJson = await fetchSearchMusicLibrary(\n      query,\n      serviceSpotify,\n      serviceYouTube,\n      serviceJukeboxRadio,\n      formatTrack,\n      formatAlbum,\n      formatPlaylist,\n      formatVideo,\n    );\n    setSearchResults(responseJson.data);\n  }\n\n  /*\n   * When...\n   */\n  const addToQueue = async function(className, genericUuid) {\n    await fetchCreateQueue(\n      className,\n      genericUuid,\n    );\n\n    const responseJsonQueueList = await fetchQueueList();\n    props.dispatch(responseJsonQueueList.redux);\n  }\n\n  /*\n   *\n   */\n  const handleKeyDown = (event) => {\n   if (event.key === 'Enter') {\n     handleSubmit();\n   }\n }\n\n  return (\n    <div>\n      <div className={styles.SearchApp}>\n        <h3>Search</h3>\n\n        <button onClick={openModal}>Upload</button>\n\n        <br></br><br></br>\n\n        <label className={styles.FormBlock}>\n          Query &nbsp;\n          <input type=\"text\"\n                 name=\"query\"\n                 placeholder=\"\"\n                 value={query}\n                 onChange={(e) => {setQuery(e.target.value)}}\n                 onKeyDown={handleKeyDown} />\n        </label>\n\n        <br></br>\n\n        <div className={styles.FormBlock}>\n          <label>\n            <input type=\"checkbox\"\n                   checked={serviceSpotify}\n                   onChange={(e) => {setServiceSpotify(e.target.checked)}} />\n            Spotify\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   name=\"provider.youTube\"\n                   checked={serviceYouTube}\n                   onChange={(e) => {setServiceYouTube(e.target.checked)}} />\n            YouTube\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   name=\"provider.jukeboxRadio\"\n                   checked={serviceJukeboxRadio}\n                   onChange={(e) => {setServiceJukeboxRadio(e.target.checked)}} />\n            Jukebox Radio\n          </label>\n        </div>\n\n        <div className={styles.FormBlock}>\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatTrack}\n                   onChange={(e) => {setFormatTrack(e.target.checked)}} />\n            Track\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatAlbum}\n                   onChange={(e) => {setFormatAlbum(e.target.checked)}} />\n            Album\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatPlaylist}\n                   onChange={(e) => {setFormatPlaylist(e.target.checked)}} />\n            Playlist\n          </label>\n\n          <label>\n            <input type=\"checkbox\"\n                   checked={formatVideo}\n                   onChange={(e) => {setFormatVideo(e.target.checked)}} />\n            Video\n          </label>\n        </div>\n\n        <br></br>\n\n        <div className={styles.FormBlock}\n             onClick={handleSubmit}>\n          <button type=\"submit\">\n            Search\n          </button>\n        </div>\n      </div>\n\n      <br></br>\n\n      <div className={styles.SearchResults}>\n        {searchResults.map((value, index) => (\n          <SearchResult key={index} data={value} addToQueue={addToQueue}></SearchResult>\n        ))}\n      </div>\n\n      <Upload isOpen={showModal}\n              closeModal={closeModal} />\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({});\n\n\nexport default connect(mapStateToProps)(SearchApp);\n","export const iconNextTrack = (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M6 17L14 12L6 7V17Z\" fill=\"currentColor\" />\n    <path d=\"M18 7H15V12V17H18V7Z\" fill=\"currentColor\" />\n  </svg>\n);\n\n\nexport const iconPrevTrack = (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M18 17L10 12L18 7V17Z\" fill=\"currentColor\" />\n    <path d=\"M6 7H9V17H6V7Z\" fill=\"currentColor\" />\n  </svg>\n)\n","import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport {\n  getNextUpQueue,\n  getLastUpQueue,\n} from '../../../components/QueueApp/utils';\nimport { getProgress } from '../utils';\nimport { iconNextTrack, iconPrevTrack } from '../icons';\nimport styles from './Player.module.css';\n\n\nfunction Player(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        playback = props.playback,\n        imageUrl = stream.nowPlaying?.track?.imageUrl,\n        track = stream?.nowPlaying?.track,\n        lastUp = getLastUpQueue(props.lastUpQueues),\n        nextUp = getNextUpQueue(props.nextUpQueues);\n\n  // NOTE: This is a temporary mechanism to allow the user to refresh the\n  //       progress value on the front-end.\n  // eslint-disable-next-line\n  const [counter, setCounter] = useState(0);\n\n  const handleRefreshProgress = function() {\n    setCounter(prev => prev + 1);\n  }\n\n  // BUG: Edge case needed to refresh the webpage. In the future, there should\n  //      be an API endpoint to fetch additional past queue items.\n  if(stream?.nowPlaying?.index !== 1 && !lastUp) {\n    window.location.reload();\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // RELOAD PROGRESS BAR\n  useEffect(() => {\n    const periodicTask = setInterval(() => {\n      handleRefreshProgress();\n    }, 100);\n\n    return () => {\n      clearInterval(periodicTask);\n    }\n  // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div className={styles.Player}>\n      <div className={styles.Div}>\n        <h4><i>Last...</i></h4>\n        <p>{lastUp?.track?.name}</p>\n      </div>\n\n      <br></br>\n\n      <div className={styles.Div}>\n        <h2><i>Now playing...</i></h2>\n        {imageUrl &&\n          <img alt=\"\"\n               src={imageUrl}\n               className={styles.Image} />\n        }\n        {(stream?.isPlaying || stream?.isPaused) &&\n          <h3>{track?.name}</h3>\n        }\n        {(!stream?.isPlaying && !stream?.isPaused) &&\n          <h3><i>Waiting...</i></h3>\n        }\n      </div>\n\n      <div className={styles.Div}>\n        <progress value={getProgress(stream)}\n                  max={stream?.nowPlaying?.totalDurationMilliseconds}>\n        </progress>\n      </div>\n\n      <div className={styles.Div}>\n        <button className={styles.Button}\n                onClick={props.prevTrack}\n                disabled={!playback.controlsEnabled}>\n          {iconPrevTrack}\n        </button>\n        <button className={styles.Button}\n                onClick={props.nextTrack}\n                disabled={!playback.controlsEnabled}>\n          {iconNextTrack}\n        </button>\n      </div>\n\n      <br></br>\n\n      <div className={styles.Div}>\n        <h4><i>Next...</i></h4>\n        <p>{nextUp?.track.name}</p>\n      </div>\n\n      <Link to=\"/app/queue\">\n        <button className={styles.MoreNextUp}>\n          More\n        </button>\n      </Link>\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    lastUpQueues: state.lastUpQueues,\n    nextUpQueues: state.nextUpQueues,\n    playback: state.playback,\n});\n\n\nexport default connect(mapStateToProps)(Player);\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport styles from './MiniPlayer.module.css';\n\n\nfunction MiniPlayer(props) {\n\n  const stream = props.stream,\n        imageUrl = stream.nowPlaying?.track?.imageUrl,\n        nowPlayingTrackName = stream?.nowPlaying?.track?.name;\n\n  return (\n    <div>\n      <h3><i>Now playing...</i></h3>\n      {imageUrl &&\n        <img alt=\"\"\n             src={imageUrl}\n             className={styles.Image} />\n      }\n      {nowPlayingTrackName ?\n        (\n          <p>{nowPlayingTrackName}</p>\n        ) : (\n          <p><i>Nothing is playing...</i></p>\n        )\n      }\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n});\n\n\nexport default connect(mapStateToProps)(MiniPlayer);\n","export const iconScanForward = (\n  <svg\n    width=\"42\"\n    height=\"42\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M13.6378 15.529L15.052 16.9432L20.0018 11.9934L15.052 7.0437L13.6378 8.45791L16.1363 10.9564H7.99823C5.78909 10.9564 3.99823 12.7472 3.99823 14.9564V16.9564H5.99823V14.9564C5.99823 13.8518 6.89366 12.9564 7.99823 12.9564H16.2104L13.6378 15.529Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\n\nexport const iconScanBackward = (\n  <svg\n    width=\"42\"\n    height=\"42\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.3623 15.529L8.94804 16.9432L3.99829 11.9934L8.94804 7.0437L10.3623 8.45791L7.86379 10.9564H16.0018C18.2109 10.9564 20.0018 12.7472 20.0018 14.9564V16.9564H18.0018V14.9564C18.0018 13.8518 17.1063 12.9564 16.0018 12.9564H7.78965L10.3623 15.529Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\n\nexport const iconPlayCircle = (\n  <svg\n    width=\"42\"\n    height=\"42\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z\"\n      fill=\"currentColor\"\n    />\n    <path d=\"M16 12L10 16.3301V7.66987L16 12Z\" fill=\"currentColor\" />\n  </svg>\n);\n\n\nexport const iconPauseCircle = (\n  <svg\n    width=\"42\"\n    height=\"42\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path d=\"M9 9H11V15H9V9Z\" fill=\"currentColor\" />\n    <path d=\"M15 15H13V9H15V15Z\" fill=\"currentColor\" />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\n\nexport const iconMusic = (\n  <svg\n    width=\"28\"\n    height=\"28\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12 8.95439L17.6352 7.82736C19.0102 7.55235 20 6.34501 20 4.94274C20 3.08637 18.3017 1.69406 16.4813 2.05813L12.4117 2.87206C11.0094 3.15252 10 4.38376 10 5.8138V13.8895C9.41165 13.5492 8.72857 13.3544 8 13.3544C5.79086 13.3544 4 15.1453 4 17.3544C4 19.5635 5.79086 21.3544 8 21.3544C10.2091 21.3544 12 19.5635 12 17.3544V8.95439ZM16.8736 4.01929L12.8039 4.83322C12.3365 4.92671 12 5.33712 12 5.8138V6.91479L17.2429 5.8662C17.6831 5.77816 18 5.39165 18 4.94274C18 4.34846 17.4563 3.90274 16.8736 4.01929ZM10 17.3544C10 16.2498 9.10457 15.3544 8 15.3544C6.89543 15.3544 6 16.2498 6 17.3544C6 18.459 6.89543 19.3544 8 19.3544C9.10457 19.3544 10 18.459 10 17.3544Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n\n\nexport const iconMic = (\n  <svg\n    width=\"26\"\n    height=\"26\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M9 4C9 2.34315 10.3431 1 12 1C13.6569 1 15 2.34315 15 4V12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12V4ZM13 4V12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      d=\"M18 12C18 14.973 15.8377 17.441 13 17.917V21H17V23H7V21H11V17.917C8.16229 17.441 6 14.973 6 12V9H8V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V9H18V12Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n)\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from 'react-redux';\n// import { CircularProgressbarWithChildren, buildStyles } from 'react-circular-progressbar';\n// import 'react-circular-progressbar/dist/styles.css';\nimport styles from './BottomBar.module.css';\nimport {\n  iconScanForward,\n  iconScanBackward,\n  iconPlayCircle,\n  iconPauseCircle,\n  // iconMusic,\n  // iconMic,\n} from './icons';\n\n\nfunction BottomBar(props) {\n\n  /*\n   * \n   */\n  const playbackControls = props.playbackControls,\n        stream = props.stream,\n        playback = props.playback,\n        nextUpQueues = props.nextUpQueues;\n\n  const scanDisabled = (\n          !stream.nowPlaying ||\n          stream.isPaused ||\n          !playback.controlsEnabled\n        ),\n        playPauseDisabled = (\n          !stream.nowPlaying ||\n          !playback.controlsEnabled\n        );\n\n  const displayStartPlayback = !stream.nowPlaying && !!nextUpQueues.length,\n        displayAddToQueue = !stream.nowPlaying && !nextUpQueues.length;\n\n  /*\n   * Modify playback to play whatever is next in the queue.\n   */\n  const handleStartPlayback = function() {\n    playbackControls.nextTrack();\n  }\n\n  /*\n   * Modify playback to seek in a certain diretion ('forward' or 'backward').\n   */\n  const handleSeek = function(direction) {\n    if(scanDisabled) {\n      return;\n    }\n    playbackControls.seek(direction);\n  }\n\n  /*\n   * Modify playback to play or pause, whichever one is relevant.\n   */\n  const handlePlayPause = function() {\n    if(playPauseDisabled) {\n      return;\n    }\n    if(stream.isPlaying) {\n      playbackControls.pause();\n    }\n    if(stream.isPaused) {\n      playbackControls.play();\n    }\n  }\n\n  /*\n   * \n   */\n  return (\n    <div className={styles.BottomBar}>\n\n      <div className={styles.ExtraControl}>\n        {displayStartPlayback && (\n          <button className={styles.ExtraControlButton}\n                  onClick={() => { handleStartPlayback(); }}>\n            Start Playback\n          </button>\n        )}\n        {displayAddToQueue && (\n          <Link to=\"/app/search\">\n            <button className={styles.ExtraControlButton}>\n              Add to Queue\n            </button>\n          </Link>\n        )}\n      </div>\n\n      {/*\n      <div className={styles.Volume}>\n        <div className={styles.VolumeButton}>\n          <CircularProgressbarWithChildren\n                value={100}\n                circleRatio={0.75}\n                styles={buildStyles({\n                  rotation: 1 / 2 + 1 / 8,\n                  strokeLinecap: \"butt\",\n                  trailColor: \"#eee\",\n                })} >\n            {iconMusic}\n          </CircularProgressbarWithChildren>\n        </div>\n\n        <div className={styles.VolumeButton}>\n          <CircularProgressbarWithChildren\n                value={100}\n                circleRatio={0.75}\n                styles={buildStyles({\n                  rotation: 1 / 2 + 1 / 8,\n                  strokeLinecap: \"butt\",\n                  trailColor: \"#eee\",\n                })} >\n            {iconMic}\n          </CircularProgressbarWithChildren>\n        </div>\n      </div>\n      */}\n\n      <div className={styles.Playback}>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handleSeek('backward'); }}\n                disabled={scanDisabled} >\n          {iconScanBackward}\n        </button>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handlePlayPause(); }}\n                disabled={playPauseDisabled} >\n          {stream.nowPlaying && stream.isPlaying ?\n            iconPauseCircle : iconPlayCircle\n          }\n        </button>\n        <button className={styles.PlaybackButton}\n                onClick={() => { handleSeek('forward'); }}\n                disabled={scanDisabled} >\n          {iconScanForward}\n        </button>\n      </div>\n\n    </div>\n  );\n}\n\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    playback: state.playback,\n    nextUpQueues: state.nextUpQueues,\n});\n\n\nexport default connect(mapStateToProps)(BottomBar);\n","import React, { useState } from \"react\";\nimport Modal from 'react-modal';\nimport { connect } from 'react-redux';\nimport { fetchUpdateUserSettings } from './network';\n\n\nfunction UserSettings(props) {\n\n  /*\n   * \n   */\n  const isOpen = props.isOpen,\n        closeModal = props.closeModal;\n\n  // TODO actually impliment the disabled behavior\n  // eslint-disable-next-line\n  const [controlsEnabled, setControlsEnabled] = useState(true);\n\n  if (!props.userSettings) {\n    return <></>;\n  }\n\n  function updateIdleQueue(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      idleQueue: event.target.checked\n    }});\n    fetchUpdateUserSettings('idle_after_now_playing', event.target.checked);\n  }\n\n  function updateSpeakVoice(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      speakVoice: event.target.checked\n    }})\n    fetchUpdateUserSettings('mute_voice_recordings', event.target.checked);\n  }\n\n  function updateFocusMode(event) {\n    props.dispatch({type: 'userSettings/update', payload:{\n      focusMode: event.target.checked\n    }})\n    fetchUpdateUserSettings('focus_mode', event.target.checked);\n  }\n\n  return (\n    <Modal isOpen={isOpen}\n           ariaHideApp={false}>\n      <button onClick={closeModal}>Close</button>\n\n      <br></br><br></br>\n\n      <div>\n        <a href={props.userSettings.spotify.authorizationUrl}>Connect Your Spotify Account</a>\n\n        <br></br><br></br>\n\n        <div>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.idleQueue} onChange={updateIdleQueue} disabled={!controlsEnabled}/>\n            Idle After Queue\n          </label><br/>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.speakVoice} onChange={updateSpeakVoice} disabled={!controlsEnabled}/>\n            Speak Voice Recordings\n          </label><br/>\n          <label>\n            <input type=\"checkbox\" checked={props.userSettings.focusMode} onChange={updateFocusMode} disabled={!controlsEnabled}/>\n            Focus Mode\n          </label><br/>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  userSettings: state.userSettings\n});\n\nexport default connect(mapStateToProps)(UserSettings);\n","export const iconProfile = (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n\n\nexport const iconMore = (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M5 15C6.65685 15 8 13.6569 8 12C8 10.3431 6.65685 9 5 9C3.34315 9 2 10.3431 2 12C2 13.6569 3.34315 15 5 15ZM5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15ZM12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M22 12C22 13.6569 20.6569 15 19 15C17.3431 15 16 13.6569 16 12C16 10.3431 17.3431 9 19 9C20.6569 9 22 10.3431 22 12ZM20 12C20 12.5523 19.5523 13 19 13C18.4477 13 18 12.5523 18 12C18 11.4477 18.4477 11 19 11C19.5523 11 20 11.4477 20 12Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n);\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport UserSettings from '../../UserSettings/UserSettings'\nimport styles from './SideBar.module.css';\nimport { iconProfile, iconMore } from './icons';\n\n\nfunction SideBar(props) {\n\n  /*\n   * \n   */\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = function() {\n    setShowModal(true);\n  }\n\n  const closeModal = function() {\n    setShowModal(false);\n  }\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.SideBar}>\n\n      <br></br>\n\n      <div className={styles.Center}>\n        {iconProfile}\n      </div>\n\n      <ul>\n        <li>\n          <Link to=\"/app/feed\">Feed</Link>\n        </li>\n        <li>\n          <Link to=\"/app/player\">Player</Link>\n        </li>\n        <li>\n          <Link to=\"/app/queue\">Queue</Link>\n        </li>\n        <li>\n          <Link to=\"/app/search\">Search</Link>\n        </li>\n      </ul>\n\n      <div className={styles.Center}>\n        <button onClick={openModal}>\n          {iconMore}\n        </button>\n      </div>\n\n      <UserSettings isOpen={showModal}\n                    closeModal={closeModal} />\n\n    </div>\n  );\n}\n\nexport default SideBar;\n","import React from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport styles from './Session.module.css';\n\nimport FeedApp from '../../FeedApp/FeedApp';\nimport MiniFeed from '../../FeedApp/MiniFeed/MiniFeed';\nimport QueueApp from '../../QueueApp/QueueApp';\nimport MiniQueue from '../../QueueApp/MiniQueue/MiniQueue';\nimport SearchApp from '../../SearchApp/SearchApp';\nimport Player from '../../PlaybackApp/Player/Player';\nimport MiniPlayer from '../../PlaybackApp/MiniPlayer/MiniPlayer';\n\nimport BottomBar from '../BottomBar/BottomBar';\nimport SideBar from '../SideBar/SideBar';\n\n\nfunction Session(props) {\n\n  /*\n   * \n   */\n\n   /*\n    * \n    */\n  return (\n    <div className={styles.Session}>\n\n      <div className={styles.Top}>\n        <SideBar />\n\n        <div className={styles.Content}>\n\n        <Switch>\n          {/* FEED */}\n          <Route path=\"/app/feed\">\n            <div className={styles.PrimaryContent}>\n              <FeedApp />\n            </div>\n          </Route>\n          {/* PLAYER */}\n          <Route path=\"/app/player\">\n            <div className={styles.PrimaryContent}>\n              <Player nextTrack={props.playbackControls.nextTrack}\n                      prevTrack={props.playbackControls.prevTrack}\n                      seek={props.playbackControls.seek}\n                      pause={props.playbackControls.pause}\n                      play={props.playbackControls.play} />\n            </div>\n            <div className={styles.SecondaryContent}>\n              <Link to=\"/app/feed\">\n                <MiniFeed />\n              </Link>\n            </div>\n          </Route>\n          {/* QUEUE */}\n          <Route path=\"/app/queue\">\n            <div className={styles.PrimaryContent}>\n              <QueueApp />\n            </div>\n            <div className={styles.SecondaryContent}>\n              <Link to=\"/app/player\">\n                <MiniPlayer />\n              </Link>\n            </div>\n          </Route>\n          {/* SEARCH */}\n          <Route path=\"/app/search\">\n            <div className={styles.PrimaryContent}>\n              <SearchApp />\n            </div>\n            <div className={styles.SecondaryContent}>\n            <Link to=\"/app/queue\">\n              <MiniQueue />\n            </Link>\n            </div>\n          </Route>\n        </Switch>\n\n        </div>\n      </div>\n      <BottomBar playbackControls={props.playbackControls} />\n\n    </div>\n  );\n}\n\nexport default Session;\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport SpotifySync from '../SpotifySync/SpotifySync';\n\nimport Session from './Session/Session';\n\n\nfunction MainApp(props) {\n\n  /*\n   * \n   */\n  return (\n\n    <Switch>\n      <Route path=\"/app/:content\">\n        <Session playbackControls={props.playbackControls} />\n      </Route>\n      <Route path=\"/u/:username\">\n        <span>PROFILE</span>\n      </Route>\n      <Route path=\"/spotify\">\n        <SpotifySync />\n      </Route>\n    </Switch>\n  )\n\n  /*\n   * \n   */\n  // return (\n  //   <>\n  //   {/* nav bar */}\n  //   <nav>\n  //     <ul>\n  //       <li>\n  //         <Link to=\"/settings\">Settings</Link>\n  //       </li>\n  //       <li>\n  //         <Link to=\"/feed\">Feed</Link>\n  //       </li>\n  //       <li>\n  //         <Link to=\"/player\">Player</Link>\n  //       </li>\n  //       <li>\n  //         <Link to=\"/queue\">Queue</Link>\n  //       </li>\n  //       <li>\n  //         <Link to=\"/search\">Search</Link>\n  //       </li>\n  //       <li>\n  //         <Link to=\"/upload\">Upload</Link>\n  //       </li>\n  //     </ul>\n  //   </nav>\n  //\n  //   {/* main section */}\n  //   <div className=\"app-main-container\">\n  //     <div className=\"app-main\">\n  //\n  //       <Switch>\n  //         <Route path=\"/settings\">\n  //           <UserSettings />\n  //         </Route>\n  //         <Route path=\"/feed\">\n  //           <FeedApp />\n  //         </Route>\n  //         <Route path=\"/player\">\n  //           <Player nextTrack={props.playbackControls.nextTrack}\n  //                   prevTrack={props.playbackControls.prevTrack}\n  //                   seek={props.playbackControls.seek}\n  //                   pause={props.playbackControls.pause}\n  //                   play={props.playbackControls.play} />\n  //         </Route>\n  //         <Route path=\"/queue\">\n  //           <QueueApp />\n  //         </Route>\n  //         <Route path=\"/search\">\n  //           <Search />\n  //         </Route>\n  //         <Route path=\"/upload\">\n  //           <Upload />\n  //         </Route>\n  //         <Route path=\"/spotify\">\n  //           <SpotifySync />\n  //         </Route>\n  //       </Switch>\n  //     </div>\n  //   </div>\n  //   </>\n  // );\n}\n\n\nexport default MainApp;\n","import {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from '../FeedApp/network';\n\nimport { store } from '../../utils/redux';\n\n\n/*\n * Load comments and voice recordings to update the feed.\n */\nexport const updateFeed = async function() {\n  const responseJsonTextCommentList = await fetchTextCommentList();\n  const responseJsonVoiceRecordingList = await fetchVoiceRecordingList();\n  store.dispatch(responseJsonTextCommentList.redux);\n  store.dispatch(responseJsonVoiceRecordingList.redux);\n};\n","import { useEffect, useState } from \"react\";\nimport { connect } from 'react-redux';\nimport YouTube from 'react-youtube';\n\nimport {\n  playbackControlStart,\n  playbackControlSeek,\n  playbackControlPause,\n  playbackControlPlay,\n} from './controls';\nimport { getPositionMilliseconds } from './utils';\n\nimport MainApp from '../MainApp/MainApp';\nimport {\n  fetchNextTrack,\n  fetchPrevTrack,\n  fetchScanBackward,\n  fetchScanForward,\n  fetchTrackGetFiles,\n  fetchPauseTrack,\n  fetchPlayTrack,\n} from './Player/network';\nimport { updateFeed } from '../FeedApp/utils';\nimport { getLastUpQueue, getNextUpQueue } from '../QueueApp/utils';\n\nimport { SERVICE_JUKEBOX_RADIO, SERVICE_SPOTIFY } from '../../config/services';\n\n\nfunction PlaybackApp(props) {\n\n  /*\n   * \n   */\n  const stream = props.stream,\n        playback = props.playback,\n        lastUp = getLastUpQueue(props.lastUpQueues),\n        nextUp = getNextUpQueue(props.nextUpQueues);\n\n  const [messageScheduleNextTrack, setMessageScheduleNextTrack] = useState(false);\n  const [plannedNextTrackTimeoutId, setPlannedNextTrackTimeoutId] = useState({});\n  const [nextTrackJson, setNextTrackJson] = useState({});\n\n  /*\n   * When a track is changing from one to another, this boolean logic\n   * determines whether or not the currently playing item needs to be paused.\n   */\n  const shouldPauseOnTrackChange = function(nextPlayingQueue, isPlanned) {\n    const nowPlaying = stream.nowPlaying,\n          playbackIntervals = nowPlaying?.playbackIntervals,\n          lastPlaybackInterval = (playbackIntervals ?\n            playbackIntervals[playbackIntervals.length - 1] :\n            undefined\n          );\n    return (\n      // There must be something now playing.\n      nowPlaying?.track &&\n      (\n        // Everytime a manual upload is currently playing.\n        nowPlaying.track.service === SERVICE_JUKEBOX_RADIO ||\n        // Currently playing Spotify, nothing is up next.\n        (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          !nextPlayingQueue?.track\n        ) ||\n        // Currently playing Spotify, Spotify is not up next.\n        (\n          nowPlaying.track.service === SERVICE_SPOTIFY &&\n          nextPlayingQueue.track.service !== SERVICE_SPOTIFY &&\n          (\n            !isPlanned ||\n            (\n              lastPlaybackInterval[1] !== nowPlaying.totalDurationMilliseconds &&\n              isPlanned\n            )\n          )\n        )\n      )\n    )\n  }\n\n  /*\n   * This starts the now playing track.\n   * NOTE: You may think of this as \"playing\" the track. However, \"play\" in\n   *       code references different behavior. \"Play\" is used for toggling the\n   *       current track from a \"paused\" state to \"play.\" \"Start\" explicitly\n   *       plays the track.\n   */\n  const start = function() {\n    if(!stream.nowPlaying?.track) {\n      return;\n    }\n    props.dispatch({ type: 'playback/started' });\n    playbackControlStart(playback, stream);\n  }\n\n  /*\n   * This adds the nextUp item in the queue to play next (add to queue). This\n   * happens ~5 seconds before the next item should play.\n   */\n  const addToQueue = async function() {\n\n    // disable the player UI (until plannedNextTrack happens)\n    await props.dispatch({ type: 'playback/disable' });\n\n    // update the back-end\n    const responseJsonNextTrack = await fetchNextTrack(\n      stream.nowPlaying?.totalDurationMilliseconds, true\n    );\n\n    // update the front-end later\n    setNextTrackJson(responseJsonNextTrack);\n\n    // add to queue\n    await props.dispatch({ type: 'playback/addToQueue' });\n\n    // schedule \"next track\"\n    setMessageScheduleNextTrack(true);\n  }\n\n  /*\n   *  Triggered by a scheduled task, this plays the next track.\n   */\n  const plannedNextTrack = async function() {\n    if(shouldPauseOnTrackChange(nextUp, true)) {\n      playbackControlPause(playback, stream);\n    }\n    await props.dispatch({\n      type: 'playback/plannedNextTrack',\n      payload: { payload: nextTrackJson.redux },  // yes\n    });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed();\n  }\n\n  /*\n   * Triggered by human interaction, this plays the previous track.\n   */\n  const prevTrack = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    if(shouldPauseOnTrackChange(lastUp, false)) {\n      playbackControlPause(playback, stream);\n    }\n    if(lastUp.track?.service === SERVICE_JUKEBOX_RADIO) {\n      const responseJson = await fetchTrackGetFiles(lastUp.track.uuid);\n      await props.dispatch(responseJson.redux);\n    }\n    const responseJsonPrevTrack = await fetchPrevTrack();\n    await props.dispatch(responseJsonPrevTrack.redux);\n    await props.dispatch({ type: 'playback/start' });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed();\n  }\n\n  /*\n   * Triggered by human interaction, this plays the next track.\n   */\n  const nextTrack = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    if(shouldPauseOnTrackChange(nextUp, false)) {\n      playbackControlPause(playback, stream);\n    }\n    if(nextUp?.track.service === SERVICE_JUKEBOX_RADIO) {\n      const responseJson = await fetchTrackGetFiles(nextUp.track.uuid);\n      await props.dispatch(responseJson.redux);\n    }\n    const responseJsonNextTrack = await fetchNextTrack(\n      stream.nowPlaying?.totalDurationMilliseconds, false\n    );\n    await props.dispatch(responseJsonNextTrack.redux);\n    await props.dispatch({ type: 'playback/start' });\n    await props.dispatch({ type: 'playback/enable' });\n    await updateFeed();\n  }\n\n  /*\n   * Seek to the expected position in the track. This may be called in 3 cases:\n   *   1: a user signals the track to scan forward 10 seconds.\n   *   2: a user signals the track to scan backward 10 seconds.\n   *   3: a seekTimeout event is triggered, meaning the now playing track must\n   *      seek to the new expected track progress (in the case of a muted\n   *      interval).\n   */\n  const seek = async function(direction = undefined) {\n    await props.dispatch({ type: 'playback/disable' });\n    let startedAt;\n\n    if(direction === 'forward') {\n      const response = await fetchScanForward(\n        stream.nowPlaying.totalDurationMilliseconds\n      );\n      // Seeking forward is not allowed because the track is almost over.\n      if(response.system.status === 400) {\n        await props.dispatch({ type: 'playback/enable' });\n        return;\n      }\n      startedAt = stream.startedAt - (10000);\n    } else if(direction === 'backward') {\n      await fetchScanBackward();\n      const date = new Date(),\n            epochNow = date.getTime(),\n            proposedStartedAt = stream.startedAt + 10000,\n            proposedProgress = epochNow - proposedStartedAt;\n      startedAt = proposedProgress > 0 ? proposedStartedAt : epochNow;\n    } else {\n      startedAt = stream.startedAt;\n    }\n\n    await props.dispatch({\n      type: 'stream/set',\n      payload: {stream: { ...stream, startedAt: startedAt }},\n    });\n\n    const arr = getPositionMilliseconds(stream, startedAt),\n          seekTimeoutDuration = arr[1];\n    playbackControlSeek(playback, stream, startedAt);\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n\n    // schedule seek\n    if(seekTimeoutDuration) {\n      const seekTimeoutId = setTimeout(() => {\n        seek();\n      }, seekTimeoutDuration);\n      // setNextSeekTimeoutId(seekTimeoutId);\n      props.dispatch({\n        type: 'playback/nextSeekScheduled',\n        payload: { nextSeekTimeoutId: seekTimeoutId },\n      });\n    }\n\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  /*\n   * Toggling the player from the \"playing\" to \"paused\" state.\n   */\n  const pause = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    const jsonResponse = await fetchPauseTrack();\n    await props.dispatch(jsonResponse.redux);\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n    playbackControlPause(playback, stream);\n    clearTimeout(plannedNextTrackTimeoutId);\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  /*\n   * Toggling the player from the \"paused\" to \"playing\" state.\n   */\n  const play = async function() {\n    await props.dispatch({ type: 'playback/disable' });\n    const jsonResponse = await fetchPlayTrack();\n    await props.dispatch(jsonResponse.redux);\n\n    // When page loads with the player in the \"paused\" state and then the user\n    // toggles to the \"playing\" state.\n    if(!playback.isPlaying) {\n      await props.dispatch({ type: 'playback/enable' });\n      return;\n    }\n\n    await props.dispatch({ type: 'playback/addToQueueReschedule' });\n    playbackControlPlay(playback, stream);\n    await props.dispatch({ type: 'playback/enable' });\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  // SCHEDULE ADD TO QUEUE\n  // Happens near the end of the currently playing track.\n  useEffect(() => {\n\n    // debouncer\n    const needsToScheduleAddToQueue = (\n      stream.isPlaying &&\n      playback.isPlaying &&\n      !playback.addToQueueTimeoutId\n    );\n    if(!needsToScheduleAddToQueue) {\n      return;\n    }\n\n    if(!stream?.nowPlaying) {\n      return;\n    }\n\n    // schedule add to queue\n    const progress = Date.now() - stream.startedAt,\n          timeLeft = (\n            stream.nowPlaying.totalDurationMilliseconds - progress\n          ),\n          timeoutDuration = timeLeft - 5000;\n    const timeoutId = setTimeout(() => {\n      addToQueue();\n    }, timeoutDuration);\n    props.dispatch({\n      type: 'playback/addToQueueScheduled',\n      payload: { addToQueueTimeoutId: timeoutId },\n    });\n\n    // schedule seek\n    const arr = getPositionMilliseconds(stream, stream.startedAt),\n          seekTimeoutDuration = arr[1];\n    if(seekTimeoutDuration) {\n      const seekTimeoutId = setTimeout(() => {\n        seek();\n      }, seekTimeoutDuration);\n      // setNextSeekTimeoutId(seekTimeoutId);\n      props.dispatch({\n        type: 'playback/nextSeekScheduled',\n        payload: { nextSeekTimeoutId: seekTimeoutId },\n      });\n    }\n\n  // eslint-disable-next-line\n  }, [playback]);\n\n  //////////////////////////////////////////////////////////////////////////////\n  // SCHEDULE PLANNED NEXT TRACK\n  // Happens at the very end of the currently playing track.\n  useEffect(() => {\n\n    // debouncer\n    if(!messageScheduleNextTrack) {\n      return;\n    }\n    setMessageScheduleNextTrack(false);\n\n    // schedule next track\n    const progress = Date.now() - stream.startedAt,\n          timeoutDuration = (\n            stream.nowPlaying.totalDurationMilliseconds - progress\n          );\n    const timeoutId = setTimeout(() => {\n      plannedNextTrack();\n    }, timeoutDuration);\n    clearTimeout(plannedNextTrackTimeoutId);\n    setPlannedNextTrackTimeoutId(timeoutId);\n\n  // eslint-disable-next-line\n  }, [messageScheduleNextTrack]);\n\n  // Play the music.\n  if(stream.isPlaying && !playback.isPlaying && playback.isReady) {\n    start();\n  }\n\n  const playbackControls = { nextTrack, prevTrack, seek, pause, play };\n\n  const opts = {\n          height: '135',\n          width: '240',\n          playerVars: {\n            // https://developers.google.com/youtube/player_parameters\n            autoplay: 0,  // the initial video will automatically start to play\n            controls: 0,  // hide playback controls\n            disablekb: 1,  // disable keyboard controls\n            fs: 0,  // disable full screen\n            iv_load_policy: 3,\n            modestbranding: 1,\n            origin: 'jukeboxrad.io',\n            playsinline: 1,\n          },\n        },\n        videoId = stream.nowPlaying?.track?.externalId;\n\n  const onYouTubeReady = function(e) {\n    const youTubeApi = e.target;\n    props.dispatch({\n      type: 'playback/youTube',\n      payload: { youTubeApi: youTubeApi },\n    });\n  }\n\n  /*\n   * \n   */\n  return (\n    <>\n      <div style={{ display: 'none' }}>\n        <YouTube videoId={videoId}\n                 opts={opts}\n                 onReady={onYouTubeReady} />\n      </div>\n      <MainApp playbackControls={playbackControls}/>\n    </>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n    stream: state.stream,\n    playback: state.playback,\n    lastUpQueues: state.lastUpQueues,\n    nextUpQueues: state.nextUpQueues,\n});\n\nexport default connect(mapStateToProps)(PlaybackApp);\n","import './App.css';\nimport {\n  fetchTextCommentList,\n  fetchVoiceRecordingList,\n} from './components/FeedApp/network';\nimport { fetchVerifyToken } from './components/Login/network';\nimport {\n  fetchStreamGet,\n  fetchPauseTrack,\n  fetchTrackGetFiles,\n} from './components/PlaybackApp/Player/network';\nimport { fetchQueueList } from './components/QueueApp/network'\nimport { fetchGetUserSettings } from './components/UserSettings/network';\nimport { playbackControlPause } from './components/PlaybackApp/controls';\nimport { store } from './utils/redux'\nimport Login from './components/Login/Login';\nimport PlaybackApp from './components/PlaybackApp/PlaybackApp';\nimport { useEffect, useState } from \"react\";\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { SERVICE_JUKEBOX_RADIO } from './config/services';\nimport TimeAgo from 'javascript-time-ago'\nimport en from 'javascript-time-ago/locale/en'\n\nconst SpotifyWebApi = require('spotify-web-api-js');\n\n\nfunction App() {\n\n  // Keeps track of the status of the webpage\n  //\n  //    - initial:          When the page is first loaded\n  //    - unauthenticated:  The client does NOT have a valid access token\n  //    - authenticated:    The client has a valid access token\n  //    - ready:            All API data has been loaded\n  const [status, setStatus] = useState('initial');\n\n  //////////////////////\n  // componentDidMount\n  useEffect(() => {\n    async function loadData() {\n      let responseJson;\n\n      // 1: Verify authentication.\n      const authResponse = await fetchVerifyToken();\n      if (!authResponse) {\n        setStatus('unauthenticated');\n        return;\n      }\n\n      // Update status.\n      setStatus('authenticated');\n\n      // 2: Load stream.\n      responseJson = await fetchStreamGet();\n      await store.dispatch(responseJson.redux);\n\n      // 3: Load the track now playing (conditionally).\n      const payload = responseJson.redux.payload,\n            nowPlayingTrack = payload.stream.nowPlaying?.track;\n      if(nowPlayingTrack?.service === SERVICE_JUKEBOX_RADIO) {\n        const trackUuid = nowPlayingTrack.uuid;\n        responseJson = await fetchTrackGetFiles(trackUuid);\n        await store.dispatch(responseJson.redux);\n        // NOTE: the above only works in production setups. This is because of\n        // how the file is served. the below setup can be adapted for a local\n        // setup.\n        //\n        // var request = new XMLHttpRequest();\n        // request.open(\"GET\", responseJson.redux.payload.track.audioUrl, true);\n        // request.responseType = \"blob\";\n        // request.onload = () => {\n        //   if(this.status !== 200) {\n        //     return;\n        //   }\n        //   const audio = new Audio(URL.createObjectURL(this.response));\n        //   responseJson.redux.payload.track.audio = audio;\n        //   store.dispatch(responseJson.redux);\n        // }\n        // request.send();\n      }\n\n      // 4: Load the queue.\n      responseJson = await fetchQueueList();\n      await store.dispatch(responseJson.redux);\n\n      // 5: Load relevant comments.\n      const textCommentsJsonResponse = await fetchTextCommentList();\n      await store.dispatch(textCommentsJsonResponse.redux);\n\n      // 6: Load relevant voice recordings. This will also generate the feed.\n      const voiceRecordingsJsonResponse = await fetchVoiceRecordingList();\n      await store.dispatch(voiceRecordingsJsonResponse.redux);\n\n      // 7: Get user settings.\n      const userSettingsJsonResponse = await fetchGetUserSettings();\n      await store.dispatch({\n        type: 'user/get-settings',\n        userSettings: userSettingsJsonResponse.data,\n      });\n\n      // 8: Initialize the Spotify player (conditionally).\n      const spotifyAccessToken = userSettingsJsonResponse.data.spotify.accessToken;\n      if(spotifyAccessToken) {\n        const spotifyApi = new SpotifyWebApi();\n        spotifyApi.setAccessToken(userSettingsJsonResponse.data.spotify.accessToken);\n        await store.dispatch({\n          type: 'playback/spotify',\n          payload: { spotifyApi: spotifyApi },\n        });\n      }\n\n      // Enable playback controls.\n      store.dispatch({ type: 'playback/enable' });\n\n      // Update status.\n      setStatus('ready');\n    }\n    TimeAgo.addDefaultLocale(en);\n    loadData();\n\n    // Define behavior for when the webpage is closed.\n    window.addEventListener(\"beforeunload\", (e) => {\n      e.preventDefault();\n      const state = store.getState();\n      if(!state.stream.isPlaying) {\n        return;\n      }\n      fetchPauseTrack();\n      playbackControlPause(state.playback, state.stream);\n    });\n  }, []);\n\n  // When the page is initially loaded, display nothing.\n  if(status === 'initial') {\n    return <></>;\n  }\n\n  // If the user is NOT authenticated, display the login portal.\n  if(status === 'unauthenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          <div className=\"app-main-container\">\n            <div className=\"app-main\">\n              <Login />\n            </div>\n          </div>\n        </Provider>\n      </Router>\n    )\n  }\n\n  // if the user is not authenticated, only display the login portal\n  if(status === 'authenticated') {\n    return (\n      <Router>\n        <Provider store={store}>\n          Loading...\n        </Provider>\n      </Router>\n    )\n  }\n\n  // display the main UI now that everything is loaded up\n\n  /*\n   * \n   */\n  return (\n    <Router>\n      <Provider store={store}>\n        <div className=\"app-main-container\">\n            <PlaybackApp />\n        </div>\n      </Provider>\n    </Router>\n  );\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BottomBar\":\"BottomBar_BottomBar__3MLzc\",\"Playback\":\"BottomBar_Playback__3N-qW\",\"PlaybackButton\":\"BottomBar_PlaybackButton__1axWT\",\"Volume\":\"BottomBar_Volume__25kUh\",\"VolumeButton\":\"BottomBar_VolumeButton__26qBR\",\"ExtraControl\":\"BottomBar_ExtraControl__2zuEs\",\"ExtraControlButton\":\"BottomBar_ExtraControlButton__3Kvpp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Upload\":\"Upload_Upload__tMDig\",\"FormBlock\":\"Upload_FormBlock__2ls6S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueCollection\":\"QueueCollection_QueueCollection__2uTSJ\",\"Item\":\"QueueCollection_Item__2k6HI\",\"Button\":\"QueueCollection_Button__KLnuj\",\"Children\":\"QueueCollection_Children__1Q1i5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchApp\":\"SearchApp_SearchApp__Mfcqz\",\"FormBlock\":\"SearchApp_FormBlock__1myUf\",\"SearchResults\":\"SearchApp_SearchResults__p1J6y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__1ujut\",\"FormBlock\":\"Login_FormBlock__S_rix\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchResult\":\"SearchResult_SearchResult__djXCo\",\"Button\":\"SearchResult_Button__1Hbjl\",\"ggSpinner\":\"SearchResult_ggSpinner__iNeQG\",\"spinner\":\"SearchResult_spinner__u3axZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FeedApp\":\"FeedApp_FeedApp__2YJHa\",\"Feed\":\"FeedApp_Feed__3NWaq\",\"FeedWrapper\":\"FeedApp_FeedWrapper__5dQdY\",\"CreateTextComment\":\"FeedApp_CreateTextComment__1tCDm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueTrack\":\"QueueTrack_QueueTrack__cD3iI\",\"Button\":\"QueueTrack_Button__3peLA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SideBar\":\"SideBar_SideBar__2JzAY\",\"Center\":\"SideBar_Center__SYGR6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"QueueApp\":\"QueueApp_QueueApp__3OUXI\",\"AddToQueue\":\"QueueApp_AddToQueue__1Zpmd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniQueue\":\"MiniQueue_MiniQueue__2HfJP\",\"MiniQueueItem\":\"MiniQueue_MiniQueueItem__2-wsK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotableText\":\"NotableText_NotableText__gYPiJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"TextComment\":\"TextComment_TextComment__92FmQ\",\"Notated\":\"TextComment_Notated__8XL21\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ABCNotation\":\"ABCNotation_ABCNotation__rkME2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VoiceRecording\":\"VoiceRecording_VoiceRecording__29j03\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniFeed\":\"MiniFeed_MiniFeed__2GXUK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MiniPlayer\":\"MiniPlayer_MiniPlayer__w1Mms\",\"Image\":\"MiniPlayer_Image__1dVlH\"};"],"sourceRoot":""}